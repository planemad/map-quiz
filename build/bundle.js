var app=function(){"use strict";function e(){}function t(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(t)}function n(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t,i,r){if(e){const n=s(e,t,i,r);return e[0](n)}}function s(e,t,i,r){return e[1]&&r?function(e,t){for(const i in t)e[i]=t[i];return e}(i.ctx.slice(),e[1](r(t))):i.ctx}function l(e,t,i,r,n,a,o){const l=function(e,t,i,r){if(e[2]&&r){const n=e[2](r(i));if(void 0===t.dirty)return n;if("object"==typeof n){const e=[],i=Math.max(t.dirty.length,n.length);for(let r=0;r<i;r+=1)e[r]=t.dirty[r]|n[r];return e}return t.dirty|n}return t.dirty}(t,r,n,a);if(l){const n=s(t,i,r,o);e.p(n,l)}}function u(e,t){e.appendChild(t)}function c(e,t,i){e.insertBefore(t,i||null)}function p(e){e.parentNode.removeChild(e)}function d(e){return document.createElement(e)}function h(e){return document.createTextNode(e)}function f(){return h(" ")}function _(){return h("")}function m(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function g(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t,i,r){e.style.setProperty(t,i,r?"important":"")}let b;function x(e){b=e}function w(e){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(e)}const S=[],A=[],k=[],E=[],I=Promise.resolve();let T=!1;function C(e){k.push(e)}let P=!1;const L=new Set;function R(){if(!P){P=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];x(t),M(t.$$)}for(x(null),S.length=0;A.length;)A.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];L.has(t)||(L.add(t),t())}k.length=0}while(S.length);for(;E.length;)E.pop()();T=!1,P=!1,L.clear()}}function M(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const z=new Set;let D;function B(e,t){e&&e.i&&(z.delete(e),e.i(t))}function F(e,t,i,r){if(e&&e.o){if(z.has(e))return;z.add(e),D.c.push((()=>{z.delete(e),r&&(i&&e.d(1),r())})),e.o(t)}}function O(e){e&&e.c()}function N(e,i,a){const{fragment:o,on_mount:s,on_destroy:l,after_update:u}=e.$$;o&&o.m(i,a),C((()=>{const i=s.map(t).filter(n);l?l.push(...i):r(i),e.$$.on_mount=[]})),u.forEach(C)}function U(e,t){const i=e.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function q(e,t){-1===e.$$.dirty[0]&&(S.push(e),T||(T=!0,I.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(t,n,a,o,s,l,u=[-1]){const c=b;x(t);const d=n.props||{},h=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let f=!1;if(h.ctx=a?a(t,d,((e,i,...r)=>{const n=r.length?r[0]:i;return h.ctx&&s(h.ctx[e],h.ctx[e]=n)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](n),f&&q(t,e)),i})):[],h.update(),f=!0,r(h.before_update),h.fragment=!!o&&o(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(p)}else h.fragment&&h.fragment.c();n.intro&&B(t.$$.fragment),N(t,n.target,n.anchor),R()}x(c)}class j{$destroy(){U(this,1),this.$destroy=e}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function G(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var K=G((function(e,t){e.exports=function(){var e,t,i;function r(r,n){if(e)if(t){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",o={};e(o),i=n(o),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=n;else e=n}return r(["exports"],(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=r;function r(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var i,r,n,a,o;for(void 0===t&&(t=1e-6),n=e,o=0;o<8;o++){if(a=this.sampleCurveX(n)-e,Math.abs(a)<t)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=a/s}if((n=e)<(i=0))return i;if(n>(r=1))return r;for(;i<r;){if(a=this.sampleCurveX(n),Math.abs(a-e)<t)return n;e>a?i=n:r=n,n=.5*(r-i)+i}return n},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var n=a;function a(e,t){this.x=e,this.y=t}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=r,this},_rotateAround:function(e,t){var i=Math.cos(e),r=Math.sin(e),n=t.y+r*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-r*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e};var o="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function l(e,t,r,n){var a=new i(e,t,r,n);return function(e){return a.solve(e)}}var u=l(.25,.1,.25,1);function c(e,t,i){return Math.min(i,Math.max(t,e))}function p(e,t,i){var r=i-t,n=((e-t)%r+r)%r+t;return n===t?i:n}function d(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var r=0,n=t;r<n.length;r+=1){var a=n[r];for(var o in a)e[o]=a[o]}return e}var h=1;function f(){return h++}function _(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function m(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function g(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function y(e,t){return-1!==e.indexOf(t,e.length-t.length)}function v(e,t,i){var r={};for(var n in e)r[n]=t.call(i||this,e[n],n,e);return r}function b(e,t,i){var r={};for(var n in e)t.call(i||this,e[n],n,e)&&(r[n]=e[n]);return r}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?v(e,x):e}var w={};function S(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function A(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function k(e){for(var t=0,i=0,r=e.length,n=r-1,a=void 0,o=void 0;i<r;n=i++)t+=((o=e[n]).x-(a=e[i]).x)*(a.y+o.y);return t}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,i,r,n){var a=r||n;return t[i]=!a||a.toLowerCase(),""})),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var T=null;function C(e){if(null==T){var t=e.navigator?e.navigator.userAgent:null;T=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return T}function P(e){try{var t=o[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var L,R,M,z,D=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now.bind(Date),B=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,F=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame,O={now:D,frame:function(e){var t=B(e);return{cancel:function(){return F(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var i=o.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return L||(L=o.document.createElement("a")),L.href=e,L.href},hardwareConcurrency:o.navigator&&o.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==R&&(R=o.matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}},N={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},U={supported:!1,testSupport:function(e){!q&&z&&(V?j(e):M=e)}},q=!1,V=!1;function j(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,z),e.isContextLost())return;U.supported=!0}catch(e){}e.deleteTexture(t),q=!0}o.document&&((z=o.document.createElement("img")).onload=function(){M&&j(M),M=null,V=!0},z.onerror=function(){q=!0,M=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="01",K=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function Z(e){return 0===e.indexOf("mapbox:")}K.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},K.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},K.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},K.prototype.normalizeStyleURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeGlyphsURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeSourceURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeSpriteURL=function(e,t,i,r){var n=J(e);return Z(e)?(n.path="/styles/v1"+n.path+"/sprite"+t+i,this._makeAPIURL(n,this._customAccessToken||r)):(n.path+=""+t+i,X(n))},K.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Z(e))return e;var i=J(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(O.devicePixelRatio>=2||512===t?"@2x":"")+(U.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(e){for(var t=0,i=e;t<i.length;t+=1){var r=i[t].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||N.ACCESS_TOKEN;return N.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},K.prototype.canonicalizeTileURL=function(e,t){var i=J(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var n=i.params;return t&&(n=n.filter((function(e){return!e.match(/^access_token=/)}))),n.length&&(r+="?"+n.join("&")),r},K.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&Z(t),r=[],n=0,a=e.tiles||[];n<a.length;n+=1){var o=a[n];Q(o)?r.push(this.canonicalizeTileURL(o,i)):r.push(o)}return r},K.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=J(N.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"/"!==r.path&&(e.path=""+r.path+e.path),!N.REQUIRE_ACCESS_TOKEN)return X(e);if(!(t=t||N.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token="+t),X(e)};var H=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Q(e){return H.test(e)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function J(e){var t=e.match(W);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function X(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Y(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(o.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var $=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(e){var t,i=Y(N.ACCESS_TOKEN);return t=i&&i.u?o.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):N.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},$.prototype.fetchEventData=function(){var e=P("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var r=o.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var n=o.localStorage.getItem(i);n&&(this.anonId=n)}catch(e){S("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var e=P("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{o.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){S("Unable to write to LocalStorage")}},$.prototype.processRequests=function(e){},$.prototype.postEvent=function(e,t,i,r){var n=this;if(N.EVENTS_URL){var a=J(N.EVENTS_URL);a.params.push("access_token="+(r||N.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:G,userId:this.anonId},s=t?d(o,t):o,l={url:X(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xe(l,(function(e){n.pendingRequest=null,i(e),n.saveEventData(),n.processRequests(r)}))}},$.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var ee,te,ie=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(e,t,i,r){this.skuToken=i,(N.EVENTS_URL&&r||N.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Z(e)||Q(e)})))&&this.queueRequest({id:t,timestamp:Date.now()},r)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,n=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=_()),this.postEvent(n,{skuToken:this.skuToken},(function(e){e||r&&(t.success[r]=!0)}),e))}},t}($),re=new(function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(e,t){N.EVENTS_URL&&N.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Z(e)||Q(e)}))&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Y(N.ACCESS_TOKEN),r=i?i.u:N.ACCESS_TOKEN,n=r!==this.eventData.tokenU;m(this.anonId)||(this.anonId=_(),n=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;n=n||l>=1||l<-1||o.getDate()!==s.getDate()}else n=!0;if(!n)return this.processRequests();this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e)}},t}($)),ne=re.postTurnstileEvent.bind(re),ae=new ie,oe=ae.postMapLoadEvent.bind(ae),se=500,le=50;function ue(){o.caches&&!ee&&(ee=o.caches.open("mapbox-tiles"))}function ce(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var pe,de=1/0;function he(){return null==pe&&(pe=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.createImageBitmap),pe}var fe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fe);var _e,me,ge=function(e){function t(t,i,r){401===i&&Q(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=i,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ye=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===o.location.protocol?o.parent:o).location.href},ve=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(ye())&&!/^\w+:/.test(i))){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return function(e,t){var i,r=new o.AbortController,n=new o.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ye(),signal:r.signal}),a=!1,s=!1,l=(i=n.url).indexOf("sku=")>0&&Q(i);"json"===e.type&&n.headers.set("Accept","application/json");var u=function(i,r,a){if(!s){if(i&&"SecurityError"!==i.message&&S(i),r&&a)return c(r);var u=Date.now();o.fetch(n).then((function(i){if(i.ok){var r=l?i.clone():null;return c(i,r,u)}return t(new ge(i.statusText,i.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},c=function(i,r,l){("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then((function(e){s||(r&&l&&function(e,t,i){if(ue(),ee){var r={status:t.status,statusText:t.statusText,headers:new o.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var n=I(t.headers.get("Cache-Control")||"");n["no-store"]||(n["max-age"]&&r.headers.set("Expires",new Date(i+1e3*n["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(t,(function(t){var i=new o.Response(t,r);ue(),ee&&ee.then((function(t){return t.put(ce(e.url),i)})).catch((function(e){return S(e.message)}))})))}}(n,r,l),a=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(e){s||t(new Error(e.message))}))};return l?function(e,t){if(ue(),!ee)return t(null);var i=ce(e.url);ee.then((function(e){e.match(i).then((function(r){var n=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),i=I(e.headers.get("Cache-Control")||"");return t>Date.now()&&!i["no-cache"]}(r);e.delete(i),n&&e.put(i,r.clone()),t(null,r,n)})).catch(t)})).catch(t)}(n,u):u(null,null),{cancel:function(){s=!0,a||r.abort()}}}(e,t);if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){var i=new o.XMLHttpRequest;for(var r in i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer"),e.headers)i.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===e.type)try{r=JSON.parse(i.response)}catch(e){return t(e)}t(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new ge(i.statusText,i.status,e.url))},i.send(e.body),{cancel:function(){return i.abort()}}}(e,t)},be=function(e,t){return ve(d(e,{type:"arrayBuffer"}),t)},xe=function(e,t){return ve(d(e,{method:"POST"}),t)};_e=[],me=0;var we=function(e,t){if(U.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),me>=N.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return _e.push(i),i}me++;var r=!1,n=function(){if(!r)for(r=!0,me--;_e.length&&me<N.MAX_PARALLEL_IMAGE_REQUESTS;){var e=_e.shift();e.cancelled||(e.cancel=we(e.requestParameters,e.callback).cancel)}},a=be(e,(function(e,i,r,a){n(),e?t(e):i&&(he()?function(e,t){var i=new o.Blob([new Uint8Array(e)],{type:"image/png"});o.createImageBitmap(i).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,t):function(e,t,i,r){var n=new o.Image,a=o.URL;n.onload=function(){t(null,n),a.revokeObjectURL(n.src)},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new o.Blob([new Uint8Array(e)],{type:"image/png"});n.cacheControl=i,n.expires=r,n.src=e.byteLength?a.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(i,t,r,a))}));return{cancel:function(){a.cancel(),n()}}};function Se(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function Ae(e,t,i){if(i&&i[e]){var r=i[e].indexOf(t);-1!==r&&i[e].splice(r,1)}}var ke=function(e,t){void 0===t&&(t={}),d(this,t),this.type=e},Ee=function(e){function t(t,i){void 0===i&&(i={}),e.call(this,"error",d({error:t},i))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ke),Ie=function(){};Ie.prototype.on=function(e,t){return this._listeners=this._listeners||{},Se(e,t,this._listeners),this},Ie.prototype.off=function(e,t){return Ae(e,t,this._listeners),Ae(e,t,this._oneTimeListeners),this},Ie.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Se(e,t,this._oneTimeListeners),this},Ie.prototype.fire=function(e,t){"string"==typeof e&&(e=new ke(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var r=0,n=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<n.length;r+=1)n[r].call(this,e);for(var a=0,o=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];a<o.length;a+=1){var s=o[a];Ae(i,s,this._oneTimeListeners),s.call(this,e)}var l=this._eventedParent;l&&(d(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(e))}else e instanceof Ee&&console.error(e.error);return this},Ie.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Ie.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ce=function(e,t,i,r){this.message=(e?e+": ":"")+i,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function Pe(e){var t=e.value;return t?[new Ce(e.key,t,"constants have been deprecated as of v8")]:[]}function Le(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var r=0,n=t;r<n.length;r+=1){var a=n[r];for(var o in a)e[o]=a[o]}return e}function Re(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Me(e){if(Array.isArray(e))return e.map(Me);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Me(e[i]);return t}return Re(e)}var ze=function(e){function t(t,i){e.call(this,i),this.message=i,this.key=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),De=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var i=0,r=t;i<r.length;i+=1){var n=r[i];this.bindings[n[0]]=n[1]}};De.prototype.concat=function(e){return new De(this,e)},De.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},De.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Be={kind:"null"},Fe={kind:"number"},Oe={kind:"string"},Ne={kind:"boolean"},Ue={kind:"color"},qe={kind:"object"},Ve={kind:"value"},je={kind:"collator"},Ge={kind:"formatted"},Ke={kind:"resolvedImage"};function Ze(e,t){return{kind:"array",itemType:e,N:t}}function He(e){if("array"===e.kind){var t=He(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Qe=[Be,Fe,Oe,Ne,Ue,Ge,qe,Ze(Ve),Ke];function We(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!We(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var i=0,r=Qe;i<r.length;i+=1)if(!We(r[i],t))return null}return"Expected "+He(e)+" but found "+He(t)+" instead."}function Je(e,t){return t.some((function(t){return t.kind===e.kind}))}function Xe(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Ye=t((function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function n(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),p=s.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==p.length)return null;d=a(p.pop());case"rgb":return 3!==p.length?null:[n(p[0]),n(p[1]),n(p[2]),d];case"hsla":if(4!==p.length)return null;d=a(p.pop());case"hsl":if(3!==p.length)return null;var h=(parseFloat(p[0])%360+360)%360/360,f=a(p[1]),_=a(p[2]),m=_<=.5?_*(f+1):_+f-_*f,g=2*_-m;return[r(255*o(g,m,h+1/3)),r(255*o(g,m,h)),r(255*o(g,m,h-1/3)),d];default:return null}}return null}}catch(e){}})).parseCSSColor,$e=function(e,t,i,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=i,this.a=r};$e.parse=function(e){if(e){if(e instanceof $e)return e;if("string"==typeof e){var t=Ye(e);if(t)return new $e(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},$e.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],r=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+r+")"},$e.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},$e.black=new $e(0,0,0,1),$e.white=new $e(1,1,1,1),$e.transparent=new $e(0,0,0,0),$e.red=new $e(1,0,0,1);var et=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};et.prototype.compare=function(e,t){return this.collator.compare(e,t)},et.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tt=function(e,t,i,r,n){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=n},it=function(e){this.sections=e};it.fromString=function(e){return new it([new tt(e,null,null,null,null)])},it.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))},it.factory=function(e){return e instanceof it?e:it.fromString(e)},it.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")},it.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var r=i[t];if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var n={};r.fontStack&&(n["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(n["font-scale"]=r.scale),r.textColor&&(n["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(n)}}return e};var rt=function(e){this.name=e.name,this.available=e.available};function nt(e,t,i,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function at(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof $e)return!0;if(e instanceof et)return!0;if(e instanceof it)return!0;if(e instanceof rt)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!at(i[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!at(e[r]))return!1;return!0}return!1}function ot(e){if(null===e)return Be;if("string"==typeof e)return Oe;if("boolean"==typeof e)return Ne;if("number"==typeof e)return Fe;if(e instanceof $e)return Ue;if(e instanceof et)return je;if(e instanceof it)return Ge;if(e instanceof rt)return Ke;if(Array.isArray(e)){for(var t,i=e.length,r=0,n=e;r<n.length;r+=1){var a=ot(n[r]);if(t){if(t===a)continue;t=Ve;break}t=a}return Ze(t||Ve,i)}return qe}function st(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof $e||e instanceof it||e instanceof rt?e.toString():JSON.stringify(e)}rt.prototype.toString=function(){return this.name},rt.fromString=function(e){return e?new rt({name:e,available:!1}):null},rt.prototype.serialize=function(){return["image",this.name]};var lt=function(e,t){this.type=e,this.value=t};lt.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!at(e[1]))return t.error("invalid value");var i=e[1],r=ot(i),n=t.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new lt(r,i)},lt.prototype.evaluate=function(){return this.value},lt.prototype.eachChild=function(){},lt.prototype.outputDefined=function(){return!0},lt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $e?["rgba"].concat(this.value.toArray()):this.value instanceof it?this.value.serialize():this.value};var ut=function(e){this.name="ExpressionEvaluationError",this.message=e};ut.prototype.toJSON=function(){return this.message};var ct={string:Oe,number:Fe,boolean:Ne,object:qe},pt=function(e,t){this.type=e,this.args=t};pt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,r=1,n=e[0];if("array"===n){var a,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in ct)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=ct[s],r++}else a=Ve;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}i=Ze(a,o)}else i=ct[n];for(var l=[];r<e.length;r++){var u=t.parse(e[r],r,Ve);if(!u)return null;l.push(u)}return new pt(i,l)},pt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!We(this.type,ot(i)))return i;if(t===this.args.length-1)throw new ut("Expected value to be of type "+He(this.type)+", but found "+He(ot(i))+" instead.")}return null},pt.prototype.eachChild=function(e){this.args.forEach(e)},pt.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},pt.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var dt=function(e){this.type=Ge,this.sections=e};dt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");for(var r=[],n=!1,a=1;a<=e.length-1;++a){var o=e[a];if(n&&"object"==typeof o&&!Array.isArray(o)){n=!1;var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,Fe)))return null;var l=null;if(o["text-font"]&&!(l=t.parse(o["text-font"],1,Ze(Oe))))return null;var u=null;if(o["text-color"]&&!(u=t.parse(o["text-color"],1,Ue)))return null;var c=r[r.length-1];c.scale=s,c.font=l,c.textColor=u}else{var p=t.parse(e[a],1,Ve);if(!p)return null;var d=p.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new dt(r)},dt.prototype.evaluate=function(e){return new it(this.sections.map((function(t){var i=t.content.evaluate(e);return ot(i)===Ke?new tt("",i,null,null,null):new tt(st(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))},dt.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var r=i[t];e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}},dt.prototype.outputDefined=function(){return!1},dt.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var r=i[t];e.push(r.content.serialize());var n={};r.scale&&(n["font-scale"]=r.scale.serialize()),r.font&&(n["text-font"]=r.font.serialize()),r.textColor&&(n["text-color"]=r.textColor.serialize()),e.push(n)}return e};var ht=function(e){this.type=Ke,this.input=e};ht.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Oe);return i?new ht(i):t.error("No image name provided.")},ht.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=rt.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},ht.prototype.eachChild=function(e){e(this.input)},ht.prototype.outputDefined=function(){return!1},ht.prototype.serialize=function(){return["image",this.input.serialize()]};var ft={"to-boolean":Ne,"to-color":Ue,"to-number":Fe,"to-string":Oe},_t=function(e,t){this.type=e,this.args=t};_t.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");for(var r=ft[i],n=[],a=1;a<e.length;a++){var o=t.parse(e[a],a,Ve);if(!o)return null;n.push(o)}return new _t(r,n)},_t.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,i,r=0,n=this.args;r<n.length;r+=1){if(i=null,(t=n[r].evaluate(e))instanceof $e)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":nt(t[0],t[1],t[2],t[3])))return new $e(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ut(i||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,l=this.args;s<l.length;s+=1){if(null===(o=l[s].evaluate(e)))return 0;var u=Number(o);if(!isNaN(u))return u}throw new ut("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?it.fromString(st(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?rt.fromString(st(this.args[0].evaluate(e))):st(this.args[0].evaluate(e))},_t.prototype.eachChild=function(e){this.args.forEach(e)},_t.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},_t.prototype.serialize=function(){if("formatted"===this.type.kind)return new dt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ht(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var mt=["Unknown","Point","LineString","Polygon"],gt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};gt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},gt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?mt[this.feature.type]:this.feature.type:null},gt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},gt.prototype.canonicalID=function(){return this.canonical},gt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},gt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$e.parse(e)),t};var yt=function(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r};yt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},yt.prototype.eachChild=function(e){this.args.forEach(e)},yt.prototype.outputDefined=function(){return!1},yt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},yt.parse=function(e,t){var i,r=e[0],n=yt.definitions[r];if(!n)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(n)?n[0]:n.type,o=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,s=o.filter((function(t){var i=t[0];return!Array.isArray(i)||i.length===e.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],d=p[0],h=p[1];l=new Ut(t.registry,t.path,null,t.scope);for(var f=[],_=!1,m=1;m<e.length;m++){var g=e[m],y=Array.isArray(d)?d[m-1]:d.type,v=l.parse(g,1+f.length,y);if(!v){_=!0;break}f.push(v)}if(!_)if(Array.isArray(d)&&d.length!==f.length)l.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(d)?d[b]:d.type,w=f[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new yt(r,a,h,f)}}if(1===s.length)(i=t.errors).push.apply(i,l.errors);else{for(var S=(s.length?s:o).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(He).join(", ")+")":"("+He(t.type)+"...)"})).join(" | "),A=[],k=1;k<e.length;k++){var E=t.parse(e[k],1+A.length);if(!E)return null;A.push(He(E.type))}t.error("Expected arguments of type "+S+", but found ("+A.join(", ")+") instead.")}return null},yt.register=function(e,t){for(var i in yt.definitions=t,t)e[i]=yt};var vt=function(e,t,i){this.type=je,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function bt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function xt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function wt(e,t){var i=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(i*n*8192),Math.round(r*n*8192)]}function St(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function At(e,t){for(var i,r,n,a,o,s,l,u=!1,c=0,p=t.length;c<p;c++)for(var d=t[c],h=0,f=d.length;h<f-1;h++){if((a=(i=e)[0]-(r=d[h])[0])*(l=i[1]-(n=d[h+1])[1])-(s=i[0]-n[0])*(o=i[1]-r[1])==0&&a*s<=0&&o*l<=0)return!1;St(e,d[h],d[h+1])&&(u=!u)}return u}function kt(e,t){for(var i=0;i<t.length;i++)if(At(e,t[i]))return!0;return!1}function Et(e,t,i,r){var n=r[0]-i[0],a=r[1]-i[1],o=(e[0]-i[0])*a-n*(e[1]-i[1]),s=(t[0]-i[0])*a-n*(t[1]-i[1]);return o>0&&s<0||o<0&&s>0}function It(e,t,i){for(var r=0,n=i;r<n.length;r+=1)for(var a=n[r],o=0;o<a.length-1;++o)if(0!=(p=[(c=a[o+1])[0]-(u=a[o])[0],c[1]-u[1]])[0]*(d=[(l=t)[0]-(s=e)[0],l[1]-s[1]])[1]-p[1]*d[0]&&Et(s,l,u,c)&&Et(u,c,s,l))return!0;var s,l,u,c,p,d;return!1}function Tt(e,t){for(var i=0;i<e.length;++i)if(!At(e[i],t))return!1;for(var r=0;r<e.length-1;++r)if(It(e[r],e[r+1],t))return!1;return!0}function Ct(e,t){for(var i=0;i<t.length;i++)if(Tt(e,t[i]))return!0;return!1}function Pt(e,t,i){for(var r=[],n=0;n<e.length;n++){for(var a=[],o=0;o<e[n].length;o++){var s=wt(e[n][o],i);bt(t,s),a.push(s)}r.push(a)}return r}function Lt(e,t,i){for(var r=[],n=0;n<e.length;n++){var a=Pt(e[n],t,i);r.push(a)}return r}function Rt(e,t,i,r){if(e[0]<i[0]||e[0]>i[2]){var n=.5*r,a=e[0]-i[0]>n?-r:i[0]-e[0]>n?r:0;0===a&&(a=e[0]-i[2]>n?-r:i[2]-e[0]>n?r:0),e[0]+=a}bt(t,e)}function Mt(e,t,i,r){for(var n=8192*Math.pow(2,r.z),a=[8192*r.x,8192*r.y],o=[],s=0,l=e;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var p=c[u],d=[p.x+a[0],p.y+a[1]];Rt(d,t,i,n),o.push(d)}return o}function zt(e,t,i,r){for(var n,a=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],s=[],l=0,u=e;l<u.length;l+=1){for(var c=[],p=0,d=u[l];p<d.length;p+=1){var h=d[p],f=[h.x+o[0],h.y+o[1]];bt(t,f),c.push(f)}s.push(c)}if(t[2]-t[0]<=a/2){(n=t)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(var _=0,m=s;_<m.length;_+=1)for(var g=0,y=m[_];g<y.length;g+=1)Rt(y[g],t,i,a)}return s}vt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Ne);if(!r)return null;var n=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Ne);if(!n)return null;var a=null;return i.locale&&!(a=t.parse(i.locale,1,Oe))?null:new vt(r,n,a)},vt.prototype.evaluate=function(e){return new et(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},vt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},vt.prototype.outputDefined=function(){return!1},vt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Dt=function(e,t){this.type=Ne,this.geojson=e,this.geometries=t};function Bt(e){if(e instanceof yt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Dt)return!1;var t=!0;return e.eachChild((function(e){t&&!Bt(e)&&(t=!1)})),t}function Ft(e){if(e instanceof yt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Ft(e)&&(t=!1)})),t}function Ot(e,t){if(e instanceof yt&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild((function(e){i&&!Ot(e,t)&&(i=!1)})),i}Dt.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(at(e[1])){var i=e[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var n=i.features[r].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Dt(i,i.features[r].geometry)}else if("Feature"===i.type){var a=i.geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Dt(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Dt(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Dt.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var a=Pt(t.coordinates,r,n),o=Mt(e.geometry(),i,r,n);if(!xt(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!At(l[s],a))return!1}if("MultiPolygon"===t.type){var u=Lt(t.coordinates,r,n),c=Mt(e.geometry(),i,r,n);if(!xt(i,r))return!1;for(var p=0,d=c;p<d.length;p+=1)if(!kt(d[p],u))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){var a=Pt(t.coordinates,r,n),o=zt(e.geometry(),i,r,n);if(!xt(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!Tt(l[s],a))return!1}if("MultiPolygon"===t.type){var u=Lt(t.coordinates,r,n),c=zt(e.geometry(),i,r,n);if(!xt(i,r))return!1;for(var p=0,d=c;p<d.length;p+=1)if(!Ct(d[p],u))return!1}return!0}(e,this.geometries)}return!1},Dt.prototype.eachChild=function(){},Dt.prototype.outputDefined=function(){return!0},Dt.prototype.serialize=function(){return["within",this.geojson]};var Nt=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Nt.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Nt(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Nt.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Nt.prototype.eachChild=function(){},Nt.prototype.outputDefined=function(){return!1},Nt.prototype.serialize=function(){return["var",this.name]};var Ut=function(e,t,i,r,n){void 0===t&&(t=[]),void 0===r&&(r=new De),void 0===n&&(n=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=n,this.expectedType=i};function qt(e,t){for(var i,r=e.length-1,n=0,a=r,o=0;n<=a;)if((i=e[o=Math.floor((n+a)/2)])<=t){if(o===r||t<e[o+1])return o;n=o+1}else{if(!(i>t))throw new ut("Input is not a number.");a=o-1}return 0}Ut.prototype.parse=function(e,t,i,r,n){return void 0===n&&(n={}),t?this.concat(t,i,r)._parse(e,n):this._parse(e,n)},Ut.prototype._parse=function(e,t){function i(e,t,i){return"assert"===i?new pt(t,[e]):"coerce"===i?new _t(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var n=this.registry[r];if(n){var a=n.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=i(a,o,t.typeAnnotation||"coerce");else a=i(a,o,t.typeAnnotation||"assert")}if(!(a instanceof lt)&&"resolvedImage"!==a.type.kind&&function e(t){if(t instanceof Nt)return e(t.boundExpression);if(t instanceof yt&&"error"===t.name)return!1;if(t instanceof vt)return!1;if(t instanceof Dt)return!1;var i=t instanceof _t||t instanceof pt,r=!0;return t.eachChild((function(t){r=i?r&&e(t):r&&t instanceof lt})),!!r&&Bt(t)&&Ot(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(a)){var l=new gt;try{a=new lt(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ut.prototype.concat=function(e,t,i){var r="number"==typeof e?this.path.concat(e):this.path,n=i?this.scope.concat(i):this.scope;return new Ut(this.registry,r,t||null,n,this.errors)},Ut.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new ze(r,e))},Ut.prototype.checkSubtype=function(e,t){var i=We(e,t);return i&&this.error(i),i};var Vt=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,n=i;r<n.length;r+=1){var a=n[r],o=a[1];this.labels.push(a[0]),this.outputs.push(o)}};function jt(e,t,i){return e*(1-i)+t*i}Vt.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Fe);if(!i)return null;var r=[],n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var a=1;a<e.length;a+=2){var o=1===a?-1/0:e[a],s=e[a+1],l=a,u=a+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=t.parse(s,u,n);if(!c)return null;n=n||c.type,r.push([o,c])}return new Vt(n,i,r)},Vt.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);var n=t.length;return r>=t[n-1]?i[n-1].evaluate(e):i[qt(t,r)].evaluate(e)},Vt.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Vt.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},Vt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Gt=Object.freeze({__proto__:null,number:jt,color:function(e,t,i){return new $e(jt(e.r,t.r,i),jt(e.g,t.g,i),jt(e.b,t.b,i),jt(e.a,t.a,i))},array:function(e,t,i){return e.map((function(e,r){return jt(e,t[r],i)}))}}),Kt=6/29*3*(6/29),Zt=Math.PI/180,Ht=180/Math.PI;function Qt(e){return e>.008856451679035631?Math.pow(e,1/3):e/Kt+4/29}function Wt(e){return e>6/29?e*e*e:Kt*(e-4/29)}function Jt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Yt(e){var t=Xt(e.r),i=Xt(e.g),r=Xt(e.b),n=Qt((.4124564*t+.3575761*i+.1804375*r)/.95047),a=Qt((.2126729*t+.7151522*i+.072175*r)/1);return{l:116*a-16,a:500*(n-a),b:200*(a-Qt((.0193339*t+.119192*i+.9503041*r)/1.08883)),alpha:e.a}}function $t(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Wt(t),i=.95047*Wt(i),r=1.08883*Wt(r),new $e(Jt(3.2404542*i-1.5371385*t-.4985314*r),Jt(-.969266*i+1.8760108*t+.041556*r),Jt(.0556434*i-.2040259*t+1.0572252*r),e.alpha)}function ei(e,t,i){var r=t-e;return e+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var ti={forward:Yt,reverse:$t,interpolate:function(e,t,i){return{l:jt(e.l,t.l,i),a:jt(e.a,t.a,i),b:jt(e.b,t.b,i),alpha:jt(e.alpha,t.alpha,i)}}},ii={forward:function(e){var t=Yt(e),i=t.l,r=t.a,n=t.b,a=Math.atan2(n,r)*Ht;return{h:a<0?a+360:a,c:Math.sqrt(r*r+n*n),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Zt,i=e.c;return $t({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:ei(e.h,t.h,i),c:jt(e.c,t.c,i),l:jt(e.l,t.l,i),alpha:jt(e.alpha,t.alpha,i)}}},ri=Object.freeze({__proto__:null,lab:ti,hcl:ii}),ni=function(e,t,i,r,n){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var a=0,o=n;a<o.length;a+=1){var s=o[a],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ai(e,t,i,r){var n=r-i,a=e-i;return 0===n?0:1===t?a/n:(Math.pow(t,a)-1)/(Math.pow(t,n)-1)}ni.interpolationFactor=function(e,t,r,n){var a=0;if("exponential"===e.name)a=ai(t,e.base,r,n);else if("linear"===e.name)a=ai(t,1,r,n);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new i(o[0],o[1],o[2],o[3]).solve(ai(t,1,r,n))}return a},ni.parse=function(e,t){var i=e[0],r=e[1],n=e[2],a=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,Fe)))return null;var l=[],u=null;"interpolate-hcl"===i||"interpolate-lab"===i?u=Ue:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var c=0;c<a.length;c+=2){var p=a[c],d=a[c+1],h=c+3,f=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',h);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',h);var _=t.parse(d,f,u);if(!_)return null;u=u||_.type,l.push([p,_])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new ni(u,i,r,n,l):t.error("Type "+He(u)+" is not interpolatable.")},ni.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);var n=t.length;if(r>=t[n-1])return i[n-1].evaluate(e);var a=qt(t,r),o=ni.interpolationFactor(this.interpolation,r,t[a],t[a+1]),s=i[a].evaluate(e),l=i[a+1].evaluate(e);return"interpolate"===this.operator?Gt[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?ii.reverse(ii.interpolate(ii.forward(s),ii.forward(l),o)):ti.reverse(ti.interpolate(ti.forward(s),ti.forward(l),o))},ni.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},ni.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},ni.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var oi=function(e,t){this.type=e,this.args=t};oi.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,r=t.expectedType;r&&"value"!==r.kind&&(i=r);for(var n=[],a=0,o=e.slice(1);a<o.length;a+=1){var s=t.parse(o[a],1+n.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,n.push(s)}var l=r&&n.some((function(e){return We(r,e.type)}));return new oi(l?Ve:i,n)},oi.prototype.evaluate=function(e){for(var t,i=null,r=0,n=0,a=this.args;n<a.length&&(r++,(i=a[n].evaluate(e))&&i instanceof rt&&!i.available&&(t||(t=i.name),i=null,r===this.args.length&&(i=t)),null===i);n+=1);return i},oi.prototype.eachChild=function(e){this.args.forEach(e)},oi.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},oi.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var si=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};si.prototype.evaluate=function(e){return this.result.evaluate(e)},si.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},si.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],r=1;r<e.length-1;r+=2){var n=e[r];if("string"!=typeof n)return t.error("Expected string, but found "+typeof n+" instead.",r);if(/[^a-zA-Z0-9_]/.test(n))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var a=t.parse(e[r+1],r+1);if(!a)return null;i.push([n,a])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return o?new si(i,o):null},si.prototype.outputDefined=function(){return this.result.outputDefined()},si.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var r=i[t];e.push(r[0],r[1].serialize())}return e.push(this.result.serialize()),e};var li=function(e,t,i){this.type=e,this.index=t,this.input=i};li.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Fe),r=t.parse(e[2],2,Ze(t.expectedType||Ve));return i&&r?new li(r.type.itemType,i,r):null},li.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ut("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new ut("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new ut("Array index must be an integer, but found "+t+" instead.");return i[t]},li.prototype.eachChild=function(e){e(this.index),e(this.input)},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ui=function(e,t){this.type=Ne,this.needle=e,this.haystack=t};ui.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Ve);return i&&r?Je(i.type,[Ne,Oe,Fe,Be,Ve])?new ui(i,r):t.error("Expected first argument to be of type boolean, string, number or null, but found "+He(i.type)+" instead"):null},ui.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Xe(t,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+He(ot(t))+" instead.");if(!Xe(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+He(ot(i))+" instead.");return i.indexOf(t)>=0},ui.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},ui.prototype.outputDefined=function(){return!0},ui.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ci=function(e,t,i){this.type=Fe,this.needle=e,this.haystack=t,this.fromIndex=i};ci.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Ve);if(!i||!r)return null;if(!Je(i.type,[Ne,Oe,Fe,Be,Ve]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+He(i.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Fe);return n?new ci(i,r,n):null}return new ci(i,r)},ci.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Xe(t,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+He(ot(t))+" instead.");if(!Xe(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+He(ot(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(e);return i.indexOf(t,r)}return i.indexOf(t)},ci.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pi=function(e,t,i,r,n,a){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=n,this.otherwise=a};pi.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var n={},a=[],o=2;o<e.length-1;o+=2){var s=e[o],l=e[o+1];Array.isArray(s)||(s=[s]);var u=t.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var d=p[c];if("number"!=typeof d&&"string"!=typeof d)return u.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,ot(d)))return null}else i=ot(d);if(void 0!==n[String(d)])return u.error("Branch labels must be unique.");n[String(d)]=a.length}var h=t.parse(l,o,r);if(!h)return null;r=r||h.type,a.push(h)}var f=t.parse(e[1],1,Ve);if(!f)return null;var _=t.parse(e[e.length-1],e.length-1,r);return _?"value"!==f.type.kind&&t.concat(1).checkSubtype(i,f.type)?null:new pi(i,r,f,n,a,_):null},pi.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(ot(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},pi.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},pi.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()},pi.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],r={},n=0,a=Object.keys(this.cases).sort();n<a.length;n+=1){var o=a[n];void 0===(p=r[this.cases[o]])?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[p][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=i;l<u.length;l+=1){var c=u[l],p=c[0],d=c[1];t.push(1===d.length?s(d[0]):d.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var di=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};di.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var r=[],n=1;n<e.length-1;n+=2){var a=t.parse(e[n],n,Ne);if(!a)return null;var o=t.parse(e[n+1],n+1,i);if(!o)return null;r.push([a,o]),i=i||o.type}var s=t.parse(e[e.length-1],e.length-1,i);return s?new di(i,r,s):null},di.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var r=i[t],n=r[1];if(r[0].evaluate(e))return n.evaluate(e)}return this.otherwise.evaluate(e)},di.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var r=i[t],n=r[1];e(r[0]),e(n)}e(this.otherwise)},di.prototype.outputDefined=function(){return this.branches.every((function(e){return e[1].outputDefined()}))&&this.otherwise.outputDefined()},di.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e};var hi=function(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r};function fi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function _i(e,t,i,r){return 0===r.compare(t,i)}function mi(e,t,i){var r="=="!==e&&"!="!==e;return function(){function n(e,t,i){this.type=Ne,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return n.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var i=e[0],a=t.parse(e[1],1,Ve);if(!a)return null;if(!fi(i,a.type))return t.concat(1).error('"'+i+"\" comparisons are not supported for type '"+He(a.type)+"'.");var o=t.parse(e[2],2,Ve);if(!o)return null;if(!fi(i,o.type))return t.concat(2).error('"'+i+"\" comparisons are not supported for type '"+He(o.type)+"'.");if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+He(a.type)+"' and '"+He(o.type)+"'.");r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new pt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new pt(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,je)))return null}return new n(a,o,s)},n.prototype.evaluate=function(n){var a=this.lhs.evaluate(n),o=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){var s=ot(a),l=ot(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ut('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var u=ot(a),c=ot(o);if("string"!==u.kind||"string"!==c.kind)return t(n,a,o)}return this.collator?i(n,a,o,this.collator.evaluate(n)):t(n,a,o)},n.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},n.prototype.outputDefined=function(){return!0},n.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},n}()}hi.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Fe);if(!i||!r)return null;if(!Je(i.type,[Ze(Ve),Oe,Ve]))return t.error("Expected first argument to be of type array or string, but found "+He(i.type)+" instead");if(4===e.length){var n=t.parse(e[3],3,Fe);return n?new hi(i.type,i,r,n):null}return new hi(i.type,i,r)},hi.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Xe(t,["string","array"]))throw new ut("Expected first argument to be of type array or string, but found "+He(ot(t))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(i,r)}return t.slice(i)},hi.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var gi=mi("==",(function(e,t,i){return t===i}),_i),yi=mi("!=",(function(e,t,i){return t!==i}),(function(e,t,i,r){return!_i(0,t,i,r)})),vi=mi("<",(function(e,t,i){return t<i}),(function(e,t,i,r){return r.compare(t,i)<0})),bi=mi(">",(function(e,t,i){return t>i}),(function(e,t,i,r){return r.compare(t,i)>0})),xi=mi("<=",(function(e,t,i){return t<=i}),(function(e,t,i,r){return r.compare(t,i)<=0})),wi=mi(">=",(function(e,t,i){return t>=i}),(function(e,t,i,r){return r.compare(t,i)>=0})),Si=function(e,t,i,r,n){this.type=Oe,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=n};Si.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Fe);if(!i)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var n=null;if(r.locale&&!(n=t.parse(r.locale,1,Oe)))return null;var a=null;if(r.currency&&!(a=t.parse(r.currency,1,Oe)))return null;var o=null;if(r["min-fraction-digits"]&&!(o=t.parse(r["min-fraction-digits"],1,Fe)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Fe))?null:new Si(i,n,a,o,s)},Si.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Si.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ai=function(e){this.type=Fe,this.input=e};Ai.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error("Expected argument of type string or array, but found "+He(i.type)+" instead."):new Ai(i):null},Ai.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ut("Expected value to be of type string or array, but found "+He(ot(t))+" instead.")},Ai.prototype.eachChild=function(e){e(this.input)},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var ki={"==":gi,"!=":yi,">":bi,"<":vi,">=":wi,"<=":xi,array:pt,at:li,boolean:pt,case:di,coalesce:oi,collator:vt,format:dt,image:ht,in:ui,"index-of":ci,interpolate:ni,"interpolate-hcl":ni,"interpolate-lab":ni,length:Ai,let:si,literal:lt,match:pi,number:pt,"number-format":Si,object:pt,slice:hi,step:Vt,string:pt,"to-boolean":_t,"to-color":_t,"to-number":_t,"to-string":_t,var:Nt,within:Dt};function Ei(e,t){var i=t[0],r=t[1],n=t[2],a=t[3];i=i.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);var o=a?a.evaluate(e):1,s=nt(i,r,n,o);if(s)throw new ut(s);return new $e(i/255*o,r/255*o,n/255*o,o)}function Ii(e,t){return e in t}function Ti(e,t){var i=t[e];return void 0===i?null:i}function Ci(e){return{type:e}}function Pi(e){return{result:"success",value:e}}function Li(e){return{result:"error",value:e}}function Ri(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Mi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zi(e){return!!e.expression&&e.expression.interpolated}function Di(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Bi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Fi(e){return e}function Oi(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Ni(e,t,i,r,n){return Oi(typeof i===n?r[i]:void 0,e.default,t.default)}function Ui(e,t,i){if("number"!==Di(i))return Oi(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];var n=qt(e.stops.map((function(e){return e[0]})),i);return e.stops[n][1]}function qi(e,t,i){var r=void 0!==e.base?e.base:1;if("number"!==Di(i))return Oi(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];var a=qt(e.stops.map((function(e){return e[0]})),i),o=function(e,t,i,r){var n=r-i,a=e-i;return 0===n?0:1===t?a/n:(Math.pow(t,a)-1)/(Math.pow(t,n)-1)}(i,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],u=Gt[t.type]||Fi;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=ri[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return u(i,r,o)}}:u(s,l,o)}function Vi(e,t,i){return"color"===t.type?i=$e.parse(i):"formatted"===t.type?i=it.fromString(i.toString()):"resolvedImage"===t.type?i=rt.fromString(i.toString()):Di(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),Oi(i,e.default,t.default)}yt.register(ki,{error:[{kind:"error"},[Oe],function(e,t){throw new ut(t[0].evaluate(e))}],typeof:[Oe,[Ve],function(e,t){return He(ot(t[0].evaluate(e)))}],"to-rgba":[Ze(Fe,4),[Ue],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ue,[Fe,Fe,Fe],Ei],rgba:[Ue,[Fe,Fe,Fe,Fe],Ei],has:{type:Ne,overloads:[[[Oe],function(e,t){return Ii(t[0].evaluate(e),e.properties())}],[[Oe,qe],function(e,t){var i=t[1];return Ii(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ve,overloads:[[[Oe],function(e,t){return Ti(t[0].evaluate(e),e.properties())}],[[Oe,qe],function(e,t){var i=t[1];return Ti(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ve,[Oe],function(e,t){return Ti(t[0].evaluate(e),e.featureState||{})}],properties:[qe,[],function(e){return e.properties()}],"geometry-type":[Oe,[],function(e){return e.geometryType()}],id:[Ve,[],function(e){return e.id()}],zoom:[Fe,[],function(e){return e.globals.zoom}],"heatmap-density":[Fe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Fe,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ve,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Fe,Ci(Fe),function(e,t){for(var i=0,r=0,n=t;r<n.length;r+=1)i+=n[r].evaluate(e);return i}],"*":[Fe,Ci(Fe),function(e,t){for(var i=1,r=0,n=t;r<n.length;r+=1)i*=n[r].evaluate(e);return i}],"-":{type:Fe,overloads:[[[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Fe],function(e,t){return-t[0].evaluate(e)}]]},"/":[Fe,[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Fe,[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Fe,[],function(){return Math.LN2}],pi:[Fe,[],function(){return Math.PI}],e:[Fe,[],function(){return Math.E}],"^":[Fe,[Fe,Fe],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Fe,[Fe],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Fe,[Fe],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Fe,[Fe],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Fe,[Fe],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Fe,[Fe],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Fe,[Fe],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Fe,[Fe],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Fe,Ci(Fe),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Fe,Ci(Fe),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Fe,[Fe],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Fe,[Fe],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Fe,[Fe],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Fe,[Fe],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1];return e.properties()[i.value]===r.value}],"filter-id-==":[Ne,[Ve],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ne,[Oe],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n<a}],"filter-id-<":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n>a}],"filter-id->":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n<=a}],"filter-id-<=":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],n=e.properties()[i.value],a=r.value;return typeof n==typeof a&&n>=a}],"filter-id->=":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[Ne,[Ve],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ne,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Ne,[Ze(Oe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ne,[Ze(Ve)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ne,[Oe,Ze(Ve)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ne,[Oe,Ze(Ve)],function(e,t){var i=t[0],r=t[1];return function(e,t,i,r){for(;i<=r;){var n=i+r>>1;if(t[n]===e)return!0;t[n]>e?r=n-1:i=n+1}return!1}(e.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:Ne,overloads:[[[Ne,Ne],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[Ci(Ne),function(e,t){for(var i=0,r=t;i<r.length;i+=1)if(!r[i].evaluate(e))return!1;return!0}]]},any:{type:Ne,overloads:[[[Ne,Ne],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[Ci(Ne),function(e,t){for(var i=0,r=t;i<r.length;i+=1)if(r[i].evaluate(e))return!0;return!1}]]},"!":[Ne,[Ne],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ne,[Oe],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[Oe,[Oe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Oe,[Oe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Oe,Ci(Ve),function(e,t){return t.map((function(t){return st(t.evaluate(e))})).join("")}],"resolved-locale":[Oe,[je],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var ji=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new gt,this._defaultValue=t?function(e){return"color"===e.type&&Bi(e.default)?new $e(0,0,0,0):"color"===e.type?$e.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function Gi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ki}function Ki(e,t){var i=new Ut(ki,[],t?function(e){var t={color:Ue,string:Oe,number:Fe,enum:Oe,boolean:Ne,formatted:Ge,resolvedImage:Ke};return"array"===e.type?Ze(t[e.value]||Ve,e.length):t[e.type]}(t):void 0),r=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Pi(new ji(r,t)):Li(i.errors)}ji.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,n,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)},ji.prototype.evaluate=function(e,t,i,r,n,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=a||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ut("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Zi=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ft(t.expression)};Zi.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,n,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,a)},Zi.prototype.evaluate=function(e,t,i,r,n,a){return this._styleExpression.evaluate(e,t,i,r,n,a)};var Hi=function(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ft(t.expression),this.interpolationType=r};function Qi(e,t){if("error"===(e=Ki(e,t)).result)return e;var i=e.value.expression,r=Bt(i);if(!r&&!Ri(t))return Li([new ze("","data expressions not supported")]);var n=Ot(i,["zoom"]);if(!n&&!Mi(t))return Li([new ze("","zoom expressions not supported")]);var a=function e(t){var i=null;if(t instanceof si)i=e(t.result);else if(t instanceof oi)for(var r=0,n=t.args;r<n.length&&!(i=e(n[r]));r+=1);else(t instanceof Vt||t instanceof ni)&&t.input instanceof yt&&"zoom"===t.input.name&&(i=t);return i instanceof ze||t.eachChild((function(t){var r=e(t);r instanceof ze?i=r:!i&&r?i=new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new ze("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return a||n?a instanceof ze?Li([a]):a instanceof ni&&!zi(t)?Li([new ze("",'"interpolate" expressions cannot be used with this property')]):Pi(a?new Hi(r?"camera":"composite",e.value,a.labels,a instanceof ni?a.interpolation:void 0):new Zi(r?"constant":"source",e.value)):Li([new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Hi.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,n,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,a)},Hi.prototype.evaluate=function(e,t,i,r,n,a){return this._styleExpression.evaluate(e,t,i,r,n,a)},Hi.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?ni.interpolationFactor(this.interpolationType,e,t,i):0};var Wi=function(e,t){this._parameters=e,this._specification=t,Le(this,function e(t,i){var r,n,a,o="color"===i.type,s=t.stops&&"object"==typeof t.stops[0][0],l=s||!(s||void 0!==t.property),u=t.type||(zi(i)?"exponential":"interval");if(o&&((t=Le({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],$e.parse(e[1])]}))),t.default=$e.parse(t.default?t.default:i.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ri[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===u)r=qi;else if("interval"===u)r=Ui;else if("categorical"===u){r=Ni,n=Object.create(null);for(var c=0,p=t.stops;c<p.length;c+=1){var d=p[c];n[d[0]]=d[1]}a=typeof t.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=Vi}if(s){for(var h={},f=[],_=0;_<t.stops.length;_++){var m=t.stops[_],g=m[0].zoom;void 0===h[g]&&(h[g]={zoom:g,type:t.type,property:t.property,default:t.default,stops:[]},f.push(g)),h[g].stops.push([m[0].value,m[1]])}for(var y=[],v=0,b=f;v<b.length;v+=1){var x=b[v];y.push([h[x].zoom,e(h[x],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ni.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(e,r){var n=e.zoom;return qi({stops:y,base:t.base},i,n).evaluate(n,r)}}}if(l){var S="exponential"===u?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:ni.interpolationFactor.bind(void 0,S),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){return r(t,i,e.zoom,n,a)}}}return{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Oi(t.default,i.default):r(t,i,s,n,a)}}}(this._parameters,this._specification))};function Ji(e){var t=e.key,i=e.value,r=e.valueSpec||{},n=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=Di(i);if("object"!==l)return[new Ce(t,i,"object expected, "+l+" found")];for(var u in i){var c=u.split(".")[0],p=r[c]||r["*"],d=void 0;if(n[c])d=n[c];else if(r[c])d=xr;else if(n["*"])d=n["*"];else{if(!r["*"]){s.push(new Ce(t,i[u],'unknown property "'+u+'"'));continue}d=xr}s=s.concat(d({key:(t?t+".":t)+u,value:i[u],valueSpec:p,style:a,styleSpec:o,object:i,objectKey:u},i))}for(var h in r)n[h]||r[h].required&&void 0===r[h].default&&void 0===i[h]&&s.push(new Ce(t,i,'missing required property "'+h+'"'));return s}function Xi(e){var t=e.value,i=e.valueSpec,r=e.style,n=e.styleSpec,a=e.key,o=e.arrayElementValidator||xr;if("array"!==Di(t))return[new Ce(a,t,"array expected, "+Di(t)+" found")];if(i.length&&t.length!==i.length)return[new Ce(a,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new Ce(a,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var s={type:i.value,values:i.values};n.$version<7&&(s.function=i.function),"object"===Di(i.value)&&(s=i.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:n,key:a+"["+u+"]"}));return l}function Yi(e){var t=e.key,i=e.value,r=e.valueSpec,n=Di(i);return"number"===n&&i!=i&&(n="NaN"),"number"!==n?[new Ce(t,i,"number expected, "+n+" found")]:"minimum"in r&&i<r.minimum?[new Ce(t,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new Ce(t,i,i+" is greater than the maximum value "+r.maximum)]:[]}function $i(e){var t,i,r,n=e.valueSpec,a=Re(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,u="array"===Di(e.value.stops)&&"array"===Di(e.value.stops[0])&&"object"===Di(e.value.stops[0][0]),c=Ji({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new Ce(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(Xi({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===Di(i)&&0===i.length&&t.push(new Ce(e.key,i,"array must have at least one stop")),t},default:function(e){return xr({key:e.key,value:e.value,valueSpec:n,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new Ce(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new Ce(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!zi(e.valueSpec)&&c.push(new Ce(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ri(e.valueSpec)?c.push(new Ce(e.key,e.value,"property functions not supported")):s&&!Mi(e.valueSpec)&&c.push(new Ce(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==e.value.property||c.push(new Ce(e.key,e.value,'"property" property is required')),c;function p(e){var t=[],a=e.value,s=e.key;if("array"!==Di(a))return[new Ce(s,a,"array expected, "+Di(a)+" found")];if(2!==a.length)return[new Ce(s,a,"array length 2 expected, length "+a.length+" found")];if(u){if("object"!==Di(a[0]))return[new Ce(s,a,"object expected, "+Di(a[0])+" found")];if(void 0===a[0].zoom)return[new Ce(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new Ce(s,a,"object stop key must have value")];if(r&&r>Re(a[0].zoom))return[new Ce(s,a[0].zoom,"stop zoom values must appear in ascending order")];Re(a[0].zoom)!==r&&(r=Re(a[0].zoom),i=void 0,o={}),t=t.concat(Ji({key:s+"[0]",value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Yi,value:d}}))}else t=t.concat(d({key:s+"[0]",value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return Gi(Me(a[1]))?t.concat([new Ce(s+"[1]",a[1],"expressions are not allowed in function stops.")]):t.concat(xr({key:s+"[1]",value:a[1],valueSpec:n,style:e.style,styleSpec:e.styleSpec}))}function d(e,r){var s=Di(e.value),l=Re(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new Ce(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ce(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, "+s+" found";return Ri(n)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ce(e.key,u,c)]}return"categorical"!==a||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&void 0!==i&&l<i?[new Ce(e.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===a&&l in o?[new Ce(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new Ce(e.key,u,"integer expected, found "+l)]}}function er(e){var t=("property"===e.expressionContext?Qi:Ki)(Me(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Ce(""+e.key+t.key,e.value,t.message)}));var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new Ce(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ft(i))return[new Ce(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ft(i))return[new Ce(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Ot(i,["zoom","feature-state"]))return[new Ce(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Bt(i))return[new Ce(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tr(e){var t=e.key,i=e.value,r=e.valueSpec,n=[];return Array.isArray(r.values)?-1===r.values.indexOf(Re(i))&&n.push(new Ce(t,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Re(i))&&n.push(new Ce(t,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),n}function ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var r=i[t];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Wi.deserialize=function(e){return new Wi(e._parameters,e._specification)},Wi.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var rr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function nr(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};ir(e)||(e=or(e));var t=Ki(e,rr);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return{filter:function(e,i,r){return t.value.evaluate(e,i,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var i=1;i<t.length;i++)if(e(t[i]))return!0;return!1}(e)}}function ar(e,t){return e<t?-1:e>t?1:0}function or(e){if(!e)return!0;var t,i=e[0];return e.length<=1?"any"!==i:"=="===i?sr(e[1],e[2],"=="):"!="===i?cr(sr(e[1],e[2],"==")):"<"===i||">"===i||"<="===i||">="===i?sr(e[1],e[2],i):"any"===i?(t=e.slice(1),["any"].concat(t.map(or))):"all"===i?["all"].concat(e.slice(1).map(or)):"none"===i?["all"].concat(e.slice(1).map(or).map(cr)):"in"===i?lr(e[1],e.slice(2)):"!in"===i?cr(lr(e[1],e.slice(2))):"has"===i?ur(e[1]):"!has"===i?cr(ur(e[1])):"within"!==i||e}function sr(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function lr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(ar)]]:["filter-in-small",e,["literal",t]]}}function ur(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function cr(e){return["!",e]}function pr(e){return ir(Me(e.value))?er(Le({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var i=t.value,r=t.key;if("array"!==Di(i))return[new Ce(r,i,"array expected, "+Di(i)+" found")];var n,a=t.styleSpec,o=[];if(i.length<1)return[new Ce(r,i,"filter array must have at least 1 element")];switch(o=o.concat(tr({key:r+"[0]",value:i[0],valueSpec:a.filter_operator,style:t.style,styleSpec:t.styleSpec})),Re(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Re(i[1])&&o.push(new Ce(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&o.push(new Ce(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(n=Di(i[1]))&&o.push(new Ce(r+"[1]",i[1],"string expected, "+n+" found"));for(var s=2;s<i.length;s++)n=Di(i[s]),"$type"===Re(i[1])?o=o.concat(tr({key:r+"["+s+"]",value:i[s],valueSpec:a.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new Ce(r+"["+s+"]",i[s],"string, number, or boolean expected, "+n+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)o=o.concat(e({key:r+"["+l+"]",value:i[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":n=Di(i[1]),2!==i.length?o.push(new Ce(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==n&&o.push(new Ce(r+"[1]",i[1],"string expected, "+n+" found"));break;case"within":n=Di(i[1]),2!==i.length?o.push(new Ce(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==n&&o.push(new Ce(r+"[1]",i[1],"object expected, "+n+" found"))}return o}(e)}function dr(e,t){var i=e.key,r=e.style,n=e.styleSpec,a=e.value,o=e.objectKey,s=n[t+"_"+e.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return xr({key:i,value:a,valueSpec:n.transition,style:r,styleSpec:n});var u,c=e.valueSpec||s[o];if(!c)return[new Ce(i,a,'unknown property "'+o+'"')];if("string"===Di(a)&&Ri(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new Ce(i,a,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&p.push(new Ce(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Bi(Me(a))&&"identity"===Re(a.type)&&p.push(new Ce(i,a,'"text-font" does not support identity functions'))),p.concat(xr({key:e.key,value:a,valueSpec:c,style:r,styleSpec:n,expressionContext:"property",propertyType:t,propertyKey:o}))}function hr(e){return dr(e,"paint")}function fr(e){return dr(e,"layout")}function _r(e){var t=[],i=e.value,r=e.key,n=e.style,a=e.styleSpec;i.type||i.ref||t.push(new Ce(r,i,'either "type" or "ref" is required'));var o,s=Re(i.type),l=Re(i.ref);if(i.id)for(var u=Re(i.id),c=0;c<e.arrayIndex;c++){var p=n.layers[c];Re(p.id)===u&&t.push(new Ce(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(e){e in i&&t.push(new Ce(r,i[e],'"'+e+'" is prohibited for ref layers'))})),n.layers.forEach((function(e){Re(e.id)===l&&(o=e)})),o?o.ref?t.push(new Ce(r,i.ref,"ref cannot reference another ref layer")):s=Re(o.type):t.push(new Ce(r,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var d=n.sources&&n.sources[i.source],h=d&&Re(d.type);d?"vector"===h&&"raster"===s?t.push(new Ce(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===h&&"raster"!==s?t.push(new Ce(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==h||i["source-layer"]?"raster-dem"===h&&"hillshade"!==s?t.push(new Ce(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===h&&d.lineMetrics||t.push(new Ce(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Ce(r,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new Ce(r,i.source,'source "'+i.source+'" not found'))}else t.push(new Ce(r,i,'missing required property "source"'));return t=t.concat(Ji({key:r,value:i,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xr({key:r+".type",value:i.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:pr,layout:function(e){return Ji({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return fr(Le({layerType:s},e))}}})},paint:function(e){return Ji({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return hr(Le({layerType:s},e))}}})}}}))}function mr(e){var t=e.value,i=e.key,r=Di(t);return"string"!==r?[new Ce(i,t,"string expected, "+r+" found")]:[]}var gr={promoteId:function(e){var t=e.key,i=e.value;if("string"===Di(i))return mr({key:t,value:i});var r=[];for(var n in i)r.push.apply(r,mr({key:t+"."+n,value:i[n]}));return r}};function yr(e){var t=e.value,i=e.key,r=e.styleSpec,n=e.style;if(!t.type)return[new Ce(i,t,'"type" is required')];var a,o=Re(t.type);switch(o){case"vector":case"raster":case"raster-dem":return Ji({key:i,value:t,valueSpec:r["source_"+o.replace("-","_")],style:e.style,styleSpec:r,objectElementValidators:gr});case"geojson":if(a=Ji({key:i,value:t,valueSpec:r.source_geojson,style:n,styleSpec:r,objectElementValidators:gr}),t.cluster)for(var s in t.clusterProperties){var l=t.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;a.push.apply(a,er({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),a.push.apply(a,er({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return a;case"video":return Ji({key:i,value:t,valueSpec:r.source_video,style:n,styleSpec:r});case"image":return Ji({key:i,value:t,valueSpec:r.source_image,style:n,styleSpec:r});case"canvas":return[new Ce(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tr({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,styleSpec:r})}}function vr(e){var t=e.value,i=e.styleSpec,r=i.light,n=e.style,a=[],o=Di(t);if(void 0===t)return a;if("object"!==o)return a.concat([new Ce("light",t,"object expected, "+o+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?xr({key:s,value:t[s],valueSpec:i.transition,style:n,styleSpec:i}):r[s]?xr({key:s,value:t[s],valueSpec:r[s],style:n,styleSpec:i}):[new Ce(s,t[s],'unknown property "'+s+'"')])}return a}var br={"*":function(){return[]},array:Xi,boolean:function(e){var t=e.value,i=e.key,r=Di(t);return"boolean"!==r?[new Ce(i,t,"boolean expected, "+r+" found")]:[]},number:Yi,color:function(e){var t=e.key,i=e.value,r=Di(i);return"string"!==r?[new Ce(t,i,"color expected, "+r+" found")]:null===Ye(i)?[new Ce(t,i,'color expected, "'+i+'" found')]:[]},constants:Pe,enum:tr,filter:pr,function:$i,layer:_r,object:Ji,source:yr,light:vr,string:mr,formatted:function(e){return 0===mr(e).length?[]:er(e)},resolvedImage:function(e){return 0===mr(e).length?[]:er(e)}};function xr(e){var t=e.value,i=e.valueSpec,r=e.styleSpec;return i.expression&&Bi(Re(t))?$i(e):i.expression&&Gi(Me(t))?er(e):i.type&&br[i.type]?br[i.type](e):Ji(Le({},e,{valueSpec:i.type?r[i.type]:i}))}function wr(e){var t=e.value,i=e.key,r=mr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Ce(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Ce(i,t,'"glyphs" url must include a "{range}" token'))),r}function Sr(e,t){void 0===t&&(t=Te);var i=[];return i=i.concat(xr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:wr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Pe({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ar(i)}function Ar(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function kr(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Ar(e.apply(this,t))}}Sr.source=kr(yr),Sr.light=kr(vr),Sr.layer=kr(_r),Sr.filter=kr(pr),Sr.paintProperty=kr(hr),Sr.layoutProperty=kr(fr);var Er=Sr,Ir=Er.light,Tr=Er.paintProperty,Cr=Er.layoutProperty;function Pr(e,t){var i=!1;if(t&&t.length)for(var r=0,n=t;r<n.length;r+=1)e.fire(new Ee(new Error(n[r].message))),i=!0;return i}var Lr=Rr;function Rr(e,t,i){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var n=new Int32Array(this.arrayBuffer);e=n[0],this.d=(t=n[1])+2*(i=n[2]);for(var a=0;a<this.d*this.d;a++){var o=n[3+a],s=n[3+a+1];r.push(o===s?null:n.subarray(o,s))}var l=n[3+r.length+1];this.keys=n.subarray(n[3+r.length],l),this.bboxes=n.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var c=i/t*e;this.min=-c,this.max=e+c}Rr.prototype.insert=function(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,i,r,n,a){this.cells[n].push(a)},Rr.prototype.query=function(e,t,i,r,n){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=i&&o<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,i,r,this._queryCell,s,{},n),s},Rr.prototype._queryCell=function(e,t,i,r,n,a,o,s){var l=this.cells[n];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var d=l[p];if(void 0===o[d]){var h=4*d;(s?s(c[h+0],c[h+1],c[h+2],c[h+3]):e<=c[h+2]&&t<=c[h+3]&&i>=c[h+0]&&r>=c[h+1])?(o[d]=!0,a.push(u[d])):o[d]=!1}}},Rr.prototype._forEachCell=function(e,t,i,r,n,a,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),d=l;d<=c;d++)for(var h=u;h<=p;h++){var f=this.d*h+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(h),this._convertFromCellCoord(d+1),this._convertFromCellCoord(h+1)))&&n.call(this,e,t,i,r,f,a,o,s))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var n=new Int32Array(t+i+this.keys.length+this.bboxes.length);n[0]=this.extent,n[1]=this.n,n[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];n[3+o]=a,n.set(s,a),a+=s.length}return n[3+e.length]=a,n.set(this.keys,a),n[3+e.length+1]=a+=this.keys.length,n.set(this.bboxes,a),a+=this.bboxes.length,n.buffer};var Mr=o.ImageData,zr=o.ImageBitmap,Dr={};function Br(e,t,i){void 0===i&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Dr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Fr in Br("Object",Object),Lr.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Lr.deserialize=function(e){return new Lr(e.buffer)},Br("Grid",Lr),Br("Color",$e),Br("Error",Error),Br("ResolvedImage",rt),Br("StylePropertyFunction",Wi),Br("StyleExpression",ji,{omit:["_evaluator"]}),Br("ZoomDependentExpression",Hi),Br("ZoomConstantExpression",Zi),Br("CompoundExpression",yt,{omit:["_evaluate"]}),ki)ki[Fr]._classRegistryKey||Br("Expression_"+Fr,ki[Fr]);function Or(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Nr(e){return zr&&e instanceof zr}function Ur(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Or(e)||Nr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof Mr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],n=0,a=e;n<a.length;n+=1)r.push(Ur(a[n],t));return r}if("object"==typeof e){var o=e.constructor,s=o._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=o.serialize?o.serialize(e,t):{};if(!o.serialize){for(var u in e)if(e.hasOwnProperty(u)&&!(Dr[s].omit.indexOf(u)>=0)){var c=e[u];l[u]=Dr[s].shallow.indexOf(u)>=0?c:Ur(c,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof e)}function qr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Or(e)||Nr(e)||ArrayBuffer.isView(e)||e instanceof Mr)return e;if(Array.isArray(e))return e.map(qr);if("object"==typeof e){var t=e.$name||"Object",i=Dr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var r=Object.create(i.prototype),n=0,a=Object.keys(e);n<a.length;n+=1){var o=a[n];if("$name"!==o){var s=e[o];r[o]=Dr[t].shallow.indexOf(o)>=0?s:qr(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var Vr=function(){this.first=!0};Vr.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var jr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Gr(e){for(var t=0,i=e;t<i.length;t+=1)if(Kr(i[t].charCodeAt(0)))return!0;return!1}function Kr(e){return!(746!==e&&747!==e&&(e<4352||!(jr["Bopomofo Extended"](e)||jr.Bopomofo(e)||jr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||jr["CJK Compatibility Ideographs"](e)||jr["CJK Compatibility"](e)||jr["CJK Radicals Supplement"](e)||jr["CJK Strokes"](e)||!(!jr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||jr["CJK Unified Ideographs Extension A"](e)||jr["CJK Unified Ideographs"](e)||jr["Enclosed CJK Letters and Months"](e)||jr["Hangul Compatibility Jamo"](e)||jr["Hangul Jamo Extended-A"](e)||jr["Hangul Jamo Extended-B"](e)||jr["Hangul Jamo"](e)||jr["Hangul Syllables"](e)||jr.Hiragana(e)||jr["Ideographic Description Characters"](e)||jr.Kanbun(e)||jr["Kangxi Radicals"](e)||jr["Katakana Phonetic Extensions"](e)||jr.Katakana(e)&&12540!==e||!(!jr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!jr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||jr["Unified Canadian Aboriginal Syllabics"](e)||jr["Unified Canadian Aboriginal Syllabics Extended"](e)||jr["Vertical Forms"](e)||jr["Yijing Hexagram Symbols"](e)||jr["Yi Syllables"](e)||jr["Yi Radicals"](e))))}function Zr(e){return!(Kr(e)||function(e){return!!(jr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||jr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||jr["Letterlike Symbols"](e)||jr["Number Forms"](e)||jr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||jr["Control Pictures"](e)&&9251!==e||jr["Optical Character Recognition"](e)||jr["Enclosed Alphanumerics"](e)||jr["Geometric Shapes"](e)||jr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||jr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||jr["CJK Symbols and Punctuation"](e)||jr.Katakana(e)||jr["Private Use Area"](e)||jr["CJK Compatibility Forms"](e)||jr["Small Form Variants"](e)||jr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Hr(e){return e>=1424&&e<=2303||jr["Arabic Presentation Forms-A"](e)||jr["Arabic Presentation Forms-B"](e)}function Qr(e,t){return!(!t&&Hr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||jr.Khmer(e))}function Wr(e){for(var t=0,i=e;t<i.length;t+=1)if(Hr(i[t].charCodeAt(0)))return!0;return!1}var Jr=null,Xr="unavailable",Yr=null,$r=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Xr="error"),Jr&&Jr(e)};function en(){tn.fire(new ke("pluginStateChange",{pluginStatus:Xr,pluginURL:Yr}))}var tn=new Ie,rn=function(){return Xr},nn=function(){if("deferred"!==Xr||!Yr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xr="loading",en(),Yr&&be({url:Yr},(function(e){e?$r(e):(Xr="loaded",en())}))},an={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Xr||null!=an.applyArabicShaping},isLoading:function(){return"loading"===Xr},setState:function(e){Xr=e.pluginStatus,Yr=e.pluginURL},isParsed:function(){return null!=an.applyArabicShaping&&null!=an.processBidirectionalText&&null!=an.processStyledBidirectionalText},getPluginURL:function(){return Yr}},on=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vr,this.transition={})};on.prototype.isSupportedScript=function(e){return function(e,t){for(var i=0,r=e;i<r.length;i+=1)if(!Qr(r[i].charCodeAt(0),t))return!1;return!0}(e,an.isLoaded())},on.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},on.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var sn=function(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Bi(e))return new Wi(e,t);if(Gi(e)){var i=Qi(e,t);if("error"===i.result)throw new Error(i.value.map((function(e){return e.key+": "+e.message})).join(", "));return i.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=$e.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===t?e.specification.default:t,e.specification)};sn.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},sn.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var ln=function(e){this.property=e,this.value=new sn(e,void 0)};ln.prototype.transitioned=function(e,t){return new cn(this.property,this.value,t,d({},e.transition,this.transition),e.now)},ln.prototype.untransitioned=function(){return new cn(this.property,this.value,null,{},0)};var un=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};un.prototype.getValue=function(e){return x(this._values[e].value.value)},un.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ln(this._values[e].property)),this._values[e].value=new sn(this._values[e].property,null===t?void 0:x(t))},un.prototype.getTransition=function(e){return x(this._values[e].transition)},un.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ln(this._values[e].property)),this._values[e].transition=x(t)||void 0},un.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t],n=this.getValue(r);void 0!==n&&(e[r]=n);var a=this.getTransition(r);void 0!==a&&(e[r+"-transition"]=a)}return e},un.prototype.transitioned=function(e,t){for(var i=new pn(this._properties),r=0,n=Object.keys(this._values);r<n.length;r+=1){var a=n[r];i._values[a]=this._values[a].transitioned(e,t._values[a])}return i},un.prototype.untransitioned=function(){for(var e=new pn(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t];e._values[r]=this._values[r].untransitioned()}return e};var cn=function(e,t,i,r,n){this.property=e,this.value=t,this.begin=n+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};cn.prototype.possiblyEvaluate=function(e,t,i){var r=e.now||0,n=this.value.possiblyEvaluate(e,t,i),a=this.prior;if(a){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return a.possiblyEvaluate(e,t,i);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,i),n,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}(o))}return n};var pn=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};pn.prototype.possiblyEvaluate=function(e,t,i){for(var r=new fn(this._properties),n=0,a=Object.keys(this._values);n<a.length;n+=1){var o=a[n];r._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return r},pn.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var dn=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};dn.prototype.getValue=function(e){return x(this._values[e].value)},dn.prototype.setValue=function(e,t){this._values[e]=new sn(this._values[e].property,null===t?void 0:x(t))},dn.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t],n=this.getValue(r);void 0!==n&&(e[r]=n)}return e},dn.prototype.possiblyEvaluate=function(e,t,i){for(var r=new fn(this._properties),n=0,a=Object.keys(this._values);n<a.length;n+=1){var o=a[n];r._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return r};var hn=function(e,t,i){this.property=e,this.value=t,this.parameters=i};hn.prototype.isConstant=function(){return"constant"===this.value.kind},hn.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},hn.prototype.evaluate=function(e,t,i,r){return this.property.evaluate(this.value,this.parameters,e,t,i,r)};var fn=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};fn.prototype.get=function(e){return this._values[e]};var _n=function(e){this.specification=e};_n.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},_n.prototype.interpolate=function(e,t,i){var r=Gt[this.specification.type];return r?r(e,t,i):e};var mn=function(e,t){this.specification=e,this.overrides=t};mn.prototype.possiblyEvaluate=function(e,t,i,r){return new hn(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,r)}:e.expression,t)},mn.prototype.interpolate=function(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new hn(this,{kind:"constant",value:void 0},e.parameters);var r=Gt[this.specification.type];return r?new hn(this,{kind:"constant",value:r(e.value.value,t.value.value,i)},e.parameters):e},mn.prototype.evaluate=function(e,t,i,r,n,a){return"constant"===e.kind?e.value:e.evaluate(t,i,r,n,a)};var gn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(e,t,i,r){if(void 0===e.value)return new hn(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var n=e.expression.evaluate(t,null,{},i,r),a="resolvedImage"===e.property.specification.type&&"string"!=typeof n?n.name:n,o=this._calculate(a,a,a,t);return new hn(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new hn(this,{kind:"constant",value:s},t)}return new hn(this,e.expression,t)},t.prototype.evaluate=function(e,t,i,r,n,a){if("source"===e.kind){var o=e.evaluate(t,i,r,n,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,r),e.evaluate({zoom:Math.floor(t.zoom)},i,r),e.evaluate({zoom:Math.floor(t.zoom)+1},i,r),t):e.value},t.prototype._calculate=function(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},t.prototype.interpolate=function(e){return e},t}(mn),yn=function(e){this.specification=e};yn.prototype.possiblyEvaluate=function(e,t,i,r){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t,null,{},i,r);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new on(Math.floor(t.zoom-1),t)),e.expression.evaluate(new on(Math.floor(t.zoom),t)),e.expression.evaluate(new on(Math.floor(t.zoom+1),t)),t)}},yn.prototype._calculate=function(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},yn.prototype.interpolate=function(e){return e};var vn=function(e){this.specification=e};vn.prototype.possiblyEvaluate=function(e,t,i,r){return!!e.expression.evaluate(t,null,{},i,r)},vn.prototype.interpolate=function(){return!1};var bn=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var r=this.defaultPropertyValues[t]=new sn(i,void 0),n=this.defaultTransitionablePropertyValues[t]=new ln(i);this.defaultTransitioningPropertyValues[t]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Br("DataDrivenProperty",mn),Br("DataConstantProperty",_n),Br("CrossFadedDataDrivenProperty",gn),Br("CrossFadedProperty",yn),Br("ColorRampProperty",vn);var xn=function(e){function t(t,i){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),i.layout&&(this._unevaluatedLayout=new dn(i.layout)),i.paint)){for(var r in this._transitionablePaint=new un(i.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var n in t.layout)this.setLayoutProperty(n,t.layout[n],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fn(i.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,i){void 0===i&&(i={}),null!=t&&this._validate(Cr,"layers."+this.id+".layout."+e,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)},t.prototype.getPaintProperty=function(e){return y(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,i){if(void 0===i&&(i={}),null!=t&&this._validate(Tr,"layers."+this.id+".paint."+e,e,t,i))return!1;if(y(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var r=this._transitionablePaint._values[e],n="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||n||this._handleOverridablePaintPropertyUpdate(e,o,s)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype._handleOverridablePaintPropertyUpdate=function(e,t,i){return!1},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),b(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},t.prototype._validate=function(e,t,i,r,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Pr(this,e.call(Er,{key:t,layerType:this.type,objectKey:i,value:r,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof hn&&Ri(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(Ie),wn={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Sn=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},An=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function kn(e,t){void 0===t&&(t=1);var i=0,r=0;return{members:e.map((function(e){var n=wn[e.type].BYTES_PER_ELEMENT,a=i=En(i,Math.max(t,n)),o=e.components||1;return r=Math.max(r,n),i+=n*o,{name:e.name,type:e.type,components:o,offset:a}})),size:En(i,Math.max(r,t)),alignment:t}}function En(e,t){return Math.ceil(e/t)*t}An.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},An.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},An.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},An.prototype.clear=function(){this.length=0},An.prototype.resize=function(e){this.reserve(e),this.length=e},An.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},An.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var In=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=i,e},t}(An);In.prototype.bytesPerElement=4,Br("StructArrayLayout2i4",In);var Tn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,n){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,e},t}(An);Tn.prototype.bytesPerElement=8,Br("StructArrayLayout4i8",Tn);var Cn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n,a)},t.prototype.emplace=function(e,t,i,r,n,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,e},t}(An);Cn.prototype.bytesPerElement=12,Br("StructArrayLayout2i4i12",Cn);var Pn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n,a)},t.prototype.emplace=function(e,t,i,r,n,a,o){var s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=n,this.uint8[l+6]=a,this.uint8[l+7]=o,e},t}(An);Pn.prototype.bytesPerElement=8,Br("StructArrayLayout2i4ub8",Pn);var Ln=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=i,e},t}(An);Ln.prototype.bytesPerElement=8,Br("StructArrayLayout2f8",Ln);var Rn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,r,n,a,o,s,l,u)},t.prototype.emplace=function(e,t,i,r,n,a,o,s,l,u,c){var p=10*e;return this.uint16[p+0]=t,this.uint16[p+1]=i,this.uint16[p+2]=r,this.uint16[p+3]=n,this.uint16[p+4]=a,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.uint16[p+8]=u,this.uint16[p+9]=c,e},t}(An);Rn.prototype.bytesPerElement=20,Br("StructArrayLayout10ui20",Rn);var Mn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a,o,s,l,u,c,p){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,i,r,n,a,o,s,l,u,c,p)},t.prototype.emplace=function(e,t,i,r,n,a,o,s,l,u,c,p,d){var h=12*e;return this.int16[h+0]=t,this.int16[h+1]=i,this.int16[h+2]=r,this.int16[h+3]=n,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.int16[h+8]=u,this.int16[h+9]=c,this.int16[h+10]=p,this.int16[h+11]=d,e},t}(An);Mn.prototype.bytesPerElement=24,Br("StructArrayLayout4i4ui4i24",Mn);var zn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var n=3*e;return this.float32[n+0]=t,this.float32[n+1]=i,this.float32[n+2]=r,e},t}(An);zn.prototype.bytesPerElement=12,Br("StructArrayLayout3f12",zn);var Dn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint32[1*e+0]=t,e},t}(An);Dn.prototype.bytesPerElement=4,Br("StructArrayLayout1ul4",Dn);var Bn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a,o,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,r,n,a,o,s,l)},t.prototype.emplace=function(e,t,i,r,n,a,o,s,l,u){var c=10*e,p=5*e;return this.int16[c+0]=t,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=n,this.int16[c+4]=a,this.int16[c+5]=o,this.uint32[p+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,e},t}(An);Bn.prototype.bytesPerElement=20,Br("StructArrayLayout6i1ul2ui20",Bn);var Fn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n,a)},t.prototype.emplace=function(e,t,i,r,n,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=a,this.int16[s+5]=o,e},t}(An);Fn.prototype.bytesPerElement=12,Br("StructArrayLayout2i2i2i12",Fn);var On=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n)},t.prototype.emplace=function(e,t,i,r,n,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=r,this.int16[s+6]=n,this.int16[s+7]=a,e},t}(An);On.prototype.bytesPerElement=16,Br("StructArrayLayout2f1f2i16",On);var Nn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,n){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=i,this.float32[o+1]=r,this.float32[o+2]=n,e},t}(An);Nn.prototype.bytesPerElement=12,Br("StructArrayLayout2ub2f12",Nn);var Un=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=i,this.uint16[n+2]=r,e},t}(An);Un.prototype.bytesPerElement=6,Br("StructArrayLayout3ui6",Un);var qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m){var g=this.length;return this.resize(g+1),this.emplace(g,e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m)},t.prototype.emplace=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m,g){var y=24*e,v=12*e,b=48*e;return this.int16[y+0]=t,this.int16[y+1]=i,this.uint16[y+2]=r,this.uint16[y+3]=n,this.uint32[v+2]=a,this.uint32[v+3]=o,this.uint32[v+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[v+7]=p,this.float32[v+8]=d,this.uint8[b+36]=h,this.uint8[b+37]=f,this.uint8[b+38]=_,this.uint32[v+10]=m,this.int16[y+22]=g,e},t}(An);qn.prototype.bytesPerElement=48,Br("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",qn);var Vn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m,g,y,v,b,x,w,S,A,k,E,I){var T=this.length;return this.resize(T+1),this.emplace(T,e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m,g,y,v,b,x,w,S,A,k,E,I)},t.prototype.emplace=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m,g,y,v,b,x,w,S,A,k,E,I,T){var C=34*e,P=17*e;return this.int16[C+0]=t,this.int16[C+1]=i,this.int16[C+2]=r,this.int16[C+3]=n,this.int16[C+4]=a,this.int16[C+5]=o,this.int16[C+6]=s,this.int16[C+7]=l,this.uint16[C+8]=u,this.uint16[C+9]=c,this.uint16[C+10]=p,this.uint16[C+11]=d,this.uint16[C+12]=h,this.uint16[C+13]=f,this.uint16[C+14]=_,this.uint16[C+15]=m,this.uint16[C+16]=g,this.uint16[C+17]=y,this.uint16[C+18]=v,this.uint16[C+19]=b,this.uint16[C+20]=x,this.uint16[C+21]=w,this.uint16[C+22]=S,this.uint32[P+12]=A,this.float32[P+13]=k,this.float32[P+14]=E,this.float32[P+15]=I,this.float32[P+16]=T,e},t}(An);Vn.prototype.bytesPerElement=68,Br("StructArrayLayout8i15ui1ul4f68",Vn);var jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.float32[1*e+0]=t,e},t}(An);jn.prototype.bytesPerElement=4,Br("StructArrayLayout1f4",jn);var Gn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var n=3*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=r,e},t}(An);Gn.prototype.bytesPerElement=6,Br("StructArrayLayout3i6",Gn);var Kn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var n=4*e;return this.uint32[2*e+0]=t,this.uint16[n+2]=i,this.uint16[n+3]=r,e},t}(An);Kn.prototype.bytesPerElement=8,Br("StructArrayLayout1ul2ui8",Kn);var Zn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=i,e},t}(An);Zn.prototype.bytesPerElement=4,Br("StructArrayLayout2ui4",Zn);var Hn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint16[1*e+0]=t,e},t}(An);Hn.prototype.bytesPerElement=2,Br("StructArrayLayout1ui2",Hn);var Qn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,n){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=r,this.float32[a+3]=n,e},t}(An);Qn.prototype.bytesPerElement=16,Br("StructArrayLayout4f16",Qn);var Wn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new n(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(Sn);Wn.prototype.size=20;var Jn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Wn(this,e)},t}(Bn);Br("CollisionBoxArray",Jn);var Xn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(Sn);Xn.prototype.size=48;var Yn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Xn(this,e)},t}(qn);Br("PlacedSymbolArray",Yn);var $n=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(Sn);$n.prototype.size=68;var ea=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new $n(this,e)},t}(Vn);Br("SymbolInstanceArray",ea);var ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(jn);Br("GlyphOffsetArray",ta);var ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(Gn);Br("SymbolLineVertexArray",ia);var ra=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(Sn);ra.prototype.size=8;var na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new ra(this,e)},t}(Kn);Br("FeatureIndexArray",na);var aa=kn([{name:"a_pos",components:2,type:"Int16"}],4).members,oa=function(e){void 0===e&&(e=[]),this.segments=e};function sa(e,t){return 256*(e=c(Math.floor(e),0,255))+c(Math.floor(t),0,255)}oa.prototype.prepareSegment=function(e,t,i,r){var n=this.segments[this.segments.length-1];return e>oa.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+oa.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!n||n.vertexLength+e>oa.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n},oa.prototype.get=function(){return this.segments},oa.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var r in i.vaos)i.vaos[r].destroy()}},oa.simpleSegment=function(e,t,i,r){return new oa([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},oa.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Br("SegmentVector",oa);var la=kn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ua=t((function(e){e.exports=function(e,t){var i,r,n,a,o,s,l,u;for(r=e.length-(i=3&e.length),n=t,o=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,n=27492+(65535&(a=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}})),ca=t((function(e){e.exports=function(e,t){for(var i,r=e.length,n=t^r,a=0;r>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:n^=(255&e.charCodeAt(a+2))<<16;case 2:n^=(255&e.charCodeAt(a+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(a)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}})),pa=ua,da=ca;pa.murmur3=ua,pa.murmur2=da;var ha=function(){this.ids=[],this.positions=[],this.indexed=!1};ha.prototype.add=function(e,t,i,r){this.ids.push(_a(e)),this.positions.push(t,i,r)},ha.prototype.getPositions=function(e){for(var t=_a(e),i=0,r=this.ids.length-1;i<r;){var n=i+r>>1;this.ids[n]>=t?r=n:i=n+1}for(var a=[];this.ids[i]===t;)a.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return a},ha.serialize=function(e,t){var i=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,i,r,n){for(;r<n;){for(var a=t[r+n>>1],o=r-1,s=n+1;;){do{o++}while(t[o]<a);do{s--}while(t[s]>a);if(o>=s)break;ma(t,o,s),ma(i,3*o,3*s),ma(i,3*o+1,3*s+1),ma(i,3*o+2,3*s+2)}s-r<n-s?(e(t,i,r,s),r=s+1):(e(t,i,s+1,n),n=s)}}(i,r,0,i.length-1),t&&t.push(i.buffer,r.buffer),{ids:i,positions:r}},ha.deserialize=function(e){var t=new ha;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var fa=Math.pow(2,53)-1;function _a(e){var t=+e;return!isNaN(t)&&t<=fa?t:pa(String(e))}function ma(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}Br("FeaturePositionMap",ha);var ga=function(e,t){this.gl=e.gl,this.location=t},ya=function(e){function t(t,i){e.call(this,t,i),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(ga),va=function(e){function t(t,i){e.call(this,t,i),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(ga),ba=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(ga),xa=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(ga),wa=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(ga),Sa=function(e){function t(t,i){e.call(this,t,i),this.current=$e.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(ga),Aa=new Float32Array(16),ka=function(e){function t(t,i){e.call(this,t,i),this.current=Aa}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(ga);function Ea(e){return[sa(255*e.r,255*e.g),sa(255*e.b,255*e.a)]}var Ia=function(e,t,i){this.value=e,this.uniformNames=t.map((function(e){return"u_"+e})),this.type=i};Ia.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},Ia.prototype.getBinding=function(e,t,i){return"color"===this.type?new Sa(e,t):new va(e,t)};var Ta=function(e,t){this.uniformNames=t.map((function(e){return"u_"+e})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ta.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Ta.prototype.setUniform=function(e,t,i,r){var n="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;n&&e.set(n)},Ta.prototype.getBinding=function(e,t,i){return"u_pattern"===i.substr(0,9)?new wa(e,t):new va(e,t)};var Ca=function(e,t,i,r){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};Ca.prototype.populatePaintArray=function(e,t,i,r,n){var a=this.paintVertexArray.length,o=this.expression.evaluate(new on(0),t,{},r,[],n);this.paintVertexArray.resize(e),this._setPaintValue(a,e,o)},Ca.prototype.updatePaintArray=function(e,t,i,r){var n=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(e,t,n)},Ca.prototype._setPaintValue=function(e,t,i){if("color"===this.type)for(var r=Ea(i),n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Ca.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ca.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Pa=function(e,t,i,r,n,a){this.expression=e,this.uniformNames=t.map((function(e){return"u_"+e+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new a};Pa.prototype.populatePaintArray=function(e,t,i,r,n){var a=this.expression.evaluate(new on(this.zoom),t,{},r,[],n),o=this.expression.evaluate(new on(this.zoom+1),t,{},r,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,a,o)},Pa.prototype.updatePaintArray=function(e,t,i,r){var n=this.expression.evaluate({zoom:this.zoom},i,r),a=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(e,t,n,a)},Pa.prototype._setPaintValue=function(e,t,i,r){if("color"===this.type)for(var n=Ea(i),a=Ea(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,n[0],n[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},Pa.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Pa.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=c(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(r)},Pa.prototype.getBinding=function(e,t,i){return new va(e,t)};var La=function(e,t,i,r,n,a){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=r,this.layerId=a,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n};La.prototype.populatePaintArray=function(e,t,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],i)},La.prototype.updatePaintArray=function(e,t,i,r,n){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],n)},La.prototype._setPaintValues=function(e,t,i,r){if(r&&i){var n=r[i.min],a=r[i.mid],o=r[i.max];if(n&&a&&o)for(var s=e;s<t;s++)this.zoomInPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],a.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,a.tl[0],a.tl[1],a.br[0],a.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],a.pixelRatio,o.pixelRatio)}},La.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,la.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,la.members,this.expression.isStateDependent))},La.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ra=function(e,t,i){this.binders={},this._buffers=[];var r=[];for(var n in e.paint._values)if(i(n)){var a=e.paint.get(n);if(a instanceof hn&&Ri(a.property.specification)){var o=za(n,e.type),s=a.value,l=a.property.specification.type,u=a.property.useIntegerZoom,c=a.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[n]=p?new Ta(s.value,o):new Ia(s.value,o,l),r.push("/u_"+n);else if("source"===s.kind||p){var d=Da(n,l,"source");this.binders[n]=p?new La(s,l,u,t,d,e.id):new Ca(s,o,l,d),r.push("/a_"+n)}else{var h=Da(n,l,"composite");this.binders[n]=new Pa(s,o,l,u,t,h),r.push("/z_"+n)}}}this.cacheKey=r.sort().join("")};Ra.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Ca||t instanceof Pa?t.maxValue:0},Ra.prototype.populatePaintArrays=function(e,t,i,r,n){for(var a in this.binders){var o=this.binders[a];(o instanceof Ca||o instanceof Pa||o instanceof La)&&o.populatePaintArray(e,t,i,r,n)}},Ra.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var r=this.binders[i];r instanceof Ta&&r.setConstantPatternPositions(e,t)}},Ra.prototype.updatePaintArrays=function(e,t,i,r,n){var a=!1;for(var o in e)for(var s=0,l=t.getPositions(o);s<l.length;s+=1){var u=l[s],c=i.feature(u.index);for(var p in this.binders){var d=this.binders[p];if((d instanceof Ca||d instanceof Pa||d instanceof La)&&!0===d.expression.isStateDependent){var h=r.paint.get(p);d.expression=h.value,d.updatePaintArray(u.start,u.end,c,e[o],n),a=!0}}}return a},Ra.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof Ia||i instanceof Ta)&&e.push.apply(e,i.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}return e},Ra.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ca||i instanceof Pa)for(var r=0;r<i.paintVertexAttributes.length;r++)e.push(i.paintVertexAttributes[r].name);else if(i instanceof La)for(var n=0;n<la.members.length;n++)e.push(la.members[n].name)}return e},Ra.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Ia||i instanceof Ta||i instanceof Pa)for(var r=0,n=i.uniformNames;r<n.length;r+=1)e.push(n[r])}return e},Ra.prototype.getPaintVertexBuffers=function(){return this._buffers},Ra.prototype.getUniforms=function(e,t){var i=[];for(var r in this.binders){var n=this.binders[r];if(n instanceof Ia||n instanceof Ta||n instanceof Pa)for(var a=0,o=n.uniformNames;a<o.length;a+=1){var s=o[a];if(t[s]){var l=n.getBinding(e,t[s],s);i.push({name:s,property:r,binding:l})}}}return i},Ra.prototype.setUniforms=function(e,t,i,r){for(var n=0,a=t;n<a.length;n+=1){var o=a[n],s=o.name,l=o.property;this.binders[l].setUniform(o.binding,r,i.get(l),s)}},Ra.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof La){var r=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof Ca||i instanceof Pa)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Ra.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Ca||i instanceof Pa||i instanceof La)&&i.upload(e)}this.updatePaintBuffers()},Ra.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Ca||t instanceof Pa||t instanceof La)&&t.destroy()}};var Ma=function(e,t,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,n=e;r<n.length;r+=1){var a=n[r];this.programConfigurations[a.id]=new Ra(a,t,i)}this.needsUpload=!1,this._featureMap=new ha,this._bufferOffset=0};function za(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Da(e,t,i){var r={color:{source:Ln,composite:Qn},number:{source:jn,composite:Ln}},n=function(e){return{"line-pattern":{source:Rn,composite:Rn},"fill-pattern":{source:Rn,composite:Rn},"fill-extrusion-pattern":{source:Rn,composite:Rn}}[e]}(e);return n&&n[i]||r[t][i]}Ma.prototype.populatePaintArrays=function(e,t,i,r,n,a){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,n,a);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Ma.prototype.updatePaintArrays=function(e,t,i,r){for(var n=0,a=i;n<a.length;n+=1){var o=a[n];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r)||this.needsUpload}},Ma.prototype.get=function(e){return this.programConfigurations[e]},Ma.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Ma.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Br("ConstantBinder",Ia),Br("CrossFadedConstantBinder",Ta),Br("SourceExpressionBinder",Ca),Br("CrossFadedCompositeBinder",La),Br("CompositeExpressionBinder",Pa),Br("ProgramConfiguration",Ra,{omit:["_buffers"]}),Br("ProgramConfigurationSet",Ma);var Ba=Math.pow(2,14)-1,Fa=-Ba-1;function Oa(e){for(var t=8192/e.extent,i=e.loadGeometry(),r=0;r<i.length;r++)for(var n=i[r],a=0;a<n.length;a++){var o=n[a],s=Math.round(o.x*t),l=Math.round(o.y*t);o.x=c(s,Fa,Ba),o.y=c(l,Fa,Ba),(s<o.x||s>o.x+1||l<o.y||l>o.y+1)&&S("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Na(e,t,i,r,n){e.emplaceBack(2*t+(r+1)/2,2*i+(n+1)/2)}var Ua=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new In,this.indexArray=new Un,this.segments=new oa,this.programConfigurations=new Ma(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function qa(e,t){for(var i=0;i<e.length;i++)if(Ja(t,e[i]))return!0;for(var r=0;r<t.length;r++)if(Ja(e,t[r]))return!0;return!!Ka(e,t)}function Va(e,t,i){return!!Ja(e,t)||!!Ha(t,e,i)}function ja(e,t){if(1===e.length)return Wa(t,e[0]);for(var i=0;i<t.length;i++)for(var r=t[i],n=0;n<r.length;n++)if(Ja(e,r[n]))return!0;for(var a=0;a<e.length;a++)if(Wa(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(Ka(e,t[o]))return!0;return!1}function Ga(e,t,i){if(e.length>1){if(Ka(e,t))return!0;for(var r=0;r<t.length;r++)if(Ha(t[r],e,i))return!0}for(var n=0;n<e.length;n++)if(Ha(e[n],t,i))return!0;return!1}function Ka(e,t){if(0===e.length||0===t.length)return!1;for(var i=0;i<e.length-1;i++)for(var r=e[i],n=e[i+1],a=0;a<t.length-1;a++)if(Za(r,n,t[a],t[a+1]))return!0;return!1}function Za(e,t,i,r){return A(e,i,r)!==A(t,i,r)&&A(e,t,i)!==A(e,t,r)}function Ha(e,t,i){var r=i*i;if(1===t.length)return e.distSqr(t[0])<r;for(var n=1;n<t.length;n++)if(Qa(e,t[n-1],t[n])<r)return!0;return!1}function Qa(e,t,i){var r=t.distSqr(i);if(0===r)return e.distSqr(t);var n=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/r;return e.distSqr(n<0?t:n>1?i:i.sub(t)._mult(n)._add(t))}function Wa(e,t){for(var i,r,n,a=!1,o=0;o<e.length;o++)for(var s=0,l=(i=e[o]).length-1;s<i.length;l=s++)(r=i[s]).y>t.y!=(n=i[l]).y>t.y&&t.x<(n.x-r.x)*(t.y-r.y)/(n.y-r.y)+r.x&&(a=!a);return a}function Ja(e,t){for(var i=!1,r=0,n=e.length-1;r<e.length;n=r++){var a=e[r],o=e[n];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(i=!i)}return i}function Xa(e,t,i){var r=i[0],n=i[2];if(e.x<r.x&&t.x<r.x||e.x>n.x&&t.x>n.x||e.y<r.y&&t.y<r.y||e.y>n.y&&t.y>n.y)return!1;var a=A(e,t,i[0]);return a!==A(e,t,i[1])||a!==A(e,t,i[2])||a!==A(e,t,i[3])}function Ya(e,t,i){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:i.programConfigurations.get(t.id).getMaxValue(e)}function $a(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function eo(e,t,i,r,a){if(!t[0]&&!t[1])return e;var o=n.convert(t)._mult(a);"viewport"===i&&o._rotate(-r);for(var s=[],l=0;l<e.length;l++)s.push(e[l].sub(o));return s}Ua.prototype.populate=function(e,t,i){var r=this.layers[0],n=[],a=null;"circle"===r.type&&(a=r.layout.get("circle-sort-key"));for(var o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.feature,c=l.id,p=l.index,d=l.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:c,properties:u.properties,geometry:h?Oa(u):[]};if(this.layers[0]._featureFilter.filter(new on(this.zoom),f,i)){h||(f.geometry=Oa(u));var _=a?a.evaluate(f,{},i):void 0;n.push({id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:p,geometry:f.geometry,patterns:{},sortKey:_})}}a&&n.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,g=n;m<g.length;m+=1){var y=g[m],v=y.geometry,b=y.index,x=y.sourceLayerIndex,w=e[b].feature;this.addFeature(y,v,b,i),t.featureIndex.insert(w,v,b,x,this.index)}},Ua.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ua.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ua.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ua.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,aa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ua.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ua.prototype.addFeature=function(e,t,i,r){for(var n=0,a=t;n<a.length;n+=1)for(var o=0,s=a[n];o<s.length;o+=1){var l=s[o],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),d=p.vertexLength;Na(this.layoutVertexArray,u,c,-1,-1),Na(this.layoutVertexArray,u,c,1,-1),Na(this.layoutVertexArray,u,c,1,1),Na(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(d,d+1,d+2),this.indexArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},r)},Br("CircleBucket",Ua,{omit:["layers"]});var to=new bn({"circle-sort-key":new mn(Te.layout_circle["circle-sort-key"])}),io={paint:new bn({"circle-radius":new mn(Te.paint_circle["circle-radius"]),"circle-color":new mn(Te.paint_circle["circle-color"]),"circle-blur":new mn(Te.paint_circle["circle-blur"]),"circle-opacity":new mn(Te.paint_circle["circle-opacity"]),"circle-translate":new _n(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new _n(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new _n(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new _n(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mn(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mn(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mn(Te.paint_circle["circle-stroke-opacity"])}),layout:to},ro="undefined"!=typeof Float32Array?Float32Array:Array;function no(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ao(e,t,i){var r=t[0],n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],h=t[10],f=t[11],_=t[12],m=t[13],g=t[14],y=t[15],v=i[0],b=i[1],x=i[2],w=i[3];return e[0]=v*r+b*s+x*p+w*_,e[1]=v*n+b*l+x*d+w*m,e[2]=v*a+b*u+x*h+w*g,e[3]=v*o+b*c+x*f+w*y,e[4]=(v=i[4])*r+(b=i[5])*s+(x=i[6])*p+(w=i[7])*_,e[5]=v*n+b*l+x*d+w*m,e[6]=v*a+b*u+x*h+w*g,e[7]=v*o+b*c+x*f+w*y,e[8]=(v=i[8])*r+(b=i[9])*s+(x=i[10])*p+(w=i[11])*_,e[9]=v*n+b*l+x*d+w*m,e[10]=v*a+b*u+x*h+w*g,e[11]=v*o+b*c+x*f+w*y,e[12]=(v=i[12])*r+(b=i[13])*s+(x=i[14])*p+(w=i[15])*_,e[13]=v*n+b*l+x*d+w*m,e[14]=v*a+b*u+x*h+w*g,e[15]=v*o+b*c+x*f+w*y,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var oo,so=ao;function lo(e,t,i){var r=t[0],n=t[1],a=t[2],o=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*a+i[12]*o,e[1]=i[1]*r+i[5]*n+i[9]*a+i[13]*o,e[2]=i[2]*r+i[6]*n+i[10]*a+i[14]*o,e[3]=i[3]*r+i[7]*n+i[11]*a+i[15]*o,e}oo=new ro(3),ro!=Float32Array&&(oo[0]=0,oo[1]=0,oo[2]=0),function(){var e=new ro(4);ro!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var uo=(function(){var e=new ro(2);ro!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(t){e.call(this,t,io)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new Ua(e)},t.prototype.queryRadius=function(e){var t=e;return Ya("circle-radius",this,t)+Ya("circle-stroke-width",this,t)+$a(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,n,a,o,s){for(var l=eo(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,o),u=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(e,t){return e.map((function(e){return co(e,t)}))}(l,s),d=c?u*o:u,h=0,f=r;h<f.length;h+=1)for(var _=0,m=f[h];_<m.length;_+=1){var g=m[_],y=c?g:co(g,s),v=d,b=lo([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=a.cameraToCenterDistance/b[3]),Va(p,y,v))return!0}return!1},t}(xn));function co(e,t){var i=lo([],[e.x,e.y,0,1],t);return new n(i[0]/i[3],i[1]/i[3])}var po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Ua);function ho(e,t,i,r){var n=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*a*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*a*i);return e.width=n,e.height=a,e.data=r,e}function fo(e,t,i){var r=t.width,n=t.height;if(r!==e.width||n!==e.height){var a=ho({},{width:r,height:n},i);_o(e,a,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,n)},i),e.width=r,e.height=n,e.data=a.data}}function _o(e,t,i,r,n,a){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<n.height;l++)for(var u=((i.y+l)*e.width+i.x)*a,c=((r.y+l)*t.width+r.x)*a,p=0;p<n.width*a;p++)s[c+p]=o[u+p];return t}Br("HeatmapBucket",po,{omit:["layers"]});var mo=function(e,t){ho(this,e,1,t)};mo.prototype.resize=function(e){fo(this,e,1)},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(e,t,i,r,n){_o(e,t,i,r,n,1)};var go=function(e,t){ho(this,e,4,t)};go.prototype.resize=function(e){fo(this,e,4)},go.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},go.prototype.clone=function(){return new go({width:this.width,height:this.height},new Uint8Array(this.data))},go.copy=function(e,t,i,r,n){_o(e,t,i,r,n,4)},Br("AlphaImage",mo),Br("RGBAImage",go);var yo={paint:new bn({"heatmap-radius":new mn(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mn(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new _n(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vn(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new _n(Te.paint_heatmap["heatmap-opacity"])})};function vo(e){var t={},i=e.resolution||256,r=e.clips?e.clips.length:1,n=e.image||new go({width:i,height:r}),a=function(i,r,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);n.data[i+r+0]=Math.floor(255*o.r/o.a),n.data[i+r+1]=Math.floor(255*o.g/o.a),n.data[i+r+2]=Math.floor(255*o.b/o.a),n.data[i+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*i)for(var l=0,u=0;l<i;l++,u+=4){var c=l/(i-1),p=e.clips[o];a(s,u,p.start*(1-c)+p.end*c)}else for(var d=0,h=0;d<i;d++,h+=4)a(0,h,d/(i-1));return n}var bo=function(e){function t(t){e.call(this,t,yo),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new po(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=vo({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(xn),xo={paint:new bn({"hillshade-illumination-direction":new _n(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new _n(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new _n(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new _n(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new _n(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new _n(Te.paint_hillshade["hillshade-accent-color"])})},wo=function(e){function t(t){e.call(this,t,xo)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(xn),So=kn([{name:"a_pos",components:2,type:"Int16"}],4).members,Ao=Eo,ko=Eo;function Eo(e,t,i){i=i||2;var r,n,a,o,s,l,u,c=t&&t.length,p=c?t[0]*i:e.length,d=Io(e,0,p,i,!0),h=[];if(!d||d.next===d.prev)return h;if(c&&(d=function(e,t,i,r){var n,a,o,s=[];for(n=0,a=t.length;n<a;n++)(o=Io(e,t[n]*r,n<a-1?t[n+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Oo(o));for(s.sort(zo),n=0;n<s.length;n++)Do(s[n],i),i=To(i,i.next);return i}(e,t,d,i)),e.length>80*i){r=a=e[0],n=o=e[1];for(var f=i;f<p;f+=i)(s=e[f])<r&&(r=s),(l=e[f+1])<n&&(n=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-n))?1/u:0}return Co(d,h,i,r,n,u),h}function Io(e,t,i,r,n){var a,o;if(n===Xo(e,t,i,r)>0)for(a=t;a<i;a+=r)o=Qo(a,e[a],e[a+1],o);else for(a=i-r;a>=t;a-=r)o=Qo(a,e[a],e[a+1],o);return o&&Vo(o,o.next)&&(Wo(o),o=o.next),o}function To(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!Vo(r,r.next)&&0!==qo(r.prev,r,r.next))r=r.next;else{if(Wo(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Co(e,t,i,r,n,a,o){if(e){!o&&a&&function(e,t,i,r){var n=e;do{null===n.z&&(n.z=Fo(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,a,o,s,l,u=1;do{for(i=e,e=null,a=null,o=0;i;){for(o++,r=i,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,u*=2}while(o>1)}(n)}(e,r,n,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Lo(e,r,n,a):Po(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),Wo(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Co(e=Ro(To(e),t,i),t,i,r,n,a,2):2===o&&Mo(e,t,i,r,n,a):Co(To(e),t,i,r,n,a,1);break}}}function Po(e){var t=e.prev,i=e,r=e.next;if(qo(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(No(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&qo(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Lo(e,t,i,r){var n=e.prev,a=e,o=e.next;if(qo(n,a,o)>=0)return!1;for(var s=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,l=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,u=Fo(n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,t,i,r),c=Fo(s,l,t,i,r),p=e.prevZ,d=e.nextZ;p&&p.z>=u&&d&&d.z<=c;){if(p!==e.prev&&p!==e.next&&No(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==e.prev&&d!==e.next&&No(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&qo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&No(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&No(n.x,n.y,a.x,a.y,o.x,o.y,d.x,d.y)&&qo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Ro(e,t,i){var r=e;do{var n=r.prev,a=r.next.next;!Vo(n,a)&&jo(n,r,r.next,a)&&Zo(n,a)&&Zo(a,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(a.i/i),Wo(r),Wo(r.next),r=e=a),r=r.next}while(r!==e);return To(r)}function Mo(e,t,i,r,n,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Uo(o,s)){var l=Ho(o,s);return o=To(o,o.next),l=To(l,l.next),Co(o,t,i,r,n,a),void Co(l,t,i,r,n,a)}s=s.next}o=o.next}while(o!==e)}function zo(e,t){return e.x-t.x}function Do(e,t){if(t=function(e,t){var i,r=t,n=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){if(o=s,s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;var l,u=i,c=i.x,p=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&No(a<p?n:o,a,c,p,a<p?o:n,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(n-r.x),Zo(r,e)&&(l<d||l===d&&(r.x>i.x||r.x===i.x&&Bo(i,r)))&&(i=r,d=l)),r=r.next}while(r!==u);return i}(e,t)){var i=Ho(t,e);To(t,t.next),To(i,i.next)}}function Bo(e,t){return qo(e.prev,e,t.prev)<0&&qo(t.next,e,e.next)<0}function Fo(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Oo(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function No(e,t,i,r,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(i-o)*(t-s)>=0&&(i-o)*(a-s)-(n-o)*(r-s)>=0}function Uo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&jo(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Zo(e,t)&&Zo(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(qo(e.prev,e,t.prev)||qo(e,t.prev,t))||Vo(e,t)&&qo(e.prev,e,e.next)>0&&qo(t.prev,t,t.next)>0)}function qo(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Vo(e,t){return e.x===t.x&&e.y===t.y}function jo(e,t,i,r){var n=Ko(qo(e,t,i)),a=Ko(qo(e,t,r)),o=Ko(qo(i,r,e)),s=Ko(qo(i,r,t));return n!==a&&o!==s||!(0!==n||!Go(e,i,t))||!(0!==a||!Go(e,r,t))||!(0!==o||!Go(i,e,r))||!(0!==s||!Go(i,t,r))}function Go(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Ko(e){return e>0?1:e<0?-1:0}function Zo(e,t){return qo(e.prev,e,e.next)<0?qo(e,t,e.next)>=0&&qo(e,e.prev,t)>=0:qo(e,t,e.prev)<0||qo(e,e.next,t)<0}function Ho(e,t){var i=new Jo(e.i,e.x,e.y),r=new Jo(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function Qo(e,t,i,r){var n=new Jo(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Wo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Jo(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xo(e,t,i,r){for(var n=0,a=t,o=i-r;a<i;a+=r)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}function Yo(e,t,i,r,n){!function e(t,i,r,n,a){for(;n>r;){if(n-r>600){var o=n-r+1,s=i-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);e(t,i,Math.max(r,Math.floor(i-s*u/o+c)),Math.min(n,Math.floor(i+(o-s)*u/o+c)),a)}var p=t[i],d=r,h=n;for($o(t,r,i),a(t[n],p)>0&&$o(t,r,n);d<h;){for($o(t,d,h),d++,h--;a(t[d],p)<0;)d++;for(;a(t[h],p)>0;)h--}0===a(t[r],p)?$o(t,r,h):$o(t,++h,n),h<=i&&(r=h+1),i<=h&&(n=h-1)}}(e,t,i||0,r||e.length-1,n||es)}function $o(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function es(e,t){return e<t?-1:e>t?1:0}function ts(e,t){var i=e.length;if(i<=1)return[e];for(var r,n,a=[],o=0;o<i;o++){var s=k(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===n&&(n=s<0),n===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(Yo(a[l],t,1,a[l].length-1,is),a[l]=a[l].slice(0,t));return a}function is(e,t){return t.area-e.area}function rs(e,t,i){for(var r=i.patternDependencies,n=!1,a=0,o=t;a<o.length;a+=1){var s=o[a].paint.get(e+"-pattern");s.isConstant()||(n=!0);var l=s.constantOr(null);l&&(n=!0,r[l.to]=!0,r[l.from]=!0)}return n}function ns(e,t,i,r,n){for(var a=n.patternDependencies,o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.paint.get(e+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},i,{},n.availableImages),p=u.evaluate({zoom:r},i,{},n.availableImages),d=u.evaluate({zoom:r+1},i,{},n.availableImages);p=p&&p.name?p.name:p,d=d&&d.name?d.name:d,a[c=c&&c.name?c.name:c]=!0,a[p]=!0,a[d]=!0,i.patterns[l.id]={min:c,mid:p,max:d}}}return i}Eo.deviation=function(e,t,i,r){var n=t&&t.length,a=Math.abs(Xo(e,0,n?t[0]*i:e.length,i));if(n)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Xo(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i));var l=0;for(o=0;o<r.length;o+=3){var u=r[o]*i,c=r[o+1]*i,p=r[o+2]*i;l+=Math.abs((e[u]-e[p])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[p+1]-e[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},Eo.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)i.vertices.push(e[n][a][o]);n>0&&i.holes.push(r+=e[n-1].length)}return i},Ao.default=ko;var as=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new In,this.indexArray=new Un,this.indexArray2=new Zn,this.programConfigurations=new Ma(e.layers,e.zoom),this.segments=new oa,this.segments2=new oa,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};as.prototype.populate=function(e,t,i){this.hasPattern=rs("fill",this.layers,t);for(var r=this.layers[0].layout.get("fill-sort-key"),n=[],a=0,o=e;a<o.length;a+=1){var s=o[a],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,h={type:l.type,id:u,properties:l.properties,geometry:d?Oa(l):[]};if(this.layers[0]._featureFilter.filter(new on(this.zoom),h,i)){d||(h.geometry=Oa(l));var f=r?r.evaluate(h,{},i,t.availableImages):void 0;n.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _=0,m=n;_<m.length;_+=1){var g=m[_],y=g.geometry,v=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var x=ns("fill",this.layers,g,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(g,y,v,i,{});t.featureIndex.insert(e[v].feature,y,v,b,this.index)}},as.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},as.prototype.addFeatures=function(e,t,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,t,i)}},as.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},as.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},as.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,So),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},as.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},as.prototype.addFeature=function(e,t,i,r,n){for(var a=0,o=ts(t,500);a<o.length;a+=1){for(var s=o[a],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),d=p.vertexLength,h=[],f=[],_=0,m=s;_<m.length;_+=1){var g=m[_];if(0!==g.length){g!==s[0]&&f.push(h.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),h.push(g[0].x),h.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),h.push(g[b].x),h.push(g[b].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=Ao(h,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(d+x[w],d+x[w+1],d+x[w+2]);p.vertexLength+=l,p.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)},Br("FillBucket",as,{omit:["layers","patternFeatures"]});var os=new bn({"fill-sort-key":new mn(Te.layout_fill["fill-sort-key"])}),ss={paint:new bn({"fill-antialias":new _n(Te.paint_fill["fill-antialias"]),"fill-opacity":new mn(Te.paint_fill["fill-opacity"]),"fill-color":new mn(Te.paint_fill["fill-color"]),"fill-outline-color":new mn(Te.paint_fill["fill-outline-color"]),"fill-translate":new _n(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new _n(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new gn(Te.paint_fill["fill-pattern"])}),layout:os},ls=function(e){function t(t){e.call(this,t,ss)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,i){e.prototype.recalculate.call(this,t,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new as(e)},t.prototype.queryRadius=function(){return $a(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,n,a,o){return ja(eo(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,o),r)},t.prototype.isTileClipped=function(){return!0},t}(xn),us=kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cs=ps;function ps(e,t,i,r,n){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=n,e.readFields(ds,this,t)}function ds(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function hs(e){for(var t,i,r=0,n=0,a=e.length,o=a-1;n<a;o=n++)r+=((i=e[o]).x-(t=e[n]).x)*(t.y+i.y);return r}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,r=1,a=0,o=0,s=0,l=[];e.pos<i;){if(a<=0){var u=e.readVarint();r=7&u,a=u>>3}if(a--,1===r||2===r)o+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new n(o,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&l.push(t),l},ps.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,r=0,n=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(n+=e.readSVarint())<o&&(o=n),n>s&&(s=n),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,s,u]},ps.prototype.toGeoJSON=function(e,t,i){var r,n,a=this.extent*Math.pow(2,i),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=ps.types[this.type];function c(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<l.length;r++)p[r]=l[r][0];c(l=p);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,r,n=[],a=0;a<t;a++){var o=hs(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(i&&n.push(i),i=[e[a]]):i.push(e[a]))}return i&&n.push(i),n}(l),r=0;r<l.length;r++)for(n=0;n<l[r].length;n++)c(l[r][n])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var fs=_s;function _s(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ms,this,t),this.length=this._features.length}function ms(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(i))}function gs(e,t,i){if(3===e){var r=new fs(i,i.readVarint()+i.pos);r.length&&(t[r.name]=r)}}_s.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new cs(this._pbf,t,this.extent,this._keys,this._values)};var ys={VectorTile:function(e,t){this.layers=e.readFields(gs,{},t)},VectorTileFeature:cs,VectorTileLayer:fs},vs=ys.VectorTileFeature.types,bs=Math.pow(2,13);function xs(e,t,i,r,n,a,o,s){e.emplaceBack(t,i,2*Math.floor(r*bs)+o,n*bs*2,a*bs*2,Math.round(s))}var ws=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Cn,this.indexArray=new Un,this.programConfigurations=new Ma(e.layers,e.zoom),this.segments=new oa,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Ss(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}ws.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=rs("fill-extrusion",this.layers,t);for(var r=0,n=e;r<n.length;r+=1){var a=n[r],o=a.feature,s=a.id,l=a.index,u=a.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p={type:o.type,id:s,properties:o.properties,geometry:c?Oa(o):[]};if(this.layers[0]._featureFilter.filter(new on(this.zoom),p,i)){var d={id:s,sourceLayerIndex:u,index:l,geometry:c?p.geometry:Oa(o),properties:o.properties,type:o.type,patterns:{}};this.hasPattern?this.features.push(ns("fill-extrusion",this.layers,d,this.zoom,t)):this.addFeature(d,d.geometry,l,i,{}),t.featureIndex.insert(o,d.geometry,l,u,this.index,!0)}}},ws.prototype.addFeatures=function(e,t,i){for(var r=0,n=this.features;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,t,i)}},ws.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,us),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(e,t,i,r,n){for(var a=0,o=ts(t,500);a<o.length;a+=1){for(var s=o[a],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),d=0,h=s;d<h.length;d+=1){var f=h[d];if(0!==f.length&&!((R=f).every((function(e){return e.x<0}))||R.every((function(e){return e.x>8192}))||R.every((function(e){return e.y<0}))||R.every((function(e){return e.y>8192}))))for(var _=0,m=0;m<f.length;m++){var g=f[m];if(m>=1){var y=f[m-1];if(!Ss(g,y)){p.vertexLength+4>oa.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(y)._perp()._unit(),b=y.dist(g);_+b>32768&&(_=0),xs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,_),xs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,_),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,_+=b),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,_);var x=p.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+l>oa.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===vs[e.type]){for(var w=[],S=[],A=p.vertexLength,k=0,E=s;k<E.length;k+=1){var I=E[k];if(0!==I.length){I!==s[0]&&S.push(w.length/2);for(var T=0;T<I.length;T++){var C=I[T];xs(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),w.push(C.x),w.push(C.y)}}}for(var P=Ao(w,S),L=0;L<P.length;L+=3)this.indexArray.emplaceBack(A+P[L],A+P[L+2],A+P[L+1]);p.primitiveLength+=P.length/3,p.vertexLength+=l}}var R;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)},Br("FillExtrusionBucket",ws,{omit:["layers","features"]});var As={paint:new bn({"fill-extrusion-opacity":new _n(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mn(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new _n(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new _n(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new gn(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mn(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mn(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new _n(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ks=function(e){function t(t){e.call(this,t,As)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new ws(e)},t.prototype.queryRadius=function(){return $a(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,i,r,a,o,s,l){var u=eo(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(t,i),p=this.paint.get("fill-extrusion-base").evaluate(t,i),d=function(e,t,i,r){for(var a=[],o=0,s=e;o<s.length;o+=1){var l=s[o],u=[l.x,l.y,0,1];lo(u,u,t),a.push(new n(u[0]/u[3],u[1]/u[3]))}return a}(u,l),h=function(e,t,i,r){for(var a=[],o=[],s=r[8]*t,l=r[9]*t,u=r[10]*t,c=r[11]*t,p=r[8]*i,d=r[9]*i,h=r[10]*i,f=r[11]*i,_=0,m=e;_<m.length;_+=1){for(var g=[],y=[],v=0,b=m[_];v<b.length;v+=1){var x=b[v],w=x.x,S=x.y,A=r[0]*w+r[4]*S+r[12],k=r[1]*w+r[5]*S+r[13],E=r[2]*w+r[6]*S+r[14],I=r[3]*w+r[7]*S+r[15],T=E+u,C=I+c,P=A+p,L=k+d,R=E+h,M=I+f,z=new n((A+s)/C,(k+l)/C);z.z=T/C,g.push(z);var D=new n(P/M,L/M);D.z=R/M,y.push(D)}a.push(g),o.push(y)}return[a,o]}(r,p,c,l);return function(e,t,i){var r=1/0;ja(i,t)&&(r=Is(i,t[0]));for(var n=0;n<t.length;n++)for(var a=t[n],o=e[n],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];qa(i,u)&&(r=Math.min(r,Is(i,u)))}return r!==1/0&&r}(h[0],h[1],d)},t}(xn);function Es(e,t){return e.x*t.x+e.y*t.y}function Is(e,t){if(1===e.length){for(var i,r=0,n=t[r++];!i||n.equals(i);)if(!(i=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],o=e[0],s=i.sub(n),l=a.sub(n),u=o.sub(n),c=Es(s,s),p=Es(s,l),d=Es(l,l),h=Es(u,s),f=Es(u,l),_=c*d-p*p,m=(d*h-p*f)/_,g=(c*f-p*h)/_,y=n.z*(1-m-g)+i.z*m+a.z*g;if(isFinite(y))return y}return 1/0}for(var v=1/0,b=0,x=t;b<x.length;b+=1)v=Math.min(v,x[b].z);return v}var Ts=kn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cs=kn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ps=ys.VectorTileFeature.types,Ls=Math.cos(Math.PI/180*37.5),Rs=Math.pow(2,14)/.5,Ms=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){t.gradients[e.id]={}})),this.layoutVertexArray=new Pn,this.layoutVertexArray2=new Ln,this.indexArray=new Un,this.programConfigurations=new Ma(e.layers,e.zoom),this.segments=new oa,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Ms.prototype.populate=function(e,t,i){this.hasPattern=rs("line",this.layers,t);for(var r=this.layers[0].layout.get("line-sort-key"),n=[],a=0,o=e;a<o.length;a+=1){var s=o[a],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,h={type:l.type,id:u,properties:l.properties,geometry:d?Oa(l):[]};if(this.layers[0]._featureFilter.filter(new on(this.zoom),h,i)){d||(h.geometry=Oa(l));var f=r?r.evaluate(h,{},i):void 0;n.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:h.geometry,patterns:{},sortKey:f})}}r&&n.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _=0,m=n;_<m.length;_+=1){var g=m[_],y=g.geometry,v=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var x=ns("line",this.layers,g,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(g,y,v,i,{});t.featureIndex.insert(e[v].feature,y,v,b,this.index)}},Ms.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ms.prototype.addFeatures=function(e,t,i){for(var r=0,n=this.patternFeatures;r<n.length;r+=1){var a=n[r];this.addFeature(a,a.geometry,a.index,t,i)}},Ms.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ms.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Cs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ms.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ms.prototype.addFeature=function(e,t,i,r,n){var a=this.layers[0].layout,o=a.get("line-join").evaluate(e,{}),s=a.get("line-cap"),l=a.get("line-miter-limit"),u=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var c=0,p=t;c<p.length;c+=1)this.addLine(p[c],e,o,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,r)},Ms.prototype.addLine=function(e,t,i,r,n,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ps[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(n=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,d=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),h=void 0,f=void 0,_=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=e[u].sub(c=e[l-2])._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?s?e[u+1]:void 0:e[g+1])||!e[g].equals(f)){m&&(_=m),c&&(h=c),c=e[g],m=f?f.sub(c)._unit()._perp():_;var y=(_=_||m).add(m);0===y.x&&0===y.y||y._unit();var v=_.x*m.x+_.y*m.y,b=y.x*m.x+y.y*m.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),S=b<Ls&&h&&f,A=_.x*m.y-_.y*m.x>0;if(S&&g>u){var k=c.dist(h);if(k>2*p){var E=c.sub(c.sub(h)._mult(p/k)._round());this.updateDistance(h,E),this.addCurrentVertex(E,_,0,0,d),h=E}}var I=h&&f,T=I?i:s?"butt":r;if(I&&"round"===T&&(x<a?T="miter":x<=2&&(T="fakeround")),"miter"===T&&x>n&&(T="bevel"),"bevel"===T&&(x>2&&(T="flipbevel"),x<n&&(T="miter")),h&&this.updateDistance(h,c),"miter"===T)y._mult(x),this.addCurrentVertex(c,y,0,0,d);else if("flipbevel"===T){if(x>100)y=m.mult(-1);else{var C=x*_.add(m).mag()/_.sub(m).mag();y._perp()._mult(C*(A?-1:1))}this.addCurrentVertex(c,y,0,0,d),this.addCurrentVertex(c,y.mult(-1),0,0,d)}else if("bevel"===T||"fakeround"===T){var P=-Math.sqrt(x*x-1),L=A?P:0,R=A?0:P;if(h&&this.addCurrentVertex(c,_,L,R,d),"fakeround"===T)for(var M=Math.round(180*w/Math.PI/20),z=1;z<M;z++){var D=z/M;if(.5!==D){var B=D-.5;D+=D*B*(D-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*B*B+(.848013+v*(.215638*v-1.06021)))}var F=m.sub(_)._mult(D)._add(_)._unit()._mult(A?-1:1);this.addHalfVertex(c,F.x,F.y,!1,A,0,d)}f&&this.addCurrentVertex(c,m,-L,-R,d)}else if("butt"===T)this.addCurrentVertex(c,y,0,0,d);else if("square"===T){var O=h?1:-1;this.addCurrentVertex(c,y,O,O,d)}else"round"===T&&(h&&(this.addCurrentVertex(c,_,0,0,d),this.addCurrentVertex(c,_,1,1,d,!0)),f&&(this.addCurrentVertex(c,m,-1,-1,d,!0),this.addCurrentVertex(c,m,0,0,d)));if(S&&g<l-1){var N=c.dist(f);if(N>2*p){var U=c.add(f.sub(c)._mult(p/N)._round());this.updateDistance(c,U),this.addCurrentVertex(U,m,0,0,d),c=U}}}}},Ms.prototype.addCurrentVertex=function(e,t,i,r,n,a){void 0===a&&(a=!1);var o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,a,!1,i,n),this.addHalfVertex(e,o,s,a,!0,-r,n),this.distance>Rs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,i,r,n,a))},Ms.prototype.addHalfVertex=function(e,t,i,r,n,a,o){var s=.5*(this.lineClips?this.scaledDistance*(Rs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(r?1:0),(e.y<<1)+(n?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(0===a?0:a<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),n?this.e2=l:this.e1=l},Ms.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ms.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Br("LineBucket",Ms,{omit:["layers","patternFeatures"]});var zs=new bn({"line-cap":new _n(Te.layout_line["line-cap"]),"line-join":new mn(Te.layout_line["line-join"]),"line-miter-limit":new _n(Te.layout_line["line-miter-limit"]),"line-round-limit":new _n(Te.layout_line["line-round-limit"]),"line-sort-key":new mn(Te.layout_line["line-sort-key"])}),Ds={paint:new bn({"line-opacity":new mn(Te.paint_line["line-opacity"]),"line-color":new mn(Te.paint_line["line-color"]),"line-translate":new _n(Te.paint_line["line-translate"]),"line-translate-anchor":new _n(Te.paint_line["line-translate-anchor"]),"line-width":new mn(Te.paint_line["line-width"]),"line-gap-width":new mn(Te.paint_line["line-gap-width"]),"line-offset":new mn(Te.paint_line["line-offset"]),"line-blur":new mn(Te.paint_line["line-blur"]),"line-dasharray":new yn(Te.paint_line["line-dasharray"]),"line-pattern":new gn(Te.paint_line["line-pattern"]),"line-gradient":new vn(Te.paint_line["line-gradient"])}),layout:zs},Bs=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(t,i){return i=new on(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),e.prototype.possiblyEvaluate.call(this,t,i)},t.prototype.evaluate=function(t,i,r,n){return i=d({},i,{zoom:Math.floor(i.zoom)}),e.prototype.evaluate.call(this,t,i,r,n)},t}(mn))(Ds.paint.properties["line-width"].specification);Bs.useIntegerZoom=!0;var Fs=function(e){function t(t){e.call(this,t,Ds),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Vt,this.gradientVersion=(this.gradientVersion+1)%s)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(t,i){e.prototype.recalculate.call(this,t,i),this.paint._values["line-floorwidth"]=Bs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new Ms(e)},t.prototype.queryRadius=function(e){var t=e,i=Os(Ya("line-width",this,t),Ya("line-gap-width",this,t)),r=Ya("line-offset",this,t);return i/2+Math.abs(r)+$a(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,a,o,s){var l=eo(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),u=s/2*Os(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),c=this.paint.get("line-offset").evaluate(t,i);return c&&(r=function(e,t){for(var i=[],r=new n(0,0),a=0;a<e.length;a++){for(var o=e[a],s=[],l=0;l<o.length;l++){var u=o[l],c=o[l+1],p=0===l?r:u.sub(o[l-1])._unit()._perp(),d=l===o.length-1?r:c.sub(u)._unit()._perp(),h=p._add(d)._unit();h._mult(1/(h.x*d.x+h.y*d.y)),s.push(h._mult(t)._add(u))}i.push(s)}return i}(r,c*s)),function(e,t,i){for(var r=0;r<t.length;r++){var n=t[r];if(e.length>=3)for(var a=0;a<n.length;a++)if(Ja(e,n[a]))return!0;if(Ga(e,n,i))return!0}return!1}(l,r,u)},t.prototype.isTileClipped=function(){return!0},t}(xn);function Os(e,t){return t>0?t+2*e:e}var Ns=kn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Us=kn([{name:"a_projected_pos",components:3,type:"Float32"}],4),qs=(kn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),kn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Vs=(kn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),js=kn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gs(e,t,i){return e.sections.forEach((function(e){e.text=function(e,t,i){var r=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),an.applyArabicShaping&&(e=an.applyArabicShaping(e)),e}(e.text,t,i)})),e}kn([{name:"triangle",components:3,type:"Uint16"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kn([{type:"Float32",name:"offsetX"}]),kn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ks={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Zs=function(e,t,i,r,n){var a,o,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=i?n-1:0,d=i?-1:1,h=e[t+p];for(p+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+p],p+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+p],p+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},Hs=function(e,t,i,r,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,p=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,f=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=c?(s=0,o=c):o+p>=1?(s=(t*l-1)*Math.pow(2,n),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,n),o=0));n>=8;e[i+h]=255&s,h+=f,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[i+h]=255&o,h+=f,o/=256,u-=8);e[i+h-f]|=128*_},Qs=Ws;function Ws(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ws.Varint=0,Ws.Fixed64=1,Ws.Bytes=2,Ws.Fixed32=5;var Js="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Xs(e){return e.type===Ws.Bytes?e.readVarint()+e.pos:e.pos+1}function Ys(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function $s(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=e;n--)i.buf[n+r]=i.buf[n]}function el(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function tl(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function il(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function rl(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function nl(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function al(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function ol(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function sl(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function ll(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function ul(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function cl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function pl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function dl(e,t,i){1===e&&i.readMessage(hl,t)}function hl(e,t,i){if(3===e){var r=i.readMessage(fl,{}),n=r.width,a=r.height,o=r.left,s=r.top,l=r.advance;t.push({id:r.id,bitmap:new mo({width:n+6,height:a+6},r.bitmap),metrics:{width:n,height:a,left:o,top:s,advance:l}})}}function fl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function _l(e){for(var t=0,i=0,r=0,n=e;r<n.length;r+=1){var a=n[r];t+=a.w*a.h,i=Math.max(i,a.w)}e.sort((function(e,t){return t.h-e.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],d=o.length-1;d>=0;d--){var h=o[d];if(!(p.w>h.w||p.h>h.h)){if(p.x=h.x,p.y=h.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===h.w&&p.h===h.h){var f=o.pop();d<o.length&&(o[d]=f)}else p.h===h.h?(h.x+=p.w,h.w-=p.w):p.w===h.w?(h.y+=p.h,h.h-=p.h):(o.push({x:h.x+p.w,y:h.y,w:h.w-p.w,h:p.h}),h.y+=p.h,h.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}Ws.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,a=this.pos;this.type=7&r,e(n,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ul(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=pl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ul(this.buf,this.pos)+4294967296*ul(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=ul(this.buf,this.pos)+4294967296*pl(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,n,a=i.buf;if(r=(112&(n=a[i.pos++]))>>4,n<128)return Ys(e,r,t);if(r|=(127&(n=a[i.pos++]))<<3,n<128)return Ys(e,r,t);if(r|=(127&(n=a[i.pos++]))<<10,n<128)return Ys(e,r,t);if(r|=(127&(n=a[i.pos++]))<<17,n<128)return Ys(e,r,t);if(r|=(127&(n=a[i.pos++]))<<24,n<128)return Ys(e,r,t);if(r|=(1&(n=a[i.pos++]))<<31,n<128)return Ys(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Js?function(e,t,i){return Js.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var r="",n=t;n<i;){var a,o,s,l=e[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[n+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=e[n+2],128==(192&(a=e[n+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[n+2],s=e[n+3],128==(192&(a=e[n+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ws.Bytes)return e.push(this.readVarint(t));var i=Xs(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSVarint());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ws.Bytes)return e.push(this.readBoolean());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFloat());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ws.Bytes)return e.push(this.readDouble());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ws.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ws.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ws.Fixed32)this.pos+=4;else{if(t!==Ws.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;if(e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,n,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!n){r>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&$s(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Hs(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Hs(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&$s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,i){this.writeTag(e,Ws.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,el,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,tl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,nl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,il,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,rl,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,al,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ol,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,sl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ll,t)},writeBytesField:function(e,t){this.writeTag(e,Ws.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ws.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ws.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ws.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ml=function(e,t){var i=t.pixelRatio,r=t.version,n=t.stretchX,a=t.stretchY,o=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=n,this.stretchY=a,this.content=o,this.version=r},gl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},gl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},gl.tlbr.get=function(){return this.tl.concat(this.br)},gl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ml.prototype,gl);var yl=function(e,t){var i={},r={};this.haveRenderCallbacks=[];var n=[];this.addImages(e,i,n),this.addImages(t,r,n);var a=_l(n),o=new go({width:a.w||1,height:a.h||1});for(var s in e){var l=e[s],u=i[s].paddedRect;go.copy(l.data,o,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in t){var p=t[c],d=r[c].paddedRect,h=d.x+1,f=d.y+1,_=p.data.width,m=p.data.height;go.copy(p.data,o,{x:0,y:0},{x:h,y:f},p.data),go.copy(p.data,o,{x:0,y:m-1},{x:h,y:f-1},{width:_,height:1}),go.copy(p.data,o,{x:0,y:0},{x:h,y:f+m},{width:_,height:1}),go.copy(p.data,o,{x:_-1,y:0},{x:h-1,y:f},{width:1,height:m}),go.copy(p.data,o,{x:0,y:0},{x:h+_,y:f},{width:1,height:m})}this.image=o,this.iconPositions=i,this.patternPositions=r};yl.prototype.addImages=function(e,t,i){for(var r in e){var n=e[r],a={x:0,y:0,w:n.data.width+2,h:n.data.height+2};i.push(a),t[r]=new ml(a,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},yl.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},yl.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var r=e.tl;i.update(t.data,void 0,{x:r[0],y:r[1]})}},Br("ImagePosition",ml),Br("ImageAtlas",yl);var vl={horizontal:1,vertical:2,horizontalOnly:3},bl=function(){this.scale=1,this.fontStack="",this.imageName=null};bl.forText=function(e,t){var i=new bl;return i.scale=e||1,i.fontStack=t,i},bl.forImage=function(e){var t=new bl;return t.imageName=e,t};var xl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wl(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_){var m,g=xl.fromFeature(e,n);p===vl.vertical&&g.verticalizePunctuation();var y=an.processBidirectionalText,v=an.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var b=0,x=y(g.toString(),Cl(g,u,a,t,r,h,f));b<x.length;b+=1){var w=x[b],S=new xl;S.text=w,S.sections=g.sections;for(var A=0;A<w.length;A++)S.sectionIndex.push(0);m.push(S)}}else if(v){m=[];for(var k=0,E=v(g.text,g.sectionIndex,Cl(g,u,a,t,r,h,f));k<E.length;k+=1){var I=E[k],T=new xl;T.text=I[0],T.sectionIndex=I[1],T.sections=g.sections,m.push(T)}}else m=function(e,t){for(var i=[],r=e.text,n=0,a=0,o=t;a<o.length;a+=1){var s=o[a];i.push(e.substring(n,s)),n=s}return n<r.length&&i.push(e.substring(n,r.length)),i}(g,Cl(g,u,a,t,r,h,f));var C=[],P={positionedLines:C,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(e,t,i,r,n,a,o,s,l,u,c,p){for(var d=0,h=-17,f=0,_=0,m="right"===s?1:"left"===s?0:.5,g=0,y=0,v=n;y<v.length;y+=1){var b=v[y];b.trim();var x=b.getMaxScale(),w=24*(x-1),S={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=S;var A=S.positionedGlyphs,k=0;if(b.length()){for(var E=0;E<b.length();E++){var I=b.getSection(E),T=b.getSectionIndex(E),C=b.getCharCode(E),P=0,L=null,R=null,M=null,z=24,D=!(l===vl.horizontal||!c&&!Kr(C)||c&&(Sl[C]||(G=C,jr.Arabic(G)||jr["Arabic Supplement"](G)||jr["Arabic Extended-A"](G)||jr["Arabic Presentation Forms-A"](G)||jr["Arabic Presentation Forms-B"](G))));if(I.imageName){var B=r[I.imageName];if(!B)continue;M=I.imageName,e.iconsInText=e.iconsInText||!0,R=B.paddedRect;var F=B.displaySize;I.scale=24*I.scale/p,P=w+(24-F[1]*I.scale),z=(L={width:F[0],height:F[1],left:1,top:-3,advance:D?F[1]:F[0]}).advance;var O=D?F[0]*I.scale-24*x:F[1]*I.scale-24*x;O>0&&O>k&&(k=O)}else{var N=i[I.fontStack],U=N&&N[C];if(U&&U.rect)R=U.rect,L=U.metrics;else{var q=t[I.fontStack],V=q&&q[C];if(!V)continue;L=V.metrics}P=24*(x-I.scale)}D?(e.verticalizable=!0,A.push({glyph:C,imageName:M,x:d,y:h+P,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:R}),d+=z*I.scale+u):(A.push({glyph:C,imageName:M,x:d,y:h+P,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:R}),d+=L.advance*I.scale+u)}0!==A.length&&(f=Math.max(d-u,f),Ll(A,0,A.length-1,m,k)),d=0;var j=a*x+k;S.lineOffset=Math.max(k,w),h+=j,_=Math.max(j,_),++g}else h+=a,++g}var G,K=h- -17,Z=Pl(o),H=Z.horizontalAlign,Q=Z.verticalAlign;(function(e,t,i,r,n,a,o,s,l){var u,c=(t-i)*n;u=a!==o?-s*r- -17:(-r*l+.5)*o;for(var p=0,d=e;p<d.length;p+=1)for(var h=0,f=d[p].positionedGlyphs;h<f.length;h+=1){var _=f[h];_.x+=c,_.y+=u}})(e.positionedLines,m,H,Q,f,_,a,K,n.length),e.top+=-Q*K,e.bottom=e.top+K,e.left+=-H*f,e.right=e.left+f}(P,t,i,r,m,o,s,l,p,u,d,_),!function(e){for(var t=0,i=e;t<i.length;t+=1)if(0!==i[t].positionedGlyphs.length)return!1;return!0}(C)&&P}xl.fromFeature=function(e,t){for(var i=new xl,r=0;r<e.sections.length;r++){var n=e.sections[r];n.image?i.addImageSection(n):i.addTextSection(n,t)}return i},xl.prototype.length=function(){return this.text.length},xl.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xl.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},xl.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xl.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i+1)||null,n=e.charCodeAt(i-1)||null;t+=r&&Zr(r)&&!Ks[e[i+1]]||n&&Zr(n)&&!Ks[e[i-1]]||!Ks[e[i]]?e[i]:Ks[e[i]]}return t}(this.text)},xl.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Sl[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Sl[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},xl.prototype.substring=function(e,t){var i=new xl;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},xl.prototype.toString=function(){return this.text},xl.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,i){return Math.max(t,e.sections[i].scale)}),0)},xl.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(bl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(i)},xl.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(0!==t.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(bl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},xl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Sl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Al={};function kl(e,t,i,r,n,a){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*24/a+n:0}var s=i[t.fontStack],l=s&&s[e];return l?l.metrics.advance*t.scale+n:0}function El(e,t,i,r){var n=Math.pow(e-t,2);return r?e<t?n/2:2*n:n+Math.abs(i)*i}function Il(e,t,i){var r=0;return 10===e&&(r-=1e4),i&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Tl(e,t,i,r,n,a){for(var o=null,s=El(t,i,n,a),l=0,u=r;l<u.length;l+=1){var c=u[l],p=El(t-c.x,i,n,a)+c.badness;p<=s&&(o=c,s=p)}return{index:e,x:t,priorBreak:o,badness:s}}function Cl(e,t,i,r,n,a,o){if("point"!==a)return[];if(!e)return[];for(var s,l=[],u=function(e,t,i,r,n,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=kl(e.getCharCode(s),l,r,n,t,a)}return o/Math.max(1,Math.ceil(o/i))}(e,t,i,r,n,o),c=e.text.indexOf("")>=0,p=0,d=0;d<e.length();d++){var h=e.getSection(d),f=e.getCharCode(d);if(Sl[f]||(p+=kl(f,h,r,n,t,o)),d<e.length()-1){var _=!((s=f)<11904||!(jr["Bopomofo Extended"](s)||jr.Bopomofo(s)||jr["CJK Compatibility Forms"](s)||jr["CJK Compatibility Ideographs"](s)||jr["CJK Compatibility"](s)||jr["CJK Radicals Supplement"](s)||jr["CJK Strokes"](s)||jr["CJK Symbols and Punctuation"](s)||jr["CJK Unified Ideographs Extension A"](s)||jr["CJK Unified Ideographs"](s)||jr["Enclosed CJK Letters and Months"](s)||jr["Halfwidth and Fullwidth Forms"](s)||jr.Hiragana(s)||jr["Ideographic Description Characters"](s)||jr["Kangxi Radicals"](s)||jr["Katakana Phonetic Extensions"](s)||jr.Katakana(s)||jr["Vertical Forms"](s)||jr["Yi Radicals"](s)||jr["Yi Syllables"](s)));(Al[f]||_||h.imageName)&&l.push(Tl(d+1,p,u,l,Il(f,e.getCharCode(d+1),_&&c),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Tl(e.length(),p,u,l,0,!0))}function Pl(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Ll(e,t,i,r,n){if(r||n)for(var a=e[i],o=(e[i].x+a.metrics.advance*a.scale)*r,s=t;s<=i;s++)e[s].x-=o,e[s].y+=n}function Rl(e,t,i,r,n,a){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,p,d,h,f=t.left*a,_=t.right*a;"width"===i||"both"===i?(h=n[0]+f-r[3],p=n[0]+_+r[1]):p=(h=n[0]+(f+_-s.displaySize[0])/2)+s.displaySize[0];var m=t.top*a,g=t.bottom*a;return"height"===i||"both"===i?(c=n[1]+m-r[0],d=n[1]+g+r[2]):d=(c=n[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:p,bottom:d,left:h,collisionPadding:o}}Al[10]=!0,Al[32]=!0,Al[38]=!0,Al[40]=!0,Al[41]=!0,Al[43]=!0,Al[45]=!0,Al[47]=!0,Al[173]=!0,Al[183]=!0,Al[8203]=!0,Al[8208]=!0,Al[8211]=!0,Al[8231]=!0;var Ml=function(e){function t(t,i,r,n){e.call(this,t,i),this.angle=r,void 0!==n&&(this.segment=n)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(n);function zl(e,t){var i=t.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new on(e+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,n=i.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[a],l=r[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new on(s)),maxSize:i.evaluate(new on(l)),interpolationType:n}}function Dl(e,t,i){var r=t.uSize,n=i.lowerSize;return"source"===e.kind?n/128:"composite"===e.kind?jt(n/128,i.upperSize/128,t.uSizeT):r}function Bl(e,t){var i=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var n=e.interpolationType,a=n?c(ni.interpolationFactor(n,t,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?r=jt(e.minSize,e.maxSize,a):i=a}return{uSizeT:i,uSize:r}}Br("Anchor",Ml);var Fl=Object.freeze({__proto__:null,getSizeData:zl,evaluateSizeForFeature:Dl,evaluateSizeForZoom:Bl,SIZE_PACK_FACTOR:128});function Ol(e,t,i,r,n){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-i/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<i/2;){var c=e[o],p=e[o+1];if(!p)return!1;var d=e[o-1].angleTo(c)-c.angleTo(p);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>n)return!1;o++,s+=c.dist(p)}return!0}function Nl(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Ul(e,t,i){return e?.6*t*i:0}function ql(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Vl(e,t,i,r,n,a){for(var o=Ul(i,n,a),s=ql(i,r)*a,l=0,u=Nl(e)/2,c=0;c<e.length-1;c++){var p=e[c],d=e[c+1],h=p.dist(d);if(l+h>u){var f=(u-l)/h,_=jt(p.x,d.x,f),m=jt(p.y,d.y,f),g=new Ml(_,m,d.angleTo(p),c);return g._round(),!o||Ol(e,g,s,o,t)?g:void 0}l+=h}}function jl(e,t,i,r,n,a,o,s,l){var u=Ul(r,a,o),c=ql(r,n),p=c*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-p<t/4&&(t=p+t/4),function e(t,i,r,n,a,o,s,l,u){for(var c=o/2,p=Nl(t),d=0,h=i-r,f=[],_=0;_<t.length-1;_++){for(var m=t[_],g=t[_+1],y=m.dist(g),v=g.angleTo(m);h+r<d+y;){var b=((h+=r)-d)/y,x=jt(m.x,g.x,b),w=jt(m.y,g.y,b);if(x>=0&&x<u&&w>=0&&w<u&&h-c>=0&&h+c<=p){var S=new Ml(x,w,v,_);S._round(),n&&!Ol(t,S,o,n,a)||f.push(S)}}d+=y}return l||f.length||s||(f=e(t,d/2,r,n,a,o,s,!0,u)),f}(e,d?t/2*s%t:(c/2+2*a)*o*s%t,t,u,i,p,d,!1,l)}function Gl(e,t,i,r,a){for(var o=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],d=l[c+1];p.x<t&&d.x<t||(p.x<t?p=new n(t,p.y+(t-p.x)/(d.x-p.x)*(d.y-p.y))._round():d.x<t&&(d=new n(t,p.y+(t-p.x)/(d.x-p.x)*(d.y-p.y))._round()),p.y<i&&d.y<i||(p.y<i?p=new n(p.x+(i-p.y)/(d.y-p.y)*(d.x-p.x),i)._round():d.y<i&&(d=new n(p.x+(i-p.y)/(d.y-p.y)*(d.x-p.x),i)._round()),p.x>=r&&d.x>=r||(p.x>=r?p=new n(r,p.y+(r-p.x)/(d.x-p.x)*(d.y-p.y))._round():d.x>=r&&(d=new n(r,p.y+(r-p.x)/(d.x-p.x)*(d.y-p.y))._round()),p.y>=a&&d.y>=a||(p.y>=a?p=new n(p.x+(a-p.y)/(d.y-p.y)*(d.x-p.x),a)._round():d.y>=a&&(d=new n(p.x+(a-p.y)/(d.y-p.y)*(d.x-p.x),a)._round()),u&&p.equals(u[u.length-1])||o.push(u=[p]),u.push(d)))))}return o}function Kl(e,t,i,r){var a=[],o=e.image,s=o.pixelRatio,l=o.paddedRect.w-2,u=o.paddedRect.h-2,c=e.right-e.left,p=e.bottom-e.top,d=o.stretchX||[[0,l]],h=o.stretchY||[[0,u]],f=function(e,t){return e+t[1]-t[0]},_=d.reduce(f,0),m=h.reduce(f,0),g=l-_,y=u-m,v=0,b=_,x=0,w=m,S=0,A=g,k=0,E=y;if(o.content&&r){var I=o.content;v=Zl(d,0,I[0]),x=Zl(h,0,I[1]),b=Zl(d,I[0],I[2]),w=Zl(h,I[1],I[3]),S=I[0]-v,k=I[1]-x,A=I[2]-I[0]-b,E=I[3]-I[1]-w}var T=function(r,a,l,u){var d=Ql(r.stretch-v,b,c,e.left),h=Wl(r.fixed-S,A,r.stretch,_),f=Ql(a.stretch-x,w,p,e.top),g=Wl(a.fixed-k,E,a.stretch,m),y=Ql(l.stretch-v,b,c,e.left),I=Wl(l.fixed-S,A,l.stretch,_),T=Ql(u.stretch-x,w,p,e.top),C=Wl(u.fixed-k,E,u.stretch,m),P=new n(d,f),L=new n(y,f),R=new n(y,T),M=new n(d,T),z=new n(h/s,g/s),D=new n(I/s,C/s),B=t*Math.PI/180;if(B){var F=Math.sin(B),O=Math.cos(B),N=[O,-F,F,O];P._matMult(N),L._matMult(N),M._matMult(N),R._matMult(N)}var U=r.stretch+r.fixed,q=a.stretch+a.fixed;return{tl:P,tr:L,bl:M,br:R,tex:{x:o.paddedRect.x+1+U,y:o.paddedRect.y+1+q,w:l.stretch+l.fixed-U,h:u.stretch+u.fixed-q},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:D,minFontScaleX:A/s/c,minFontScaleY:E/s/p,isSDF:i}};if(r&&(o.stretchX||o.stretchY))for(var C=Hl(d,g,_),P=Hl(h,y,m),L=0;L<C.length-1;L++)for(var R=C[L],M=C[L+1],z=0;z<P.length-1;z++)a.push(T(R,P[z],M,P[z+1]));else a.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return a}function Zl(e,t,i){for(var r=0,n=0,a=e;n<a.length;n+=1){var o=a[n];r+=Math.max(t,Math.min(i,o[1]))-Math.max(t,Math.min(i,o[0]))}return r}function Hl(e,t,i){for(var r=[{fixed:-1,stretch:0}],n=0,a=e;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],u=r[r.length-1];r.push({fixed:s-u.stretch,stretch:u.stretch}),r.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return r.push({fixed:t+1,stretch:i}),r}function Ql(e,t,i,r){return e/t*i+r}function Wl(e,t,i,r){return e-t*i/r}var Jl=function(e,t,i,r,a,o,s,l,u,c){if(this.boxStartIndex=e.length,u){var p=o.top,d=o.bottom,h=o.collisionPadding;h&&(p-=h[1],d+=h[3]);var f=d-p;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var _=o.top*s-l,m=o.bottom*s+l,g=o.left*s-l,y=o.right*s+l,v=o.collisionPadding;if(v&&(g-=v[0]*s,_-=v[1]*s,y+=v[2]*s,m+=v[3]*s),c){var b=new n(g,_),x=new n(y,_),w=new n(g,m),S=new n(y,m),A=c*Math.PI/180;b._rotate(A),x._rotate(A),w._rotate(A),S._rotate(A),g=Math.min(b.x,x.x,w.x,S.x),y=Math.max(b.x,x.x,w.x,S.x),_=Math.min(b.y,x.y,w.y,S.y),m=Math.max(b.y,x.y,w.y,S.y)}e.emplaceBack(t.x,t.y,g,_,y,m,i,r,a)}this.boxEndIndex=e.length},Xl=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=Yl),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Yl(e,t){return e<t?-1:e>t?1:0}function $l(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!1);for(var r=1/0,a=1/0,o=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<a)&&(a=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var p=Math.min(o-r,s-a),d=p/2,h=new Xl([],eu);if(0===p)return new n(r,a);for(var f=r;f<o;f+=p)for(var _=a;_<s;_+=p)h.push(new tu(f+d,_+d,d,e));for(var m=function(e){for(var t=0,i=0,r=0,n=e[0],a=0,o=n.length,s=o-1;a<o;s=a++){var l=n[a],u=n[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new tu(i/t,r/t,0,e)}(e),g=h.length;h.length;){var y=h.pop();(y.d>m.d||!m.d)&&(m=y,i&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),y.max-m.d<=t||(h.push(new tu(y.p.x-(d=y.h/2),y.p.y-d,d,e)),h.push(new tu(y.p.x+d,y.p.y-d,d,e)),h.push(new tu(y.p.x-d,y.p.y+d,d,e)),h.push(new tu(y.p.x+d,y.p.y+d,d,e)),g+=4)}return i&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function eu(e,t){return t.max-e.max}function tu(e,t,i,r){this.p=new n(e,t),this.h=i,this.d=function(e,t){for(var i=!1,r=1/0,n=0;n<t.length;n++)for(var a=t[n],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(i=!i),r=Math.min(r,Qa(e,u,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Xl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Xl.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Xl.prototype.peek=function(){return this.data[0]},Xl.prototype._up=function(e){for(var t=this.data,i=this.compare,r=t[e];e>0;){var n=e-1>>1,a=t[n];if(i(r,a)>=0)break;t[e]=a,e=n}t[e]=r},Xl.prototype._down=function(e){for(var t=this.data,i=this.compare,r=this.length>>1,n=t[e];e<r;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&i(t[s],o)<0&&(a=s,o=t[s]),i(o,n)>=0)break;t[e]=o,e=a}t[e]=n};var iu=Number.POSITIVE_INFINITY;function ru(e,t){return t[1]!==iu?function(e,t,i){var r=0,n=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":n=i-7;break;case"bottom-right":case"bottom-left":case"bottom":n=7-i}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,n]}(e,t[0],t[1]):function(e,t){var i=0,r=0;t<0&&(t=0);var n=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=t;break;case"right":i=-t}return[i,r]}(e,t[0])}function nu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function au(e,t,i,r,a,o,s,l,u,c,p,d,h,f,_){var m=function(e,t,i,r,a,o,s,l){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],p=0,d=t.positionedLines;p<d.length;p+=1)for(var h=d[p],f=0,_=h.positionedGlyphs;f<_.length;f+=1){var m=_[f];if(m.rect){var g=m.rect||{},y=4,v=!0,b=1,x=0,w=(a||l)&&m.vertical,S=m.metrics.advance*m.scale/2;if(l&&t.verticalizable&&(x=h.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var A=s[m.imageName];v=A.sdf,y=1/(b=A.pixelRatio)}var k=a?[m.x+S,m.y]:[0,0],E=a?[0,0]:[m.x+S+i[0],m.y+i[1]-x],I=[0,0];w&&(I=E,E=[0,0]);var T=(m.metrics.left-y)*m.scale-S+E[0],C=(-m.metrics.top-y)*m.scale+E[1],P=T+g.w*m.scale/b,L=C+g.h*m.scale/b,R=new n(T,C),M=new n(P,C),z=new n(T,L),D=new n(P,L);if(w){var B=new n(-S,S- -17),F=-Math.PI/2,O=12-S,N=new n(22-O,-(m.imageName?O:0)),U=new(Function.prototype.bind.apply(n,[null].concat(I)));R._rotateAround(F,B)._add(N)._add(U),M._rotateAround(F,B)._add(N)._add(U),z._rotateAround(F,B)._add(N)._add(U),D._rotateAround(F,B)._add(N)._add(U)}if(u){var q=Math.sin(u),V=Math.cos(u),j=[V,-q,q,V];R._matMult(j),M._matMult(j),z._matMult(j),D._matMult(j)}var G=new n(0,0),K=new n(0,0);c.push({tl:R,tr:M,bl:z,br:D,tex:g,writingMode:t.writingMode,glyphOffset:k,sectionIndex:m.sectionIndex,isSDF:v,pixelOffsetTL:G,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}return c}(0,i,l,a,o,s,r,e.allowVerticalPlacement),g=e.textSizeData,y=null;"source"===g.kind?(y=[128*a.layout.get("text-size").evaluate(s,{})])[0]>32640&&S(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*f.compositeTextSizes[0].evaluate(s,{},_),128*f.compositeTextSizes[1].evaluate(s,{},_)])[0]>32640||y[1]>32640)&&S(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,m,y,l,o,s,c,t,u.lineStartIndex,u.lineLength,h,_);for(var v=0,b=p;v<b.length;v+=1)d[b[v]]=e.text.placedSymbolArray.length-1;return 4*m.length}function ou(e){for(var t in e)return e[t];return null}function su(e,t,i,r){var n=e.compareText;if(t in n){for(var a=n[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<i)return!0}else n[t]=[];return n[t].push(r),!1}var lu=ys.VectorTileFeature.types,uu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cu(e,t,i,r,n,a,o,s,l,u,c,p,d){var h=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*r),Math.round(32*n),a,o,(h<<1)+(l?1:0),f,16*u,16*c,256*p,256*d)}function pu(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function du(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Wr(i[t].text))return!0;return!1}var hu=function(e){this.layoutVertexArray=new Mn,this.indexArray=new Un,this.programConfigurations=e,this.segments=new oa,this.dynamicLayoutVertexArray=new zn,this.opacityVertexArray=new Dn,this.placedSymbolArray=new Yn};hu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},hu.prototype.upload=function(e,t,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Us.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,uu,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(e))},hu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Br("SymbolBuffers",hu);var fu=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new oa,this.collisionVertexArray=new Nn};fu.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,qs.members,!0)},fu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Br("CollisionBuffers",fu);var _u=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=no([]),this.placementViewportMatrix=no([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zl(this.zoom,t["text-size"]),this.iconSizeData=zl(this.zoom,t["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(e){return vl[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID};_u.prototype.createArrays=function(){this.text=new hu(new Ma(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new hu(new Ma(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new ta,this.lineVertexArray=new ia,this.symbolInstances=new ea},_u.prototype.calculateGlyphDependencies=function(e,t,i,r,n){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(i||r)&&n){var o=Ks[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}},_u.prototype.populate=function(e,t,i){var r=this.layers[0],n=r.layout,a=n.get("text-font"),o=n.get("text-field"),s=n.get("icon-image"),l=("constant"!==o.value.kind||o.value.value instanceof it&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=n.get("symbol-sort-key");if(this.features=[],l||u){for(var p=t.iconDependencies,d=t.glyphDependencies,h=t.availableImages,f=new on(this.zoom),_=0,m=e;_<m.length;_+=1){var g=m[_],y=g.feature,v=g.id,b=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,S={type:y.type,id:v,properties:y.properties,geometry:w?Oa(y):[]};if(r._featureFilter.filter(f,S,i)){w||(S.geometry=Oa(y));var A=void 0;if(l){var k=r.getValueAndResolveTokens("text-field",S,i,h),E=it.factory(k);du(E)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===rn()||this.hasRTLText&&an.isParsed())&&(A=Gs(E,r,S))}var I=void 0;if(u){var T=r.getValueAndResolveTokens("icon-image",S,i,h);I=T instanceof rt?T:rt.fromString(T)}if(A||I){var C=this.sortFeaturesByKey?c.evaluate(S,{},i):void 0,P={id:v,text:A,icon:I,index:b,sourceLayerIndex:x,geometry:Oa(y),properties:y.properties,type:lu[y.type],sortKey:C};if(this.features.push(P),I&&(p[I.name]=!0),A){var L=a.evaluate(S,{},i).join(","),R="map"===n.get("text-rotation-alignment")&&"point"!==n.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vl.vertical)>=0;for(var M=0,z=A.sections;M<z.length;M+=1){var D=z[M];if(D.image)p[D.image.name]=!0;else{var B=Gr(A.toString()),F=D.fontStack||L,O=d[F]=d[F]||{};this.calculateGlyphDependencies(D.text,O,R,this.allowVerticalPlacement,B)}}}}}}"line"===n.get("symbol-placement")&&(this.features=function(e){var t={},i={},r=[],n=0;function a(t){r.push(e[t]),n++}function o(e,t,n){var a=i[e];return delete i[e],i[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(n[0]),a}function s(e,i,n){var a=t[i];return delete t[i],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=n[0].concat(r[a].geometry[0]),a}function l(e,t,i){var r=i?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var u=0;u<e.length;u++){var c=e[u],p=c.geometry,d=c.text?c.text.toString():null;if(d){var h=l(d,p),f=l(d,p,!0);if(h in i&&f in t&&i[h]!==t[f]){var _=s(h,f,p),m=o(h,f,r[_].geometry);delete t[h],delete i[f],i[l(d,r[m].geometry,!0)]=m,r[_].geometry=null}else h in i?o(h,f,p):f in t?s(h,f,p):(a(u),t[h]=n-1,i[f]=n-1)}else a(u)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},_u.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},_u.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},_u.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_u.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_u.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},_u.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},_u.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),n=e.dist(t[e.segment]),a={},o=e.segment+1;o<t.length;o++)a[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:n},s>0&&(n+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=a[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},_u.prototype.addSymbols=function(e,t,i,r,n,a,o,s,l,u,c,p){for(var d=e.indexArray,h=e.layoutVertexArray,f=e.segments.prepareSegment(4*t.length,h,d,a.sortKey),_=this.glyphOffsetArray.length,m=f.vertexLength,g=this.allowVerticalPlacement&&o===vl.vertical?Math.PI/2:0,y=a.text&&a.text.sections,v=0;v<t.length;v++){var b=t[v],x=b.tl,w=b.tr,S=b.bl,A=b.br,k=b.tex,E=b.pixelOffsetTL,I=b.pixelOffsetBR,T=b.minFontScaleX,C=b.minFontScaleY,P=b.glyphOffset,L=b.isSDF,R=b.sectionIndex,M=f.vertexLength,z=P[1];cu(h,s.x,s.y,x.x,z+x.y,k.x,k.y,i,L,E.x,E.y,T,C),cu(h,s.x,s.y,w.x,z+w.y,k.x+k.w,k.y,i,L,I.x,E.y,T,C),cu(h,s.x,s.y,S.x,z+S.y,k.x,k.y+k.h,i,L,E.x,I.y,T,C),cu(h,s.x,s.y,A.x,z+A.y,k.x+k.w,k.y+k.h,i,L,I.x,I.y,T,C),pu(e.dynamicLayoutVertexArray,s,g),d.emplaceBack(M,M+1,M+2),d.emplaceBack(M+1,M+2,M+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),v!==t.length-1&&R===t[v+1].sectionIndex||e.programConfigurations.populatePaintArrays(h.length,a,a.index,{},p,y&&y[R])}e.placedSymbolArray.emplaceBack(s.x,s.y,_,this.glyphOffsetArray.length-_,m,l,u,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],o,0,!1,0,c)},_u.prototype._addCollisionDebugVertex=function(e,t,i,r,n,a){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,r,n,Math.round(a.x),Math.round(a.y))},_u.prototype.addCollisionDebugVertices=function(e,t,i,r,a,o,s){var l=a.segments.prepareSegment(4,a.layoutVertexArray,a.indexArray),u=l.vertexLength,c=a.layoutVertexArray,p=a.collisionVertexArray,d=s.anchorX,h=s.anchorY;this._addCollisionDebugVertex(c,p,o,d,h,new n(e,t)),this._addCollisionDebugVertex(c,p,o,d,h,new n(i,t)),this._addCollisionDebugVertex(c,p,o,d,h,new n(i,r)),this._addCollisionDebugVertex(c,p,o,d,h,new n(e,r)),l.vertexLength+=4;var f=a.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4},_u.prototype.addDebugCollisionBoxes=function(e,t,i,r){for(var n=e;n<t;n++){var a=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(a.x1,a.y1,a.x2,a.y2,r?this.textCollisionBox:this.iconCollisionBox,a.anchorPoint,i)}},_u.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fu(Fn,Vs.members,Zn),this.iconCollisionBox=new fu(Fn,Vs.members,Zn);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},_u.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,r,n,a,o,s,l){for(var u={},c=t;c<i;c++){var p=e.get(c);u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}for(var d=r;d<n;d++){var h=e.get(d);u.verticalTextBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,anchorPointX:h.anchorPointX,anchorPointY:h.anchorPointY},u.verticalTextFeatureIndex=h.featureIndex;break}for(var f=a;f<o;f++){var _=e.get(f);u.iconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},u.iconFeatureIndex=_.featureIndex;break}for(var m=s;m<l;m++){var g=e.get(m);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u},_u.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},_u.prototype.hasTextData=function(){return this.text.segments.get().length>0},_u.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_u.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},_u.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},_u.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},_u.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),r=i.vertexStartIndex+4*i.numGlyphs,n=i.vertexStartIndex;n<r;n+=4)e.indexArray.emplaceBack(n,n+1,n+2),e.indexArray.emplaceBack(n+1,n+2,n+3)},_u.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),r=[],n=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.anchorX+i*s.anchorY)),n.push(s.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||n[t]-n[e]})),a},_u.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},_u.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var n=this.symbolInstances.get(r[i]);this.featureSortOrder.push(n.featureIndex),[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(e,i,r){e>=0&&r.indexOf(e)===i&&t.addIndicesForPlacedSymbol(t.text,e)})),n.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,n.verticalPlacedTextSymbolIndex),n.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.placedIconSymbolIndex),n.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,n.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Br("SymbolBucket",_u,{omit:["layers","collisionBoxArray","features","compareText"]}),_u.MAX_GLYPHS=65535,_u.addDynamicAttributes=pu;var mu=new bn({"symbol-placement":new _n(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new _n(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new _n(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mn(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new _n(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new _n(Te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new _n(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new _n(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new _n(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new mn(Te.layout_symbol["icon-size"]),"icon-text-fit":new _n(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new _n(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new mn(Te.layout_symbol["icon-image"]),"icon-rotate":new mn(Te.layout_symbol["icon-rotate"]),"icon-padding":new _n(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new _n(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new mn(Te.layout_symbol["icon-offset"]),"icon-anchor":new mn(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new _n(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new _n(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new _n(Te.layout_symbol["text-rotation-alignment"]),"text-field":new mn(Te.layout_symbol["text-field"]),"text-font":new mn(Te.layout_symbol["text-font"]),"text-size":new mn(Te.layout_symbol["text-size"]),"text-max-width":new mn(Te.layout_symbol["text-max-width"]),"text-line-height":new _n(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new mn(Te.layout_symbol["text-letter-spacing"]),"text-justify":new mn(Te.layout_symbol["text-justify"]),"text-radial-offset":new mn(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new _n(Te.layout_symbol["text-variable-anchor"]),"text-anchor":new mn(Te.layout_symbol["text-anchor"]),"text-max-angle":new _n(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new _n(Te.layout_symbol["text-writing-mode"]),"text-rotate":new mn(Te.layout_symbol["text-rotate"]),"text-padding":new _n(Te.layout_symbol["text-padding"]),"text-keep-upright":new _n(Te.layout_symbol["text-keep-upright"]),"text-transform":new mn(Te.layout_symbol["text-transform"]),"text-offset":new mn(Te.layout_symbol["text-offset"]),"text-allow-overlap":new _n(Te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new _n(Te.layout_symbol["text-ignore-placement"]),"text-optional":new _n(Te.layout_symbol["text-optional"])}),gu={paint:new bn({"icon-opacity":new mn(Te.paint_symbol["icon-opacity"]),"icon-color":new mn(Te.paint_symbol["icon-color"]),"icon-halo-color":new mn(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new mn(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mn(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new _n(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new _n(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new mn(Te.paint_symbol["text-opacity"]),"text-color":new mn(Te.paint_symbol["text-color"],{runtimeType:Ue,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new mn(Te.paint_symbol["text-halo-color"]),"text-halo-width":new mn(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new mn(Te.paint_symbol["text-halo-blur"]),"text-translate":new _n(Te.paint_symbol["text-translate"]),"text-translate-anchor":new _n(Te.paint_symbol["text-translate-anchor"])}),layout:mu},yu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Be,this.defaultValue=e};yu.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},yu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},yu.prototype.outputDefined=function(){return!1},yu.prototype.serialize=function(){return null},Br("FormatSectionOverride",yu,{omit:["defaultValue"]});var vu=function(e){function t(t){e.call(this,t,gu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,i){if(e.prototype.recalculate.call(this,t,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var n=[],a=0,o=r;a<o.length;a+=1){var s=o[a];n.indexOf(s)<0&&n.push(s)}this.layout._values["text-writing-mode"]=n}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(e,t,i,r){var n=this.layout.get(e).evaluate(t,{},i,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Gi(a.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,i){return i in e?String(e[i]):""}))}(t.properties,n)},t.prototype.createBucket=function(e){return new _u(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var e=0,i=gu.paint.overridableProperties;e<i.length;e+=1){var r=i[e];if(t.hasPaintOverride(this.layout,r)){var n,a=this.paint.get(r),o=new yu(a),s=new ji(o,a.property.specification);n="constant"===a.value.kind||"source"===a.value.kind?new Zi("source",s):new Hi("composite",s,a.value.zoomStops,a.value._interpolationType),this.paint._values[r]=new hn(a.property,n,a.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(e,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&t.hasPaintOverride(this.layout,e)},t.hasPaintOverride=function(e,t){var i=e.get("text-field"),r=gu.paint.properties[t],n=!1,a=function(e){for(var t=0,i=e;t<i.length;t+=1)if(r.overrides&&r.overrides.hasOverride(i[t]))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof it)a(i.value.value.sections);else if("source"===i.value.kind){var o=function(e){n||(e instanceof lt&&ot(e.value)===Ge?a(e.value.sections):e instanceof dt?a(e.sections):e.eachChild(o))},s=i.value;s._styleExpression&&o(s._styleExpression.expression)}return n},t}(xn),bu={paint:new bn({"background-color":new _n(Te.paint_background["background-color"]),"background-pattern":new yn(Te.paint_background["background-pattern"]),"background-opacity":new _n(Te.paint_background["background-opacity"])})},xu=function(e){function t(t){e.call(this,t,bu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xn),wu={paint:new bn({"raster-opacity":new _n(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new _n(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new _n(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new _n(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new _n(Te.paint_raster["raster-saturation"]),"raster-contrast":new _n(Te.paint_raster["raster-contrast"]),"raster-resampling":new _n(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new _n(Te.paint_raster["raster-fade-duration"])})},Su=function(e){function t(t){e.call(this,t,wu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(xn),Au=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(xn),ku={circle:uo,heatmap:bo,hillshade:wo,fill:ls,"fill-extrusion":ks,line:Fs,symbol:vu,background:xu,raster:Su},Eu=o.HTMLImageElement,Iu=o.HTMLCanvasElement,Tu=o.HTMLVideoElement,Cu=o.ImageData,Pu=o.ImageBitmap,Lu=function(e,t,i,r){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,r)};Lu.prototype.update=function(e,t,i){var r=e.width,n=e.height,a=!(this.size&&this.size[0]===r&&this.size[1]===n||i),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[r,n],e instanceof Eu||e instanceof Iu||e instanceof Tu||e instanceof Cu||Pu&&e instanceof Pu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,n,0,this.format,s.UNSIGNED_BYTE,e.data);else{var l=i||{x:0,y:0},u=l.x,c=l.y;e instanceof Eu||e instanceof Iu||e instanceof Tu||e instanceof Cu||Pu&&e instanceof Pu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,u,c,r,n,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Lu.prototype.bind=function(e,t,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},Lu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Lu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ru=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Ru.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))},Ru.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mu=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Ru(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?e:o};function zu(e,t,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Mu.prototype.send=function(e,t,i,r,n){var a=this;void 0===n&&(n=!1);var o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Ur(t,s)},s),{cancel:function(){i&&delete a.callbacks[o],a.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:a.mapId})}}},Mu.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else E()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},Mu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Mu.prototype.processTask=function(e,t){var i=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(qr(t.error)):r(null,qr(t.data)))}else{var n=!1,a=C(this.globalScope)?void 0:[],o=t.hasCallback?function(t,r){n=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:t?Ur(t):null,data:Ur(r,a)},a)}:function(e){n=!0},s=null,l=qr(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,l,o);else if(this.parent.getWorkerSource){var u=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,u[0],l.source)[u[1]](l,o)}else o(new Error("Could not find function "+t.type));!n&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel)}},Mu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Du=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Du.prototype.setNorthEast=function(e){return this._ne=e instanceof Bu?new Bu(e.lng,e.lat):Bu.convert(e),this},Du.prototype.setSouthWest=function(e){return this._sw=e instanceof Bu?new Bu(e.lng,e.lat):Bu.convert(e),this},Du.prototype.extend=function(e){var t,i,r=this._sw,n=this._ne;if(e instanceof Bu)t=e,i=e;else{if(!(e instanceof Du))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Du.convert(e)):this.extend(Bu.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return r||n?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new Bu(t.lng,t.lat),this._ne=new Bu(i.lng,i.lat)),this},Du.prototype.getCenter=function(){return new Bu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Du.prototype.getSouthWest=function(){return this._sw},Du.prototype.getNorthEast=function(){return this._ne},Du.prototype.getNorthWest=function(){return new Bu(this.getWest(),this.getNorth())},Du.prototype.getSouthEast=function(){return new Bu(this.getEast(),this.getSouth())},Du.prototype.getWest=function(){return this._sw.lng},Du.prototype.getSouth=function(){return this._sw.lat},Du.prototype.getEast=function(){return this._ne.lng},Du.prototype.getNorth=function(){return this._ne.lat},Du.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Du.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Du.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Du.prototype.contains=function(e){var t=Bu.convert(e),i=t.lng,r=t.lat,n=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&n},Du.convert=function(e){return!e||e instanceof Du?e:new Du(e)};var Bu=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Bu.prototype.wrap=function(){return new Bu(p(this.lng,-180,180),this.lat)},Bu.prototype.toArray=function(){return[this.lng,this.lat]},Bu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Bu.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,r=e.lat*t,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(n,1))},Bu.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Du(new Bu(this.lng-i,this.lat-t),new Bu(this.lng+i,this.lat+t))},Bu.convert=function(e){if(e instanceof Bu)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Bu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Bu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Fu=2*Math.PI*6371008.8;function Ou(e){return Fu*Math.cos(e*Math.PI/180)}function Nu(e){return(180+e)/360}function Uu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qu(e,t){return e/Ou(t)}function Vu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var ju=function(e,t,i){void 0===i&&(i=0),this.x=+e,this.y=+t,this.z=+i};ju.fromLngLat=function(e,t){void 0===t&&(t=0);var i=Bu.convert(e);return new ju(Nu(i.lng),Uu(i.lat),qu(t,i.lat))},ju.prototype.toLngLat=function(){return new Bu(360*this.x-180,Vu(this.y))},ju.prototype.toAltitude=function(){return this.z*Ou(Vu(this.y))},ju.prototype.meterInMercatorCoordinateUnits=function(){return 1/Fu*(e=Vu(this.y),1/Math.cos(e*Math.PI/180));var e};var Gu=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Hu(0,e,e,t,i)};Gu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Gu.prototype.url=function(e,t){var i,r,n,a,o,s=(r=this.y,n=this.z,a=zu(256*(i=this.x),256*(r=Math.pow(2,n)-r-1),n),o=zu(256*(i+1),256*(r+1),n),a[0]+","+a[1]+","+o[0]+","+o[1]),l=function(e,t,i){for(var r,n="",a=e;a>0;a--)n+=(t&(r=1<<a-1)?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Gu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new n(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Gu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ku=function(e,t){this.wrap=e,this.canonical=t,this.key=Hu(e,t.z,t.z,t.x,t.y)},Zu=function(e,t,i,r,n){this.overscaledZ=e,this.wrap=t,this.canonical=new Gu(i,+r,+n),this.key=Hu(t,e,i,r,n)};function Hu(e,t,i,r,n){(e*=2)<0&&(e=-1*e-1);var a=1<<i;return(a*a*e+a*n+r).toString(36)+i.toString(36)+t.toString(36)}Zu.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Zu.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Zu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Zu.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Hu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Hu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Zu.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Zu.prototype.children=function(e){if(this.overscaledZ>=e)return[new Zu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Zu(t,this.wrap,t,i,r),new Zu(t,this.wrap,t,i+1,r),new Zu(t,this.wrap,t,i,r+1),new Zu(t,this.wrap,t,i+1,r+1)]},Zu.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Zu.prototype.wrapped=function(){return new Zu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zu.prototype.unwrapTo=function(e){return new Zu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Zu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zu.prototype.toUnwrapped=function(){return new Ku(this.wrap,this.canonical)},Zu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zu.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new ju(e.x-this.wrap,e.y))},Br("CanonicalTileID",Gu),Br("OverscaledTileID",Zu,{omit:["posMatrix"]});var Qu=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return S('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var n=0;n<r;n++)this.data[this._idx(-1,n)]=this.data[this._idx(0,n)],this.data[this._idx(r,n)]=this.data[this._idx(r-1,n)],this.data[this._idx(n,-1)]=this.data[this._idx(n,0)],this.data[this._idx(n,r)]=this.data[this._idx(n,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Qu.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},Qu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Qu.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Qu.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Qu.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Qu.prototype.getPixels=function(){return new go({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qu.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,n=t*this.dim+this.dim,a=i*this.dim,o=i*this.dim+this.dim;switch(t){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-i*this.dim,u=a;u<o;u++)for(var c=r;c<n;c++)this.data[this._idx(c,u)]=e.data[this._idx(c+s,u+l)]},Br("DEMData",Qu);var Wu=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Wu.prototype.encode=function(e){return this._stringToNumber[e]},Wu.prototype.decode=function(e){return this._numberToString[e]};var Ju=function(e,t,i,r,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=r,this.properties=e.properties,this.id=n},Xu={geometry:{configurable:!0}};Xu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xu.geometry.set=function(e){this._geometry=e},Ju.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Ju.prototype,Xu);var Yu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yu.prototype.updateState=function(e,t,i){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},d(this.stateChanges[e][r],i),null===this.deletedStates[e])for(var n in this.deletedStates[e]={},this.state[e])n!==r&&(this.deletedStates[e][n]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])i[a]||(this.deletedStates[e][r][a]=null);else for(var o in i)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]},Yu.prototype.removeFeatureState=function(e,t,i){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(i in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][i]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},Yu.prototype.getState=function(e,t){var i=String(t),r=d({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var n=this.deletedStates[e][t];if(null===n)return{};for(var a in n)delete r[a]}return r},Yu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Yu.prototype.coalesceChanges=function(e,t){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var n={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),d(this.state[r][a],this.stateChanges[r][a]),n[a]=this.state[r][a];i[r]=n}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,p=Object.keys(this.deletedStates[o][u]);c<p.length;c+=1)delete this.state[o][u][p[c]];s[u]=this.state[o][u]}i[o]=i[o]||{},d(i[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var h in e)e[h].setFeatureState(i,t)};var $u=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Lr(8192,16,0),this.grid3D=new Lr(8192,16,0),this.featureIndexArray=new na,this.promoteId=t};function ec(e,t,i,r,n){return v(e,(function(e,a){var o=t instanceof fn?t.get(a):null;return o&&o.evaluate?o.evaluate(i,r,n):o}))}function tc(e){for(var t=1/0,i=1/0,r=-1/0,n=-1/0,a=0,o=e;a<o.length;a+=1){var s=o[a];t=Math.min(t,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),n=Math.max(n,s.y)}return{minX:t,minY:i,maxX:r,maxY:n}}function ic(e,t){return t-e}$u.prototype.insert=function(e,t,i,r,n,a){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n);for(var s=a?this.grid3D:this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var d=u[p];c[0]=Math.min(c[0],d.x),c[1]=Math.min(c[1],d.y),c[2]=Math.max(c[2],d.x),c[3]=Math.max(c[3],d.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},$u.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ys.VectorTile(new Qs(this.rawTileData)).layers,this.sourceLayerCoder=new Wu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},$u.prototype.query=function(e,t,i,r){var a=this;this.loadVTLayers();for(var o=e.params||{},s=8192/e.tileSize/e.scale,l=nr(o.filter),u=e.queryGeometry,c=e.queryPadding*s,p=tc(u),d=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),h=tc(e.cameraQueryGeometry),f=0,_=this.grid3D.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c,(function(t,i,r,a){return function(e,t,i,r,a){for(var o=0,s=e;o<s.length;o+=1){var l=s[o];if(t<=l.x&&i<=l.y&&r>=l.x&&a>=l.y)return!0}var u=[new n(t,i),new n(t,a),new n(r,a),new n(r,i)];if(e.length>2)for(var c=0,p=u;c<p.length;c+=1)if(Ja(e,p[c]))return!0;for(var d=0;d<e.length-1;d++)if(Xa(e[d],e[d+1],u))return!0;return!1}(e.cameraQueryGeometry,t-c,i-c,r+c,a+c)}));f<_.length;f+=1)d.push(_[f]);d.sort(ic);for(var m,g={},y=function(n){var c=d[n];if(c!==m){m=c;var p=a.featureIndexArray.get(c),h=null;a.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,l,o.layers,o.availableImages,t,i,r,(function(t,i,r){return h||(h=Oa(t)),i.queryIntersectsFeature(u,t,r,h,a.z,e.transform,s,e.pixelPosMatrix)}))}},v=0;v<d.length;v++)y(v);return g},$u.prototype.loadMatchingFeature=function(e,t,i,r,n,a,o,s,l,u,c){var p=this.bucketLayerIDs[t];if(!a||function(e,t){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(a,p)){var d=this.sourceLayerCoder.decode(i),h=this.vtLayers[d].feature(r);if(n.filter(new on(this.tileID.overscaledZ),h))for(var f=this.getId(h,d),_=0;_<p.length;_++){var m=p[_];if(!(a&&a.indexOf(m)<0)){var g=s[m];if(g){var y={};void 0!==f&&u&&(y=u.getState(g.sourceLayer||"_geojsonTileLayer",f));var v=l[m];v.paint=ec(v.paint,g.paint,h,y,o),v.layout=ec(v.layout,g.layout,h,y,o);var b=!c||c(h,g,y);if(b){var x=new Ju(h,this.z,this.x,this.y,f);x.layer=v;var w=e[m];void 0===w&&(w=e[m]=[]),w.push({featureIndex:r,feature:x,intersectionZ:b})}}}}}},$u.prototype.lookupSymbolFeatures=function(e,t,i,r,n,a,o,s){var l={};this.loadVTLayers();for(var u=nr(n),c=0,p=e;c<p.length;c+=1)this.loadMatchingFeature(l,i,r,p[c],u,a,o,s,t);return l},$u.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var r=0,n=i[t];r<n.length;r+=1)if(e===n[r])return!0;return!1},$u.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&"boolean"==typeof(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(i=Number(i)),i},Br("FeatureIndex",$u,{omit:["rawTileData","sourceLayerCoder"]});var rc=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};rc.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<O.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},rc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},rc.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var i={};if(!t)return i;for(var r=function(){var e=a[n],r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));for(var o=0,s=r;o<s.length;o+=1)i[s[o].id]=e}},n=0,a=e;n<a.length;n+=1)r();return i}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var n=this.buckets[r];if(n instanceof _u){if(this.hasSymbolBuckets=!0,!i)break;n.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof _u&&o.hasRTLText){this.hasRTLText=!0,an.isLoading()||an.isLoaded()||"deferred"!==rn()||nn();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Jn},rc.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},rc.prototype.getBucket=function(e){return this.buckets[e.id]},rc.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lu(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lu(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},rc.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},rc.prototype.queryRenderedFeatures=function(e,t,i,r,n,a,o,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:n,scale:a,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:o,queryPadding:this.queryPadding*l},e,t,i):{}},rc.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),n=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[n];if(a)for(var o=nr(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,p={z:l,x:u,y:c},d=0;d<a.length;d++){var h=a.feature(d);if(o.filter(new on(this.tileID.overscaledZ),h)){var f=i.getId(h,n),_=new Ju(h,l,u,c,f);_.tile=p,e.push(_)}}}},rc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},rc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},rc.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=I(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),n=!1;if(this.expirationTime>r)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},rc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},rc.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var n=this.buckets[r],a=n.layers[0].sourceLayer||"_geojsonTileLayer",o=i[a],s=e[a];if(o&&s&&0!==Object.keys(s).length){n.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}}},rc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},rc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()},rc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},rc.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=O.now()+e},rc.prototype.setDependencies=function(e,t){for(var i={},r=0,n=t;r<n.length;r+=1)i[n[r]]=!0;this.dependencies[e]=i},rc.prototype.hasDependency=function(e,t){for(var i=0,r=e;i<r.length;i+=1){var n=this.dependencies[r[i]];if(n)for(var a=0,o=t;a<o.length;a+=1)if(n[o[a]])return!0}return!1};var nc=o.performance,ac=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},nc.mark(this._marks.start)};ac.prototype.finish=function(){nc.mark(this._marks.end);var e=nc.getEntriesByName(this._marks.measure);return 0===e.length&&(nc.measure(this._marks.measure,this._marks.start,this._marks.end),e=nc.getEntriesByName(this._marks.measure),nc.clearMarks(this._marks.start),nc.clearMarks(this._marks.end),nc.clearMeasures(this._marks.measure)),e},e.Actor=Mu,e.AlphaImage=mo,e.CanonicalTileID=Gu,e.CollisionBoxArray=Jn,e.Color=$e,e.DEMData=Qu,e.DataConstantProperty=_n,e.DictionaryCoder=Wu,e.EXTENT=8192,e.ErrorEvent=Ee,e.EvaluationParameters=on,e.Event=ke,e.Evented=Ie,e.FeatureIndex=$u,e.FillBucket=as,e.FillExtrusionBucket=ws,e.ImageAtlas=yl,e.ImagePosition=ml,e.LineBucket=Ms,e.LngLat=Bu,e.LngLatBounds=Du,e.MercatorCoordinate=ju,e.ONE_EM=24,e.OverscaledTileID=Zu,e.Point=n,e.Point$1=n,e.Properties=bn,e.Protobuf=Qs,e.RGBAImage=go,e.RequestManager=K,e.RequestPerformance=ac,e.ResourceType=fe,e.SegmentVector=oa,e.SourceFeatureState=Yu,e.StructArrayLayout1ui2=Hn,e.StructArrayLayout2f1f2i16=On,e.StructArrayLayout2i4=In,e.StructArrayLayout3ui6=Un,e.StructArrayLayout4i8=Tn,e.SymbolBucket=_u,e.Texture=Lu,e.Tile=rc,e.Transitionable=un,e.Uniform1f=va,e.Uniform1i=ya,e.Uniform2f=ba,e.Uniform3f=xa,e.Uniform4f=wa,e.UniformColor=Sa,e.UniformMatrix4f=ka,e.UnwrappedTileID=Ku,e.ValidationError=Ce,e.WritingMode=vl,e.ZoomHistory=Vr,e.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},e.addDynamicAttributes=pu,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var r=e.length,n=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),n[o]=t,0==--r&&i(a,n)}))}))},e.bezier=l,e.bindAll=g,e.browser=O,e.cacheEntryPossiblyAdded=function(e){++de>le&&(e.getActor().send("enforceCacheSizeLimit",se),de=0)},e.clamp=c,e.clearTileCache=function(e){var t=o.caches.delete("mapbox-tiles");e&&t.catch(e).then((function(){return e()}))},e.clipLine=Gl,e.clone=function(e){var t=new ro(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=x,e.clone$2=function(e){var t=new ro(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=js,e.config=N,e.create=function(){var e=new ro(16);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new ro(9);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new ro(4);return ro!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=Ki,e.createLayout=kn,e.createStyleLayer=function(e){return"custom"===e.type?new Au(e):new ku[e.type](e)},e.cross=function(e,t,i){var r=t[0],n=t[1],a=t[2],o=i[0],s=i[1],l=i[2];return e[0]=n*l-a*s,e[1]=a*o-r*l,e[2]=r*s-n*o,e},e.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],i[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(var n in t)if(!e(t[n],i[n]))return!1;return!0}return t===i},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=u,e.emitValidationErrors=Pr,e.endsWith=y,e.enforceCacheSizeLimit=function(e){ue(),ee&&ee.then((function(t){t.keys().then((function(i){for(var r=0;r<i.length-e;r++)t.delete(i[r])}))}))},e.evaluateSizeForFeature=Dl,e.evaluateSizeForZoom=Bl,e.evaluateVariableOffset=ru,e.evented=tn,e.extend=d,e.featureFilter=nr,e.filterObject=b,e.fromRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Pl,e.getAnchorJustification=nu,e.getArrayBuffer=be,e.getImage=we,e.getJSON=function(e,t){return ve(d(e,{type:"json"}),t)},e.getRTLTextPluginStatus=rn,e.getReferrer=ye,e.getVideo=function(e,t){var i,r,n=o.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var a=0;a<e.length;a++){var s=o.document.createElement("source");i=e[a],r=void 0,(r=o.document.createElement("a")).href=i,(r.protocol!==o.document.location.protocol||r.host!==o.document.location.host)&&(n.crossOrigin="Anonymous"),s.src=e[a],n.appendChild(s)}return{cancel:function(){}}},e.identity=no,e.invert=function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],d=t[10],h=t[11],f=t[12],_=t[13],m=t[14],g=t[15],y=i*s-r*o,v=i*l-n*o,b=i*u-a*o,x=r*l-n*s,w=r*u-a*s,S=n*u-a*l,A=c*_-p*f,k=c*m-d*f,E=c*g-h*f,I=p*m-d*_,T=p*g-h*_,C=d*g-h*m,P=y*C-v*T+b*I+x*E-w*k+S*A;return P?(e[0]=(s*C-l*T+u*I)*(P=1/P),e[1]=(n*T-r*C-a*I)*P,e[2]=(_*S-m*w+g*x)*P,e[3]=(d*w-p*S-h*x)*P,e[4]=(l*E-o*C-u*k)*P,e[5]=(i*C-n*E+a*k)*P,e[6]=(m*b-f*S-g*v)*P,e[7]=(c*S-d*b+h*v)*P,e[8]=(o*T-s*E+u*A)*P,e[9]=(r*E-i*T-a*A)*P,e[10]=(f*w-_*b+g*y)*P,e[11]=(p*b-c*w-h*y)*P,e[12]=(s*k-o*I-l*A)*P,e[13]=(i*I-r*k+n*A)*P,e[14]=(_*v-f*x-m*y)*P,e[15]=(c*x-p*v+d*y)*P,e):null},e.isChar=jr,e.isMapboxURL=Z,e.keysDifference=function(e,t){var i=[];for(var r in e)r in t||i.push(r);return i},e.makeRequest=ve,e.mapObject=v,e.mercatorXfromLng=Nu,e.mercatorYfromLat=Uu,e.mercatorZfromAltitude=qu,e.mul=so,e.multiply=ao,e.mvt=ys,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var i=t[0],r=t[1],n=t[2],a=i*i+r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},e.number=jt,e.offscreenCanvasSupported=he,e.ortho=function(e,t,i,r,n,a,o){var s=1/(t-i),l=1/(r-n),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*s,e[13]=(n+r)*l,e[14]=(o+a)*u,e[15]=1,e},e.parseGlyphPBF=function(e){return new Qs(e).readFields(dl,[])},e.pbf=Qs,e.performSymbolLayout=function(e,t,i,r,n,a,o){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.kind){var c=e.textSizeData,p=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new on(c.minZoom),o),l["text-size"].possiblyEvaluate(new on(p),o)]}if("composite"===e.iconSizeData.kind){var d=e.iconSizeData,h=d.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new on(d.minZoom),o),l["icon-size"].possiblyEvaluate(new on(h),o)]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new on(e.zoom+1),o),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new on(e.zoom+1),o),u.textMaxSize=l["text-size"].possiblyEvaluate(new on(18));for(var f=24*s.get("text-line-height"),_="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),g=s.get("text-size"),y=function(){var a=b[v],l=s.get("text-font").evaluate(a,{},o).join(","),c=g.evaluate(a,{},o),p=u.layoutTextSize.evaluate(a,{},o),d=u.layoutIconSize.evaluate(a,{},o),h={horizontal:{},vertical:void 0},y=a.text,x=[0,0];if(y){var w=y.toString(),A=24*s.get("text-letter-spacing").evaluate(a,{},o),k=function(e){for(var t=0,i=e;t<i.length;t+=1)if(r=i[t].charCodeAt(0),jr.Arabic(r)||jr["Arabic Supplement"](r)||jr["Arabic Extended-A"](r)||jr["Arabic Presentation Forms-A"](r)||jr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?A:0,E=s.get("text-anchor").evaluate(a,{},o),I=s.get("text-variable-anchor");if(!I){var T=s.get("text-radial-offset").evaluate(a,{},o);x=T?ru(E,[24*T,iu]):s.get("text-offset").evaluate(a,{},o).map((function(e){return 24*e}))}var C=_?"center":s.get("text-justify").evaluate(a,{},o),P=s.get("symbol-placement"),L="point"===P?24*s.get("text-max-width").evaluate(a,{},o):0,R=function(){e.allowVerticalPlacement&&Gr(w)&&(h.vertical=wl(y,t,i,n,l,L,f,E,"left",k,x,vl.vertical,!0,P,p,c))};if(!_&&I){for(var M="auto"===C?I.map((function(e){return nu(e)})):[C],z=!1,D=0;D<M.length;D++){var B=M[D];if(!h.horizontal[B])if(z)h.horizontal[B]=h.horizontal[0];else{var F=wl(y,t,i,n,l,L,f,"center",B,k,x,vl.horizontal,!1,P,p,c);F&&(h.horizontal[B]=F,z=1===F.positionedLines.length)}}R()}else{"auto"===C&&(C=nu(E));var O=wl(y,t,i,n,l,L,f,E,C,k,x,vl.horizontal,!1,P,p,c);O&&(h.horizontal[C]=O),R(),Gr(w)&&_&&m&&(h.vertical=wl(y,t,i,n,l,L,f,E,C,k,x,vl.vertical,!1,P,p,c))}}var N=void 0,U=!1;if(a.icon&&a.icon.name){var q=r[a.icon.name];q&&(N=function(e,t,i){var r=Pl(i),n=t[0]-e.displaySize[0]*r.horizontalAlign,a=t[1]-e.displaySize[1]*r.verticalAlign;return{image:e,top:a,bottom:a+e.displaySize[1],left:n,right:n+e.displaySize[0]}}(n[a.icon.name],s.get("icon-offset").evaluate(a,{},o),s.get("icon-anchor").evaluate(a,{},o)),U=q.sdf,void 0===e.sdfIcons?e.sdfIcons=q.sdf:e.sdfIcons!==q.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var V=ou(h.horizontal)||h.vertical;e.iconsInText=!!V&&V.iconsInText,(V||N)&&function(e,t,i,r,n,a,o,s,l,u,c){var p=a.textMaxSize.evaluate(t,{});void 0===p&&(p=o);var d,h=e.layers[0].layout,f=h.get("icon-offset").evaluate(t,{},c),_=ou(i.horizontal),m=o/24,g=e.tilePixelRatio*m,y=e.tilePixelRatio*p/24,v=e.tilePixelRatio*s,b=e.tilePixelRatio*h.get("symbol-spacing"),x=h.get("text-padding")*e.tilePixelRatio,w=h.get("icon-padding")*e.tilePixelRatio,A=h.get("text-max-angle")/180*Math.PI,k="map"===h.get("text-rotation-alignment")&&"point"!==h.get("symbol-placement"),E="map"===h.get("icon-rotation-alignment")&&"point"!==h.get("symbol-placement"),I=h.get("symbol-placement"),T=b/2,C=h.get("icon-text-fit");r&&"none"!==C&&(e.allowVerticalPlacement&&i.vertical&&(d=Rl(r,i.vertical,C,h.get("icon-text-fit-padding"),f,m)),_&&(r=Rl(r,_,C,h.get("icon-text-fit-padding"),f,m)));var P=function(s,p){p.x<0||p.x>=8192||p.y<0||p.y>=8192||function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_,m,g,y,v,b,x,w,A,k){var E,I,T,C,P,L=e.addToLineVertexArray(t,i),R=0,M=0,z=0,D=0,B=-1,F=-1,O={},N=pa(""),U=0,q=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(U=(E=s.layout.get("text-offset").evaluate(b,{},A).map((function(e){return 24*e})))[0],q=E[1]):(U=24*s.layout.get("text-radial-offset").evaluate(b,{},A),q=iu),e.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},A)+90;C=new Jl(l,t,u,c,p,r.vertical,d,h,f,V),o&&(P=new Jl(l,t,u,c,p,o,m,g,f,V))}if(n){var j=s.layout.get("icon-rotate").evaluate(b,{}),G="none"!==s.layout.get("icon-text-fit"),K=Kl(n,j,w,G),Z=o?Kl(o,j,w,G):void 0;T=new Jl(l,t,u,c,p,n,m,g,!1,j),R=4*K.length;var H=e.iconSizeData,Q=null;"source"===H.kind?(Q=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&S(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===H.kind&&((Q=[128*x.compositeIconSizes[0].evaluate(b,{},A),128*x.compositeIconSizes[1].evaluate(b,{},A)])[0]>32640||Q[1]>32640)&&S(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),e.addSymbols(e.icon,K,Q,v,y,b,!1,t,L.lineStartIndex,L.lineLength,-1,A),B=e.icon.placedSymbolArray.length-1,Z&&(M=4*Z.length,e.addSymbols(e.icon,Z,Q,v,y,b,vl.vertical,t,L.lineStartIndex,L.lineLength,-1,A),F=e.icon.placedSymbolArray.length-1)}for(var W in r.horizontal){var J=r.horizontal[W];if(!I){N=pa(J.text);var X=s.layout.get("text-rotate").evaluate(b,{},A);I=new Jl(l,t,u,c,p,J,d,h,f,X)}var Y=1===J.positionedLines.length;if(z+=au(e,t,J,a,s,f,b,_,L,r.vertical?vl.horizontal:vl.horizontalOnly,Y?Object.keys(r.horizontal):[W],O,B,x,A),Y)break}r.vertical&&(D+=au(e,t,r.vertical,a,s,f,b,_,L,vl.vertical,["vertical"],O,F,x,A));var $=I?I.boxStartIndex:e.collisionBoxArray.length,ee=I?I.boxEndIndex:e.collisionBoxArray.length,te=C?C.boxStartIndex:e.collisionBoxArray.length,ie=C?C.boxEndIndex:e.collisionBoxArray.length,re=T?T.boxStartIndex:e.collisionBoxArray.length,ne=T?T.boxEndIndex:e.collisionBoxArray.length,ae=P?P.boxStartIndex:e.collisionBoxArray.length,oe=P?P.boxEndIndex:e.collisionBoxArray.length,se=-1,le=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t};se=le(I,se),se=le(C,se),se=le(T,se);var ue=(se=le(P,se))>-1?1:0;ue&&(se*=k/24),e.glyphOffsetArray.length>=_u.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,B,F,N,$,ee,te,ie,re,ne,ae,oe,u,z,D,R,M,ue,0,d,U,q,se)}(e,p,s,i,r,n,d,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,x,k,l,v,w,E,f,t,a,u,c,o)};if("line"===I)for(var L=0,R=Gl(t.geometry,0,0,8192,8192);L<R.length;L+=1)for(var M=R[L],z=0,D=jl(M,b,A,i.vertical||_,r,24,y,e.overscaling,8192);z<D.length;z+=1){var B=D[z];_&&su(e,_.text,T,B)||P(M,B)}else if("line-center"===I)for(var F=0,O=t.geometry;F<O.length;F+=1){var N=O[F];if(N.length>1){var U=Vl(N,A,i.vertical||_,r,24,y);U&&P(N,U)}}else if("Polygon"===t.type)for(var q=0,V=ts(t.geometry,0);q<V.length;q+=1){var j=V[q],G=$l(j,16);P(j[0],new Ml(G.x,G.y,0))}else if("LineString"===t.type)for(var K=0,Z=t.geometry;K<Z.length;K+=1){var H=Z[K];P(H,new Ml(H[0].x,H[0].y,0))}else if("Point"===t.type)for(var Q=0,W=t.geometry;Q<W.length;Q+=1)for(var J=0,X=W[Q];J<X.length;J+=1){var Y=X[J];P([Y],new Ml(Y.x,Y.y,0))}}(e,a,h,N,r,u,p,d,x,U,o)},v=0,b=e.features;v<b.length;v+=1)y();a&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,i,r,n){var a,o=1/Math.tan(t/2);return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+r)*(a=1/(r-n)),e[14]=2*n*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var i={},r=0;r<t.length;r++){var n=t[r];n in e&&(i[n]=e[n])}return i},e.plugin=an,e.polygonIntersectsPolygon=qa,e.postMapLoadEvent=oe,e.postTurnstileEvent=ne,e.potpack=_l,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Br,e.registerForPluginStateChange=function(e){return e({pluginStatus:Xr,pluginURL:Yr}),tn.on("pluginStateChange",e),e},e.renderColorRamp=vo,e.rotate=function(e,t,i){var r=t[0],n=t[1],a=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l+a*s,e[1]=n*l+o*s,e[2]=r*-s+a*l,e[3]=n*-s+o*l,e},e.rotateX=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*n+u*r,e[5]=o*n+c*r,e[6]=s*n+p*r,e[7]=l*n+d*r,e[8]=u*n-a*r,e[9]=c*n-o*r,e[10]=p*n-s*r,e[11]=d*n-l*r,e},e.rotateZ=function(e,t,i){var r=Math.sin(i),n=Math.cos(i),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*n+u*r,e[1]=o*n+c*r,e[2]=s*n+p*r,e[3]=l*n+d*r,e[4]=u*n-a*r,e[5]=c*n-o*r,e[6]=p*n-s*r,e[7]=d*n-l*r,e},e.scale=function(e,t,i){var r=i[0],n=i[1],a=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},e.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.setCacheLimits=function(e,t){se=e,le=t},e.setRTLTextPlugin=function(e,t,i){if(void 0===i&&(i=!1),"deferred"===Xr||"loading"===Xr||"loaded"===Xr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Yr=O.resolveURL(e),Xr="deferred",Jr=t,en(),i||nn()},e.sphericalToCartesian=function(e){var t=e[0],i=e[1],r=e[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(r),y:t*Math.sin(i)*Math.sin(r),z:t*Math.cos(r)}},e.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},e.styleSpec=Te,e.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},e.symbolSize=Fl,e.transformMat3=function(e,t,i){var r=t[0],n=t[1],a=t[2];return e[0]=r*i[0]+n*i[3]+a*i[6],e[1]=r*i[1]+n*i[4]+a*i[7],e[2]=r*i[2]+n*i[5]+a*i[8],e},e.transformMat4=lo,e.translate=function(e,t,i){var r,n,a,o,s,l,u,c,p,d,h,f,_=i[0],m=i[1],g=i[2];return t===e?(e[12]=t[0]*_+t[4]*m+t[8]*g+t[12],e[13]=t[1]*_+t[5]*m+t[9]*g+t[13],e[14]=t[2]*_+t[6]*m+t[10]*g+t[14],e[15]=t[3]*_+t[7]*m+t[11]*g+t[15]):(n=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],d=t[9],h=t[10],f=t[11],e[0]=r=t[0],e[1]=n,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=d,e[10]=h,e[11]=f,e[12]=r*_+s*m+p*g+t[12],e[13]=n*_+l*m+d*g+t[13],e[14]=a*_+u*m+h*g+t[14],e[15]=o*_+c*m+f*g+t[15]),e},e.triggerPluginCompletionEvent=$r,e.uniqueId=f,e.validateCustomStyleLayer=function(e){var t=[],i=e.id;return void 0===i&&t.push({message:"layers."+i+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Ir,e.validateStyle=Er,e.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},e.vectorTile=ys,e.version="1.12.0",e.warnOnce=S,e.webpSupported=U,e.window=o,e.wrap=p})),r(["./shared"],(function(e){function t(e){var i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",n=0,a=e;n<a.length;n+=1)r+=t(a[n])+",";return r+"]"}for(var o=Object.keys(e).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+t(e[o[l]])+",";return s+"}"}function i(i){for(var r="",n=0,a=e.refProperties;n<a.length;n+=1)r+="/"+t(i[a[n]]);return r}var r=function(e){this.keyCache={},e&&this.replace(e)};r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var n=this,a=0,o=t;a<o.length;a+=1){var s=o[a];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=r;u<c.length;u+=1){var p=c[u];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var d=0,h=function(e,t){for(var r={},n=0;n<e.length;n++){var a=t&&t[e[n].id]||i(e[n]);t&&(t[e[n].id]=a);var o=r[a];o||(o=r[a]=[]),o.push(e[n])}var s=[];for(var l in r)s.push(r[l]);return s}(e.values(this._layerConfigs),this.keyCache);d<h.length;d+=1){var f=h[d].map((function(e){return n._layers[e.id]})),_=f[0];if("none"!==_.visibility){var m=_.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=_.sourceLayer||"_geojsonTileLayer",v=g[y];v||(v=g[y]=[]),v.push(f)}}};var n=function(t){var i={},r=[];for(var n in t){var a=t[n],o=i[n]={};for(var s in a){var l=a[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),o[s]={rect:u,metrics:l.metrics}}}}var c=e.potpack(r),p=new e.AlphaImage({width:c.w||1,height:c.h||1});for(var d in t){var h=t[d];for(var f in h){var _=h[+f];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var m=i[d][f].rect;e.AlphaImage.copy(_.bitmap,p,{x:0,y:0},{x:m.x+1,y:m.y+1},_.bitmap)}}}this.image=p,this.positions=i};e.register("GlyphAtlas",n);var a=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function o(t,i,r){for(var n=new e.EvaluationParameters(i),a=0,o=t;a<o.length;a+=1)o[a].recalculate(n,r)}function s(t,i){var r=e.getArrayBuffer(t.request,(function(t,r,n,a){t?i(t):r&&i(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:n,expires:a})}));return function(){r.cancel(),i()}}a.prototype.parse=function(t,i,r,a,s){var l=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var u=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var p,d,h,f,_={},m={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=i.familiesBySource[this.source];for(var y in g){var v=t.layers[y];if(v){1===v.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(y),x=[],w=0;w<v.length;w++){var S=v.feature(w),A=c.getId(S,y);x.push({feature:S,id:A,index:w,sourceLayerIndex:b})}for(var k=0,E=g[y];k<E.length;k+=1){var I=E[k],T=I[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(o(I,this.zoom,r),(_[T.id]=T.createBucket({index:c.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,m,this.tileID.canonical),c.bucketLayerIDs.push(I.map((function(e){return e.id}))))}}}var C=e.mapObject(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(C).length?a.send("getGlyphs",{uid:this.uid,stacks:C},(function(e,t){p||(p=e,d=t,R.call(l))})):d={};var P=Object.keys(m.iconDependencies);P.length?a.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){p||(p=e,h=t,R.call(l))})):h={};var L=Object.keys(m.patternDependencies);function R(){if(p)return s(p);if(d&&h&&f){var t=new n(d),i=new e.ImageAtlas(h,f);for(var a in _){var l=_[a];l instanceof e.SymbolBucket?(o(l.layers,this.zoom,r),e.performSymbolLayout(l,d,t.positions,h,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof e.LineBucket||l instanceof e.FillBucket||l instanceof e.FillExtrusionBucket)&&(o(l.layers,this.zoom,r),l.addFeatures(m,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:e.values(_).filter((function(e){return!e.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:i,glyphMap:this.returnDependencies?d:null,iconMap:this.returnDependencies?h:null,glyphPositions:this.returnDependencies?t.positions:null})}}L.length?a.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){p||(p=e,f=t,R.call(l))})):f={},R.call(this)};var l=function(e,t,i,r){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=r||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(t,i){var r=this,n=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[n]=new a(t);s.abort=this.loadVectorData(t,(function(t,a){if(delete r.loading[n],t||!a)return s.status="done",r.loaded[n]=s,i(t);var l=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}s.vectorTile=a.vectorTile,s.parse(a.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(t,r){if(t||!r)return i(t);i(null,e.extend({rawTileData:l.slice(0)},r,u,c))})),r.loaded=r.loaded||{},r.loaded[n]=s}))},l.prototype.reloadTile=function(e,t){var i=this,r=this.loaded,n=e.uid,a=this;if(r&&r[n]){var o=r[n];o.showCollisionBoxes=e.showCollisionBoxes;var s=function(e,r){var n=o.reloadCallback;n&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,i.availableImages,a.actor,n)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(e,t){var i=this.loading,r=e.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),t()},l.prototype.removeTile=function(e,t){var i=this.loaded,r=e.uid;i&&i[r]&&delete i[r],t()};var u=e.window.ImageBitmap,c=function(){this.loaded={}};function p(e,t){if(0!==e.length){d(e[0],t);for(var i=1;i<e.length;i++)d(e[i],!t)}}function d(e,t){for(var i=0,r=0,n=e.length,a=n-1;r<n;a=r++)i+=(e[r][0]-e[a][0])*(e[a][1]+e[r][1]);i>=0!=!!t&&e.reverse()}c.prototype.loadTile=function(t,i){var r=t.uid,n=t.encoding,a=t.rawImageData,o=u&&a instanceof u?this.getImageData(a):a,s=new e.DEMData(r,o,n);this.loaded=this.loaded||{},this.loaded[r]=s,i(null,s)},c.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:i.width,height:i.height},i.data)},c.prototype.removeTile=function(e){var t=this.loaded,i=e.uid;t&&t[i]&&delete t[i]};var h=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],i=0,r=this._feature.geometry;i<r.length;i+=1){var n=r[i];t.push([new e.Point$1(n[0],n[1])])}return t}for(var a=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var p=c[u];l.push(new e.Point$1(p[0],p[1]))}a.push(l)}return a},f.prototype.toGeoJSON=function(e,t,i){return h.call(this,e,t,i)};var _=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};_.prototype.feature=function(e){return new f(this._features[e])};var m=e.vectorTile.VectorTileFeature,g=y;function y(e,t){this.options=t||{},this.features=e,this.length=e.length}function v(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}y.prototype.feature=function(e){return new v(this.features[e],this.options.extent)},v.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var i=0;i<t.length;i++){for(var r=t[i],n=[],a=0;a<r.length;a++)n.push(new e.Point$1(r[a][0],r[a][1]));this.geometry.push(n)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,r=1/0,n=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[t,r,i,n]},v.prototype.toGeoJSON=m.prototype.toGeoJSON;var b=w,x=g;function w(t){var i=new e.pbf;return function(e,t){for(var i in e.layers)t.writeMessage(3,S,e.layers[i])}(t,i),i.finish()}function S(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)r.feature=e.feature(i),t.writeMessage(2,A,r);var n=r.keys;for(i=0;i<n.length;i++)t.writeStringField(3,n[i]);var a=r.values;for(i=0;i<a.length;i++)t.writeMessage(4,C,a[i])}function A(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,k,e),t.writeVarintField(3,i.type),t.writeMessage(4,T,i)}function k(e,t){var i=e.feature,r=e.keys,n=e.values,a=e.keycache,o=e.valuecache;for(var s in i.properties){var l=a[s];void 0===l&&(r.push(s),a[s]=l=r.length-1),t.writeVarint(l);var u=i.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,d=o[p];void 0===d&&(n.push(u),o[p]=d=n.length-1),t.writeVarint(d)}}function E(e,t){return(t<<3)+(7&e)}function I(e){return e<<1^e>>31}function T(e,t){for(var i=e.loadGeometry(),r=e.type,n=0,a=0,o=i.length,s=0;s<o;s++){var l=i[s],u=1;1===r&&(u=l.length),t.writeVarint(E(1,u));for(var c=3===r?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==r&&t.writeVarint(E(2,c-1));var d=l[p].x-n,h=l[p].y-a;t.writeVarint(I(d)),t.writeVarint(I(h)),n+=d,a+=h}3===r&&t.writeVarint(E(7,1))}}function C(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function P(e,t,i,r){L(e,i,r),L(t,2*i,2*r),L(t,2*i+1,2*r+1)}function L(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function R(e,t,i,r){var n=e-i,a=t-r;return n*n+a*a}b.fromVectorTileJs=w,b.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var r in e)i[r]=new g(e[r].features,t),i[r].name=r,i[r].version=t.version,i[r].extent=t.extent;return w({layers:i})},b.GeoJSONWrapper=x;var M=function(e){return e[0]},z=function(e){return e[1]},D=function(e,t,i,r,n){void 0===t&&(t=M),void 0===i&&(i=z),void 0===r&&(r=64),void 0===n&&(n=Float64Array),this.nodeSize=r,this.points=e;for(var a=e.length<65536?Uint16Array:Uint32Array,o=this.ids=new a(e.length),s=this.coords=new n(2*e.length),l=0;l<e.length;l++)o[l]=l,s[2*l]=t(e[l]),s[2*l+1]=i(e[l]);!function e(t,i,r,n,a,o){if(!(a-n<=r)){var s=n+a>>1;!function e(t,i,r,n,a,o){for(;a>n;){if(a-n>600){var s=a-n+1,l=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,i,r,Math.max(n,Math.floor(r-l*c/s+p)),Math.min(a,Math.floor(r+(s-l)*c/s+p)),o)}var d=i[2*r+o],h=n,f=a;for(P(t,i,n,r),i[2*a+o]>d&&P(t,i,n,a);h<f;){for(P(t,i,h,f),h++,f--;i[2*h+o]<d;)h++;for(;i[2*f+o]>d;)f--}i[2*n+o]===d?P(t,i,n,f):P(t,i,++f,a),f<=r&&(n=f+1),r<=f&&(a=f-1)}}(t,i,s,n,a,o%2),e(t,i,r,n,s-1,o+1),e(t,i,r,s+1,a,o+1)}}(o,s,r,0,o.length-1,0)};D.prototype.range=function(e,t,i,r){return function(e,t,i,r,n,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),d=u.pop(),h=u.pop();if(d-h<=o)for(var f=h;f<=d;f++)l=t[2*f+1],(s=t[2*f])>=i&&s<=n&&l>=r&&l<=a&&c.push(e[f]);else{var _=Math.floor((h+d)/2);l=t[2*_+1],(s=t[2*_])>=i&&s<=n&&l>=r&&l<=a&&c.push(e[_]);var m=(p+1)%2;(0===p?i<=s:r<=l)&&(u.push(h),u.push(_-1),u.push(m)),(0===p?n>=s:a>=l)&&(u.push(_+1),u.push(d),u.push(m))}}return c}(this.ids,this.coords,e,t,i,r,this.nodeSize)},D.prototype.within=function(e,t,i){return function(e,t,i,r,n,a){for(var o=[0,e.length-1,0],s=[],l=n*n;o.length;){var u=o.pop(),c=o.pop(),p=o.pop();if(c-p<=a)for(var d=p;d<=c;d++)R(t[2*d],t[2*d+1],i,r)<=l&&s.push(e[d]);else{var h=Math.floor((p+c)/2),f=t[2*h],_=t[2*h+1];R(f,_,i,r)<=l&&s.push(e[h]);var m=(u+1)%2;(0===u?i-n<=f:r-n<=_)&&(o.push(p),o.push(h-1),o.push(m)),(0===u?i+n>=f:r+n>=_)&&(o.push(h+1),o.push(c),o.push(m))}}return s}(this.ids,this.coords,e,t,i,this.nodeSize)};var B={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},F=function(e){this.options=G(Object.create(B),e),this.trees=new Array(this.options.maxZoom+1)};function O(e,t,i,r,n){return{x:e,y:t,zoom:1/0,id:i,parentId:-1,numPoints:r,properties:n}}function N(e,t){var i=e.geometry.coordinates,r=i[1];return{x:V(i[0]),y:j(r),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:q(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,i=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var t,i,r}function q(e){var t=e.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return G(G({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function V(e){return e/360+.5}function j(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function G(e,t){for(var i in t)e[i]=t[i];return e}function K(e){return e.x}function Z(e){return e.y}function H(e,t,i,r,n,a){var o=n-i,s=a-r;if(0!==o||0!==s){var l=((e-i)*o+(t-r)*s)/(o*o+s*s);l>1?(i=n,r=a):l>0&&(i+=o*l,r+=s*l)}return(o=e-i)*o+(s=t-r)*s}function Q(e,t,i,r){var n={id:void 0===e?null:e,type:t,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)W(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<t.length;r++)W(e,t[r]);else if("MultiPolygon"===i)for(r=0;r<t.length;r++)for(var n=0;n<t[r].length;n++)W(e,t[r][n])}(n),n}function W(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function J(e,t,i,r){if(t.geometry){var n=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===a)X(n,s);else if("MultiPoint"===a)for(var u=0;u<n.length;u++)X(n[u],s);else if("LineString"===a)Y(n,s,o,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(u=0;u<n.length;u++)Y(n[u],s=[],o,!1),e.push(Q(l,"LineString",s,t.properties));return}$(n,s,o,!1)}else if("Polygon"===a)$(n,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<t.geometry.geometries.length;u++)J(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<n.length;u++){var c=[];$(n[u],c,o,!0),s.push(c)}}e.push(Q(l,a,s,t.properties))}}function X(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function Y(e,t,i,r){for(var n,a,o=0,s=0;s<e.length;s++){var l=ee(e[s][0]),u=te(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=r?(n*u-l*a)/2:Math.sqrt(Math.pow(l-n,2)+Math.pow(u-a,2))),n=l,a=u}var c=t.length-3;t[2]=1,function e(t,i,r,n){for(var a,o=n,s=r-i>>1,l=r-i,u=t[i],c=t[i+1],p=t[r],d=t[r+1],h=i+3;h<r;h+=3){var f=H(t[h],t[h+1],u,c,p,d);if(f>o)a=h,o=f;else if(f===o){var _=Math.abs(h-s);_<l&&(a=h,l=_)}}o>n&&(a-i>3&&e(t,i,a,n),t[a+2]=o,r-a>3&&e(t,a,r,n))}(t,0,c,i),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function $(e,t,i,r){for(var n=0;n<e.length;n++){var a=[];Y(e[n],a,i,r),t.push(a)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function ie(e,t,i,r,n,a,o,s){if(r/=t,a>=(i/=t)&&o<r)return e;if(o<i||a>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,d=c.type,h=0===n?c.minX:c.minY,f=0===n?c.maxX:c.maxY;if(h>=i&&f<r)l.push(c);else if(!(f<i||h>=r)){var _=[];if("Point"===d||"MultiPoint"===d)re(p,_,i,r,n);else if("LineString"===d)ne(p,_,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===d)oe(p,_,i,r,n,!1);else if("Polygon"===d)oe(p,_,i,r,n,!0);else if("MultiPolygon"===d)for(var m=0;m<p.length;m++){var g=[];oe(p[m],g,i,r,n,!0),g.length&&_.push(g)}if(_.length){if(s.lineMetrics&&"LineString"===d){for(m=0;m<_.length;m++)l.push(Q(c.id,d,_[m],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===_.length?(d="LineString",_=_[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===_.length?"Point":"MultiPoint"),l.push(Q(c.id,d,_,c.tags))}}}return l.length?l:null}function re(e,t,i,r,n){for(var a=0;a<e.length;a+=3){var o=e[a+n];o>=i&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function ne(e,t,i,r,n,a,o){for(var s,l,u=ae(e),c=0===n?le:ue,p=e.start,d=0;d<e.length-3;d+=3){var h=e[d],f=e[d+1],_=e[d+2],m=e[d+3],g=e[d+4],y=0===n?h:f,v=0===n?m:g,b=!1;o&&(s=Math.sqrt(Math.pow(h-m,2)+Math.pow(f-g,2))),y<i?v>i&&(l=c(u,h,f,m,g,i),o&&(u.start=p+s*l)):y>r?v<r&&(l=c(u,h,f,m,g,r),o&&(u.start=p+s*l)):se(u,h,f,_),v<i&&y>=i&&(l=c(u,h,f,m,g,i),b=!0),v>r&&y<=r&&(l=c(u,h,f,m,g,r),b=!0),!a&&b&&(o&&(u.end=p+s*l),t.push(u),u=ae(e)),o&&(p+=s)}var x=e.length-3;h=e[x],f=e[x+1],_=e[x+2],(y=0===n?h:f)>=i&&y<=r&&se(u,h,f,_),x=u.length-3,a&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&se(u,u[0],u[1],u[2]),u.length&&t.push(u)}function ae(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function oe(e,t,i,r,n,a){for(var o=0;o<e.length;o++)ne(e[o],t,i,r,n,a,!1)}function se(e,t,i,r){e.push(t),e.push(i),e.push(r)}function le(e,t,i,r,n,a){var o=(a-t)/(r-t);return e.push(a),e.push(i+(n-i)*o),e.push(1),o}function ue(e,t,i,r,n,a){var o=(a-i)/(n-i);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function ce(e,t){for(var i=[],r=0;r<e.length;r++){var n,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)n=pe(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){n=[];for(var s=0;s<a.geometry.length;s++)n.push(pe(a.geometry[s],t))}else if("MultiPolygon"===o)for(n=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(pe(a.geometry[s][u],t));n.push(l)}i.push(Q(a.id,o,n,a.tags))}return i}function pe(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var r=0;r<e.length;r+=3)i.push(e[r]+t,e[r+1],e[r+2]);return i}function de(e,t){if(e.transformed)return e;var i,r,n,a=1<<e.z,o=e.x,s=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(he(u[r],u[r+1],t,a,o,s));else for(r=0;r<u.length;r++){var p=[];for(n=0;n<u[r].length;n+=2)p.push(he(u[r][n],u[r][n+1],t,a,o,s));l.geometry.push(p)}}return e.transformed=!0,e}function he(e,t,i,r,n,a){return[Math.round(i*(e*r-n)),Math.round(i*(t*r-a))]}function fe(e,t,i,r,n){for(var a=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,_e(o,e[s],a,n);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),p>o.maxY&&(o.maxY=p)}return o}function _e(e,t,i,r){var n=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<n.length;s+=3)o.push(n[s]),o.push(n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)me(o,n,e,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<n.length;s++)me(o,n[s],e,i,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<n.length;l++){var u=n[l];for(s=0;s<u.length;s++)me(o,u[s],e,i,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=n.start/n.size,c.mapbox_clip_end=n.end/n.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(d.id=t.id),e.features.push(d)}}function me(e,t,i,r,n,a){var o=r*r;if(r>0&&t.size<(n?o:r))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;n&&function(e,t){for(var i=0,r=0,n=e.length,a=n-2;r<n;a=r,r+=2)i+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(i>0===t)for(r=0,n=e.length;r<n/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[n-2-r],e[r+1]=e[n-1-r],e[n-2-r]=o,e[n-1-r]=s}}(s,a),e.push(s)}}function ge(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)J(i,e.features[r],t,r);else J(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var i=t.buffer/t.extent,r=e,n=ie(e,1,-1-i,i,0,-1,2,t),a=ie(e,1,1-i,2+i,0,-1,2,t);return(n||a)&&(r=ie(e,1,-i,1+i,0,-1,2,t)||[],n&&(r=ce(n,1).concat(r)),a&&(r=r.concat(ce(a,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,i){return 32*((1<<e)*i+t)+e}function ve(e,t){var i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return t(null,null);var n=new _(r.features),a=b(n);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:n,rawData:a.buffer})}F.prototype.load=function(e){var t=this.options,i=t.log,r=t.minZoom,n=t.maxZoom,a=t.nodeSize;i&&console.time("total time");var o="prepare "+e.length+" points";i&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(N(e[l],l));this.trees[n+1]=new D(s,K,Z,a,Float32Array),i&&console.timeEnd(o);for(var u=n;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new D(s,K,Z,a,Float32Array),i&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return i&&console.timeEnd("total time"),this},F.prototype.getClusters=function(e,t){var i=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),n=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,n=180;else if(i>n){var o=this.getClusters([i,r,180,a],t),s=this.getClusters([-180,r,n,a],t);return o.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],c=0,p=l.range(V(i),j(a),V(n),j(r));c<p.length;c+=1){var d=l.points[p[c]];u.push(d.numPoints?U(d):this.points[d.index])}return u},F.prototype.getChildren=function(e){var t=this._getOriginId(e),i=this._getOriginZoom(e),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);var a=n.points[t];if(!a)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,u=n.within(a.x,a.y,o);l<u.length;l+=1){var c=n.points[u[l]];c.parentId===e&&s.push(c.numPoints?U(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},F.prototype.getLeaves=function(e,t,i){var r=[];return this._appendLeaves(r,e,t=t||10,i=i||0,0),r},F.prototype.getTile=function(e,t,i){var r=this.trees[this._limitZoom(e)],n=Math.pow(2,e),a=this.options,o=a.radius/a.extent,s=(i-o)/n,l=(i+1+o)/n,u={features:[]};return this._addTileFeatures(r.range((t-o)/n,s,(t+1+o)/n,l),r.points,t,i,n,u),0===t&&this._addTileFeatures(r.range(1-o/n,s,1,l),r.points,n,i,n,u),t===n-1&&this._addTileFeatures(r.range(0,s,o/n,l),r.points,-1,i,n,u),u.features.length?u:null},F.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t},F.prototype._appendLeaves=function(e,t,i,r,n){for(var a=0,o=this.getChildren(t);a<o.length;a+=1){var s=o[a],l=s.properties;if(l&&l.cluster?n+l.point_count<=r?n+=l.point_count:n=this._appendLeaves(e,l.cluster_id,i,r,n):n<r?n++:e.push(s),e.length===i)break}return n},F.prototype._addTileFeatures=function(e,t,i,r,n,a){for(var o=0,s=e;o<s.length;o+=1){var l=t[s[o]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*n-i)),Math.round(this.options.extent*(l.y*n-r))]],tags:u?q(l):this.points[l.index].properties},p=void 0;u?p=l.id:this.options.generateId?p=l.index:this.points[l.index].id&&(p=this.points[l.index].id),void 0!==p&&(c.id=p),a.features.push(c)}},F.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},F.prototype._cluster=function(e,t){for(var i=[],r=this.options,n=r.reduce,a=r.minPoints,o=r.radius/(r.extent*Math.pow(2,t)),s=0;s<e.length;s++){var l=e[s];if(!(l.zoom<=t)){l.zoom=t;for(var u=this.trees[t+1],c=u.within(l.x,l.y,o),p=l.numPoints||1,d=p,h=0,f=c;h<f.length;h+=1){var _=u.points[f[h]];_.zoom>t&&(d+=_.numPoints||1)}if(d>=a){for(var m=l.x*p,g=l.y*p,y=n&&p>1?this._map(l,!0):null,v=(s<<5)+(t+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=u.points[x[b]];if(!(w.zoom<=t)){w.zoom=t;var S=w.numPoints||1;m+=w.x*S,g+=w.y*S,w.parentId=v,n&&(y||(y=this._map(l,!0)),n(y,this._map(w)))}}l.parentId=v,i.push(O(m/d,g/d,v,d,y))}else if(i.push(l),d>1)for(var A=0,k=c;A<k.length;A+=1){var E=u.points[k[A]];E.zoom<=t||(E.zoom=t,i.push(E))}}}return i},F.prototype._getOriginId=function(e){return e-this.points.length>>5},F.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},F.prototype._map=function(e,t){if(e.numPoints)return t?G({},e.properties):e.properties;var i=this.points[e.index].properties,r=this.options.map(i);return t&&r===i?G({},r):r},ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ge.prototype.splitTile=function(e,t,i,r,n,a,o){for(var s=[e,t,i,r],l=this.options,u=l.debug;s.length;){r=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=ye(t,i,r),d=this.tiles[p];if(!d&&(u>1&&console.time("creation"),d=this.tiles[p]=fe(e,t,i,r,l),this.tileCoords.push({z:t,x:i,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var h="z"+t;this.stats[h]=(this.stats[h]||0)+1,this.total++}if(d.source=e,n){if(t===l.maxZoom||t===n)continue;var f=1<<n-t;if(i!==Math.floor(a/f)||r!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){u>1&&console.time("clipping");var _,m,g,y,v,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,A=1+x;_=m=g=y=null,v=ie(e,c,i-x,i+S,0,d.minX,d.maxX,l),b=ie(e,c,i+w,i+A,0,d.minX,d.maxX,l),e=null,v&&(_=ie(v,c,r-x,r+S,1,d.minY,d.maxY,l),m=ie(v,c,r+w,r+A,1,d.minY,d.maxY,l),v=null),b&&(g=ie(b,c,r-x,r+S,1,d.minY,d.maxY,l),y=ie(b,c,r+w,r+A,1,d.minY,d.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(_||[],t+1,2*i,2*r),s.push(m||[],t+1,2*i,2*r+1),s.push(g||[],t+1,2*i+1,2*r),s.push(y||[],t+1,2*i+1,2*r+1)}}},ge.prototype.getTile=function(e,t,i){var r=this.options,n=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=ye(e,t=(t%o+o)%o,i);if(this.tiles[s])return de(this.tiles[s],n);a>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,u=e,c=t,p=i;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[ye(u,c,p)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,p),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,e,t,i),a>1&&console.timeEnd("drilling down"),this.tiles[s]?de(this.tiles[s],n):null):null};var be=function(t){function i(e,i,r,n){t.call(this,e,i,r,ve),n&&(this.loadGeoJSON=n)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var n=!!(r&&r.request&&r.request.collectResourceTiming)&&new e.RequestPerformance(r.request);this.loadGeoJSON(r,(function(a,o){if(a||!o)return i(a);if("object"!=typeof o)return i(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function e(t,i){var r,n=t&&t.type;if("FeatureCollection"===n)for(r=0;r<t.features.length;r++)e(t.features[r],i);else if("GeometryCollection"===n)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],i);else if("Feature"===n)e(t.geometry,i);else if("Polygon"===n)p(t.coordinates,i);else if("MultiPolygon"===n)for(r=0;r<t.coordinates.length;r++)p(t.coordinates[r],i);return t}(o,!0);try{if(r.filter){var s=e.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return e.key+": "+e.message})).join(", "));var l=o.features.filter((function(e){return s.value.evaluate({zoom:0},e)}));o={type:"FeatureCollection",features:l}}t._geoJSONIndex=r.cluster?new F(function(t){var i=t.superclusterOptions,r=t.clusterProperties;if(!r||!i)return i;for(var n={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var p=c[u],d=r[p],h=d[0],f=e.createExpression(d[1]),_=e.createExpression("string"==typeof h?[h,["accumulated"],["get",p]]:h);n[p]=f.value,a[p]=_.value}return i.map=function(e){s.properties=e;for(var t={},i=0,r=l;i<r.length;i+=1){var a=r[i];t[a]=n[a].evaluate(o,s)}return t},i.reduce=function(e,t){s.properties=t;for(var i=0,r=l;i<r.length;i+=1){var n=r[i];o.accumulated=e[n],e[n]=a[n].evaluate(o,s)}},i}(r)).load(o.features):function(e,t){return new ge(e,t)}(o,r.geojsonVtOptions)}catch(a){return i(a)}t.loaded={};var u={};if(n){var c=n.finish();c&&(u.resourceTiming={},u.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}i(null,u)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(e,i){var r=this.loaded;return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,i):this.loadTile(e,i)},i.prototype.loadGeoJSON=function(t,i){if(t.request)e.getJSON(t.request,i);else{if("string"!=typeof t.data)return i(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},i.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},i.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},i.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},i}(l),xe=function(t){var i=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(i.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');i.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return xe.prototype.setReferrer=function(e,t){this.referrer=t},xe.prototype.setImages=function(e,t,i){for(var r in this.availableImages[e]=t,this.workerSources[e]){var n=this.workerSources[e][r];for(var a in n)n[a].availableImages=t}i()},xe.prototype.setLayers=function(e,t,i){this.getLayerIndex(e).replace(t),i()},xe.prototype.updateLayers=function(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()},xe.prototype.loadTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).loadTile(t,i)},xe.prototype.loadDEMTile=function(e,t,i){this.getDEMWorkerSource(e,t.source).loadTile(t,i)},xe.prototype.reloadTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).reloadTile(t,i)},xe.prototype.abortTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)},xe.prototype.removeTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)},xe.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},xe.prototype.removeSource=function(e,t,i){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,i):i()}},xe.prototype.loadWorkerSource=function(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}},xe.prototype.syncRTLPluginState=function(t,i,r){try{e.plugin.setState(i);var n=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=n){this.self.importScripts(n);var a=e.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from "+n),a)}}catch(e){r(e.toString())}},xe.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},xe.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},xe.prototype.getWorkerSource=function(e,t,i){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][i]||(this.workerSources[e][t][i]=new this.workerSourceTypes[t]({send:function(t,i,n){r.actor.send(t,i,n,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][i]},xe.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]},xe.prototype.enforceCacheSizeLimit=function(t,i){e.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xe(self)),xe})),r(["./shared"],(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!i(e)}function i(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[i=e&&e.failIfMajorPerformanceCaveat]&&(r[i]=function(e){var i=function(e){var i=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(e);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=i);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(t,i,r){var n=e.window.document.createElement(t);return void 0!==i&&(n.className=i),r&&r.appendChild(n),n},createNS:function(t,i){return e.window.document.createElementNS(t,i)}},r=e.window.document&&e.window.document.documentElement.style;function n(e){if(!r)return e[0];for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var a,o=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){r&&o&&(a=r[o],r[o]="none")},i.enableDrag=function(){r&&o&&(r[o]=a)};var s=n(["transform","WebkitTransform"]);i.setTransform=function(e,t){e.style[s]=t};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch(e){l=!1}i.addEventListener=function(e,t,i,r){void 0===r&&(r={}),e.addEventListener(t,i,"passive"in r&&l?r:r.capture)},i.removeEventListener=function(e,t,i,r){void 0===r&&(r={}),e.removeEventListener(t,i,"passive"in r&&l?r:r.capture)};var c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};function p(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",c,!0)}),0)},i.mousePos=function(t,i){var r=t.getBoundingClientRect();return new e.Point(i.clientX-r.left-t.clientLeft,i.clientY-r.top-t.clientTop)},i.touchPos=function(t,i){for(var r=t.getBoundingClientRect(),n=[],a=0;a<i.length;a++)n.push(new e.Point(i[a].clientX-r.left-t.clientLeft,i[a].clientY-r.top-t.clientTop));return n},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var d=function(t){function i(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,i=this.requestors;t<i.length;t+=1){var r=i[t];this._notify(r.ids,r.callback)}this.requestors=[]}},i.prototype.getImage=function(e){return this.images[e]},i.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},i.prototype._validate=function(t,i){var r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},i.prototype._validateStretch=function(e,t){if(!e)return!0;for(var i=0,r=0,n=e;r<n.length;r+=1){var a=n[r];if(a[0]<i||a[1]<a[0]||t<a[1])return!1;i=a[1]}return!0},i.prototype._validateContent=function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))},i.prototype.updateImage=function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0},i.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(e,t){var i=!0;if(!this.isLoaded())for(var r=0,n=e;r<n.length;r+=1)this.images[n[r]]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})},i.prototype._notify=function(t,i){for(var r={},n=0,a=t;n<a.length;n+=1){var o=a[n];this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,r)},i.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},i.prototype.getPattern=function(t){var i=this.patterns[t],r=this.getImage(t);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{var n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:a}}return this._updatePatternAtlas(),this.patterns[t].position},i.prototype.bind=function(t){var i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var t=[];for(var i in this.patterns)t.push(this.patterns[i].bin);var r=e.potpack(t),n=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:n||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,d=p.width,h=p.height;e.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c},{width:d,height:h}),e.RGBAImage.copy(p,o,{x:0,y:h-1},{x:u,y:c-1},{width:d,height:1}),e.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c+h},{width:d,height:1}),e.RGBAImage.copy(p,o,{x:d-1,y:0},{x:u-1,y:c},{width:1,height:h}),e.RGBAImage.copy(p,o,{x:0,y:0},{x:u+d,y:c},{width:1,height:h})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(e){for(var t=0,i=e;t<i.length;t+=1){var r=i[t];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var n=this.images[r];p(n)&&this.updateImage(r,n)}}},i}(e.Evented),h=m,f=m,_=1e20;function m(e,t,i,r,n,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=n||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(e,t,i,r,n,a,o){for(var s=0;s<t;s++){for(var l=0;l<i;l++)r[l]=e[l*t+s];for(y(r,n,a,o,i),l=0;l<i;l++)e[l*t+s]=n[l]}for(l=0;l<i;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for(y(r,n,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(n[s])}}function y(e,t,i,r,n){i[0]=0,r[0]=-_,r[1]=+_;for(var a=1,o=0;a<n;a++){for(var s=(e[a]+a*a-(e[i[o]]+i[o]*i[o]))/(2*a-2*i[o]);s<=r[o];)o--,s=(e[a]+a*a-(e[i[o]]+i[o]*i[o]))/(2*a-2*i[o]);i[++o]=a,r[o]=s,r[o+1]=+_}for(a=0,o=0;a<n;a++){for(;r[o+1]<a;)o++;t[a]=(a-i[o])*(a-i[o])+e[i[o]]}}m.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var n=t.data[4*r+3]/255;this.gridOuter[r]=1===n?0:0===n?_:Math.pow(Math.max(0,.5-n),2),this.gridInner[r]=1===n?_:0===n?0:Math.pow(Math.max(0,n-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},h.default=f;var v=function(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}};v.prototype.setURL=function(e){this.url=e},v.prototype.getGlyphs=function(t,i){var r=this,n=[];for(var a in t)for(var o=0,s=t[a];o<s.length;o+=1)n.push({stack:a,id:s[o]});e.asyncAll(n,(function(e,t){var i=e.stack,n=e.id,a=r.entries[i];a||(a=r.entries[i]={glyphs:{},requests:{},ranges:{}});var o=a.glyphs[n];if(void 0===o){if(o=r._tinySDF(a,i,n))return a.glyphs[n]=o,void t(null,{stack:i,id:n,glyph:o});var s=Math.floor(n/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else if(a.ranges[s])t(null,{stack:i,id:n,glyph:o});else{var l=a.requests[s];l||(l=a.requests[s]=[],v.loadGlyphRange(i,s,r.url,r.requestManager,(function(e,t){if(t){for(var i in t)r._doesCharSupportLocalGlyph(+i)||(a.glyphs[+i]=t[+i]);a.ranges[s]=!0}for(var n=0,o=l;n<o.length;n+=1)(0,o[n])(e,t);delete a.requests[s]}))),l.push((function(e,r){e?t(e):r&&t(null,{stack:i,id:n,glyph:r[n]||null})}))}}else t(null,{stack:i,id:n,glyph:o})}),(function(e,t){if(e)i(e);else if(t){for(var r={},n=0,a=t;n<a.length;n+=1){var o=a[n],s=o.stack,l=o.id,u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}i(null,r)}}))},v.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},v.prototype._tinySDF=function(t,i,r){var n=this.localIdeographFontFamily;if(n&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(i)?o="900":/medium/i.test(i)?o="500":/light/i.test(i)&&(o="200"),a=t.tinySDF=new v.TinySDF(24,3,8,.25,n,o)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(t,i,r,n,a){var o=256*i,s=o+255,l=n.transformRequest(n.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(l,(function(t,i){if(t)a(t);else if(i){for(var r={},n=0,o=e.parseGlyphPBF(i);n<o.length;n+=1){var s=o[n];r[s.id]=s}a(null,r)}}))},v.TinySDF=h;var b=function(){this.specification=e.styleSpec.light.position};b.prototype.possiblyEvaluate=function(t,i){return e.sphericalToCartesian(t.expression.evaluate(i))},b.prototype.interpolate=function(t,i,r){return{x:e.number(t.x,i.x,r),y:e.number(t.y,i.y,r),z:e.number(t.z,i.z,r)}};var x=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new b,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),w=function(t){function i(i){t.call(this),this._transitionable=new e.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(t,i){if(void 0===i&&(i={}),!this._validate(e.validateLight,t,i))for(var r in t){var n=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),n):this._transitionable.setValue(r,n)}},i.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},i.prototype._validate=function(t,i,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},i}(e.Evented),S=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};S.prototype.getDash=function(e,t){var i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]},S.prototype.getDashRanges=function(e,t,i){var r=[],n=e.length%2==1?-e[e.length-1]*i:0,a=e[0]*i,o=!0;r.push({left:n,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){var u=e[l];r.push({left:n=s*i,right:a=(s+=u)*i,isDash:o=!o,zeroLength:0===u})}return r},S.prototype.addRoundDash=function(e,t,i){for(var r=t/2,n=-i;n<=i;n++)for(var a=this.width*(this.nextRow+i+n),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),p=Math.min(u,c),d=void 0,h=n/i*(r+1);if(s.isDash){var f=r-Math.abs(h);d=Math.sqrt(p*p+f*f)}else d=r-Math.sqrt(p*p+h*h);this.data[a+l]=Math.max(0,Math.min(255,d+128))}},S.prototype.addRegularDash=function(e){for(var t=e.length-1;t>=0;--t){var i=e[t],r=e[t+1];i.zeroLength?e.splice(t,1):r&&r.isDash===i.isDash&&(r.left=i.left,e.splice(t,1))}var n=e[0],a=e[e.length-1];n.isDash===a.isDash&&(n.left=a.left-this.width,a.right=n.right+this.width);for(var o=this.width*this.nextRow,s=0,l=e[s],u=0;u<this.width;u++){u/l.right>1&&(l=e[++s]);var c=Math.abs(u-l.left),p=Math.abs(u-l.right),d=Math.min(c,p);this.data[o+u]=Math.max(0,Math.min(255,(l.isDash?d:-d)+128))}},S.prototype.addDash=function(t,i){var r=i?7:0,n=2*r+1;if(this.nextRow+n>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var a=0,o=0;o<t.length;o++)a+=t[o];if(0!==a){var s=this.width/a,l=this.getDashRanges(t,this.width,s);i?this.addRoundDash(l,s,r):this.addRegularDash(l)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:a};return this.nextRow+=n,this.dirty=!0,u},S.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var A=function t(i,r){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var n=this.workerPool.acquire(this.id),a=0;a<n.length;a++){var o=new t.Actor(n[a],r,this.id);o.name="Worker "+a,this.actors.push(o)}};function k(t,i,r){var n=function(n,a){if(n)return r(n);if(a){var o=e.pick(e.extend(a,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(o.vectorLayers=a.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=i.canonicalizeTileset(o,t.url),r(null,o)}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url),e.ResourceType.Source),n):e.browser.frame((function(){return n(null,t)}))}A.prototype.broadcast=function(t,i,r){e.asyncAll(this.actors,(function(e,r){e.send(t,i,r)}),r=r||function(){})},A.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},A.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},A.Actor=e.Actor;var E=function(t,i,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=r||24};E.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},E.prototype.contains=function(t){var i=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),n=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=r&&t.x<a&&t.y>=n&&t.y<o};var I=function(t){function i(i,r,n,a){if(t.call(this),this.id=i,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(i,r){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this},i.prototype.setUrl=function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return e.extend({},this._options)},i.prototype.loadTile=function(t,i){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function a(r,n){return delete t.request,t.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}n.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",n,a.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",n,a.bind(this)))},i.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(e.Evented),T=function(t){function i(i,r,n,a){t.call(this),this.id=i,this.dispatcher=n,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(i,r){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return e.extend({},this._options)},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.loadTile=function(t,i){var r=this,n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(n,e.ResourceType.Tile),(function(n,a){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(n)t.state="errored",i(n);else if(a){r.map._refreshExpiredTiles&&t.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=r.map.painter.context,s=o.gl;t.texture=r.map.painter.getTileTexture(a.width),t.texture?t.texture.update(a,{useMipmap:!0}):(t.texture=new e.Texture(o,a,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),i(null)}}))},i.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},i.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},i.prototype.hasTransition=function(){return!1},i}(e.Evented),C=function(t){function i(i,r,n,a){t.call(this,i,r,n,a),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(t,i){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function n(e,r){e&&(t.state="errored",i(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,a){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData(a),delete a.cacheControl,delete a.expires;var o=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?a:e.browser.getImageData(a,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,n.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},i.prototype._getNeighboringTiles=function(t){var i=t.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,a=0===i.x?t.wrap-1:t.wrap,o=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,i.z,n,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,n,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,n,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},i}(T),P=function(t){function i(i,r,n,a){t.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=n.getActor(),this.setEventedParent(a),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)t.fire(new e.ErrorEvent(i));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setData=function(t){var i=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)i.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(r.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new e.Event("data",r))}})),this},i.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},i.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},i.prototype.getClusterLeaves=function(e,t,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},r),this},i.prototype._updateWorkerData=function(t){var i=this;this._loaded=!1;var r=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(n),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(n),this.actor.send(this.type+".loadData",r,(function(e,n){i._removed||n&&n.abandoned||(i._loaded=!0,n&&n.resourceTiming&&n.resourceTiming[i.id]&&(i._resourceTiming=n.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:r.source},null),t(e))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(t,i){var r=this,n=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(n,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===n),i(null))}))},i.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(e.Evented),L=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),R=function(t){function i(e,i,r,n){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(n),this.options=i}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(t,i){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,a){r._loaded=!0,n?r.fire(new e.ErrorEvent(n)):a&&(r.image=a,t&&(r.coordinates=t),i&&i(),r._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setCoordinates=function(t){var i=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var i=1/0,r=1/0,n=-1/0,a=-1/0,o=0,s=t;o<s.length;o+=1){var l=s[o];i=Math.min(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.x),a=Math.max(a,l.y)}var u=Math.max(n-i,a-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),p=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((i+n)/2*p),Math.floor((r+a)/2*p))}(r),this.minzoom=this.maxzoom=this.tileID.z;var n=r.map((function(e){return i.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(n[0].x,n[0].y,0,0),this._boundsArray.emplaceBack(n[1].x,n[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(n[3].x,n[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(n[2].x,n[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,i=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(e.Evented),M=function(t){function i(e,i,r,n){t.call(this,e,i,r,n),this.roundZoom=!0,this.type="video",this.options=i}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1;var i=this.options;this.urls=[];for(var r=0,n=i.urls;r<n.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(n[r],e.ResourceType.Source).url);e.getVideo(this.urls,(function(i,r){t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(t){if(this.video){var i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=t}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,i=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var n=this.tiles[r];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(R),z=function(t){function i(i,r,n,a){t.call(this,i,r,n,a),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,r=i.gl;for(var n in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var a=this.tiles[n];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var i=t[e];if(isNaN(i)||i<=0)return!0}return!1},i}(R),D={vector:I,raster:T,"raster-dem":C,geojson:P,video:M,image:R,canvas:z};function B(t,i){var r=e.identity([]);return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(i.toUnwrapped()))}function F(e,t,i,r,n,a){var o=function(e,t,i){if(e)for(var r=0,n=e;r<n.length;r+=1){var a=t[n[r]];if(a&&a.source===i&&"fill-extrusion"===a.type)return!0}else for(var o in t){var s=t[o];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(n&&n.layers,t,e.id),s=a.maxPitchScaleFactor(),l=e.tilesIn(r,s,o);l.sort(O);for(var u=[],c=0,p=l;c<p.length;c+=1){var d=p[c];u.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,i,e._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,n,a,s,B(e.transform,d.tileID))})}var h=function(e){for(var t={},i={},r=0,n=e;r<n.length;r+=1){var a=n[r],o=a.queryResults,s=a.wrappedTileID,l=i[s]=i[s]||{};for(var u in o)for(var c=o[u],p=l[u]=l[u]||{},d=t[u]=t[u]||[],h=0,f=c;h<f.length;h+=1){var _=f[h];p[_.featureIndex]||(p[_.featureIndex]=!0,d.push(_))}}return t}(u);for(var f in h)h[f].forEach((function(t){var i=t.feature,r=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return h}function O(e,t){var i=e.tileID,r=t.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var N=function(e,t){this.max=e,this.onRemove=t,this.reset()};N.prototype.reset=function(){for(var e in this.data)for(var t=0,i=this.data[e];t<i.length;t+=1){var r=i[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},N.prototype.add=function(e,t,i){var r=this,n=e.wrapped().key;void 0===this.data[n]&&(this.data[n]=[]);var a={value:t,timeout:void 0};if(void 0!==i&&(a.timeout=setTimeout((function(){r.remove(e,a)}),i)),this.data[n].push(a),this.order.push(n),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},N.prototype.has=function(e){return e.wrapped().key in this.data},N.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},N.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},N.prototype.getByKey=function(e){var t=this.data[e];return t?t[0].value:null},N.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},N.prototype.remove=function(e,t){if(!this.has(e))return this;var i=e.wrapped().key,r=void 0===t?0:this.data[i].indexOf(t),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this},N.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},N.prototype.filter=function(e){var t=[];for(var i in this.data)for(var r=0,n=this.data[i];r<n.length;r+=1){var a=n[r];e(a.value)||t.push(a)}for(var o=0,s=t;o<s.length;o+=1){var l=s[o];this.remove(l.value.tileID,l)}};var U=function(e,t,i){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};U.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},U.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(e,t,i,r){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var n=e.gl;this.buffer=n.createBuffer(),e.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},V.prototype.enableAttributes=function(e,t){for(var i=0;i<this.attributes.length;i++){var r=t.attributes[this.attributes[i].name];void 0!==r&&e.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(e,t,i){for(var r=0;r<this.attributes.length;r++){var n=this.attributes[r],a=t.attributes[n.name];void 0!==a&&e.vertexAttribPointer(a,n.components,e[q[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var j=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};j.prototype.get=function(){return this.current},j.prototype.set=function(e){},j.prototype.getDefault=function(){return this.default},j.prototype.setDefault=function(){this.set(this.default)};var G=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getDefault=function(){return e.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(j),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(j),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(j),H=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(j),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(j),W=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(j),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(j),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(j),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(j),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(j),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(j),te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(j),ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(j),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(j),ne=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getDefault=function(){return e.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(j),ae=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(j),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(j),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(j),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(j),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(j),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(j),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(j),de=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(j),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(j),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(j),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(j),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(j),ge=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(j),ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(j),ve=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(j),be=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(j),xe=function(e){function t(t,i){e.call(this,t),this.context=t,this.parent=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t}(j),we=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(xe),Se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(xe),Ae=function(e,t,i,r){this.context=e,this.width=t,this.height=i;var n=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,n),r&&(this.depthAttachment=new Se(e,n))};Ae.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}e.deleteFramebuffer(this.framebuffer)};var ke=function(e,t,i){this.func=e,this.mask=t,this.range=i};ke.ReadOnly=!1,ke.ReadWrite=!0,ke.disabled=new ke(519,ke.ReadOnly,[0,1]);var Ee=function(e,t,i,r,n,a){this.test=e,this.ref=t,this.mask=i,this.fail=r,this.depthFail=n,this.pass=a};Ee.disabled=new Ee({func:519,mask:0},0,0,7680,7680,7680);var Ie=function(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i};Ie.disabled=new Ie(Ie.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Te=function(e,t,i){this.enable=e,this.mode=t,this.frontFace=i};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var Ce=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new K(this),this.clearStencil=new Z(this),this.colorMask=new H(this),this.depthMask=new Q(this),this.stencilMask=new W(this),this.stencilFunc=new J(this),this.stencilOp=new X(this),this.stencilTest=new Y(this),this.depthRange=new $(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ie(this),this.blendFunc=new re(this),this.blendColor=new ne(this),this.blendEquation=new ae(this),this.cullFace=new oe(this),this.cullFaceSide=new se(this),this.frontFace=new le(this),this.program=new ue(this),this.activeTexture=new ce(this),this.viewport=new pe(this),this.bindFramebuffer=new de(this),this.bindRenderbuffer=new he(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new _e(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ye(this),this.pixelStoreUnpackPremultiplyAlpha=new ve(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)};Ce.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(e,t){return new U(this,e,t)},Ce.prototype.createVertexBuffer=function(e,t,i){return new V(this,e,t,i)},Ce.prototype.createRenderbuffer=function(e,t,i){var r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),n},Ce.prototype.createFramebuffer=function(e,t,i){return new Ae(this,e,t,i)},Ce.prototype.clear=function(e){var t=e.color,i=e.depth,r=this.gl,n=0;t&&(n|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(n|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(n)},Ce.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ce.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(t){function i(i,r,n){var a=this;t.call(this),this.id=i,this.dispatcher=n,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(a._sourceLoaded=!0),a._sourceLoaded&&!a._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(a.reload(),a.transform&&a.update(a.transform))})),this.on("error",(function(){a._sourceErrored=!0})),this._source=function(t,i,r,n){var a=new D[i.type](t,i,r,n);if(a.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+a.id);return e.bindAll(["load","abort","unload","serialize","prepare"],a),a}(i,r,n,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},i.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},i.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},i.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(Le).map((function(e){return e.key}))},i.prototype.getRenderableIds=function(t){var i=this,r=[];for(var n in this._tiles)this._isIdRenderable(n,t)&&r.push(this._tiles[n]);return t?r.sort((function(t,r){var n=t.tileID,a=r.tileID,o=new e.Point(n.canonical.x,n.canonical.y)._rotate(i.transform.angle),s=new e.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle);return n.overscaledZ-a.overscaledZ||s.y-o.y||s.x-o.x})).map((function(e){return e.tileID.key})):r.map((function(e){return e.tileID})).sort(Le).map((function(e){return e.key}))},i.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},i.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},i.prototype._reloadTile=function(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))},i.prototype._tileLoaded=function(t,i,r,n){if(n)return t.state="errored",void(404!==n.status?this._source.fire(new e.ErrorEvent(n,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},i.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),i=0;i<t.length;i++){var r=t[i];if(e.neighboringTiles&&e.neighboringTiles[r]){var n=this.getTileByID(r);a(e,n),a(n,e)}}function a(e,t){e.needsHillshadePrepare=!0;var i=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}},i.prototype.getTile=function(e){return this.getTileByID(e.key)},i.prototype.getTileByID=function(e){return this._tiles[e]},i.prototype._retainLoadedChildren=function(e,t,i,r){for(var n in this._tiles){var a=this._tiles[n];if(!(r[n]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>i)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[o.key]=o;break}}}},i.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles){var i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(var r=e.overscaledZ-1;r>=t;r--){var n=e.scaledTo(r),a=this._getLoadedTile(n);if(a)return a}},i.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},i.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*i*5),n="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(n)},i.prototype.handleWrapJump=function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var i={};for(var r in this._tiles){var n=this._tiles[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),i[n.tileID.key]=n}for(var a in this._tiles=i,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}},i.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var n;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?n=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(n=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter((function(e){return r._source.hasTile(e)})))):n=[];var a=t.coveringZoomLevel(this._source),o=Math.max(a-i.maxOverzooming,this._source.minzoom),s=Math.max(a+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(n,a);if(Re(this._source.type)){for(var u={},c={},p=0,d=Object.keys(l);p<d.length;p+=1){var h=d[p],f=l[h],_=this._tiles[h];if(_&&!(_.fadeEndTime&&_.fadeEndTime<=e.browser.now())){var m=this.findLoadedParent(f,o);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[h]=f}}for(var g in this._retainLoadedChildren(c,a,s,l),u)l[g]||(this._coveredTiles[g]=!0,l[g]=u[g])}for(var y in l)this._tiles[y].clearFadeHold();for(var v=0,b=e.keysDifference(this._tiles,l);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},i.prototype._updateRetainedTiles=function(e,t){for(var r={},n={},a=Math.max(t-i.maxOverzooming,this._source.minzoom),o=Math.max(t+i.maxUnderzooming,this._source.minzoom),s={},l=0,u=e;l<u.length;l+=1){var c=u[l],p=this._addTile(c);r[c.key]=c,p.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,o,r);for(var d=0,h=e;d<h.length;d+=1){var f=h[d],_=this._tiles[f.key];if(!_.hasData()){if(t+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=f.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var v=_.wasRequested(),b=f.overscaledZ-1;b>=a;--b){var x=f.scaledTo(b);if(n[x.key])break;if(n[x.key]=!0,!(_=this.getTile(x))&&v&&(_=this._addTile(x)),_&&(r[x.key]=x,v=_.wasRequested(),_.hasData()))break}}}return r},i.prototype._updateLoadedParentTileCache=function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],i=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}t.push(r.key);var n=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(n))break;r=n}for(var a=0,o=t;a<o.length;a+=1)this._loadedParentTiles[o[a]]=i}},i.prototype._addTile=function(t){var i=this._tiles[t.key];if(i)return i;(i=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));var r=Boolean(i);return r||(i=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))),i?(i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(e,t){var i=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){i._reloadTile(e,"expired"),delete i._timers[e]}),r))},i.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},i.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},i.prototype.tilesIn=function(t,i,r){var n=this,a=[],o=this.transform;if(!o)return a;for(var s=r?o.getCameraQueryGeometry(t):t,l=t.map((function(e){return o.pointCoordinate(e)})),u=s.map((function(e){return o.pointCoordinate(e)})),c=this.getIds(),p=1/0,d=1/0,h=-1/0,f=-1/0,_=0,m=u;_<m.length;_+=1){var g=m[_];p=Math.min(p,g.x),d=Math.min(d,g.y),h=Math.max(h,g.x),f=Math.max(f,g.y)}for(var y=function(t){var r=n._tiles[c[t]];if(!r.holdingForFade()){var s=r.tileID,_=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=i*r.queryPadding*e.EXTENT/r.tileSize/_,g=[s.getTilePoint(new e.MercatorCoordinate(p,d)),s.getTilePoint(new e.MercatorCoordinate(h,f))];if(g[0].x-m<e.EXTENT&&g[0].y-m<e.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=l.map((function(e){return s.getTilePoint(e)})),v=u.map((function(e){return s.getTilePoint(e)}));a.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:v,scale:_})}}},v=0;v<c.length;v++)y(v);return a},i.prototype.getVisibleCoordinates=function(e){for(var t=this,i=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),r=0,n=i;r<n.length;r+=1){var a=n[r];a.posMatrix=this.transform.calculatePosMatrix(a.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var t in this._tiles){var i=this._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=e.browser.now())return!0}return!1},i.prototype.setFeatureState=function(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)},i.prototype.removeFeatureState=function(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)},i.prototype.getFeatureState=function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)},i.prototype.setDependencies=function(e,t,i){var r=this._tiles[e];r&&r.setDependencies(t,i)},i.prototype.reloadTilesForDependencies=function(e,t){for(var i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(e,t)}))},i}(e.Evented);function Le(e,t){var i=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Re(e){return"raster"===e||"image"===e||"video"===e}function Me(){return new e.window.Worker(Qn.workerUrl)}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;var ze="mapboxgl_preloaded_worker_pool",De=function(){this.active={}};De.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<De.workerCount;)this.workers.push(new Me);return this.active[e]=!0,this.workers.slice()},De.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},De.prototype.isPreloaded=function(){return!!this.active[ze]},De.prototype.numActive=function(){return Object.keys(this.active).length};var Be,Fe=Math.floor(e.browser.hardwareConcurrency/2);function Oe(){return Be||(Be=new De),Be}function Ne(t,i){var r={};for(var n in t)"ref"!==n&&(r[n]=t[n]);return e.refProperties.forEach((function(e){e in i&&(r[e]=i[e])})),r}function Ue(e){e=e.slice();for(var t=Object.create(null),i=0;i<e.length;i++)t[e[i].id]=e[i];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Ne(e[r],t[e[r].ref]));return e}De.workerCount=Math.max(Math.min(Fe,6),1);var qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ve(e,t,i){i.push({command:qe.addSource,args:[e,t[e]]})}function je(e,t,i){t.push({command:qe.removeSource,args:[e]}),i[e]=!0}function Ge(e,t,i,r){je(e,i,r),Ve(e,t,i)}function Ke(t,i,r){var n;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!e.deepEqual(t[r][n],i[r][n]))return!1;for(n in i[r])if(i[r].hasOwnProperty(n)&&"data"!==n&&!e.deepEqual(t[r][n],i[r][n]))return!1;return!0}function Ze(t,i,r,n,a,o){var s;for(s in i=i||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],i[s])||r.push({command:o,args:[n,s,i[s],a]}));for(s in i)i.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],i[s])||r.push({command:o,args:[n,s,i[s],a]}))}function He(e){return e.id}function Qe(e,t){return e[t.id]=t,e}var We=function(e,t){this.reset(e,t)};We.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},We.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var i=1,r=this._distances[i],n=t*this.paddedLength+this.padding;r<n&&i<this._distances.length;)r=this._distances[++i];var a=i-1,o=this._distances[a],s=r-o,l=s>0?(n-o)/s:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))};var Je=function(e,t,i){var r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(var a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};function Xe(t,i,r,n,a){var o=e.create();return i?(e.scale(o,o,[1/a,1/a,1]),r||e.rotateZ(o,o,n.angle)):e.multiply(o,n.labelPlaneMatrix,t),o}function Ye(t,i,r,n,a){if(i){var o=e.clone(t);return e.scale(o,o,[a,a,1]),r||e.rotateZ(o,o,-n.angle),o}return n.glCoordMatrix}function $e(t,i){var r=[t.x,t.y,0,1];ct(r,r,i);var n=r[3];return{point:new e.Point(r[0]/n,r[1]/n),signedDistanceFromCamera:n}}function et(e,t){return.5+e/t*.5}function tt(e,t){var i=e[0]/e[3],r=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&r>=-t[1]&&r<=t[1]}function it(t,i,r,n,a,o,s,l){var u=n?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(u,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],d=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;d.clear();for(var h=t.lineVertexArray,f=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=r.transform.width/r.transform.height,m=!1,g=0;g<f.length;g++){var y=f.get(g);if(y.hidden||y.writingMode===e.WritingMode.vertical&&!m)ut(y.numGlyphs,d);else{m=!1;var v=[y.anchorX,y.anchorY,0,1];if(e.transformMat4(v,v,i),tt(v,p)){var b=et(r.transform.cameraToCenterDistance,v[3]),x=e.evaluateSizeForFeature(u,c,y),w=s?x/b:x*b,S=new e.Point(y.anchorX,y.anchorY),A=$e(S,a).point,k={},E=at(y,w,!1,l,i,a,o,t.glyphOffsetArray,h,d,A,S,k,_);m=E.useVertical,(E.notEnoughRoom||m||E.needsFlipping&&at(y,w,!0,l,i,a,o,t.glyphOffsetArray,h,d,A,S,k,_).notEnoughRoom)&&ut(y.numGlyphs,d)}else ut(y.numGlyphs,d)}}n?t.text.dynamicLayoutVertexBuffer.updateData(d):t.icon.dynamicLayoutVertexBuffer.updateData(d)}function rt(e,t,i,r,n,a,o,s,l,u,c){var p=s.glyphStartIndex+s.numGlyphs,d=s.lineStartIndex,h=s.lineStartIndex+s.lineLength,f=t.getoffsetX(s.glyphStartIndex),_=t.getoffsetX(p-1),m=st(e*f,i,r,n,a,o,s.segment,d,h,l,u,c);if(!m)return null;var g=st(e*_,i,r,n,a,o,s.segment,d,h,l,u,c);return g?{first:m,last:g}:null}function nt(t,i,r,n){return t===e.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*n?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function at(t,i,r,n,a,o,s,l,u,c,p,d,h,f){var _,m=i/24,g=t.lineOffsetX*m,y=t.lineOffsetY*m;if(t.numGlyphs>1){var v=t.glyphStartIndex+t.numGlyphs,b=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=rt(m,l,g,y,r,p,d,t,u,o,h);if(!w)return{notEnoughRoom:!0};var S=$e(w.first.point,s).point,A=$e(w.last.point,s).point;if(n&&!r){var k=nt(t.writingMode,S,A,f);if(k)return k}_=[w.first];for(var E=t.glyphStartIndex+1;E<v-1;E++)_.push(st(m*l.getoffsetX(E),g,y,r,p,d,t.segment,b,x,u,o,h));_.push(w.last)}else{if(n&&!r){var I=$e(d,a).point,T=t.lineStartIndex+t.segment+1,C=new e.Point(u.getx(T),u.gety(T)),P=$e(C,a),L=P.signedDistanceFromCamera>0?P.point:ot(d,C,I,1,a),R=nt(t.writingMode,I,L,f);if(R)return R}var M=st(m*l.getoffsetX(t.glyphStartIndex),g,y,r,p,d,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,h);if(!M)return{notEnoughRoom:!0};_=[M]}for(var z=0,D=_;z<D.length;z+=1){var B=D[z];e.addDynamicAttributes(c,B.point,B.angle)}return{}}function ot(e,t,i,r,n){var a=$e(e.add(e.sub(t)._unit()),n).point,o=i.sub(a);return i.add(o._mult(r/o.mag()))}function st(t,i,r,n,a,o,s,l,u,c,p,d){var h=n?t-i:t+i,f=h>0?1:-1,_=0;n&&(f*=-1,_=Math.PI),f<0&&(_+=Math.PI);for(var m=f>0?l+s:l+s+1,g=a,y=a,v=0,b=0,x=Math.abs(h),w=[];v+b<=x;){if((m+=f)<l||m>=u)return null;if(y=g,w.push(g),void 0===(g=d[m])){var S=new e.Point(c.getx(m),c.gety(m)),A=$e(S,p);if(A.signedDistanceFromCamera>0)g=d[m]=A.point;else{var k=m-f;g=ot(0===v?o:new e.Point(c.getx(k),c.gety(k)),S,y,x-v+1,p)}}v+=b,b=y.dist(g)}var E=(x-v)/b,I=g.sub(y),T=I.mult(E)._add(y);T._add(I._unit()._perp()._mult(r*f));var C=_+Math.atan2(g.y-y.y,g.x-y.x);return w.push(T),{point:T,angle:C,path:w}}Je.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Je.prototype.insert=function(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},Je.prototype.insertCircle=function(e,t,i,r){this._forEachCell(t-r,i-r,t+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(r)},Je.prototype._insertBoxCell=function(e,t,i,r,n,a){this.boxCells[n].push(a)},Je.prototype._insertCircleCell=function(e,t,i,r,n,a){this.circleCells[n].push(a)},Je.prototype._query=function(e,t,i,r,n,a){if(i<0||e>this.width||r<0||t>this.height)return!n&&[];var o=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return a?o.filter(a):o}return this._forEachCell(e,t,i,r,this._queryCell,o,{hitTest:n,seenUids:{box:{},circle:{}}},a),n?o.length>0:o},Je.prototype._queryCircle=function(e,t,i,r,n){var a=e-i,o=e+i,s=t-i,l=t+i;if(o<0||a>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},n),r?u.length>0:u},Je.prototype.query=function(e,t,i,r,n){return this._query(e,t,i,r,!1,n)},Je.prototype.hitTest=function(e,t,i,r,n){return this._query(e,t,i,r,!0,n)},Je.prototype.hitTestCircle=function(e,t,i,r){return this._queryCircle(e,t,i,!0,r)},Je.prototype._queryCell=function(e,t,i,r,n,a,o,s){var l=o.seenUids,u=this.boxCells[n];if(null!==u)for(var c=this.bboxes,p=0,d=u;p<d.length;p+=1){var h=d[p];if(!l.box[h]){l.box[h]=!0;var f=4*h;if(e<=c[f+2]&&t<=c[f+3]&&i>=c[f+0]&&r>=c[f+1]&&(!s||s(this.boxKeys[h]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[h],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var _=this.circleCells[n];if(null!==_)for(var m=this.circles,g=0,y=_;g<y.length;g+=1){var v=y[g];if(!l.circle[v]){l.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,i,r)&&(!s||s(this.circleKeys[v]))){if(o.hitTest)return a.push(!0),!0;var x=m[b],w=m[b+1],S=m[b+2];a.push({key:this.circleKeys[v],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Je.prototype._queryCellCircle=function(e,t,i,r,n,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[n];if(null!==c)for(var p=this.bboxes,d=0,h=c;d<h.length;d+=1){var f=h[d];if(!u.box[f]){u.box[f]=!0;var _=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[_+0],p[_+1],p[_+2],p[_+3])&&(!s||s(this.boxKeys[f])))return a.push(!0),!0}}var m=this.circleCells[n];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var b=v[y];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(g[x],g[x+1],g[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return a.push(!0),!0}}},Je.prototype._forEachCell=function(e,t,i,r,n,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),d=l;d<=c;d++)for(var h=u;h<=p;h++)if(n.call(this,e,t,i,r,this.xCellCount*h+d,a,o,s))return},Je.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Je.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Je.prototype._circlesCollide=function(e,t,i,r,n,a){var o=r-e,s=n-t,l=i+a;return l*l>o*o+s*s},Je.prototype._circleAndRectCollide=function(e,t,i,r,n,a,o){var s=(a-r)/2,l=Math.abs(e-(r+s));if(l>s+i)return!1;var u=(o-n)/2,c=Math.abs(t-(n+u));if(c>u+i)return!1;if(l<=s||c<=u)return!0;var p=l-s,d=c-u;return p*p+d*d<=i*i};var lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ut(e,t){for(var i=0;i<e;i++){var r=t.length;t.resize(r+4),t.float32.set(lt,3*r)}}function ct(e,t,i){var r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e[3]=i[3]*r+i[7]*n+i[15],e}var pt=function(e,t,i){void 0===t&&(t=new Je(e.width+200,e.height+200,25)),void 0===i&&(i=new Je(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function dt(t,i,r){return i*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}pt.prototype.placeCollisionBox=function(e,t,i,r,n){var a=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=i*a.perspectiveRatio,s=e.x1*o+a.point.x,l=e.y1*o+a.point.y,u=e.x2*o+a.point.x,c=e.y2*o+a.point.y;return!this.isInsideGrid(s,l,u,c)||!t&&this.grid.hitTest(s,l,u,c,n)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},pt.prototype.placeCollisionCircles=function(t,i,r,n,a,o,s,l,u,c,p,d,h){var f=[],_=new e.Point(i.anchorX,i.anchorY),m=$e(_,o),g=et(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(c?a/g:a*g)/e.ONE_EM,v=$e(_,s).point,b=rt(y,n,i.lineOffsetX*y,i.lineOffsetY*y,!1,v,_,i,r,s,{}),x=!1,w=!1,S=!0;if(b){for(var A=.5*d*g+h,k=new e.Point(-100,-100),E=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),I=new We,T=b.first,C=b.last,P=[],L=T.path.length-1;L>=1;L--)P.push(T.path[L]);for(var R=1;R<C.path.length;R++)P.push(C.path[R]);var M=2.5*A;if(l){var z=P.map((function(e){return $e(e,l)}));P=z.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:z.map((function(e){return e.point}))}var D=[];if(P.length>0){for(var B=P[0].clone(),F=P[0].clone(),O=1;O<P.length;O++)B.x=Math.min(B.x,P[O].x),B.y=Math.min(B.y,P[O].y),F.x=Math.max(F.x,P[O].x),F.y=Math.max(F.y,P[O].y);D=B.x>=k.x&&F.x<=E.x&&B.y>=k.y&&F.y<=E.y?[P]:F.x<k.x||B.x>E.x||F.y<k.y||B.y>E.y?[]:e.clipLine([P],k.x,k.y,E.x,E.y)}for(var N=0,U=D;N<U.length;N+=1){var q;I.reset(U[N],.25*A),q=I.length<=.5*A?1:Math.ceil(I.paddedLength/M)+1;for(var V=0;V<q;V++){var j=V/Math.max(q-1,1),G=I.lerp(j),K=G.x+100,Z=G.y+100;f.push(K,Z,A,0);var H=K-A,Q=Z-A,W=K+A,J=Z+A;if(S=S&&this.isOffscreen(H,Q,W,J),w=w||this.isInsideGrid(H,Q,W,J),!t&&this.grid.hitTestCircle(K,Z,A,p)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!w?[]:f,offscreen:S,collisionDetected:x}},pt.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],r=1/0,n=1/0,a=-1/0,o=-1/0,s=0,l=t;s<l.length;s+=1){var u=l[s],c=new e.Point(u.x+100,u.y+100);r=Math.min(r,c.x),n=Math.min(n,c.y),a=Math.max(a,c.x),o=Math.max(o,c.y),i.push(c)}for(var p={},d={},h=0,f=this.grid.query(r,n,a,o).concat(this.ignoredGrid.query(r,n,a,o));h<f.length;h+=1){var _=f[h],m=_.key;if(void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]={}),!p[m.bucketInstanceId][m.featureIndex]){var g=[new e.Point(_.x1,_.y1),new e.Point(_.x2,_.y1),new e.Point(_.x2,_.y2),new e.Point(_.x1,_.y2)];e.polygonIntersectsPolygon(i,g)&&(p[m.bucketInstanceId][m.featureIndex]=!0,void 0===d[m.bucketInstanceId]&&(d[m.bucketInstanceId]=[]),d[m.bucketInstanceId].push(m.featureIndex))}}return d},pt.prototype.insertCollisionBox=function(e,t,i,r,n){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},e[0],e[1],e[2],e[3])},pt.prototype.insertCollisionCircles=function(e,t,i,r,n){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:i,featureIndex:r,collisionGroupID:n},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])},pt.prototype.projectAndGetPerspectiveRatio=function(t,i,r){var n=[i,r,0,1];return ct(n,n,t),{point:new e.Point((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/n[3]*.5}},pt.prototype.isOffscreen=function(e,t,i,r){return i<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},pt.prototype.isInsideGrid=function(e,t,i,r){return i>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary},pt.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t};var ht=function(e,t,i,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&i?1:0,this.placed=i};ht.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ft=function(e,t,i,r,n){this.text=new ht(e?e.text:null,t,i,n),this.icon=new ht(e?e.icon:null,t,r,n)};ft.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _t=function(e,t,i){this.text=e,this.icon=t,this.skipFade=i},mt=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},gt=function(e,t,i,r,n){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n},yt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function vt(t,i,r,n,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*i,l=-(o.verticalAlign-.5)*r,u=e.evaluateVariableOffset(t,n);return new e.Point(s+u[0]*a,l+u[1]*a)}function bt(t,i,r,n,a,o){var s=t.x1,l=t.x2,u=t.y1,c=t.y2,p=t.anchorPointX,d=t.anchorPointY,h=new e.Point(i,r);return n&&h._rotate(a?o:-o),{x1:s+h.x,y1:u+h.y,x2:l+h.x,y2:c+h.y,anchorPointX:p,anchorPointY:d}}yt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var xt=function(e,t,i,r){this.transform=e.clone(),this.collisionIndex=new pt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new yt(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function wt(e,t,i,r,n){e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0),e.emplaceBack(t?1:0,i?1:0,r||0,n||0)}xt.prototype.getBucketParts=function(t,i,r,n){var a=r.getBucket(i),o=r.latestFeatureIndex;if(a&&o&&i.id===a.layerIds[0]){var s=r.collisionBoxArray,l=a.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),d="map"===l.get("text-pitch-alignment"),h="map"===l.get("text-rotation-alignment"),f=dt(r,1,this.transform.zoom),_=Xe(p,d,h,this.transform,f),m=null;if(d){var g=Ye(p,d,h,this.transform,f);m=e.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[a.bucketInstanceId]=new gt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var y={bucket:a,layout:l,posMatrix:p,textLabelPlaneMatrix:_,labelToScreenMatrix:m,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(n)for(var v=0,b=a.sortKeyRanges;v<b.length;v+=1){var x=b[v];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:y})}},xt.prototype.attemptAnchorPlacement=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f){var _,m=[p.textOffset0,p.textOffset1],g=vt(e,i,r,m,n),y=this.collisionIndex.placeCollisionBox(bt(t,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(bt(f,g.x,g.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(_=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:m,width:i,height:r,anchor:e,textBoxScale:n,prevAnchor:_},this.markUsedJustification(d,e,p,h),d.allowVerticalPlacement&&(this.markUsedOrientation(d,h,p),this.placedOrientations[p.crossTileID]=h),{shift:g,placedGlyphBoxes:y}):void 0},xt.prototype.placeLayerBucketPart=function(t,i,r){var n=this,a=t.parameters,o=a.bucket,s=a.layout,l=a.posMatrix,u=a.textLabelPlaneMatrix,c=a.labelToScreenMatrix,p=a.textPixelRatio,d=a.holdingForFade,h=a.collisionBoxArray,f=a.partiallyEvaluatedTextSize,_=a.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),y=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),S="viewport-y"===s.get("symbol-z-order"),A=y&&(v||!o.hasIconData()||g),k=v&&(y||!o.hasTextData()||m);!o.collisionArrays&&h&&o.deserializeCollisionBoxes(h);var E=function(t,a){if(!i[t.crossTileID])if(d)n.placements[t.crossTileID]=new _t(!1,!1,!1);else{var h,S=!1,E=!1,I=!0,T=null,C={box:null,offscreen:null},P={box:null,offscreen:null},L=null,R=null,M=0,z=0,D=0;a.textFeatureIndex?M=a.textFeatureIndex:t.useRuntimeCollisionCircles&&(M=t.featureIndex),a.verticalTextFeatureIndex&&(z=a.verticalTextFeatureIndex);var B=a.textBox;if(B){var F=function(i){var r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!i&&n.prevPlacement){var a=n.prevPlacement.placedOrientations[t.crossTileID];a&&(n.placedOrientations[t.crossTileID]=a,n.markUsedOrientation(o,r=a,t))}return r},O=function(i,r){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&a.verticalTextBox)for(var n=0,s=o.writingModes;n<s.length&&(s[n]===e.WritingMode.vertical?(C=r(),P=C):C=i(),!(C&&C.box&&C.box.length));n+=1);else C=i()};if(s.get("text-variable-anchor")){var N=s.get("text-variable-anchor");if(n.prevPlacement&&n.prevPlacement.variableOffsets[t.crossTileID]){var U=n.prevPlacement.variableOffsets[t.crossTileID];N.indexOf(U.anchor)>0&&(N=N.filter((function(e){return e!==U.anchor}))).unshift(U.anchor)}var q=function(e,i,r){for(var a=e.x2-e.x1,s=e.y2-e.y1,u=t.textBoxScale,c=w&&!v?i:null,d={box:[],offscreen:!1},h=y?2*N.length:N.length,f=0;f<h;++f){var m=n.attemptAnchorPlacement(N[f%N.length],e,a,s,u,b,x,p,l,_,f>=N.length,t,o,r,c);if(m&&(d=m.placedGlyphBoxes)&&d.box&&d.box.length){S=!0,T=m.shift;break}}return d};O((function(){return q(B,a.iconBox,e.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return o.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&t.numVerticalGlyphVertices>0&&i?q(i,a.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),C&&(S=C.box,I=C.offscreen);var V=F(C&&C.box);if(!S&&n.prevPlacement){var j=n.prevPlacement.variableOffsets[t.crossTileID];j&&(n.variableOffsets[t.crossTileID]=j,n.markUsedJustification(o,j.anchor,t,V))}}else{var G=function(e,i){var r=n.collisionIndex.placeCollisionBox(e,y,p,l,_.predicate);return r&&r.box&&r.box.length&&(n.markUsedOrientation(o,i,t),n.placedOrientations[t.crossTileID]=i),r};O((function(){return G(B,e.WritingMode.horizontal)}),(function(){var i=a.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?G(i,e.WritingMode.vertical):{box:null,offscreen:null}})),F(C&&C.box&&C.box.length)}}if(S=(h=C)&&h.box&&h.box.length>0,I=h&&h.offscreen,t.useRuntimeCollisionCircles){var K=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),Z=e.evaluateSizeForFeature(o.textSizeData,f,K),H=s.get("text-padding");L=n.collisionIndex.placeCollisionCircles(y,K,o.lineVertexArray,o.glyphOffsetArray,Z,l,u,c,r,x,_.predicate,t.collisionCircleDiameter,H),S=y||L.circles.length>0&&!L.collisionDetected,I=I&&L.offscreen}if(a.iconFeatureIndex&&(D=a.iconFeatureIndex),a.iconBox){var Q=function(e){var t=w&&T?bt(e,T.x,T.y,b,x,n.transform.angle):e;return n.collisionIndex.placeCollisionBox(t,v,p,l,_.predicate)};E=P&&P.box&&P.box.length&&a.verticalIconBox?(R=Q(a.verticalIconBox)).box.length>0:(R=Q(a.iconBox)).box.length>0,I=I&&R.offscreen}var W=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,J=g||0===t.numIconVertices;if(W||J?J?W||(E=E&&S):S=E&&S:E=S=E&&S,S&&h&&h.box&&n.collisionIndex.insertCollisionBox(h.box,s.get("text-ignore-placement"),o.bucketInstanceId,P&&P.box&&z?z:M,_.ID),E&&R&&n.collisionIndex.insertCollisionBox(R.box,s.get("icon-ignore-placement"),o.bucketInstanceId,D,_.ID),L&&(S&&n.collisionIndex.insertCollisionCircles(L.circles,s.get("text-ignore-placement"),o.bucketInstanceId,M,_.ID),r)){var X=o.bucketInstanceId,Y=n.collisionCircleArrays[X];void 0===Y&&(Y=n.collisionCircleArrays[X]=new mt);for(var $=0;$<L.circles.length;$+=4)Y.circles.push(L.circles[$+0]),Y.circles.push(L.circles[$+1]),Y.circles.push(L.circles[$+2]),Y.circles.push(L.collisionDetected?1:0)}n.placements[t.crossTileID]=new _t(S||A,E||k,I||o.justReloaded),i[t.crossTileID]=!0}};if(S)for(var I=o.getSortedSymbolIndexes(this.transform.angle),T=I.length-1;T>=0;--T){var C=I[T];E(o.symbolInstances.get(C),o.collisionArrays[C])}else for(var P=t.symbolInstanceStart;P<t.symbolInstanceEnd;P++)E(o.symbolInstances.get(P),o.collisionArrays[P]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var L=this.collisionCircleArrays[o.bucketInstanceId];e.invert(L.invProjMatrix,l),L.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},xt.prototype.markUsedJustification=function(t,i,r,n){var a;a=n===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o+=1){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:r.crossTileID)}},xt.prototype.markUsedOrientation=function(t,i,r){for(var n=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,a=i===e.WritingMode.vertical?i:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o+=1)t.text.placedSymbolArray.get(s[o]).placedOrientation=n;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)},xt.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=n[s];u?(this.opacities[s]=new ft(u,r,l.text,l.icon),i=i||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new ft(null,r,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var c in n){var p=n[c];if(!this.opacities[c]){var d=new ft(p,r,!1,!1);d.isHidden()||(this.opacities[c]=d,i=i||p.text.placed||p.icon.placed)}}for(var h in a)this.variableOffsets[h]||!this.opacities[h]||this.opacities[h].isHidden()||(this.variableOffsets[h]=a[h]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},xt.prototype.updateLayerOpacities=function(e,t){for(var i={},r=0,n=t;r<n.length;r+=1){var a=n[r],o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,i,a.collisionBoxArray)}},xt.prototype.updateBucketOpacities=function(t,i,r){var n=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var a=t.layers[0].layout,o=new ft(null,0,!1,!1,!0),s=a.get("text-allow-overlap"),l=a.get("icon-allow-overlap"),u=a.get("text-variable-anchor"),c="map"===a.get("text-rotation-alignment"),p="map"===a.get("text-pitch-alignment"),d="none"!==a.get("icon-text-fit"),h=new ft(null,0,s&&(l||!t.hasIconData()||a.get("icon-optional")),l&&(s||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var f=function(e,t,i){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(i)},_=function(r){var a=t.symbolInstances.get(r),s=a.numHorizontalGlyphVertices,l=a.numVerticalGlyphVertices,_=a.crossTileID,m=n.opacities[_];i[_]?m=o:m||(n.opacities[_]=m=h),i[_]=!0;var g=a.numIconVertices>0,y=n.placedOrientations[a.crossTileID],v=y===e.WritingMode.vertical,b=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(s>0||l>0){var x=Pt(m.text);f(t.text,s,v?Lt:x),f(t.text,l,b?Lt:x);var w=m.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||v?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var S=n.variableOffsets[a.crossTileID];S&&n.markUsedJustification(t,S.anchor,a,y);var A=n.placedOrientations[a.crossTileID];A&&(n.markUsedJustification(t,"left",a,A),n.markUsedOrientation(t,A,a))}if(g){var k=Pt(m.icon),E=!(d&&a.verticalPlacedIconSymbolIndex&&v);a.placedIconSymbolIndex>=0&&(f(t.icon,a.numIconVertices,E?k:Lt),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=m.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(f(t.icon,a.numVerticalIconVertices,E?Lt:k),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var I=t.collisionArrays[r];if(I){var T=new e.Point(0,0);if(I.textBox||I.verticalTextBox){var C=!0;if(u){var P=n.variableOffsets[_];P?(T=vt(P.anchor,P.width,P.height,P.textOffset,P.textBoxScale),c&&T._rotate(p?n.transform.angle:-n.transform.angle)):C=!1}I.textBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||v,T.x,T.y),I.verticalTextBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||b,T.x,T.y)}var L=Boolean(!b&&I.verticalIconBox);I.iconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,L,d?T.x:0,d?T.y:0),I.verticalIconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!L,d?T.x:0,d?T.y:0)}}},m=0;m<t.symbolInstances.length;m++)_(m);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=g.invProjMatrix,t.placementViewportMatrix=g.viewportMatrix,t.collisionCircleArray=g.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},xt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xt.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},xt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},xt.prototype.stillRecent=function(e,t){var i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e},xt.prototype.setStale=function(){this.stale=!0};var St=Math.pow(2,25),At=Math.pow(2,24),kt=Math.pow(2,17),Et=Math.pow(2,16),It=Math.pow(2,9),Tt=Math.pow(2,8),Ct=Math.pow(2,1);function Pt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*St+t*At+i*kt+t*Et+i*It+t*Tt+i*Ct+t}var Lt=0,Rt=function(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Rt.prototype.continuePlacement=function(e,t,i,r,n){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,n())return!0;return!1};var Mt=function(e,t,i,r,n,a,o){this.placement=new xt(e,n,a,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};Mt.prototype.isDone=function(){return this._done},Mt.prototype.continuePlacement=function(t,i,r){for(var n=this,a=e.browser.now(),o=function(){var t=e.browser.now()-a;return!n._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=i[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Rt(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Mt.prototype.commit=function(e){return this.placement.commit(e),this.placement};var zt=512/e.EXTENT/2,Dt=function(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<t.length;r++){var n=t.get(r),a=n.key;this.indexedSymbolInstances[a]||(this.indexedSymbolInstances[a]=[]),this.indexedSymbolInstances[a].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,e)})}};Dt.prototype.getScaledCoordinates=function(t,i){var r=zt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*r)}},Dt.prototype.findMatches=function(e,t,i){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),n=0;n<e.length;n++){var a=e.get(n);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o)for(var s=this.getScaledCoordinates(a,t),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}}};var Bt=function(){this.maxCrossTileID=0};Bt.prototype.generate=function(){return++this.maxCrossTileID};var Ft=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ft.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var i in this.indexes){var r=this.indexes[i],n={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),n[o.tileID.key]=o}this.indexes[i]=n}this.lng=e},Ft.prototype.addBucket=function(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var n=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,n)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,n)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),n[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Dt(e,t.symbolInstances,t.bucketInstanceId),!0},Ft.prototype.removeBucketCrossTileIDs=function(e,t){for(var i in t.indexedSymbolInstances)for(var r=0,n=t.indexedSymbolInstances[i];r<n.length;r+=1)delete this.usedCrossTileIDs[e][n[r].crossTileID]},Ft.prototype.removeStaleBuckets=function(e){var t=!1;for(var i in this.indexes){var r=this.indexes[i];for(var n in r)e[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],t=!0)}return t};var Ot=function(){this.layerIndexes={},this.crossTileIDs=new Bt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ot.prototype.addLayer=function(e,t,i){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Ft);var n=!1,a={};r.handleWrapJump(i);for(var o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(n=!0),a[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(n=!0),n},Ot.prototype.pruneUnusedLayers=function(e){var t={};for(var i in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[i]||delete this.layerIndexes[i]};var Nt=function(t,i){return e.emitValidationErrors(t,i&&i.filter((function(e){return"source.canvas"!==e.identifier})))},Ut=e.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qt=e.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),Vt=function(){var t={},i=e.styleSpec.$version;for(var r in e.styleSpec.$root){var n,a=e.styleSpec.$root[r];a.required&&null!=(n="version"===r?i:"array"===a.type?[]:{})&&(t[r]=n)}return t}(),jt=function(t){function i(r,n){var a=this;void 0===n&&(n={}),t.call(this),this.map=r,this.dispatcher=new A(Oe(),this),this.imageManager=new d,this.imageManager.setEventedParent(this),this.glyphManager=new v(r._requestManager,n.localIdeographFontFamily),this.lineAtlas=new S(256,512),this.crossTileSymbolIndex=new Ot,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var o=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,i){if(e.triggerPluginCompletionEvent(t),i&&i.every((function(e){return e})))for(var r in o.sourceCaches)o.sourceCaches[r].reload()}))})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=a.sourceCaches[e.sourceId];if(t){var i=t.getSource();if(i&&i.vectorLayerIds)for(var r in a._layers){var n=a._layers[r];n.source===i.id&&a._validateLayer(n)}}}}))}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.loadURL=function(t,i){var r=this;void 0===i&&(i={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var n="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,i){r._request=null,t?r.fire(new e.ErrorEvent(t)):i&&r._load(i,n)}))},i.prototype.loadJSON=function(t,i){var r=this;void 0===i&&(i={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,r._load(t,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vt,!1)},i.prototype._load=function(t,i){if(!i||!Nt(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var n=Ue(this.stylesheet.layers);this._order=n.map((function(e){return e.id})),this._layers={},this._serializedLayers={};for(var a=0,o=n;a<o.length;a+=1){var s=o[a];(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},i.prototype._loadSprite=function(t){var i=this;this._spriteRequest=function(t,i,r){var n,a,o,s=e.browser.devicePixelRatio>1?"@2x":"",l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,n=t,c())})),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,a=t,c())}));function c(){if(o)r(o);else if(n&&a){var t=e.browser.getImageData(a),i={};for(var s in n){var l=n[s],u=l.width,c=l.height,p=l.x,d=l.y,h=l.sdf,f=l.pixelRatio,_=l.stretchX,m=l.stretchY,g=l.content,y=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,y,{x:p,y:d},{x:0,y:0},{width:u,height:c}),i[s]={data:y,pixelRatio:f,sdf:h,stretchX:_,stretchY:m,content:g}}r(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,r){if(i._spriteRequest=null,t)i.fire(new e.ErrorEvent(t));else if(r)for(var n in r)i.imageManager.addImage(n,r[n]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new e.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(t){var i=this.sourceCaches[t.source];if(i){var r=t.sourceLayer;if(r){var n=i.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(e){for(var t=[],i=0,r=e;i<r.length;i+=1){var n=this._layers[r[i]];"custom"!==n.type&&t.push(n.serialize())}return t},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(t){if(this._loaded){var i=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);for(var a in(r.length||n.length)&&this._updateWorkerLayers(r,n),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=this._layers[c[u]];p.recalculate(t,this._availableImages),!p.isHidden(t.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},i.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(t){var i=this;if(this._checkLoaded(),Nt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Ue(t.layers);var r=function(t,i){if(!t)return[{command:qe.setStyle,args:[i]}];var r=[];try{if(!e.deepEqual(t.version,i.version))return[{command:qe.setStyle,args:[i]}];e.deepEqual(t.center,i.center)||r.push({command:qe.setCenter,args:[i.center]}),e.deepEqual(t.zoom,i.zoom)||r.push({command:qe.setZoom,args:[i.zoom]}),e.deepEqual(t.bearing,i.bearing)||r.push({command:qe.setBearing,args:[i.bearing]}),e.deepEqual(t.pitch,i.pitch)||r.push({command:qe.setPitch,args:[i.pitch]}),e.deepEqual(t.sprite,i.sprite)||r.push({command:qe.setSprite,args:[i.sprite]}),e.deepEqual(t.glyphs,i.glyphs)||r.push({command:qe.setGlyphs,args:[i.glyphs]}),e.deepEqual(t.transition,i.transition)||r.push({command:qe.setTransition,args:[i.transition]}),e.deepEqual(t.light,i.light)||r.push({command:qe.setLight,args:[i.light]});var n={},a=[];!function(t,i,r,n){var a;for(a in i=i||{},t=t||{})t.hasOwnProperty(a)&&(i.hasOwnProperty(a)||je(a,r,n));for(a in i)i.hasOwnProperty(a)&&(t.hasOwnProperty(a)?e.deepEqual(t[a],i[a])||("geojson"===t[a].type&&"geojson"===i[a].type&&Ke(t,i,a)?r.push({command:qe.setGeoJSONSourceData,args:[a,i[a].data]}):Ge(a,i,r,n)):Ve(a,i,r))}(t.sources,i.sources,a,n);var o=[];t.layers&&t.layers.forEach((function(e){n[e.source]?r.push({command:qe.removeLayer,args:[e.id]}):o.push(e)})),r=r.concat(a),function(t,i,r){i=i||[];var n,a,o,s,l,u,c,p=(t=t||[]).map(He),d=i.map(He),h=t.reduce(Qe,{}),f=i.reduce(Qe,{}),_=p.slice(),m=Object.create(null);for(n=0,a=0;n<p.length;n++)f.hasOwnProperty(o=p[n])?a++:(r.push({command:qe.removeLayer,args:[o]}),_.splice(_.indexOf(o,a),1));for(n=0,a=0;n<d.length;n++)_[_.length-1-n]!==(o=d[d.length-1-n])&&(h.hasOwnProperty(o)?(r.push({command:qe.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-a),1)):a++,r.push({command:qe.addLayer,args:[f[o],u=_[_.length-n]]}),_.splice(_.length-n,0,o),m[o]=!0);for(n=0;n<d.length;n++)if(s=h[o=d[n]],l=f[o],!m[o]&&!e.deepEqual(s,l))if(e.deepEqual(s.source,l.source)&&e.deepEqual(s["source-layer"],l["source-layer"])&&e.deepEqual(s.type,l.type)){for(c in Ze(s.layout,l.layout,r,o,null,qe.setLayoutProperty),Ze(s.paint,l.paint,r,o,null,qe.setPaintProperty),e.deepEqual(s.filter,l.filter)||r.push({command:qe.setFilter,args:[o,l.filter]}),e.deepEqual(s.minzoom,l.minzoom)&&e.deepEqual(s.maxzoom,l.maxzoom)||r.push({command:qe.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ze(s[c],l[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],l[c])||r.push({command:qe.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ze(s[c],l[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],l[c])||r.push({command:qe.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:qe.removeLayer,args:[o]}),u=_[_.lastIndexOf(o)+1],r.push({command:qe.addLayer,args:[l,u]})}(o,i.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:qe.setStyle,args:[i]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in qt)}));if(0===r.length)return!1;var n=r.filter((function(e){return!(e.command in Ut)}));if(n.length>0)throw new Error("Unimplemented: "+n.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&i[e.command].apply(i,e.args)})),this.stylesheet=t,!0},i.prototype.addImage=function(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,i),this._afterImageUpdated(t)},i.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},i.prototype.getImage=function(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},i.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(t,i,r){var n=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,i,null,r))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var a=this.sourceCaches[t]=new Pe(t,i,this.dispatcher);a.style=this,a.setEventedParent(this,(function(){return{isSourceLoaded:n.loaded(),source:a.serialize(),sourceId:t}})),a.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+i+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},i.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function(t,i,r){void 0===r&&(r={}),this._checkLoaded();var n=t.id;if(this.getLayer(n))this.fire(new e.ErrorEvent(new Error('Layer with id "'+n+'" already exists on this map')));else{var a;if("custom"===t.type){if(Nt(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=e.clone$1(t),t=e.extend(t,{source:n})),this._validate(e.validateStyle.layer,"layers."+n,t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:n}}),this._serializedLayers[a.id]=a.serialize()}var o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(o,0,n),this._layerOrderChanged=!0,this._layers[n]=a,this._removedLayers[n]&&a.source&&"custom"!==a.type){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}}},i.prototype.moveLayer=function(t,i){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==i){var r=this._order.indexOf(t);this._order.splice(r,1);var n=i?this._order.indexOf(i):this._order.length;i&&-1===n?this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(n,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(t){this._checkLoaded();var i=this._layers[t];if(i){i.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(e){return this._layers[e]},i.prototype.hasLayer=function(e){return e in this._layers},i.prototype.setLayerZoomRange=function(t,i,r){this._checkLoaded();var n=this.getLayer(t);n?n.minzoom===i&&n.maxzoom===r||(null!=i&&(n.minzoom=i),null!=r&&(n.maxzoom=r),this._updateLayer(n)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(t,i,r){void 0===r&&(r={}),this._checkLoaded();var n=this.getLayer(t);if(n){if(!e.deepEqual(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(e.validateStyle.filter,"layers."+n.id+".filter",i,null,r)||(n.filter=e.clone$1(i),this._updateLayer(n)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},i.prototype.setLayoutProperty=function(t,i,r,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(t);a?e.deepEqual(a.getLayoutProperty(i),r)||(a.setLayoutProperty(i,r,n),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(t,i){var r=this.getLayer(t);if(r)return r.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(t,i,r,n){void 0===n&&(n={}),this._checkLoaded();var a=this.getLayer(t);a?e.deepEqual(a.getPaintProperty(i),r)||(a.setPaintProperty(i,r,n)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function(t,i){this._checkLoaded();var r=t.source,n=t.sourceLayer,a=this.sourceCaches[r];if(void 0!==a){var o=a.getSource().type;"geojson"===o&&n?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||n?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),a.setFeatureState(n,t.id,i)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(t,i){this._checkLoaded();var r=t.source,n=this.sourceCaches[r];if(void 0!==n){var a=n.getSource().type,o="vector"===a?t.sourceLayer:void 0;"vector"!==a||o?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(o,t.id,i):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(t){this._checkLoaded();var i=t.source,r=t.sourceLayer,n=this.sourceCaches[i];if(void 0!==n){if("vector"!==n.getSource().type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),n.getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},i.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,i=function(e){return"fill-extrusion"===t._layers[e].type},r={},n=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(i(o)){r[o]=a;for(var s=0,l=e;s<l.length;s+=1){var u=l[s][o];if(u)for(var c=0,p=u;c<p.length;c+=1)n.push(p[c])}}}n.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var d=[],h=this._order.length-1;h>=0;h--){var f=this._order[h];if(i(f))for(var _=n.length-1;_>=0;_--){var m=n[_].feature;if(r[m.layer.id]<h)break;d.push(m),n.pop()}else for(var g=0,y=e;g<y.length;g+=1){var v=y[g][f];if(v)for(var b=0,x=v;b<x.length;b+=1)d.push(x[b].feature)}}return d},i.prototype.queryRenderedFeatures=function(t,i,r){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var n={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var a=0,o=i.layers;a<o.length;a+=1){var s=o[a],l=this._layers[s];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];n[l.source]=!0}}var u=[];for(var c in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!n[c]||u.push(F(this.sourceCaches[c],this._layers,this._serializedLayers,t,i,r));return this.placement&&u.push(function(e,t,i,r,n,a,o){for(var s={},l=a.queryRenderedSymbols(r),u=[],c=0,p=Object.keys(l).map(Number);c<p.length;c+=1)u.push(o[p[c]]);u.sort(O);for(var d=function(){var i=f[h],r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,n.filter,n.layers,n.availableImages,e);for(var a in r){var o=s[a]=s[a]||[],u=r[a];u.sort((function(e,t){var r=i.featureSortOrder;if(r){var n=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex}));for(var c=0,p=u;c<p.length;c+=1)o.push(p[c])}},h=0,f=u;h<f.length;h+=1)d();var _=function(t){s[t].forEach((function(r){var n=r.feature,a=i[e[t].source].getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=a}))};for(var m in s)_(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var r=this.sourceCaches[t];return r?function(e,t){for(var i=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],n={},a=0;a<i.length;a++){var o=i[a],s=o.tileID.canonical.key;n[s]||(n[s]=!0,o.querySourceFeatures(r,t))}return r}(r,i):[]},i.prototype.addSourceType=function(e,t,r){return i.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(t,i){void 0===i&&(i={}),this._checkLoaded();var r=this.light.getLight(),n=!1;for(var a in t)if(!e.deepEqual(t[a],r[a])){n=!0;break}if(n){var o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}},i.prototype._validate=function(t,i,r,n,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Nt(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:r,styleSpec:e.styleSpec},n)))},i.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function(t,i,r,n,a){void 0===a&&(a=!1);for(var o=!1,s=!1,l={},u=0,c=this._order;u<c.length;u+=1){var p=this._layers[c[u]];if("symbol"===p.type){if(!l[p.source]){var d=this.sourceCaches[p.source];l[p.source]=d.getRenderableIds(!0).map((function(e){return d.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var h=this.crossTileSymbolIndex.addLayer(p,l[p.source],t.center.lng);o=o||h}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new Mt(t,this._order,a,i,r,n,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(var f=0,_=this._order;f<_.length;f+=1){var m=this._layers[_[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)},i.prototype.getGlyphs=function(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)},i.prototype.getResource=function(t,i,r){return e.makeRequest(i,r)},i}(e.Evented);jt.getSourceType=function(e){return D[e]},jt.setSourceType=function(e,t){D[e]=t},jt.registerForPluginStateChange=e.registerForPluginStateChange;var Gt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Kt=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Zt=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ht=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Qt=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Wt=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Jt=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xt=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Yt=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$t=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ei=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ti=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ni=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ai=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),oi=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ui=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ci=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pi=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),di=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),hi=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),_i=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),mi=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(e,t){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),n=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=a?a.concat(n):n,s={};return{fragmentSource:e=e.replace(i,(function(e,t,i,r,n){return s[n]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+n+"\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),vertexSource:t=t.replace(i,(function(e,t,i,r,n){var a="float"===r?"vec2":"vec4",o=n.match(/color/)?"color":a;return s[n]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+a+" a_"+n+";\nvarying "+i+" "+r+" "+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+n+" = unpack_mix_"+o+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+n+"\nuniform lowp float u_"+n+"_t;\nattribute "+i+" "+a+" a_"+n+";\n#else\nuniform "+i+" "+r+" u_"+n+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = a_"+n+";\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+n+"\n    "+i+" "+r+" "+n+" = unpack_mix_"+o+"(a_"+n+", u_"+n+"_t);\n#else\n    "+i+" "+r+" "+n+" = u_"+n+";\n#endif\n"})),staticAttributes:r,staticUniforms:o}}var yi=Object.freeze({__proto__:null,prelude:Kt,background:Zt,backgroundPattern:Ht,circle:Qt,clippingMask:Wt,heatmap:Jt,heatmapTexture:Xt,collisionBox:Yt,collisionCircle:$t,debug:ei,fill:ti,fillOutline:ii,fillOutlinePattern:ri,fillPattern:ni,fillExtrusion:ai,fillExtrusionPattern:oi,hillshadePrepare:si,hillshade:li,line:ui,lineGradient:ci,linePattern:pi,lineSDF:di,raster:hi,symbolIcon:fi,symbolSDF:_i,symbolTextAndIcon:mi}),vi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function bi(e){for(var t=[],i=0;i<e.length;i++)if(null!==e[i]){var r=e[i].split(" ");t.push(r.pop())}return t}vi.prototype.bind=function(e,t,i,r,n,a,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===n&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind()):this.freshBind(t,i,r,n,a,o,s)},vi.prototype.freshBind=function(e,t,i,r,n,a,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var d=0,h=i;d<h.length;d+=1)h[d].enableAttributes(c,e);a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,n);for(var f=0,_=i;f<_.length;f+=1){var m=_[f];m.bind(),m.setVertexAttribPointers(c,e,n)}a&&(a.bind(),a.setVertexAttribPointers(c,e,n)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,n)),u.currentNumAttributes=l},vi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xi=function(e,t,i,r,n,a){var o=e.gl;this.program=o.createProgram();for(var s=bi(i.staticAttributes),l=r?r.getBinderAttributes():[],u=s.concat(l),c=i.staticUniforms?bi(i.staticUniforms):[],p=r?r.getBinderUniforms():[],d=[],h=0,f=c.concat(p);h<f.length;h+=1){var _=f[h];d.indexOf(_)<0&&d.push(_)}var m=r?r.defines():[];a&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(Kt.fragmentSource,i.fragmentSource).join("\n"),y=m.concat(Kt.vertexSource,i.vertexSource).join("\n"),v=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(v,g),o.compileShader(v),o.attachShader(this.program,v);var b=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(b,y),o.compileShader(b),o.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=u.length;for(var w=0;w<this.numAttributes;w++)u[w]&&(o.bindAttribLocation(this.program,w,u[w]),this.attributes[u[w]]=w);o.linkProgram(this.program),o.deleteShader(b),o.deleteShader(v);for(var S=0;S<d.length;S++){var A=d[S];if(A&&!x[A]){var k=o.getUniformLocation(this.program,A);k&&(x[A]=k)}}this.fixedUniforms=n(e,x),this.binderUniforms=r?r.getUniforms(e,x):[]}}};function wi(e,t,i){var r=1/dt(i,1,t.transform.tileZoom),n=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,t.transform.tileZoom)/n,o=a*(i.tileID.canonical.x+i.tileID.wrap*n),s=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}xi.prototype.draw=function(e,t,i,r,n,a,o,s,l,u,c,p,d,h,f,_){var m,g=e.gl;if(!this.failedToCreate){for(var y in e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(r),e.setColorMode(n),e.setCullFace(a),this.fixedUniforms)this.fixedUniforms[y].set(o[y]);h&&h.setUniforms(e,this.binderUniforms,p,{zoom:d});for(var v=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new vi)).bind(e,this,l,h?h.getPaintVertexBuffers():[],u,w.vertexOffset,f,_),g.drawElements(t,w.primitiveLength*v,g.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var Si=function(t,i,r,n){var a=i.style.light,o=a.properties.get("position"),s=[o.x,o.y,o.z],l=e.create$1();"viewport"===a.properties.get("anchor")&&e.fromRotation(l,-i.transform.angle),e.transformMat3(s,s,l);var u=a.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:n}},Ai=function(t,i,r,n,a,o,s){return e.extend(Si(t,i,r,n),wi(o,i,s),{u_height_factor:-Math.pow(2,a.overscaledZ)/s.tileSize/8})},ki=function(e){return{u_matrix:e}},Ei=function(t,i,r,n){return e.extend(ki(t),wi(r,i,n))},Ii=function(e,t){return{u_matrix:e,u_world:t}},Ti=function(t,i,r,n,a){return e.extend(Ei(t,i,r,n),{u_world:a})},Ci=function(t,i,r,n){var a,o,s=t.transform;if("map"===n.paint.get("circle-pitch-alignment")){var l=dt(r,1,s.zoom);a=!0,o=[l,l]}else a=!1,o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===n.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(i.posMatrix,r,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor")),u_pitch_with_map:+a,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:o}},Pi=function(e,t,i){var r=dt(i,1,t.zoom),n=Math.pow(2,t.zoom-i.tileID.overscaledZ),a=i.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*n),t.pixelsToGLUnits[1]/(r*n)],u_overscale_factor:a}},Li=function(e,t,i){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Ri=function(e,t,i){return void 0===i&&(i=1),{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}},Mi=function(e){return{u_matrix:e}},zi=function(e,t,i,r){return{u_matrix:e,u_extrude_scale:dt(t,1,i),u_intensity:r}},Di=function(t,i,r){var n=t.transform;return{u_matrix:Ui(t,i,r),u_ratio:1/dt(i,1,n.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Bi=function(t,i,r,n){return e.extend(Di(t,i,r),{u_image:0,u_image_height:n})},Fi=function(t,i,r,n){var a=t.transform,o=Ni(i,a);return{u_matrix:Ui(t,i,r),u_texsize:i.imageAtlasTexture.size,u_ratio:1/dt(i,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[o,n.fromScale,n.toScale],u_fade:n.t,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Oi=function(t,i,r,n,a){var o=t.lineAtlas,s=Ni(i,t.transform),l="round"===r.layout.get("line-cap"),u=o.getDash(n.from,l),c=o.getDash(n.to,l),p=u.width*a.fromScale,d=c.width*a.toScale;return e.extend(Di(t,i,r),{u_patternscale_a:[s/p,-u.height/2],u_patternscale_b:[s/d,-c.height/2],u_sdfgamma:o.width/(256*Math.min(p,d)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:a.t})};function Ni(e,t){return 1/dt(e,1,t.tileZoom)}function Ui(e,t,i){return e.translatePosMatrix(t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var qi=function(e,t,i,r,n){return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(o=n.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(a=n.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:Vi(n.paint.get("raster-hue-rotate"))};var a,o};function Vi(e){e*=Math.PI/180;var t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}var ji,Gi=function(e,t,i,r,n,a,o,s,l,u){var c=n.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:n.options.fadeDuration?n.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Ki=function(t,i,r,n,a,o,s,l,u,c,p){var d=a.transform;return e.extend(Gi(t,i,r,n,a,o,s,l,u,c),{u_gamma_scale:n?Math.cos(d._pitch)*d.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+p})},Zi=function(t,i,r,n,a,o,s,l,u,c){return e.extend(Ki(t,i,r,n,a,o,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Hi=function(e,t,i){return{u_matrix:e,u_opacity:t,u_color:i}},Qi=function(t,i,r,n,a,o){return e.extend(function(e,t,i,r){var n=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString()),o=i.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/u,p=c*(r.tileID.canonical.x+r.tileID.wrap*u),d=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/dt(r,1,i.transform.tileZoom),u_pixel_coord_upper:[p>>16,d>>16],u_pixel_coord_lower:[65535&p,65535&d]}}(n,o,r,a),{u_matrix:t,u_opacity:i})},Wi={fillExtrusion:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fillExtrusionPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fill:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},fillPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},fillOutline:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}},fillOutlinePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},circle:function(t,i){return{u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,i.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},collisionBox:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,i.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,i.u_overscale_factor)}},collisionCircle:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}},debug:function(t,i){return{u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}},clippingMask:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmap:function(t,i){return{u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmapTexture:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}},hillshade:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}},hillshadePrepare:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}},line:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}},lineGradient:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}},linePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},lineSDF:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}},raster:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}},symbolIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}},symbolSDF:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},symbolTextAndIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},background:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}},backgroundPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}}};function Ji(t,i,r,n,a,o,s){for(var l=t.context,u=l.gl,c=t.useProgram("collisionBox"),p=[],d=0,h=0,f=0;f<n.length;f++){var _=n[f],m=i.getTile(_),g=m.getBucket(r);if(g){var y=_.posMatrix;0===a[0]&&0===a[1]||(y=t.translatePosMatrix(_.posMatrix,m,a,o));var v=s?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){var x=e.create(),w=y;e.mul(x,g.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,g.placementViewportMatrix),p.push({circleArray:b,circleOffset:h,transform:w,invTransform:x}),h=d+=b.length/4}v&&c.draw(l,u.LINES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,Pi(y,t.transform,m),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,null,v.collisionVertexBuffer)}}if(s&&p.length){var S=t.useProgram("collisionCircle"),A=new e.StructArrayLayout2f1f2i16;A.resize(4*d),A._trim();for(var k=0,E=0,I=p;E<I.length;E+=1)for(var T=I[E],C=0;C<T.circleArray.length/4;C++){var P=4*C,L=T.circleArray[P+0],R=T.circleArray[P+1],M=T.circleArray[P+2],z=T.circleArray[P+3];A.emplace(k++,L,R,M,z,0),A.emplace(k++,L,R,M,z,1),A.emplace(k++,L,R,M,z,2),A.emplace(k++,L,R,M,z,3)}(!ji||ji.length<2*d)&&(ji=function(t){var i=2*t,r=new e.StructArrayLayout3ui6;r.resize(i),r._trim();for(var n=0;n<i;n++){var a=6*n;r.uint16[a+0]=4*n+0,r.uint16[a+1]=4*n+1,r.uint16[a+2]=4*n+2,r.uint16[a+3]=4*n+2,r.uint16[a+4]=4*n+3,r.uint16[a+5]=4*n+0}return r}(d));for(var D=l.createIndexBuffer(ji,!0),B=l.createVertexBuffer(A,e.collisionCircleLayout.members,!0),F=0,O=p;F<O.length;F+=1){var N=O[F],U=Li(N.transform,N.invTransform,t.transform);S.draw(l,u.TRIANGLES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,U,r.id,B,D,e.SegmentVector.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,t.transform.zoom,null,null,null)}B.destroy(),D.destroy()}}var Xi=e.identity(new Float32Array(16));function Yi(t,i,r,n,a,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*i,u=-(s.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,n);return new e.Point((l/a+c[0])*o,(u/a+c[1])*o)}function $i(t,i,r,n,a,o,s,l,u,c,p){var d=t.text.placedSymbolArray,h=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,_={};h.clear();for(var m=0;m<d.length;m++){var g=d.get(m),y=g.hidden||!g.crossTileID||t.allowVerticalPlacement&&!g.placedOrientation?null:n[g.crossTileID];if(y){var v=new e.Point(g.anchorX,g.anchorY),b=$e(v,r?l:s),x=et(o.cameraToCenterDistance,b.signedDistanceFromCamera),w=a.evaluateSizeForFeature(t.textSizeData,c,g)*x/e.ONE_EM;r&&(w*=t.tilePixelRatio/u);for(var S=Yi(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),A=r?$e(v.add(S),s).point:b.point.add(i?S.rotate(-o.angle):S),k=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,E=0;E<g.numGlyphs;E++)e.addDynamicAttributes(h,A,k);p&&g.associatedIconIndex>=0&&(_[g.associatedIconIndex]={shiftedAnchor:A,angle:k})}else ut(g.numGlyphs,h)}if(p){f.clear();for(var I=t.icon.placedSymbolArray,T=0;T<I.length;T++){var C=I.get(T);if(C.hidden)ut(C.numGlyphs,f);else{var P=_[T];if(P)for(var L=0;L<C.numGlyphs;L++)e.addDynamicAttributes(f,P.shiftedAnchor,P.angle);else ut(C.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function er(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function tr(t,i,r,n,a,o,s,l,u,c,p,d){for(var h=t.context,f=h.gl,_=t.transform,m="map"===l,g="map"===u,y=m&&"point"!==r.layout.get("symbol-placement"),v=m&&!g&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=t.depthModeForSublayer(0,ke.ReadOnly),w=r.layout.get("text-variable-anchor"),S=[],A=0,k=n;A<k.length;A+=1){var E=k[A],I=i.getTile(E),T=I.getBucket(r);if(T){var C=a?T.text:T.icon;if(C&&C.segments.get().length){var P=C.programConfigurations.get(r.id),L=a||T.sdfIcons,R=a?T.textSizeData:T.iconSizeData,M=g||0!==_.pitch,z=t.useProgram(er(L,a,T),P),D=e.evaluateSizeForZoom(R,_.zoom),B=void 0,F=[0,0],O=void 0,N=void 0,U=null,q=void 0;if(a)O=I.glyphAtlasTexture,N=f.LINEAR,B=I.glyphAtlasTexture.size,T.iconsInText&&(F=I.imageAtlasTexture.size,U=I.imageAtlasTexture,q=M||t.options.rotating||t.options.zooming||"composite"===R.kind||"camera"===R.kind?f.LINEAR:f.NEAREST);else{var V=1!==r.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;O=I.imageAtlasTexture,N=L||t.options.rotating||t.options.zooming||V||M?f.LINEAR:f.NEAREST,B=I.imageAtlasTexture.size}var j=dt(I,1,t.transform.zoom),G=Xe(E.posMatrix,g,m,t.transform,j),K=Ye(E.posMatrix,g,m,t.transform,j),Z=w&&T.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&Z&&T.hasIconData();y&&it(T,E.posMatrix,t,a,G,K,g,c);var Q=t.translatePosMatrix(E.posMatrix,I,o,s),W=y||a&&w||H?Xi:G,J=t.translatePosMatrix(K,I,o,s,!0),X=L&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),Y={program:z,buffers:C,uniformValues:L?T.iconsInText?Zi(R.kind,D,v,g,t,Q,W,J,B,F):Ki(R.kind,D,v,g,t,Q,W,J,a,B,!0):Gi(R.kind,D,v,g,t,Q,W,J,a,B),atlasTexture:O,atlasTextureIcon:U,atlasInterpolation:N,atlasInterpolationIcon:q,isSDF:L,hasHalo:X};if(b)for(var $=0,ee=C.segments.get();$<ee.length;$+=1){var te=ee[$];S.push({segments:new e.SegmentVector([te]),sortKey:te.sortKey,state:Y})}else S.push({segments:C.segments,sortKey:0,state:Y})}}}b&&S.sort((function(e,t){return e.sortKey-t.sortKey}));for(var ie=0,re=S;ie<re.length;ie+=1){var ne=re[ie],ae=ne.state;if(h.activeTexture.set(f.TEXTURE0),ae.atlasTexture.bind(ae.atlasInterpolation,f.CLAMP_TO_EDGE),ae.atlasTextureIcon&&(h.activeTexture.set(f.TEXTURE1),ae.atlasTextureIcon&&ae.atlasTextureIcon.bind(ae.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ae.isSDF){var oe=ae.uniformValues;ae.hasHalo&&(oe.u_is_halo=1,ir(ae.buffers,ne.segments,r,t,ae.program,x,p,d,oe)),oe.u_is_halo=0}ir(ae.buffers,ne.segments,r,t,ae.program,x,p,d,ae.uniformValues)}}function ir(e,t,i,r,n,a,o,s,l){var u=r.context;n.draw(u,u.gl.TRIANGLES,a,o,s,Te.disabled,l,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function rr(e,t,i,r,n,a,o){var s,l,u,c,p,d=e.context.gl,h=i.paint.get("fill-pattern"),f=h&&h.constantOr(1),_=i.getCrossfadeParameters();o?(l=f&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=d.LINES):(l=f?"fillPattern":"fill",s=d.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],v=t.getTile(y);if(!f||v.patternsLoaded()){var b=v.getBucket(i);if(b){var x=b.programConfigurations.get(i.id),w=e.useProgram(l,x);f&&(e.context.activeTexture.set(d.TEXTURE0),v.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),x.updatePaintBuffers(_));var S=h.constantOr(null);if(S&&v.imageAtlas){var A=v.imageAtlas,k=A.patternPositions[S.to.toString()],E=A.patternPositions[S.from.toString()];k&&E&&x.setConstantPatternPositions(k,E)}var I=e.translatePosMatrix(y.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(o){c=b.indexBuffer2,p=b.segments2;var T=[d.drawingBufferWidth,d.drawingBufferHeight];u="fillOutlinePattern"===l&&f?Ti(I,e,_,v,T):Ii(I,T)}else c=b.indexBuffer,p=b.segments,u=f?Ei(I,e,_,v):ki(I);w.draw(e.context,s,n,e.stencilModeForClipping(y),a,Te.disabled,u,i.id,b.layoutVertexBuffer,c,p,i.paint,e.transform.zoom,x)}}}}function nr(e,t,i,r,n,a,o){for(var s=e.context,l=s.gl,u=i.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=i.getCrossfadeParameters(),d=i.paint.get("fill-extrusion-opacity"),h=0,f=r;h<f.length;h+=1){var _=f[h],m=t.getTile(_),g=m.getBucket(i);if(g){var y=g.programConfigurations.get(i.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(p));var b=u.constantOr(null);if(b&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[b.to.toString()],S=x.patternPositions[b.from.toString()];w&&S&&y.setConstantPatternPositions(w,S)}var A=e.translatePosMatrix(_.posMatrix,m,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),k=i.paint.get("fill-extrusion-vertical-gradient"),E=c?Ai(A,e,k,d,_,p,m):Si(A,e,k,d);v.draw(s,s.gl.TRIANGLES,n,a,o,Te.backCCW,E,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,e.transform.zoom,y)}}}function ar(t,i,r,n,a,o){var s=t.context,l=s.gl,u=i.fbo;if(u){var c=t.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());var p=function(t,i,r){var n=r.paint.get("hillshade-shadow-color"),a=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var l,u,c,p=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:(l=i.tileID,u=Math.pow(2,l.canonical.z),c=l.canonical.y,[new e.MercatorCoordinate(0,c/u).toLngLat().lat,new e.MercatorCoordinate(0,(c+1)/u).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:a,u_accent:o}}(t,i,r);c.draw(s,l.TRIANGLES,n,a,o,Te.disabled,p,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function or(t,i,r,n,a,o){var s=t.context,l=s.gl,u=i.dem;if(u&&u.data){var c=u.dim,p=u.stride,d=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(p),i.demTexture){var h=i.demTexture;h.update(d,{premultiply:!1}),h.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new e.Texture(s,d,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var f=i.fbo;if(!f){var _=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);_.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=i.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(_.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,n,a,o,Te.disabled,function(t,i){var r=i.stride,n=e.create();return e.ortho(n,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(n,n,[0,-e.EXTENT,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,u),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function sr(t,i,r,n,a){var o=n.paint.get("raster-fade-duration");if(o>0){var s=e.browser.now(),l=(s-t.timeAdded)/o,u=i?(s-i.timeAdded)/o:-1,c=r.getSource(),p=a.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!i||Math.abs(i.tileID.overscaledZ-p)>Math.abs(t.tileID.overscaledZ-p),h=d&&t.refreshedUponExpiration?1:e.clamp(d?l:1-u,0,1);return t.refreshedUponExpiration&&l>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var lr=new e.Color(1,0,0,1),ur=new e.Color(0,1,0,1),cr=new e.Color(0,0,1,1),pr=new e.Color(1,0,1,1),dr=new e.Color(0,1,1,1);function hr(e,t,i,r){_r(e,0,t+i/2,e.transform.width,i,r)}function fr(e,t,i,r){_r(e,t-i/2,0,i,e.transform.height,r)}function _r(t,i,r,n,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,n*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function mr(t,i,r){var n=t.context,a=n.gl,o=r.posMatrix,s=t.useProgram("debug"),l=ke.disabled,u=Ee.disabled,c=t.colorModeForRenderPass();n.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s.draw(n,a.LINE_STRIP,l,u,c,Te.disabled,Ri(o,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var p=i.getTileByID(r.key).latestRawTileData,d=Math.floor((p&&p.byteLength||0)/1024),h=i.getTile(r).tileSize,f=512/Math.min(h,512)*(r.overscaledZ/t.transform.zoom)*.5,_=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(_+=" => "+r.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var i=e.debugOverlayCanvas,r=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,_+" "+d+"kb"),s.draw(n,a.TRIANGLES,l,u,Ie.alphaBlended,Te.disabled,Ri(o,e.Color.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var gr={symbol:function(t,i,r,n,a){if("translucent"===t.renderPass){var o=Ee.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,i,r,n,a,o,s){for(var l=i.transform,u="map"===a,c="map"===o,p=0,d=t;p<d.length;p+=1){var h=d[p],f=n.getTile(h),_=f.getBucket(r);if(_&&_.text&&_.text.segments.get().length){var m=e.evaluateSizeForZoom(_.textSizeData,l.zoom),g=dt(f,1,i.transform.zoom),y=Xe(h.posMatrix,c,u,i.transform,g),v="none"!==r.layout.get("icon-text-fit")&&_.hasIconData();if(m){var b=Math.pow(2,l.zoom-f.tileID.overscaledZ);$i(_,u,c,s,e.symbolSize,l,y,h.posMatrix,b,m,v)}}}}(n,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&tr(t,i,r,n,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&tr(t,i,r,n,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),i.map.showCollisionBoxes&&(Ji(t,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ji(t,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,i,r,n){if("translucent"===t.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,p=t.depthModeForSublayer(0,ke.ReadOnly),d=Ee.disabled,h=t.colorModeForRenderPass(),f=[],_=0;_<n.length;_++){var m=n[_],g=i.getTile(m),y=g.getBucket(r);if(y){var v=y.programConfigurations.get(r.id),b={programConfiguration:v,program:t.useProgram("circle",v),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Ci(t,m,g,r)};if(l)for(var x=0,w=y.segments.get();x<w.length;x+=1){var S=w[x];f.push({segments:new e.SegmentVector([S]),sortKey:S.sortKey,state:b})}else f.push({segments:y.segments,sortKey:0,state:b})}}l&&f.sort((function(e,t){return e.sortKey-t.sortKey}));for(var A=0,k=f;A<k.length;A+=1){var E=k[A],I=E.state;I.program.draw(u,c.TRIANGLES,p,d,h,Te.disabled,I.uniformValues,r.id,I.layoutVertexBuffer,I.indexBuffer,E.segments,r.paint,t.transform.zoom,I.programConfiguration)}}}},heatmap:function(t,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=Ee.disabled,l=new Ie([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var n=i.heatmapFbo;if(n)r.bindTexture(r.TEXTURE_2D,n.colorAttachment.get()),e.bindFramebuffer.set(n.framebuffer);else{var a=r.createTexture();r.bindTexture(r.TEXTURE_2D,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),n=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,r){var n=e.gl;n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t.width/4,t.height/4,0,n.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:n.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(e,t,a,n)}}(a,t,r),a.clear({color:e.Color.transparent});for(var u=0;u<n.length;u++){var c=n[u];if(!i.hasRenderableParent(c)){var p=i.getTile(c),d=p.getBucket(r);if(d){var h=d.programConfigurations.get(r.id);t.useProgram("heatmap",h).draw(a,o.TRIANGLES,ke.disabled,s,l,Te.disabled,zi(c.posMatrix,p,t.transform.zoom,r.paint.get("heatmap-intensity")),r.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,r.paint,t.transform.zoom,h)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){var r=t.context,n=r.gl,a=i.heatmapFbo;if(a){r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);var o=i.colorRampTexture;o||(o=i.colorRampTexture=new e.Texture(r,i.colorRamp,n.RGBA)),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,n.TRIANGLES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,function(t,i,r,n){var a=e.create();e.ortho(a,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:a,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(t,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}}(t,r))},line:function(t,i,r,n){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1))for(var s=t.depthModeForSublayer(0,ke.ReadOnly),l=t.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),p=c.constantOr(1),d=r.paint.get("line-gradient"),h=r.getCrossfadeParameters(),f=p?"linePattern":u?"lineSDF":d?"lineGradient":"line",_=t.context,m=_.gl,g=!0,y=0,v=n;y<v.length;y+=1){var b=v[y],x=i.getTile(b);if(!p||x.patternsLoaded()){var w=x.getBucket(r);if(w){var S=w.programConfigurations.get(r.id),A=t.context.program.get(),k=t.useProgram(f,S),E=g||k.program!==A,I=c.constantOr(null);if(I&&x.imageAtlas){var T=x.imageAtlas,C=T.patternPositions[I.to.toString()],P=T.patternPositions[I.from.toString()];C&&P&&S.setConstantPatternPositions(C,P)}var L=p?Fi(t,x,r,h):u?Oi(t,x,r,u,h):d?Bi(t,x,r,w.lineClipsArray.length):Di(t,x,r);if(p)_.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),S.updatePaintBuffers(h);else if(u&&(E||t.lineAtlas.dirty))_.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(_);else if(d){var R=w.gradients[r.id],M=R.texture;if(r.gradientVersion!==R.version){var z=256;if(r.stepInterpolant){var D=i.getSource().maxzoom,B=b.canonical.z===D?Math.ceil(1<<t.transform.maxZoom-b.canonical.z):1;z=e.clamp(e.nextPowerOfTwo(w.maxLineLength/e.EXTENT*1024*B),256,_.maxTextureSize)}R.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:R.gradient||void 0,clips:w.lineClipsArray}),R.texture?R.texture.update(R.gradient):R.texture=new e.Texture(_,R.gradient,m.RGBA),R.version=r.gradientVersion,M=R.texture}_.activeTexture.set(m.TEXTURE0),M.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}k.draw(_,m.TRIANGLES,s,t.stencilModeForClipping(b),l,Te.disabled,L,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,t.transform.zoom,S,w.layoutVertexBuffer2),g=!1}}}}},fill:function(t,i,r,n){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?ke.ReadWrite:ke.ReadOnly);rr(t,i,r,n,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var p=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,ke.ReadOnly);rr(t,i,r,n,p,s,!0)}}},"fill-extrusion":function(e,t,i,r){var n=i.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===e.renderPass){var a=new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D);if(1!==n||i.paint.get("fill-extrusion-pattern").constantOr(1))nr(e,t,i,r,a,Ee.disabled,Ie.disabled),nr(e,t,i,r,a,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();nr(e,t,i,r,a,Ee.disabled,o)}}},hillshade:function(e,t,i,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var n=e.context,a=e.depthModeForSublayer(0,ke.ReadOnly),o=e.colorModeForRenderPass(),s="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r],l=s[0],u=0,c=s[1];u<c.length;u+=1){var p=c[u],d=t.getTile(p);d.needsHillshadePrepare&&"offscreen"===e.renderPass?or(e,d,i,a,Ee.disabled,o):"translucent"===e.renderPass&&ar(e,d,i,a,l[p.overscaledZ],o)}n.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,i,r){if("translucent"===e.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var n=e.context,a=n.gl,o=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),u=o instanceof R?[{},r]:e.stencilConfigForOverlap(r),c=u[0],p=u[1],d=p[p.length-1].overscaledZ,h=!e.options.moving,f=0,_=p;f<_.length;f+=1){var m=_[f],g=e.depthModeForSublayer(m.overscaledZ-d,1===i.paint.get("raster-opacity")?ke.ReadWrite:ke.ReadOnly,a.LESS),y=t.getTile(m),v=e.transform.calculatePosMatrix(m.toUnwrapped(),h);y.registerFadeDuration(i.paint.get("raster-fade-duration"));var b=t.findLoadedParent(m,0),x=sr(y,b,t,i,e.transform),w=void 0,S=void 0,A="nearest"===i.paint.get("raster-resampling")?a.NEAREST:a.LINEAR;n.activeTexture.set(a.TEXTURE0),y.texture.bind(A,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(a.TEXTURE1),b?(b.texture.bind(A,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),S=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(A,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST);var k=qi(v,S||[0,0],w||1,x,i);o instanceof R?s.draw(n,a.TRIANGLES,g,Ee.disabled,l,Te.disabled,k,i.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):s.draw(n,a.TRIANGLES,g,c[m.overscaledZ],l,Te.disabled,k,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,i){var r=i.paint.get("background-color"),n=i.paint.get("background-opacity");if(0!==n){var a=e.context,o=a.gl,s=e.transform,l=s.tileSize,u=i.paint.get("background-pattern");if(!e.isPatternMissing(u)){var c=!u&&1===r.a&&1===n&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===c){var p=Ee.disabled,d=e.depthModeForSublayer(0,"opaque"===c?ke.ReadWrite:ke.ReadOnly),h=e.colorModeForRenderPass(),f=e.useProgram(u?"backgroundPattern":"background"),_=s.coveringTiles({tileSize:l});u&&(a.activeTexture.set(o.TEXTURE0),e.imageManager.bind(e.context));for(var m=i.getCrossfadeParameters(),g=0,y=_;g<y.length;g+=1){var v=y[g],b=e.transform.calculatePosMatrix(v.toUnwrapped()),x=u?Qi(b,n,e,u,{tileID:v,tileSize:l},m):Hi(b,n,r);f.draw(a,o.TRIANGLES,d,p,h,Te.disabled,x,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,i){for(var r=0;r<i.length;r++)mr(e,t,i[r])},custom:function(e,t,i){var r=e.context,n=i.implementation;if("offscreen"===e.renderPass){var a=n.prerender;a&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),a.call(n,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Ee.disabled);var o="3d"===n.renderingMode?new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,ke.ReadOnly);r.setDepthMode(o),n.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},yr=function(e,t){this.context=new Ce(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ot,this.gpuTimers={}};yr.prototype.resize=function(t,i){if(this.width=t*e.browser.devicePixelRatio,this.height=i*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,n=this.style._order;r<n.length;r+=1)this.style._layers[n[r]].resize()},yr.prototype.setup=function(){var t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,Gt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Gt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var n=new e.StructArrayLayout4i8;n.emplaceBack(0,0,0,0),n.emplaceBack(e.EXTENT,0,e.EXTENT,0),n.emplaceBack(0,e.EXTENT,0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(n,L.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(a,Gt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Ee({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},yr.prototype.clearStencil=function(){var t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,ke.disabled,this.stencilClearMode,Ie.disabled,Te.disabled,Mi(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yr.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var i=this.context,r=i.gl;this.nextStencilID+t.length>256&&this.clearStencil(),i.setColorMode(Ie.disabled),i.setDepthMode(ke.disabled);var n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var a=0,o=t;a<o.length;a+=1){var s=o[a],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;n.draw(i,r.TRIANGLES,ke.disabled,new Ee({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Ie.disabled,Te.disabled,Mi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Ee({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},yr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Ee({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},yr.prototype.stencilConfigForOverlap=function(e){var t,i=this.context.gl,r=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),n=r[r.length-1].overscaledZ,a=r[0].overscaledZ-n+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();for(var o={},s=0;s<a;s++)o[s+n]=new Ee({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=a,[o,r]}return[(t={},t[n]=Ee.disabled,t),r]},yr.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Ie([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ie.unblended:Ie.alphaBlended},yr.prototype.depthModeForSublayer=function(e,t,i){if(!this.opaquePassEnabledForLayer())return ke.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ke(i||this.context.gl.LEQUAL,t,[r,r])},yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yr.prototype.render=function(t,i){var r=this;this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var n=this.style._order,a=this.style.sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l,u,c={},p={},d={};for(var h in a){var f=a[h];c[h]=f.getVisibleCoordinates(),p[h]=c[h].slice().reverse(),d[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<n.length;_++)if(this.style._layers[n[_]].is3D()){this.opaquePassCutoff=_;break}this.renderPass="offscreen";for(var m=0,g=n;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var v=p[y.source];("custom"===y.type||v.length)&&this.renderLayer(this,a[y.source],y,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=n.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[n[this.currentLayer]],x=a[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<n.length;this.currentLayer++){var S=this.style._layers[n[this.currentLayer]],A=a[S.source],k=("symbol"===S.type?d:p)[S.source];this._renderTileClippingMasks(S,c[S.source]),this.renderLayer(this,A,S,k)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(r.transform.zoom)&&(e.source!==(u&&u.id)&&(u=r.style.sourceCaches[e.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))})),l&&gr.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(e){var t=e.transform.padding;hr(e,e.transform.height-(t.top||0),3,lr),hr(e,t.bottom||0,3,ur),fr(e,t.left||0,3,cr),fr(e,e.transform.width-(t.right||0),3,pr);var i=e.transform.centerPoint;!function(e,t,i,r){_r(e,t-1,i-10,2,20,r),_r(e,t-10,i-1,20,2,r)}(e,i.x,e.transform.height-i.y,dr)}(this),this.context.setDefault()},yr.prototype.renderLayer=function(e,t,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),gr[i.type](e,t,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},yr.prototype.gpuTimingStart=function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}},yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},yr.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},yr.prototype.queryGpuTimers=function(e){var t={};for(var i in e){var r=e[i],n=this.context.extTimerQuery,a=n.getQueryObjectEXT(r.query,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(r.query),t[i]=a}return t},yr.prototype.translatePosMatrix=function(t,i,r,n,a){if(!r[0]&&!r[1])return t;var o=a?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[a?r[0]:dt(i,r[0],this.transform.zoom),a?r[1]:dt(i,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c},yr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},yr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},yr.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i},yr.prototype.useProgram=function(e,t){this.cache=this.cache||{};var i=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new xi(this.context,e,yi[e],t,Wi[e],this._showOverdrawInspector)),this.cache[i]},yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},yr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vr=function(e,t){this.points=e,this.planes=t};vr.fromInvProjectionMatrix=function(t,i,r){var n=Math.pow(2,r),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return e.transformMat4([],i,t)})).map((function(t){return e.scale$1([],t,1/t[3]/i*n)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var i=e.sub([],a[t[0]],a[t[1]]),r=e.sub([],a[t[2]],a[t[1]]),n=e.normalize([],e.cross([],i,r)),o=-e.dot(n,a[t[1]]);return n.concat(o)}));return new vr(a,o)};var br=function(t,i){this.min=t,this.max=i,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};br.prototype.quadrant=function(t){for(var i=[t%2==0,t<2],r=e.clone$2(this.min),n=e.clone$2(this.max),a=0;a<i.length;a++)r[a]=i[a]?this.min[a]:this.center[a],n[a]=i[a]?this.center[a]:this.max[a];return n[2]=this.max[2],new br(r,n)},br.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},br.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},br.prototype.intersects=function(t){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,n=0;n<t.planes.length;n++){for(var a=t.planes[n],o=0,s=0;s<i.length;s++)o+=e.dot$1(a,i[s])>=0;if(0===o)return 0;o!==i.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,p=0;p<t.points.length;p++){var d=t.points[p][l]-this.min[l];u=Math.min(u,d),c=Math.max(c,d)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1};var xr=function(e,t,i,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=r};xr.prototype.interpolate=function(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,r)),this},xr.prototype.getCenter=function(t,i){var r=e.clamp((this.left+t-this.right)/2,0,t),n=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.Point(r,n)},xr.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},xr.prototype.clone=function(){return new xr(this.top,this.bottom,this.left,this.right)},xr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wr=function(t,i,r,n,a){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wr.prototype.clone=function(){var e=new wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},Sr.minZoom.get=function(){return this._minZoom},Sr.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Sr.maxZoom.get=function(){return this._maxZoom},Sr.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Sr.minPitch.get=function(){return this._minPitch},Sr.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},Sr.maxPitch.get=function(){return this._maxPitch},Sr.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},Sr.renderWorldCopies.get=function(){return this._renderWorldCopies},Sr.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Sr.worldSize.get=function(){return this.tileSize*this.scale},Sr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sr.size.get=function(){return new e.Point(this.width,this.height)},Sr.bearing.get=function(){return-this.angle/Math.PI*180},Sr.bearing.set=function(t){var i=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sr.pitch.get=function(){return this._pitch/Math.PI*180},Sr.pitch.set=function(t){var i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Sr.fov.get=function(){return this._fov/Math.PI*180},Sr.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Sr.zoom.get=function(){return this._zoom},Sr.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Sr.center.get=function(){return this._center},Sr.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Sr.padding.get=function(){return this._edgeInsets.toJSON()},Sr.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},Sr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wr.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},wr.prototype.interpolatePadding=function(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()},wr.prototype.coveringZoomLevel=function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)},wr.prototype.getVisibleUnwrappedCoordinates=function(t){var i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),n=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,n.x,a.x,o.x)),l=Math.floor(Math.max(r.x,n.x,a.x,o.x)),u=s-1;u<=l+1;u++)0!==u&&i.push(new e.UnwrappedTileID(u,t));return i},wr.prototype.coveringTiles=function(t){var i=this.coveringZoomLevel(t),r=i;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);var n=e.MercatorCoordinate.fromLngLat(this.center),a=Math.pow(2,i),o=[a*n.x,a*n.y,0],s=vr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var u=function(e){return{aabb:new br([e*a,0,0],[(e+1)*a,a,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},c=[],p=[],d=i,h=t.reparseOverscaled?r:i;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(u(-f)),c.push(u(f));for(c.push(u(0));c.length>0;){var _=c.pop(),m=_.x,g=_.y,y=_.fullyVisible;if(!y){var v=_.aabb.intersects(s);if(0===v)continue;y=2===v}var b=_.aabb.distanceX(o),x=_.aabb.distanceY(o),w=Math.max(Math.abs(b),Math.abs(x));if(_.zoom===d||w>3+(1<<d-_.zoom)-2&&_.zoom>=l)p.push({tileID:new e.OverscaledTileID(_.zoom===d?h:_.zoom,_.wrap,_.zoom,m,g),distanceSq:e.sqrLen([o[0]-.5-m,o[1]-.5-g])});else for(var S=0;S<4;S++){var A=(m<<1)+S%2,k=(g<<1)+(S>>1);c.push({aabb:_.aabb.quadrant(S),zoom:_.zoom+1,x:A,y:k,wrap:_.wrap,fullyVisible:y})}}return p.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))},wr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Sr.unmodified.get=function(){return this._unmodified},wr.prototype.zoomScale=function(e){return Math.pow(2,e)},wr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},wr.prototype.project=function(t){var i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)},wr.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},Sr.point.get=function(){return this.project(this.center)},wr.prototype.setLocationAtPoint=function(t,i){var r=this.pointCoordinate(i),n=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(t),o=new e.MercatorCoordinate(a.x-(r.x-n.x),a.y-(r.y-n.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},wr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},wr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},wr.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},wr.prototype.coordinateLocation=function(e){return e.toLngLat()},wr.prototype.pointCoordinate=function(t){var i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var n=i[3],a=r[3],o=i[1]/n,s=r[1]/a,l=i[2]/n,u=r[2]/a,c=l===u?0:(0-l)/(u-l);return new e.MercatorCoordinate(e.number(i[0]/n,r[0]/a,c)/this.worldSize,e.number(o,s,c)/this.worldSize)},wr.prototype.coordinatePoint=function(t){var i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix),new e.Point(i[0]/i[3],i[1]/i[3])},wr.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},wr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wr.prototype.calculatePosMatrix=function(t,i){void 0===i&&(i=!1);var r=t.key,n=i?this._alignedPosMatrixCache:this._posMatrixCache;if(n[r])return n[r];var a=t.canonical,o=this.worldSize/this.zoomScale(a.z),s=a.x+Math.pow(2,a.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*o,a.y*o,0]),e.scale(l,l,[o/e.EXTENT,o/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),n[r]=new Float32Array(l),n[r]},wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,i,r,n,a=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;a=e.mercatorYfromLat(p[1])*this.worldSize,t=(o=e.mercatorYfromLat(p[0])*this.worldSize)-a<u.y?u.y/(o-a):0}if(this.lngRange){var d=this.lngRange;s=e.mercatorXfromLng(d[0])*this.worldSize,i=(l=e.mercatorXfromLng(d[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var h=this.point,f=Math.max(i||0,t||0);if(f)return this.center=this.unproject(new e.Point(i?(l+s)/2:h.x,t?(o+a)/2:h.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var _=h.y,m=u.y/2;_-m<a&&(n=a+m),_+m>o&&(n=o-m)}if(this.lngRange){var g=h.x,y=u.x/2;g-y<s&&(r=s+y),g+y>l&&(r=l-y)}void 0===r&&void 0===n||(this.center=this.unproject(new e.Point(void 0!==r?r:h.x,void 0!==n?n:h.y))),this._unmodified=c,this._constraining=!1}},wr.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),n=Math.sin(r)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-i-r,.01,Math.PI-.01)),a=this.point,o=a.x,s=a.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);e.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-t.x/this.width,c[9]=2*t.y/this.height,e.scale(c,c,[1,-1,1]),e.translate(c,c,[0,0,-this.cameraToCenterDistance]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle),e.translate(c,c,[-o,-s,0]),this.mercatorMatrix=e.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),e.scale(c,c,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=e.invert([],this.projMatrix);var p=this.width%2/2,d=this.height%2/2,h=Math.cos(this.angle),f=Math.sin(this.angle),_=o-Math.round(o)+h*p+f*d,m=s-Math.round(s)+h*d+f*p,g=new Float64Array(c);if(e.translate(g,g,[_>.5?_-1:_,m>.5?m-1:m,0]),this.alignedProjMatrix=g,c=e.create(),e.scale(c,c,[this.width/2,-this.height/2,1]),e.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=e.create(),e.scale(c,c,[1,-1,1]),e.translate(c,c,[-1,-1,0]),e.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},wr.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))},wr.prototype.getCameraQueryGeometry=function(t){var i=this.getCameraPoint();if(1===t.length)return[t[0],i];for(var r=i.x,n=i.y,a=i.x,o=i.y,s=0,l=t;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),n=Math.min(n,u.y),a=Math.max(a,u.x),o=Math.max(o,u.y)}return[new e.Point(r,n),new e.Point(a,n),new e.Point(a,o),new e.Point(r,o),new e.Point(r,n)]},Object.defineProperties(wr.prototype,Sr);var Ar=function(t){var i,r,n,a;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),r=!1,n=null,a=function(){n=null,r&&(i(),n=setTimeout(a,300),r=!1)},function(){return r=!0,n||a(),n})};Ar.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ar.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ar.prototype.getHashString=function(t){var i=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,n),o=Math.round(i.lng*a)/a,s=Math.round(i.lat*a)/a,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+r:r+"/"+s+"/"+o,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var p=this._hashName,d=!1,h=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===p?(d=!0,t+"="+c):e})).filter((function(e){return e}));return d||h.push(p+"="+c),"#"+h.join("&")}return"#"+c},Ar.prototype._getCurrentHash=function(){var t,i=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===i._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")},Ar.prototype._onHashChange=function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},Ar.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",t)}catch(e){}};var kr={linearity:.3,easing:e.bezier(0,0,.3,1)},Er=e.extend({deceleration:2500,maxSpeed:1400},kr),Ir=e.extend({deceleration:20,maxSpeed:1400},kr),Tr=e.extend({deceleration:1e3,maxSpeed:360},kr),Cr=e.extend({deceleration:1e3,maxSpeed:90},kr),Pr=function(e){this._map=e,this.clear()};function Lr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Rr(t,i,r){var n=r.maxSpeed,a=r.linearity,o=r.deceleration,s=e.clamp(t*a/(i/1e3),-n,n),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}Pr.prototype.clear=function(){this._inertiaBuffer=[]},Pr.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},Pr.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,i=e.browser.now();t.length>0&&i-t[0].time>160;)t.shift()},Pr.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},r=0,n=this._inertiaBuffer;r<n.length;r+=1){var a=n[r].settings;i.zoom+=a.zoomDelta||0,i.bearing+=a.bearingDelta||0,i.pitch+=a.pitchDelta||0,a.panDelta&&i.pan._add(a.panDelta),a.around&&(i.around=a.around),a.pinchAround&&(i.pinchAround=a.pinchAround)}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=Rr(i.pan.mag(),o,e.extend({},Er,t||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,Lr(s,l)}if(i.zoom){var u=Rr(i.zoom,o,Ir);s.zoom=this._map.transform.zoom+u.amount,Lr(s,u)}if(i.bearing){var c=Rr(i.bearing,o,Tr);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),Lr(s,c)}if(i.pitch){var p=Rr(i.pitch,o,Cr);s.pitch=this._map.transform.pitch+p.amount,Lr(s,p)}if(s.zoom||s.bearing){var d=void 0===i.pinchAround?i.around:i.pinchAround;s.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}};var Mr=function(t){function r(r,n,a,o){void 0===o&&(o={});var s=i.mousePos(n.getCanvasContainer(),a),l=n.unproject(s);t.call(this,r,e.extend({point:s,lngLat:l,originalEvent:a},o)),this._defaultPrevented=!1,this.target=n}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(e.Event),zr=function(t){function r(r,n,a){var o="touchend"===r?a.changedTouches:a.touches,s=i.touchPos(n.getCanvasContainer(),o),l=s.map((function(e){return n.unproject(e)})),u=s.reduce((function(e,t,i,r){return e.add(t.div(r.length))}),new e.Point(0,0)),c=n.unproject(u);t.call(this,r,{points:s,point:u,lngLats:l,lngLat:c,originalEvent:a}),this._defaultPrevented=!1}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var n={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,n),r}(e.Event),Dr=function(e){function t(t,i,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,i),t}(e.Event),Br=function(e,t){this._map=e,this._clickTolerance=t.clickTolerance};Br.prototype.reset=function(){delete this._mousedownPos},Br.prototype.wheel=function(e){return this._firePreventable(new Dr(e.type,this._map,e))},Br.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new Mr(e.type,this._map,e))},Br.prototype.mouseup=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.dblclick=function(e){return this._firePreventable(new Mr(e.type,this._map,e))},Br.prototype.mouseover=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.mouseout=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.touchstart=function(e){return this._firePreventable(new zr(e.type,this._map,e))},Br.prototype.touchmove=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype.touchend=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype.touchcancel=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},Br.prototype.isEnabled=function(){return!0},Br.prototype.isActive=function(){return!1},Br.prototype.enable=function(){},Br.prototype.disable=function(){};var Fr=function(e){this._map=e};Fr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fr.prototype.mousemove=function(e){this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.mousedown=function(){this._delayContextMenu=!0},Fr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fr.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Mr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var Or=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1};function Nr(e,t){for(var i={},r=0;r<e.length;r++)i[e[r].identifier]=t[r];return i}Or.prototype.isEnabled=function(){return!!this._enabled},Or.prototype.isActive=function(){return!!this._active},Or.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Or.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Or.prototype.mousedown=function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},Or.prototype.mousemoveWindow=function(e,t){if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var n=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var a=Math.min(n.x,r.x),o=Math.max(n.x,r.x),s=Math.min(n.y,r.y),l=Math.max(n.y,r.y);i.setTransform(this._box,"translate("+a+"px,"+s+"px)"),this._box.style.width=o-a+"px",this._box.style.height=l-s+"px"}}},Or.prototype.mouseupWindow=function(t,r){var n=this;if(this._active&&0===t.button){var a=this._startPos,o=r;if(this.reset(),i.suppressClick(),a.x!==o.x||a.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(a,o,n._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Or.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},Or.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Or.prototype._fireEvent=function(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))};var Ur=function(e){this.reset(),this.numTouches=e.numTouches};Ur.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ur.prototype.touchstart=function(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var i=new e.Point(0,0),r=0,n=t;r<n.length;r+=1)i._add(n[r]);return i.div(t.length)}(i),this.touches=Nr(r,i)))},Ur.prototype.touchmove=function(e,t,i){if(!this.aborted&&this.centroid){var r=Nr(i,t);for(var n in this.touches){var a=r[n];(!a||a.dist(this.touches[n])>30)&&(this.aborted=!0)}}},Ur.prototype.touchend=function(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var qr=function(e){this.singleTap=new Ur(e),this.numTaps=e.numTaps,this.reset()};qr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},qr.prototype.touchstart=function(e,t,i){this.singleTap.touchstart(e,t,i)},qr.prototype.touchmove=function(e,t,i){this.singleTap.touchmove(e,t,i)},qr.prototype.touchend=function(e,t,i){var r=this.singleTap.touchend(e,t,i);if(r){var n=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(n&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Vr=function(){this._zoomIn=new qr({numTouches:1,numTaps:2}),this._zoomOut=new qr({numTouches:2,numTaps:1}),this.reset()};Vr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vr.prototype.touchstart=function(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)},Vr.prototype.touchmove=function(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)},Vr.prototype.touchend=function(e,t,i){var r=this,n=this._zoomIn.touchend(e,t,i),a=this._zoomOut.touchend(e,t,i);return n?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(n)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var jr={0:1,2:2},Gr=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1};Gr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Gr.prototype._correctButton=function(e,t){return!1},Gr.prototype._move=function(e,t){return{}},Gr.prototype.mousedown=function(e,t){if(!this._lastPoint){var r=i.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}},Gr.prototype.mousemoveWindow=function(e,t){var i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){var i=jr[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)},Gr.prototype.mouseupWindow=function(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Gr.prototype.enable=function(){this._enabled=!0},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active};var Kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.mousedown=function(t,i){e.prototype.mousedown.call(this,t,i),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},t.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},t}(Gr),Zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Gr),Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Gr),Qr=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};Qr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Qr.prototype.touchstart=function(e,t,i){return this._calculateTransform(e,t,i)},Qr.prototype.touchmove=function(e,t,i){if(this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)},Qr.prototype.touchend=function(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()},Qr.prototype.touchcancel=function(){this.reset()},Qr.prototype._calculateTransform=function(t,i,r){r.length>0&&(this._active=!0);var n=Nr(r,i),a=new e.Point(0,0),o=new e.Point(0,0),s=0;for(var l in n){var u=n[l],c=this._touches[l];c&&(a._add(u),o._add(u.sub(c)),s++,n[l]=u)}if(this._touches=n,!(s<this._minTouches)&&o.mag()){var p=o.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:a.div(s),panDelta:p}}},Qr.prototype.enable=function(){this._enabled=!0},Qr.prototype.disable=function(){this._enabled=!1,this.reset()},Qr.prototype.isEnabled=function(){return this._enabled},Qr.prototype.isActive=function(){return this._active};var Wr=function(){this.reset()};function Jr(e,t,i){for(var r=0;r<e.length;r++)if(e[r].identifier===i)return t[r]}function Xr(e,t){return Math.log(e/t)/Math.LN2}Wr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wr.prototype._start=function(e){},Wr.prototype._move=function(e,t,i){return{}},Wr.prototype.touchstart=function(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))},Wr.prototype.touchmove=function(e,t,i){if(this._firstTwoTouches){e.preventDefault();var r=this._firstTwoTouches,n=r[1],a=Jr(i,t,r[0]),o=Jr(i,t,n);if(a&&o){var s=this._aroundCenter?null:a.add(o).div(2);return this._move([a,o],s,e)}}},Wr.prototype.touchend=function(e,t,r){if(this._firstTwoTouches){var n=this._firstTwoTouches,a=n[1],o=Jr(r,t,n[0]),s=Jr(r,t,a);o&&s||(this._active&&i.suppressClick(),this.reset())}},Wr.prototype.touchcancel=function(){this.reset()},Wr.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},Wr.prototype.disable=function(){this._enabled=!1,this.reset()},Wr.prototype.isEnabled=function(){return this._enabled},Wr.prototype.isActive=function(){return this._active};var Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(e,t){var i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Xr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xr(this._distance,i),pinchAround:t}},t}(Wr);function $r(e,t){return 180*e.angleWith(t)/Math.PI}var en=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(e,t){var i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$r(this._vector,i),pinchAround:t}},t.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,i=$r(e,this._startVector);return Math.abs(i)<t},t}(Wr);function tn(e){return Math.abs(e.y)>Math.abs(e.x)}var rn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,tn(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(e,t,i){var r=e[0].sub(this._lastPoints[0]),n=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,n,i.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+n.y)/2*-.5}},t.prototype.gestureBeginsVertically=function(e,t,i){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,n=t.mag()>=2;if(r||n){if(!r||!n)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return tn(e)&&tn(t)&&a}},t}(Wr),nn={panStep:100,bearingStep:15,pitchStep:10},an=function(){var e=nn;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep};function on(e){return e*(2-e)}an.prototype.reset=function(){this._active=!1},an.prototype.keydown=function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=0,r=0,n=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?n=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?n=-1:(e.preventDefault(),o=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:on,zoom:i?Math.round(l)+i*(e.shiftKey?2:1):l,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+n*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}},an.prototype.enable=function(){this._enabled=!0},an.prototype.disable=function(){this._enabled=!1,this.reset()},an.prototype.isEnabled=function(){return this._enabled},an.prototype.isActive=function(){return this._active};var sn=function(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)};sn.prototype.setZoomRate=function(e){this._defaultZoomRate=e},sn.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},sn.prototype.isEnabled=function(){return!!this._enabled},sn.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},sn.prototype.isZooming=function(){return!!this._zooming},sn.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},sn.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},sn.prototype.wheel=function(t){if(this.isEnabled()){var i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}},sn.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},sn.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=i.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},sn.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,n=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==n&&(n=1/n);var a="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(a*n))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var p=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),d=u(p);o=e.number(l,s,d),p<1?this._frameId||(this._frameId=!0):c=!0}else o=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},sn.prototype._smoothOutEasing=function(t){var i=e.ease;if(this._prevEase){var r=this._prevEase,n=(e.browser.now()-r.start)/r.duration,a=r.easing(n+.01)-r.easing(n),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=e.bezier(o,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:i},i},sn.prototype.reset=function(){this._active=!1};var ln=function(e,t){this._clickZoom=e,this._tapZoom=t};ln.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ln.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ln.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ln.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var un=function(){this.reset()};un.prototype.reset=function(){this._active=!1},un.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}},un.prototype.enable=function(){this._enabled=!0},un.prototype.disable=function(){this._enabled=!1,this.reset()},un.prototype.isEnabled=function(){return this._enabled},un.prototype.isActive=function(){return this._active};var cn=function(){this._tap=new qr({numTouches:1,numTaps:1}),this.reset()};cn.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},cn.prototype.touchstart=function(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))},cn.prototype.touchmove=function(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=t[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,i)},cn.prototype.touchend=function(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)},cn.prototype.touchcancel=function(){this.reset()},cn.prototype.enable=function(){this._enabled=!0},cn.prototype.disable=function(){this._enabled=!1,this.reset()},cn.prototype.isEnabled=function(){return this._enabled},cn.prototype.isActive=function(){return this._active};var pn=function(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i};pn.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},pn.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},pn.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},pn.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var dn=function(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i};dn.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},dn.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},dn.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},dn.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var hn=function(e,t,i,r){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};hn.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},hn.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},hn.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},hn.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},hn.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},hn.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var fn=function(e){return e.zoom||e.drag||e.pitch||e.rotate},_n=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(e.Event);function mn(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var gn=function(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pr(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var n=this._el;this._listeners=[[n,"touchstart",{passive:!0}],[n,"touchmove",{passive:!1}],[n,"touchend",void 0],[n,"touchcancel",void 0],[n,"mousedown",void 0],[n,"mousemove",void 0],[n,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[n,"mouseover",void 0],[n,"mouseout",void 0],[n,"dblclick",void 0],[n,"click",void 0],[n,"keydown",{capture:!1}],[n,"keyup",void 0],[n,"wheel",{passive:!1}],[n,"contextmenu",void 0],[e.window,"blur",void 0]];for(var a=0,o=this._listeners;a<o.length;a+=1){var s=o[a],l=s[0];i.addEventListener(l,s[1],l===e.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};gn.prototype.destroy=function(){for(var t=0,r=this._listeners;t<r.length;t+=1){var n=r[t],a=n[0];i.removeEventListener(a,n[1],a===e.window.document?this.handleWindowEvent:this.handleEvent,n[2])}},gn.prototype._addDefaultHandlers=function(e){var t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new Br(t,e));var r=t.boxZoom=new Or(t,e);this._add("boxZoom",r);var n=new Vr,a=new un;t.doubleClickZoom=new ln(a,n),this._add("tapZoom",n),this._add("clickZoom",a);var o=new cn;this._add("tapDragZoom",o);var s=t.touchPitch=new rn;this._add("touchPitch",s);var l=new Zr(e),u=new Hr(e);t.dragRotate=new dn(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Kr(e),p=new Qr(e);t.dragPan=new pn(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var d=new en,h=new Yr;t.touchZoomRotate=new hn(i,h,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",h,["touchPan","touchRotate"]);var f=t.scrollZoom=new sn(t,this);this._add("scrollZoom",f,["mousePan"]);var _=t.keyboard=new an;this._add("keyboard",_),this._add("blockableMapEvent",new Fr(t));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];e.interactive&&e[y]&&t[y].enable(e[y])}},gn.prototype._add=function(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t},gn.prototype.stop=function(e){if(!this._updatingCamera){for(var t=0,i=this._handlers;t<i.length;t+=1)i[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}},gn.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},gn.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},gn.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},gn.prototype.isMoving=function(){return Boolean(fn(this._eventsInProgress))||this.isZooming()},gn.prototype._blockedByActive=function(e,t,i){for(var r in e)if(r!==i&&(!t||t.indexOf(r)<0))return!0;return!1},gn.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},gn.prototype._getMapTouches=function(e){for(var t=[],i=0,r=e;i<r.length;i+=1){var n=r[i];this._el.contains(n.target)&&t.push(n)}return t},gn.prototype.handleEvent=function(e,t){if("blur"!==e.type){this._updatingCamera=!0;for(var r="renderFrame"===e.type?void 0:e,n={needsRenderFrame:!1},a={},o={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,e),u=0,c=this._handlers;u<c.length;u+=1){var p=c[u],d=p.handlerName,h=p.handler,f=p.allowed;if(h.isEnabled()){var _=void 0;this._blockedByActive(o,f,d)?h.reset():h[t||e.type]&&(_=h[t||e.type](e,l,s),this.mergeHandlerResult(n,a,_,d,r),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||h.isActive())&&(o[d]=h)}}var m={};for(var g in this._previousActiveHandlers)o[g]||(m[g]=r);this._previousActiveHandlers=o,(Object.keys(m).length||mn(n))&&(this._changes.push([n,a,m]),this._triggerRenderFrame()),(Object.keys(o).length||mn(n))&&this._map._stop(!0),this._updatingCamera=!1;var y=n.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},gn.prototype.mergeHandlerResult=function(t,i,r,n,a){if(r){e.extend(t,r);var o={handlerName:n,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(i.zoom=o),void 0!==r.panDelta&&(i.drag=o),void 0!==r.pitchDelta&&(i.pitch=o),void 0!==r.bearingDelta&&(i.rotate=o)}},gn.prototype._applyChanges=function(){for(var t={},i={},r={},n=0,a=this._changes;n<a.length;n+=1){var o=a[n],s=o[0],l=o[1],u=o[2];s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(i,l),e.extend(r,u)}this._updateMapTransform(t,i,r),this._changes=[]},gn.prototype._updateMapTransform=function(e,t,i){var r=this._map,n=r.transform;if(!mn(e))return this._fireEvents(t,i,!0);var a=e.panDelta,o=e.zoomDelta,s=e.bearingDelta,l=e.pitchDelta,u=e.around,c=e.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;var p=n.pointLocation(a?u.sub(a):u);s&&(n.bearing+=s),l&&(n.pitch+=l),o&&(n.zoom+=o),n.setLocationAtPoint(p,u),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,i,!0)},gn.prototype._fireEvents=function(t,i,r){var n=this,a=fn(this._eventsInProgress),o=fn(t),s={};for(var l in t)this._eventsInProgress[l]||(s[l+"start"]=t[l].originalEvent),this._eventsInProgress[l]=t[l];for(var u in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(u,s[u]);for(var c in o&&this._fireEvent("move",o.originalEvent),t)this._fireEvent(c,t[c].originalEvent);var p,d={};for(var h in this._eventsInProgress){var f=this._eventsInProgress[h],_=f.handlerName,m=f.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[h],d[h+"end"]=p=i[_]||m)}for(var g in d)this._fireEvent(g,d[g]);var y=fn(this._eventsInProgress);if(r&&(a||o)&&!y){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(e){return 0!==e&&-n._bearingSnap<e&&e<n._bearingSnap};v?(b(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:p})):(this._map.fire(new e.Event("moveend",{originalEvent:p})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},gn.prototype._fireEvent=function(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))},gn.prototype._requestFrame=function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new _n("renderFrame",{timeStamp:t})),e._applyChanges()}))},gn.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var yn=function(t){function i(i,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},i.prototype.panBy=function(t,i,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),r)},i.prototype.panTo=function(t,i,r){return this.easeTo(e.extend({center:t},i),r)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},i.prototype.zoomTo=function(t,i,r){return this.easeTo(e.extend({zoom:t},i),r)},i.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},i.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},i.prototype.rotateTo=function(t,i,r){return this.easeTo(e.extend({bearing:t},i),r)},i.prototype.resetNorth=function(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this},i.prototype.resetNorthPitch=function(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this},i.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},i.prototype.cameraForBounds=function(t,i){return t=e.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(t,i,r,n){var a={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=e.extend({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){var o=n.padding;n.padding={top:o,bottom:o,right:o,left:o}}n.padding=e.extend(a,n.padding);var s=this.transform,l=s.padding,u=s.project(e.LngLat.convert(t)),c=s.project(e.LngLat.convert(i)),p=u.rotate(-r*Math.PI/180),d=c.rotate(-r*Math.PI/180),h=new e.Point(Math.max(p.x,d.x),Math.max(p.y,d.y)),f=new e.Point(Math.min(p.x,d.x),Math.min(p.y,d.y)),_=h.sub(f),m=(s.width-(l.left+l.right+n.padding.left+n.padding.right))/_.x,g=(s.height-(l.top+l.bottom+n.padding.top+n.padding.bottom))/_.y;if(!(g<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),n.maxZoom),v=e.Point.convert(n.offset),b=new e.Point(v.x+(n.padding.left-n.padding.right)/2,v.y+(n.padding.top-n.padding.bottom)/2).mult(s.scale/s.zoomScale(y));return{center:s.unproject(u.add(c).div(2).sub(b)),zoom:y,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)},i.prototype.fitScreenCoordinates=function(t,i,r,n,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(i)),r,n),n,a)},i.prototype._fitInternal=function(t,i,r){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this},i.prototype.jumpTo=function(t,i){this.stop();var r=this.transform,n=!1,a=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),n&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),a&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),o&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))},i.prototype.easeTo=function(t,i){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var n=this.transform,a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in t?+t.zoom:a,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,p="pitch"in t?+t.pitch:s,d="padding"in t?t.padding:n.padding,h=e.Point.convert(t.offset),f=n.centerPoint.add(h),_=n.pointLocation(f),m=e.LngLat.convert(t.center||_);this._normalizeCenter(m);var g,y,v=n.project(_),b=n.project(m).sub(v),x=n.zoomScale(u-a);t.around&&(g=e.LngLat.convert(t.around),y=n.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==a,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||p!==s,this._padding=!n.isPaddingEqual(d),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,w),this._ease((function(t){if(r._zooming&&(n.zoom=e.number(a,u,t)),r._rotating&&(n.bearing=e.number(o,c,t)),r._pitching&&(n.pitch=e.number(s,p,t)),r._padding&&(n.interpolatePadding(l,d,t),f=n.centerPoint.add(h)),g)n.setLocationAtPoint(g,y);else{var _=n.zoomScale(n.zoom-a),m=u>a?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-t),S=n.unproject(v.add(b.mult(t*w)).mult(_));n.setLocationAtPoint(n.renderWorldCopies?S.wrap():S,f)}r._fireMoveEvents(i)}),(function(e){r._afterEase(i,e)}),t),this},i.prototype._prepareEase=function(t,i,r){void 0===r&&(r={}),this._moving=!0,i||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))},i.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},i.prototype._afterEase=function(t,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var r=this._zooming,n=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),n&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}},i.prototype.flyTo=function(t,i){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var n=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(n,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,p="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,h="padding"in t?t.padding:a.padding,f=a.zoomScale(c-o),_=e.Point.convert(t.offset),m=a.centerPoint.add(_),g=a.pointLocation(m),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var v=a.project(g),b=a.project(y).sub(v),x=t.curve,w=Math.max(a.width,a.height),S=w/f,A=b.mag();if("minZoom"in t){var k=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),E=w/a.zoomScale(k-o);x=Math.sqrt(E/A*2)}var I=x*x;function T(e){var t=(S*S-w*w+(e?-1:1)*I*I*A*A)/(2*(e?S:w)*I*A);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}var L=T(0),R=function(e){return P(L)/P(L+x*e)},M=function(e){return w*((P(L)*(C(t=L+x*e)/P(t))-C(L))/I)/A;var t},z=(T(1)-L)/x;if(Math.abs(A)<1e-6||!isFinite(z)){if(Math.abs(w-S)<1e-6)return this.easeTo(t,i);var D=S<w?-1:1;z=Math.abs(Math.log(S/w))/x,M=function(){return 0},R=function(e){return Math.exp(D*x*e)}}return t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==p,this._pitching=d!==l,this._padding=!a.isPaddingEqual(h),this._prepareEase(i,!1),this._ease((function(t){var n=t*z,f=1/R(n);a.zoom=1===t?c:o+a.scaleZoom(f),r._rotating&&(a.bearing=e.number(s,p,t)),r._pitching&&(a.pitch=e.number(l,d,t)),r._padding&&(a.interpolatePadding(u,h,t),m=a.centerPoint.add(_));var g=1===t?y:a.unproject(v.add(b.mult(M(n))).mult(f));a.setLocationAtPoint(a.renderWorldCopies?g.wrap():g,m),r._fireMoveEvents(i)}),(function(){return r._afterEase(i)}),t),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this},i.prototype._ease=function(t,i,r){!1===r.animate||0===r.duration?(t(1),i()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(t,i){t=e.wrap(t,-180,180);var r=Math.abs(t-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t},i.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}},i}(e.Evented),vn=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};vn.prototype.getDefaultPosition=function(){return"bottom-right"},vn.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},vn.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},vn.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=i.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<i.length-1?"&":"")),e}),"?");t.href=e.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow"}},vn.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},vn.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var i=this._map.style.sourceCaches;for(var r in i){var n=i[r];if(n.used){var a=n.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,i){for(var r=i+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},vn.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var bn=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};bn.prototype.onAdd=function(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");var t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},bn.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},bn.prototype.getDefaultPosition=function(){return"bottom-left"},bn.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},bn.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},bn.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var xn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};xn.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},xn.prototype.remove=function(e){for(var t=this._currentlyRunning,i=0,r=t?this._queue.concat(t):this._queue;i<r.length;i+=1){var n=r[i];if(n.id===e)return void(n.cancelled=!0)}},xn.prototype.run=function(e){void 0===e&&(e=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=t;i<r.length;i+=1){var n=r[i];if(!n.cancelled&&(n.callback(e),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},xn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var wn={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Sn=e.window.HTMLImageElement,An=e.window.HTMLElement,kn=e.window.ImageBitmap,En={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},In=function(r){function n(t){var i=this;if(null!=(t=e.extend({},En,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var n=new wr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(r.call(this,n,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new xn,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},wn,t.locale),this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof An))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new gn(this,t),this._hash=t.hash&&new Ar("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new vn({customAttribution:t.customAttribution})),this.addControl(new bn,t.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(t){i._update("style"===t.dataType),i.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){i.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(n.__proto__=r),(n.prototype=Object.create(r&&r.prototype)).constructor=n;var a={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return n.prototype._getMapId=function(){return this._mapId},n.prototype.addControl=function(t,i){if(void 0===i&&t.getDefaultPosition&&(i=t.getDefaultPosition()),void 0===i&&(i="top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this},n.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this},n.prototype.resize=function(t){var i=this._containerDimensions(),r=i[0],n=i[1];this._resizeCanvas(r,n),this.transform.resize(r,n),this.painter.resize(r,n);var a=!this._moving;return a&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),a&&this.fire(new e.Event("moveend",t)),this},n.prototype.getBounds=function(){return this.transform.getBounds()},n.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},n.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},n.prototype.setMinZoom=function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},n.prototype.getMinZoom=function(){return this.transform.minZoom},n.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},n.prototype.getMaxZoom=function(){return this.transform.maxZoom},n.prototype.setMinPitch=function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},n.prototype.getMinPitch=function(){return this.transform.minPitch},n.prototype.setMaxPitch=function(e){if((e=null==e?60:e)>60)throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},n.prototype.getMaxPitch=function(){return this.transform.maxPitch},n.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},n.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},n.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},n.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},n.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},n.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},n.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},n.prototype._createDelegatedListener=function(e,t,i){var r,n=this;if("mouseenter"===e||"mouseover"===e){var a=!1;return{layer:t,listener:i,delegates:{mousemove:function(r){var o=n.getLayer(t)?n.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?a||(a=!0,i.call(n,new Mr(e,n,r.originalEvent,{features:o}))):a=!1},mouseout:function(){a=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:i,delegates:{mousemove:function(r){(n.getLayer(t)?n.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,i.call(n,new Mr(e,n,r.originalEvent)))},mouseout:function(t){o&&(o=!1,i.call(n,new Mr(e,n,t.originalEvent)))}}}}return{layer:t,listener:i,delegates:(r={},r[e]=function(e){var r=n.getLayer(t)?n.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,i.call(n,e),delete e.features)},r)}},n.prototype.on=function(e,t,i){if(void 0===i)return r.prototype.on.call(this,e,t);var n=this._createDelegatedListener(e,t,i);for(var a in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(n),n.delegates)this.on(a,n.delegates[a]);return this},n.prototype.once=function(e,t,i){if(void 0===i)return r.prototype.once.call(this,e,t);var n=this._createDelegatedListener(e,t,i);for(var a in n.delegates)this.once(a,n.delegates[a]);return this},n.prototype.off=function(e,t,i){var n=this;return void 0===i?r.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var a=r[e],o=0;o<a.length;o++){var s=a[o];if(s.layer===t&&s.listener===i){for(var l in s.delegates)n.off(l,s.delegates[l]);return a.splice(o,1),n}}}(this._delegatedListeners),this)},n.prototype.queryRenderedFeatures=function(t,i){if(!this.style)return[];var r;if(void 0!==i||void 0===t||t instanceof e.Point||Array.isArray(t)||(i=t,t=void 0),i=i||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var n=e.Point.convert(t[0]),a=e.Point.convert(t[1]);r=[n,new e.Point(a.x,n.y),a,new e.Point(n.x,a.y),n]}return this.style.queryRenderedFeatures(r,i,this.transform)},n.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},n.prototype.setStyle=function(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))},n.prototype._getUIString=function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '"+e+"'");return t},n.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},n.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},n.prototype._diffStyle=function(t,i){var r=this;if("string"==typeof t){var n=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(n,e.ResourceType.Style);e.getJSON(a,(function(t,n){t?r.fire(new e.ErrorEvent(t)):n&&r._updateDiff(n,i)}))}else"object"==typeof t&&this._updateDiff(t,i)},n.prototype._updateDiff=function(t,i){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,i)}},n.prototype.getStyle=function(){if(this.style)return this.style.serialize()},n.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},n.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},n.prototype.isSourceLoaded=function(t){var i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},n.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var i=e[t]._tiles;for(var r in i){var n=i[r];if("loaded"!==n.state&&"errored"!==n.state)return!1}}return!0},n.prototype.addSourceType=function(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)},n.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},n.prototype.getSource=function(e){return this.style.getSource(e)},n.prototype.addImage=function(t,i,r){void 0===r&&(r={});var n=r.pixelRatio;void 0===n&&(n=1);var a=r.sdf;void 0===a&&(a=!1);var o=r.stretchX,s=r.stretchY,l=r.content;if(this._lazyInitEmptyStyle(),i instanceof Sn||kn&&i instanceof kn){var u=e.browser.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:n,stretchX:o,stretchY:s,content:l,sdf:a,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=i;this.style.addImage(t,{data:new e.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:n,stretchX:o,stretchY:s,content:l,sdf:a,version:0,userImage:c}),c.onAdd&&c.onAdd(this,t)}},n.prototype.updateImage=function(t,i){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var n=i instanceof Sn||kn&&i instanceof kn?e.browser.getImageData(i):i,a=n.width,o=n.height,s=n.data;return void 0===a||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==r.data.width||o!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(i instanceof Sn||kn&&i instanceof kn)),void this.style.updateImage(t,r))},n.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},n.prototype.removeImage=function(e){this.style.removeImage(e)},n.prototype.loadImage=function(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)},n.prototype.listImages=function(){return this.style.listImages()},n.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},n.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},n.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},n.prototype.getLayer=function(e){return this.style.getLayer(e)},n.prototype.setLayerZoomRange=function(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)},n.prototype.setFilter=function(e,t,i){return void 0===i&&(i={}),this.style.setFilter(e,t,i),this._update(!0)},n.prototype.getFilter=function(e){return this.style.getFilter(e)},n.prototype.setPaintProperty=function(e,t,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,i,r),this._update(!0)},n.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},n.prototype.setLayoutProperty=function(e,t,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,i,r),this._update(!0)},n.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},n.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},n.prototype.getLight=function(){return this.style.getLight()},n.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},n.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},n.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},n.prototype.getContainer=function(){return this._container},n.prototype.getCanvasContainer=function(){return this._canvasContainer},n.prototype.getCanvas=function(){return this._canvas},n.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},n.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},n.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var n=this._controlContainer=i.create("div","mapboxgl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){a[e]=i.create("div","mapboxgl-ctrl-"+e,n)}))},n.prototype._resizeCanvas=function(t,i){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*i,this._canvas.style.width=t+"px",this._canvas.style.height=i+"px"},n.prototype._setupPainter=function(){var i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new yr(r,this.transform),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},n.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},n.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},n.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},n.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},n.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},n.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},n.prototype._render=function(t){var i,r=this,n=0,a=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=a.createQueryEXT(),a.beginQueryEXT(a.TIME_ELAPSED_EXT,i),n=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=e.browser.now();this.style.zoomHistory.update(s,l);var u=new e.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(o=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var p=e.browser.now()-n;a.endQueryEXT(a.TIME_ELAPSED_EXT,i),setTimeout((function(){var t=a.getQueryObjectEXT(i,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(i),r.fire(new e.Event("gpu-timing-frame",{cpuTime:p,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(d);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var h=this._sourcesDirty||this._styleDirty||this._placementDirty;return h||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0),this}},n.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,i=this._controls;t<i.length;t+=1)i[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Tn(this._canvasContainer),Tn(this._controlContainer),Tn(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},n.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){t._frame=null,t._render(e)})))},n.prototype._onWindowOnline=function(){this._update()},n.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},a.showTileBoundaries.get=function(){return!!this._showTileBoundaries},a.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},a.showPadding.get=function(){return!!this._showPadding},a.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},a.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},a.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},a.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},a.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},a.repaint.get=function(){return!!this._repaint},a.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},a.vertices.get=function(){return!!this._vertices},a.vertices.set=function(e){this._vertices=e,this._update()},n.prototype._setCacheLimits=function(t,i){e.setCacheLimits(t,i)},a.version.get=function(){return e.version},Object.defineProperties(n.prototype,a),n}(yn);function Tn(e){e.parentNode&&e.parentNode.removeChild(e)}var Cn={showCompass:!0,showZoom:!0,visualizePitch:!1},Pn=function(t){var r=this;this.options=e.extend({},Cn,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return r._map.zoomIn({},{originalEvent:e})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return r._map.zoomOut({},{originalEvent:e})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:e}):r._map.resetNorth({},{originalEvent:e})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Pn.prototype._updateZoomButtons=function(){var e=this._map.getZoom();this._zoomInButton.disabled=e===this._map.getMaxZoom(),this._zoomOutButton.disabled=e===this._map.getMinZoom()},Pn.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},Pn.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ln(this._map,this._compass,this.options.visualizePitch)),this._container},Pn.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Pn.prototype._createButton=function(e,t){var r=i.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r},Pn.prototype._setButtonTitle=function(e,t){var i=this._map._getUIString("NavigationControl."+t);e.title=i,e.setAttribute("aria-label",i)};var Ln=function(t,r,n){void 0===n&&(n=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Zr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,n&&(this.mousePitch=new Hr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(r,"mousedown",this.mousedown),i.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(r,"touchmove",this.touchmove),i.addEventListener(r,"touchend",this.touchend),i.addEventListener(r,"touchcancel",this.reset)};function Rn(t,i,r){if(t=new e.LngLat(t.lng,t.lat),i){var n=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(i);r.locationPoint(n).distSqr(i)<o?t=n:r.locationPoint(a).distSqr(i)<o&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Ln.prototype.down=function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()},Ln.prototype.move=function(e,t){var i=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var n=this.mousePitch.mousemoveWindow(e,t);n&&n.pitchDelta&&i.setPitch(i.getPitch()+n.pitchDelta)}},Ln.prototype.off=function(){var e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},Ln.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Ln.prototype.mousedown=function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Ln.prototype.mousemove=function(e){this.move(e,i.mousePos(this.element,e))},Ln.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Ln.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},Ln.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},Ln.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ln.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Mn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function zn(e,t,i){var r=e.classList;for(var n in Mn)r.remove("mapboxgl-"+i+"-anchor-"+n);r.add("mapboxgl-"+i+"-anchor-"+t)}var Dn,Bn=function(t){function r(r,n){var a=this;if(t.call(this),(r instanceof e.window.HTMLElement||n)&&(r=e.extend({element:r},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<p.length;c+=1){var d=p[c],h=i.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",d.rx),h.setAttributeNS(null,"ry",d.ry),u.appendChild(h)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(_);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(b),v.appendChild(x),l.appendChild(u),l.appendChild(f),l.appendChild(m),l.appendChild(y),l.appendChild(v),o.appendChild(l),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),this._element.addEventListener("mousedown",(function(e){e.preventDefault()})),this._element.addEventListener("focus",(function(){var e=a._map.getContainer();e.scrollTop=0,e.scrollLeft=0})),zn(this._element,this._anchor,"marker"),this._popup=null}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(e){var t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Rn(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(t="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),i.setTransform(this._element,Mn[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+t)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(e.Evented),Fn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},On=0,Nn=!1,Un=function(t){function r(i){t.call(this),this.options=e.extend({},Fn,i),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==Dn?r(Dn):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){r(Dn="denied"!==e.state)})):r(Dn=!!e.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,On=0,Nn=!1},r.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},r.prototype._updateCamera=function(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),a=e.extend({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),a,{geolocateSource:!0})},r.prototype._updateMarker=function(t){if(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),r=t.distanceTo(i),n=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=n+"px",this._circleElement.style.height=n+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Nn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{var a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Bn(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Bn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":On--,Nn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++On>1?(t={maximumAge:6e5,timeout:0},Nn=!0):(t=this.options.positionOptions,Nn=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),qn={maxWidth:100,unit:"metric"},Vn=function(t){this.options=e.extend({},qn,t),e.bindAll(["_onMove","setUnit"],this)};function jn(e,t,i){var r=i&&i.maxWidth||100,n=e._container.clientHeight/2,a=e.unproject([0,n]),o=e.unproject([r,n]),s=a.distanceTo(o);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?Gn(t,r,l/5280,e._getUIString("ScaleControl.Miles")):Gn(t,r,l,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?Gn(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Gn(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):Gn(t,r,s,e._getUIString("ScaleControl.Meters"))}function Gn(e,t,i,r){var n,a,o,s=(n=i,(a=Math.pow(10,(""+Math.floor(n)).length-1))*(o=(o=n/a)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o)));e.style.width=t*(s/i)+"px",e.innerHTML=s+"&nbsp;"+r}Vn.prototype.getDefaultPosition=function(){return"bottom-left"},Vn.prototype._onMove=function(){jn(this._map,this._container,this.options)},Vn.prototype.onAdd=function(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Vn.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Vn.prototype.setUnit=function(e){this.options.unit=e,jn(this._map,this._container,this.options)};var Kn=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Kn.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Kn.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Kn.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Kn.prototype._setupUI=function(){var t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Kn.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},Kn.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Kn.prototype._isFullscreen=function(){return this._fullscreen},Kn.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Kn.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Zn={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Hn=function(t){function r(i){t.call(this),this.options=e.extend(Object.create(Zn),i),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var i,r=e.window.document.createDocumentFragment(),n=e.window.document.createElement("body");for(n.innerHTML=t;i=n.firstChild;)r.appendChild(i);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},r.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},r.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},r.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},r.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},r.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(e){this._update(e.point)},r.prototype._onMouseMove=function(e){this._update(e.point)},r.prototype._onDrag=function(e){this._update(e.point)},r.prototype._update=function(t){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return r._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rn(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var n=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),a=this.options.anchor,o=function t(i){if(i){if("number"==typeof i){var r=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new e.Point(0,0),top:new e.Point(0,i),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-i),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(i,0),right:new e.Point(-i,0)}}if(i instanceof e.Point||Array.isArray(i)){var n=e.Point.convert(i);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:e.Point.convert(i.center||[0,0]),top:e.Point.convert(i.top||[0,0]),"top-left":e.Point.convert(i["top-left"]||[0,0]),"top-right":e.Point.convert(i["top-right"]||[0,0]),bottom:e.Point.convert(i.bottom||[0,0]),"bottom-left":e.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(i["bottom-right"]||[0,0]),left:e.Point.convert(i.left||[0,0]),right:e.Point.convert(i.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!a){var s,l=this._container.offsetWidth,u=this._container.offsetHeight;s=n.y+o.bottom.y<u?["top"]:n.y>this._map.transform.height-u?["bottom"]:[],n.x<l/2?s.push("left"):n.x>this._map.transform.width-l/2&&s.push("right"),a=0===s.length?"bottom":s.join("-")}var c=n.add(o[a]).round();i.setTransform(this._container,Mn[a]+" translate("+c.x+"px,"+c.y+"px)"),zn(this._container,a,"popup")}},r.prototype._onClose=function(){this.remove()},r}(e.Evented),Qn={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:In,NavigationControl:Pn,GeolocateControl:Un,AttributionControl:vn,ScaleControl:Vn,FullscreenControl:Kn,Popup:Hn,Marker:Bn,Style:jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Oe().acquire(ze)},clearPrewarmedResources:function(){var e=Be;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ze),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return De.workerCount},set workerCount(e){De.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return Qn})),i}()}));function Z(e){let t;const i=e[8].default,r=o(i,e,e[7],null);return{c(){r&&r.c()},m(e,i){r&&r.m(e,i),t=!0},p(e,t){r&&r.p&&128&t&&l(r,i,e,e[7],t,null,null)},i(e){t||(B(r,e),t=!0)},o(e){F(r,e),t=!1},d(e){r&&r.d(e)}}}function H(e){let t,i,n=e[0]&&Z(e);return{c(){t=d("div"),n&&n.c(),g(t,"id","map"),g(t,"class","svelte-4zwsn0")},m(r,a){c(r,t,a),n&&n.m(t,null),e[9](t),i=!0},p(e,[i]){e[0]?n?(n.p(e,i),1&i&&B(n,1)):(n=Z(e),n.c(),B(n,1),n.m(t,null)):n&&(D={r:0,c:[],p:D},F(n,1,1,(()=>{n=null})),D.r||r(D.c),D=D.p)},i(e){i||(B(n),i=!0)},o(e){F(n),i=!1},d(i){i&&p(t),n&&n.d(),e[9](null)}}}function Q(e,t,i){let r,n,{$$slots:a={},$$scope:o}=t,{worldview:s="US"}=t,{location:l={bounds:[[-10.76,49.864],[1.863,59.479]]}}=t,{style:u}=t,{map:c}=t,{locale:p}=t,{data:d}=t,h=p.split("-")[0]||"en",f=p.split("-")[1]||"US";return l.bounds&&(n={bounds:l.bounds}),w((()=>{const e=document.createElement("link");return e.rel="stylesheet",e.href="https://unpkg.com/mapbox-gl/dist/mapbox-gl.css",e.onload=()=>{const e=window.location.href.indexOf("mapbox.com")>-1;K.accessToken=e?"pk.eyJ1IjoibGFicy1zYW5kYm94IiwiYSI6ImNrMTZuanRtdTE3cW4zZG56bHR6MnBkZG4ifQ.YGRP0sZNYdLw5_jSa9IvXg":"pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiY2todmxnbDFyMDFmcDJ5cGthZ2Vqenh3OSJ9.Plw3yyu23yPZFPIiuatpKQ",i(0,c=new K.Map({container:r,style:u,interactive:!0,...n})),K.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",null,!0);var t=new K.NavigationControl;c.addControl(t,"top-right");var a=new K.ScaleControl({maxWidth:80});c.addControl(a,"bottom-right"),c.on("load",(function(){!function(){const e=["all",["any",["in",s,["get","worldview"]],["==","all",["get","worldview"]]]];c.setFilter("country-boundaries",e),c.setFilter("country-boundaries-outline",e),c.setFilter("admin-boundaries-line",e),c.setLayoutProperty("country-label","visibility","none");let t,i=["ar","en","es","fr","de","it","pt","ru","zh-Hans","zh-Hant","ja","ko","vi"];["zh"].indexOf(h)>=0&&(["CN"].indexOf(f)>=0&&(h="zh-Hans"),["TW","HK","SG"].indexOf(f)>=0&&(h="zh-Hant"));if(i.indexOf(h)>=0)t=["coalesce",["get","name_"+h],["get","name"]],c.setLayoutProperty("country-label","text-field",t);else{let e=["match",["get","iso_3166_1"]];Object.keys(d).forEach((t=>{e.push([d[t].iso_3166_1]),e.push(d[t].name_lang)})),e.push(""),console.log(e),c.setLayoutProperty("country-label","text-field",e),t=["coalesce",["get","name_en"],["get","name"]]}["settlement-minor-label","settlement-major-label","poi-label","water-point-label","water-line-label","waterway-label","natural-point-label","natural-line-label"].forEach((e=>c.setLayoutProperty(e,"text-field",t))),c.addLayer({id:"capital-location",type:"circle",source:{type:"geojson",data:null},paint:{"circle-radius":3,"circle-color":"hsla(355, 100%, 50%, 0.5)","circle-stroke-color":"white","circle-stroke-width":1},layout:{}})}()}))},document.head.appendChild(e),()=>{c.remove(),e.parentNode.removeChild(e)}})),e.$$set=e=>{"worldview"in e&&i(2,s=e.worldview),"location"in e&&i(3,l=e.location),"style"in e&&i(4,u=e.style),"map"in e&&i(0,c=e.map),"locale"in e&&i(5,p=e.locale),"data"in e&&i(6,d=e.data),"$$scope"in e&&i(7,o=e.$$scope)},[c,r,s,l,u,p,d,o,a,function(e){A[e?"unshift":"push"]((()=>{r=e,i(1,r)}))}]}class W extends j{constructor(e){super(),V(this,e,Q,H,a,{worldview:2,location:3,style:4,map:0,locale:5,data:6})}}async function J(e){let t=await fetch("https://query.wikidata.org/sparql?query="+encodeURIComponent(e),{headers:{accept:"application/sparql-results+json"}});return(await t.json()).results.bindings}function X(e){let t,i;const r=e[1].default,n=o(r,e,e[0],null);return{c(){t=d("div"),n&&n.c(),g(t,"class","svelte-1rdgfc9")},m(e,r){c(e,t,r),n&&n.m(t,null),i=!0},p(e,[t]){n&&n.p&&1&t&&l(n,r,e,e[0],t,null,null)},i(e){i||(B(n,e),i=!0)},o(e){F(n,e),i=!1},d(e){e&&p(t),n&&n.d(e)}}}function Y(e,t,i){let{$$slots:r={},$$scope:n}=t;return e.$$set=e=>{"$$scope"in e&&i(0,n=e.$$scope)},[n,r]}class $ extends j{constructor(e){super(),V(this,e,Y,X,a,{})}}const ee=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,te=new RegExp("^"+ee.source+"(\\s"+ee.source+"){1,}");function ie(e){var t,i=e.split(";"),r=i.pop(),n=(i.shift()||"").split("=").pop(),a=0;function o(e){var t=r.substring(a).match(e);return t?(a+=t[0].length,t[0]):null}function s(){o(/^\s*/)}function l(){s();for(var e,t=0,i=[],r=[i],n=i;e=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(te);){if("("===e)r.push(n),n=[],r[r.length-1].push(n),t++;else if(")"===e){if(0===n.length)return null;if(!(n=r.pop()))return null;if(0===--t)break}else if(","===e)n=[],r[r.length-1].push(n);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(n,e.split(/\s/g).map(parseFloat))}s()}return 0!==t?null:i}function u(){for(var e,t,i=[];t=o(te)||o(/^(,)/);)","===t?(i.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),s();return e?(i.push(e),i.length?i:null):null}function c(){return function(){if(!o(/^(point(\sz)?)/i))return null;if(s(),!o(/^(\()/))return null;var e=u();return e?(s(),o(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function(){if(!o(/^(linestring(\sz)?)/i))return null;if(s(),!o(/^(\()/))return null;var e=u();return e&&o(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function(){if(!o(/^(polygon(\sz)?)/i))return null;s();var e=l();return e?{type:"Polygon",coordinates:e}:null}()||function(){if(!o(/^(multipoint)/i))return null;s();var e=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+e+")";var t=l();return t?(s(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!o(/^(multilinestring)/i))return null;s();var e=l();return e?(s(),{type:"MultiLineString",coordinates:e}):null}()||function(){if(!o(/^(multipolygon)/i))return null;s();var e=l();return e?{type:"MultiPolygon",coordinates:e}:null}()||function(){var e,t=[];if(!o(/^(geometrycollection)/i))return null;if(s(),!o(/^(\()/))return null;for(;e=c();)t.push(e),s(),o(/^(,)/),s();return o(/^(\))/)?{type:"GeometryCollection",geometries:t}:null}()}return(t=c())&&n.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+n}}),t}var re=G((function(e,t){var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response}));let ne;ne="undefined"==typeof window||window.hasOwnProperty("fetch")?re:fetch;var ae=function(e,t,i,r){return r=r||"Timeout error",i=i||1e4,function(e,t,i){return new Promise(((r,n)=>{setTimeout((()=>{n(i)}),t),e.then(r,n)}))}(ne(e,t=t||{}),i,r)},oe=[{feature_id:"11145394",name:" - Pakistan",name_en:"Pakistan",description:"sovereign state",iso_3166_1:"PK",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",region:"Asia",subregion:"Southern Asia",centroid:"[70.1995,30.5986]",bounds:"[60.8738,23.7046,75.3843,36.9115]",area_sqkm:"906726",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"2494581",name:"Cambodia",name_en:"Cambodia",description:"sovereign state",iso_3166_1:"KH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KHM",wikidata_id:"Q424",region:"Asia",subregion:"South-eastern Asia",centroid:"[105.133,12.558]",bounds:"[102.3341,10.3531,107.6316,14.69]",area_sqkm:"187279",color_group:"6",names:'{ "en": [ "Cambodia", "Kingdom of Cambodia", "kh", "", "Kampuchea", "Camboya", "Campuchia", "Kamboja", "Kambodzha" ], "km": [ "", "" ] }'},{feature_id:"2363413",name:"Burkina Faso",name_en:"Burkina Faso",description:"sovereign state",iso_3166_1:"BF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BFA",wikidata_id:"Q965",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-1.1849,12.2601]",bounds:"[-5.5119,9.408799999999999,2.4048,15.0855]",area_sqkm:"281258",color_group:"2",names:'{ "en": [ "Burkina Faso", "bf", "" ], "fr": [ "Burkina Faso", "Burkina" ] }'},{feature_id:"13635833",name:"South Africa",name_en:"South Africa",description:"sovereign state",iso_3166_1:"ZA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZAF",wikidata_id:"Q258",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[23.9312,-28.6718]",bounds:"[16.4519,-34.8341,32.8941,-22.125]",area_sqkm:"1408737",color_group:"2",names:'{ "af": [ "Suid-Afrika", "Republiek van Suid-Afrika" ], "en": [ "South Africa", "Republic of South Africa", "RSA", "SA", "za", "" ], "xh": [ "UMzantsi Afrika", "IRiphabliki yaseMzantsi Afrika" ], "zu": [ "IRiphabliki yaseNingizimu Afrika" ] }'},{feature_id:"12783820",name:"San Marino",name_en:"San Marino",description:"sovereign state",iso_3166_1:"SM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SMR",wikidata_id:"Q238",region:"Europe",subregion:"Southern Europe",centroid:"[12.4611,43.942]",bounds:"[12.4038,43.8938,12.5161,43.9919]",area_sqkm:"84",color_group:"2",names:'{ "en": [ "San Marino", "sm", "", "Most Serene Republic of San Marino", "SMR" ], "it": [ "San Marino", "Serenissima Repubblica di San Marino", "Repubblica di San Marino" ] }'},{feature_id:"1118708",name:"Demchok disputed area",name_en:"Demchok disputed area",description:"disputed territory",iso_3166_1:"D0CNIN3",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",color_group:"",names:""},{feature_id:"1905140",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS4",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",color_group:"",names:""},{feature_id:"2429428",name:"Pratas Island",name_en:"Pratas Island",description:"disputed territory",iso_3166_1:"D0CNTW1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",color_group:"",names:""},{feature_id:"1053172",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",description:"disputed territory",iso_3166_1:"D0CNIN2",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",color_group:"",names:""},{feature_id:"2036212",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",description:"disputed territory",iso_3166_1:"D0INNP1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",color_group:"",names:""},{feature_id:"13832400",name:"South Sudan",name_en:"South Sudan",description:"sovereign state",iso_3166_1:"SS",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"11931835",name:"",name_en:"Qatar",description:"sovereign state",iso_3166_1:"QA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"QAT",wikidata_id:"Q846",region:"Asia",subregion:"Western Asia",centroid:"[51.1522,25.3174]",bounds:"[50.7501,24.4701,51.6622,26.1833]",area_sqkm:"12848",color_group:"3",names:'{ "ar": [ "", " " ], "en": [ "Qatar", "qa", "State of Qatar", "" ], "fa": [ "" ] }'},{feature_id:"11145394",name:" - Pakistan",name_en:"Pakistan",description:"sovereign state",iso_3166_1:"PK",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",region:"Asia",subregion:"Southern Asia",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"13963394",name:"Sri Lanka",name_en:"Sri Lanka",description:"sovereign state",iso_3166_1:"LK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LKA",wikidata_id:"Q854",region:"Asia",subregion:"Southern Asia",centroid:"[80.6383,7.8836]",bounds:"[79.65049999999999,5.9216,81.8789,9.835800000000001]",area_sqkm:"66658",color_group:"3",names:'{ "en": [ "Sri Lanka", "Democratic Socialist Republic of Sri Lanka", "Ceylon", "Taprobane", "Serendib", "Ceylan", "", "lk", "Lanka, Sri", "sri", "lke", "ce", "Srilanka", "SRI" ], "si": [ " ", "" ], "ta": [ "", "   ", "", "   " ] }'},{feature_id:"1904675",name:"Botswana",name_en:"Botswana",description:"sovereign state",iso_3166_1:"BW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BWA",wikidata_id:"Q963",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[24.4745,-22.4181]",bounds:"[19.998,-26.9073,29.3714,-17.7782]",area_sqkm:"627274",color_group:"6",names:'{ "en": [ "Botswana", "Republic of Botswana", "Lefatshe la Botswana", "bw", "", "BOT" ], "tn": [ "Botswana" ] }'},{feature_id:"14422228",name:"",name_en:"Syria",description:"sovereign state",iso_3166_1:"SY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYR",wikidata_id:"Q858",region:"Asia",subregion:"Western Asia",centroid:"[38.5585,34.8522]",bounds:"[35.7167,32.3116,42.3764,37.3188]",area_sqkm:"228968",color_group:"2",names:'{ "ar": [ "", "", "  ", "  " ], "en": [ "Syria", "sy", "", "Syrian Arab Republic", "SYR" ] }'},{feature_id:"14028996",name:"",name_en:"Sudan",description:"sovereign state",iso_3166_1:"SD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SDN",wikidata_id:"Q1049",region:"Africa",subregion:"Northern Africa",centroid:"[29.7844,15.4506]",bounds:"[21.8143,8.683,38.8492,22.0065]",area_sqkm:"1953663",color_group:"2",names:'{ "ar": [ "", " " ], "en": [ "Sudan", "Republic of the Sudan", "as-Sdn", "sd", "North Sudan", "the Sudan", "", "Republic of Sudan", "SUD" ] }'},{feature_id:"8786062",name:"Madagascar",name_en:"Madagascar",description:"sovereign state",iso_3166_1:"MG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDG",wikidata_id:"Q1019",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[46.6872,-18.9175]",bounds:"[43.1885,-25.6062,50.4861,-11.9488]",area_sqkm:"634137",color_group:"6",names:'{ "en": [ "Madagascar", "mg", "", "Republic of Madagascar", "MAD" ], "fr": [ "Madagascar" ], "mg": [ "Madagasikara", "Repoblikan\'i Madagasikara" ] }'},{feature_id:"4198458",name:"Djibouti",name_en:"Djibouti",description:"sovereign state",iso_3166_1:"DJ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DJI",wikidata_id:"Q977",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[42.5037,11.8131]",bounds:"[41.7719,10.9157,43.4537,12.7067]",area_sqkm:"22281",color_group:"1",names:'{ "en": [ "Djibouti", "Republic of Djibouti", "Jabuuti", "Gabuuti", "Jbt", "dj", "", "DJI" ], "so": [ "Jabuuti" ] }'},{feature_id:"7344238",name:"Italia",name_en:"Italy",description:"sovereign state",iso_3166_1:"IT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ITA",wikidata_id:"Q38",region:"Europe",subregion:"Southern Europe",centroid:"[12.5138,42.6725]",bounds:"[6.6266,35.493,18.5205,47.0919]",area_sqkm:"412408",color_group:"6",names:'{ "de": [ "Italien", "Italienische Republik" ], "en": [ "Italy", "Italia", "Italian Republic", "IT", "it", "", "ITA" ], "fr": [ "Italie", "Rpublique Italienne", "Italia", "IT", "ITA" ], "it": [ "Italia", "ITA", "IT", "Repubblica italiana", "it", "" ] }'},{feature_id:"2232820",name:"Susta disputed area",name_en:"Susta disputed area",description:"disputed territory",iso_3166_1:"D0INNP2",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",color_group:"",names:""},{feature_id:"14618853",name:"Tanzania",name_en:"Tanzania",description:"sovereign state",iso_3166_1:"TZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TZA",wikidata_id:"Q924",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[34.2541,-6.4017]",bounds:"[29.3908,-11.7613,40.4451,-0.9853]",area_sqkm:"954271",color_group:"3",names:'{ "en": [ "Tanzania", "United Republic of Tanzania", "tz", "", "United Republic of Tanganyika and Zanzibar" ], "sw": [ "Tanzania", "Jamhuri ya Muungano wa Tanzania" ] }'},{feature_id:"2429428",name:"Pratas Island",name_en:"Pratas Island",description:"disputed territory",iso_3166_1:"D0CNTW1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",color_group:"",names:""},{feature_id:"791028",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",description:"disputed territory",iso_3166_1:"D0CNIN9",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",color_group:"",names:""},{feature_id:"1642996",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",description:"disputed territory",iso_3166_1:"D0GFSR1",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",color_group:"",names:""},{feature_id:"2363892",name:"Paracel Islands",name_en:"Paracel Islands",description:"disputed territory",iso_3166_1:"D0CNTWVN1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",color_group:"",names:""},{feature_id:"2232348",name:"Brunei Darussalam  ",name_en:"Brunei",description:"sovereign state",iso_3166_1:"BN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRN",wikidata_id:"Q921",region:"Asia",subregion:"South-eastern Asia",centroid:"[114.5238,4.5256]",bounds:"[114.0758,4.0023,115.3634,5.0459]",area_sqkm:"5898",color_group:"4",names:'{ "en": [ "Brunei", "Nation of Brunei, the Abode of Peace", "bn", "Brunei Darussalam", "", "BRN", "BRU" ], "ms": [ "Brunei", "Negara Brunei Darussalam", "Brunei Darussalam" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"10096786",name:"",name_en:"Myanmar",description:"sovereign state",iso_3166_1:"MM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MMR",wikidata_id:"Q836",region:"Asia",subregion:"South-eastern Asia",centroid:"[95.9058,19.5274]",bounds:"[92.1721,9.597899999999999,101.1703,28.5484]",area_sqkm:"731508",color_group:"2",names:'{ "en": [ "Myanmar", "Burma", "Republic of the Union of Myanmar", "Union of Burma", "MM", "", "BUR", "MYA" ], "my": [ "", "  ", "Burma" ] }'},{feature_id:"2101354",name:"British Indian Ocean Territory",name_en:"British Indian Ocean Territory",description:"dependent territory",iso_3166_1:"IO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"IOT",wikidata_id:"Q43448",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[72.4716,-7.3392]",bounds:"[71.23739999999999,-7.4446,72.4957,-5.236]",area_sqkm:"65",color_group:"6",names:'{ "en": [ "British Indian Ocean Territory", "io", "" ] }'},{feature_id:"8917150",name:"Malaysia",name_en:"Malaysia",description:"sovereign state",iso_3166_1:"MY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MYS",wikidata_id:"Q833",region:"Asia",subregion:"South-eastern Asia",centroid:"[114.6579,3.9511]",bounds:"[99.6407,0.8546,119.2697,7.3806]",area_sqkm:"333082",color_group:"2",names:'{ "en": [ "Malaysia", "my", "", "Federation of Malaysia", "Malaysia Federation", "MAS" ], "ms": [ "Malaysia", "", "Persekutuan Malaysia", " " ], "zh-hant": [ "" ] }'},{feature_id:"4591704",name:"Guine quatoriale - Guinea Ecuatorial  Guin Equatorial",name_en:"Equatorial Guinea",description:"sovereign state",iso_3166_1:"GQ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNQ",wikidata_id:"Q983",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[10.4695,1.6342]",bounds:"[5.5989,-1.4676,11.3654,3.7887]",area_sqkm:"27152",color_group:"4",names:'{ "en": [ "Equatorial Guinea", "Republic of Equatorial Guinea", "gq", "", "GEQ" ], "es": [ "Guinea Ecuatorial", "Repblica de Guinea Ecuatorial", "Republica de Guinea Ecuatorial" ] }'},{feature_id:"14225621",name:"eSwatini",name_en:"Eswatini",description:"sovereign state",iso_3166_1:"SZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWZ",wikidata_id:"Q1050",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[31.4607,-26.5203]",bounds:"[30.7908,-27.3175,32.1322,-25.7188]",area_sqkm:"19452",color_group:"3",names:'{ "en": [ "Eswatini", "Umbuso weSwatini", "eSwatini", "", "Kingdom of Swaziland", "sz", "Swaziland", "Kingdom of Eswatini", "SWZ" ], "ss": [ "Umbuso weSwatini" ] }'},{feature_id:"6754404",name:"Magyarorszg",name_en:"Hungary",description:"sovereign state",iso_3166_1:"HU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HUN",wikidata_id:"Q28",region:"Europe",subregion:"Eastern Europe",centroid:"[19.1493,47.1813]",bounds:"[16.1141,45.7372,22.8974,48.5854]",area_sqkm:"136736",color_group:"4",names:'{ "de": [ "Ungarn" ], "en": [ "Hungary", "hu", "", "HUN" ], "hu": [ "Magyarorszg", "Mo.", "hu", "", "harmadik magyar kztrsasg", "Magyar Kztrsasg" ] }'},{feature_id:"11997372",name:"La Runion",name_en:"Reunion",description:"dependent territory",iso_3166_1:"RE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"REU",wikidata_id:"Q17070",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[55.537,-21.1313]",bounds:"[55.2163,-21.3899,55.8371,-20.8718]",area_sqkm:"2707",color_group:"7",names:'{ "en": [ "Runion", "Reunion", "La Runion", "La Reunion", "re", ".re", "" ], "fr": [ "La Runion", "974", "Runion", "le de La Runion", "le de la Runion" ], "ta": [ "", "" ] }'},{feature_id:"4722752",name:"Eesti",name_en:"Estonia",description:"sovereign state",iso_3166_1:"EE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EST",wikidata_id:"Q191",region:"Europe",subregion:"Northern Europe",centroid:"[25.3668,58.6092]",bounds:"[21.7643,57.5093,28.2099,59.822]",area_sqkm:"84155",color_group:"3",names:'{ "en": [ "Estonia", "Republic of Estonia", "Estland", "Eesti", "ee", "EST", "" ], "et": [ "Eesti", "Eesti Vabariik" ], "fi": [ "Viro", "Eesti", "Viron tasavalta" ], "ru": [ "", " ", " ", "" ] }'},{feature_id:"14946528",name:"Tonga",name_en:"Tonga",description:"sovereign state",iso_3166_1:"TO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TON",wikidata_id:"Q678",region:"Oceania",subregion:"Polynesia",centroid:"[-175.2735,-21.168]",bounds:"[-176.2137,-22.3497,-173.7351,-15.5659]",area_sqkm:"808",color_group:"2",names:'{ "en": [ "Tonga", "", "to", "Kingdom of Tonga", "TGA" ], "to": [ "Tonga" ] }'},{feature_id:"11866294",name:"Puerto Rico",name_en:"Puerto Rico",description:"dependent territory",iso_3166_1:"PR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"PRI",wikidata_id:"Q1183",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-66.40389999999999,18.2218]",bounds:"[-67.95140000000001,17.8814,-65.22110000000001,18.516]",area_sqkm:"9463",color_group:"4",names:'{ "en": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "PR", "The Commonwealth of Puerto Rico", "", "Porto Rico", "Territory of Puerto Rico", "Commonwealth of Puerto Rico" ], "es": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "Territorio Estadounidense de Puerto Rico" ] }'},{feature_id:"15143137",name:"Trkiye",name_en:"Turkey",description:"sovereign state",iso_3166_1:"TR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUR",wikidata_id:"Q43",region:"Asia",subregion:"Western Asia",centroid:"[35.5135,39.0251]",bounds:"[25.6652,35.8129,44.8264,42.1046]",area_sqkm:"1007665",color_group:"6",names:'{ "en": [ "Turkey", "Republic of Turkey", "tr", "", "TUR" ], "tr": [ "Trkiye", "Trkiye Cumhuriyeti", "T.C.", "TC", "tr", "" ] }'},{feature_id:"5378124",name:"Gabon",name_en:"Gabon",description:"sovereign state",iso_3166_1:"GA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GAB",wikidata_id:"Q1000",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[11.6604,-0.8204]",bounds:"[8.6991,-3.956,14.5281,2.318]",area_sqkm:"265120",color_group:"6",names:'{ "en": [ "Gabon", "Gabonese Republic", "Rpublique Gabonaise", "ga", "", "Republique Gabonaise", "GAB" ], "fr": [ "Gabon", "Rpublique gabonaise" ] }'},{feature_id:"12128447",name:"",name_en:"Russia",description:"sovereign state",iso_3166_1:"RU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RUS",wikidata_id:"Q159",region:"Europe",subregion:"Eastern Europe",centroid:"[110.0304,65.09690000000001]",bounds:"[-180,41.1853,180,81.8574]",area_sqkm:"34911957",color_group:"2",names:'{ "en": [ "Russia", "Rossiya", "Rossija", "RU", "ru", "Rossijskaja Federatsija", "Russian Federation", "Rossiyskaya Federatsiya", "Rus", "RUS" ], "ru": [ "", " ", "", "" ] }'},{feature_id:"9441528",name:"Mayotte",name_en:"Mayotte",description:"dependent territory",iso_3166_1:"YT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MYT",wikidata_id:"Q17063",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[45.1494,-12.8252]",bounds:"[45.0182,-13.0058,45.2999,-12.636]",area_sqkm:"401",color_group:"7",names:'{ "en": [ "Mayotte", "Department of Mayotte", "yt", "" ], "fr": [ "Mayotte", "976" ] }'},{feature_id:"16584881",name:"Philippines",name_en:"Philippines",description:"sovereign state",iso_3166_1:"PH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PHL",wikidata_id:"Q928",region:"Asia",subregion:"South-eastern Asia",centroid:"[120.7409,15.6149]",bounds:"[116.9283,4.5869,126.6053,21.0701]",area_sqkm:"300397",color_group:"3",names:'{ "en": [ "Philippines", "Republic of the Philippines", "PH", "ph", "the Philippines", "Philippine Islands", "PHL", "RP", "", "PHI" ], "es": [ "Filipinas", "Repblica de Filipinas", "Republica de Filipinas" ], "ceb": [ "Pilipinas", "Republika sa Pilipinas" ] }'},{feature_id:"1642529",name:"",name_en:"Bhutan",description:"sovereign state",iso_3166_1:"BT",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",region:"Asia",subregion:"Southern Asia",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"12325063",name:"Saint Helena, Ascension and Tristan da Cunha",name_en:"Saint Helena, Ascension and Tristan da Cunha",description:"dependent territory",iso_3166_1:"SH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"SHN",wikidata_id:"Q34497",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-12.2823,-37.1159]",bounds:"[-14.421,-40.3714,-5.6341,-7.8892]",area_sqkm:"428",color_group:"6",names:'{ "en": [ "Saint Helena", "St Helena" ] }'},{feature_id:"6295638",name:"Guine",name_en:"Guinea",description:"sovereign state",iso_3166_1:"GN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GIN",wikidata_id:"Q1006",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-9.662000000000001,9.945]",bounds:"[-15.0761,7.1905,-7.6374,12.6756]",area_sqkm:"251048",color_group:"6",names:'{ "en": [ "Guinea", "Guinea-Conakry", "Republic of Guinea", "Rpublique de Guine", "gn", "", "Republique de Guinee", "GUI" ], "ff": [ "Gine" ], "fr": [ "Guine", "Guine-Conakry", "Rpublique de Guine" ] }'},{feature_id:"10883193",name:"",name_en:"North Korea",description:"sovereign state",iso_3166_1:"KP",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRK",wikidata_id:"Q423",region:"Asia",subregion:"Eastern Asia",centroid:"[126.8405,40.3963]",bounds:"[124.1813,37.6769,130.6998,43.009]",area_sqkm:"160141",color_group:"3",names:'{ "en": [ "North Korea", "", "Democratic People\'s Republic of Korea", "DPRK", "PRK", "kp", "Dem. Rep. Korea", "N. Korea" ], "ko": [ "", "", "" ] }'},{feature_id:"3084336",name:"",name_en:"China",description:"sovereign state",iso_3166_1:"CN",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",region:"Asia",subregion:"Eastern Asia",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11717970",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"5312728",name:"Terres australes et antarctiques franaises",name_en:"French Southern and Antarctic Lands",description:"dependent territory",iso_3166_1:"TF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"ATF",wikidata_id:"Q129003",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[70.21769999999999,-49.1974]",bounds:"[40.3259,-50.0213,77.59569999999999,-11.5678]",area_sqkm:"11927",color_group:"7",names:'{ "en": [ "French Southern and Antarctic Lands", "tf", "", "French Southern Territories" ], "fr": [ "Terres australes et antarctiques franaises", "TAAF", "Terres Australes Franaises", "Terres australes et antarctiques francaises", "984" ] }'},{feature_id:"5902420",name:"Kalaallit Nunaat",name_en:"Greenland",description:"dependent territory",iso_3166_1:"GL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"DK",iso_3166_1_alpha_3:"GRL",wikidata_id:"Q223",region:"Americas",subregion:"Northern America",centroid:"[-40.4109,76.068]",bounds:"[-73.26349999999999,59.7773,-11.3123,83.62739999999999]",area_sqkm:"8511107",color_group:"4",names:'{ "da": [ "Grnland" ], "en": [ "Greenland", "gl", "" ], "kl": [ "Kalaallit Nunaat" ] }'},{feature_id:"11014311",name:"Norge",name_en:"Norway",description:"sovereign state",iso_3166_1:"NO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NOR",wikidata_id:"Q20",region:"Europe",subregion:"Northern Europe",centroid:"[13.6065,65.3651]",bounds:"[4.4976,57.9599,31.1681,71.1855]",area_sqkm:"745444",color_group:"5",names:'{ "en": [ "Norway", "Kingdom of Norway", "Norge", "Norvge", "NO", "NOR", "no", "Noreg", "", "Norwegen" ], "nb": [ "Norge", "Kongeriket Norge", "Noreg", "Kongeriket Norge\\/Noreg" ], "nn": [ "Noreg", "Kongeriket Noreg", "Norge" ] }'},{feature_id:"16519419",name:"Zimbabwe",name_en:"Zimbabwe",description:"sovereign state",iso_3166_1:"ZW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZWE",wikidata_id:"Q954",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.4113,-19.0547]",bounds:"[25.2374,-22.422,33.054,-15.6099]",area_sqkm:"415447",color_group:"1",names:'{ "en": [ "Zimbabwe", "Republic of Zimbabwe", "Southern Rhodesia", "Rhodesia", "Zimbabwe Rhodesia", "", "zw", "ZIM" ], "sn": [ "Zimbabwe" ] }'},{feature_id:"8327300",name:"Lesotho",name_en:"Lesotho",description:"sovereign state",iso_3166_1:"LS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LSO",wikidata_id:"Q1013",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[28.1745,-29.6285]",bounds:"[27.0113,-30.6755,29.4557,-28.5708]",area_sqkm:"35232",color_group:"1",names:'{ "en": [ "Lesotho", "Kingdom of Lesotho", "ls", "", "LES" ], "st": [ "Lesotho", "Mmuso wa Lesotho" ], "zu": [ "OSotho" ] }'},{feature_id:"9900184",name:"Montserrat",name_en:"Montserrat",description:"dependent territory",iso_3166_1:"MS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"MSR",wikidata_id:"Q13353",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-62.1928,16.7492]",bounds:"[-62.2417,16.6747,-62.1446,16.8238]",area_sqkm:"106",color_group:"6",names:'{ "en": [ "Montserrat", "ms", "" ] }'},{feature_id:"2035743",name:"Brasil",name_en:"Brazil",description:"sovereign state",iso_3166_1:"BR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRA",wikidata_id:"Q155",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-49.7742,-15.1216]",bounds:"[-73.9901,-33.7504,-28.8483,5.2724]",area_sqkm:"8734596",color_group:"5",names:'{ "en": [ "Brazil", "Federative Republic of Brazil", "Brasil", "Repblica Federativa do Brasil", "Federativa Repblica do Brasil", "Republic Federative of Brasil", "Estados Unidos del Brazil", "BR", "BRA", "Republica Federativa do Brasil", "Federativa Republica do Brasil", "br", "" ], "pt": [ "Brasil", "Repblica Federativa do Brasil", "Brazil" ] }'},{feature_id:"1446388",name:"Doklam Plateau",name_en:"Doklam Plateau",description:"disputed territory",iso_3166_1:"D0BTCN2",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",color_group:"",names:""},{feature_id:"463348",name:"Rincn de Artigas",name_en:"Rincn de Artigas",description:"disputed territory",iso_3166_1:"D0BRUY1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-55.9486,-30.9757]",bounds:"[-56.0185,-31.0871,-55.8127,-30.8647]",area_sqkm:"290",color_group:"",names:""},{feature_id:"1249780",name:"Chumar disputed area",name_en:"Chumar disputed area",description:"disputed territory",iso_3166_1:"D0CNIN5",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",color_group:"",names:""},{feature_id:"2036212",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",description:"disputed territory",iso_3166_1:"D0INNP1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",color_group:"",names:""},{feature_id:"9703562",name:"Monaco",name_en:"Monaco",description:"sovereign state",iso_3166_1:"MC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MCO",wikidata_id:"Q235",region:"Europe",subregion:"Western Europe",centroid:"[7.4243,43.7384]",bounds:"[7.409,43.7246,7.44,43.7519]",area_sqkm:"2",color_group:"1",names:'{ "en": [ "Monaco", "Principality of Monaco", "mc", "", "MON" ], "fr": [ "Monaco", "Principaut de Monaco", "MON", "mc" ] }'},{feature_id:"1970676",name:"East Jerusalem",name_en:"East Jerusalem",description:"disputed territory",iso_3166_1:"D0ILPS1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",color_group:"",names:""},{feature_id:"6033495",name:"Guadeloupe",name_en:"Guadeloupe",description:"dependent territory",iso_3166_1:"GP",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"GLP",wikidata_id:"Q17012",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.6777,16.1542]",bounds:"[-61.8094,15.8323,-61.0019,16.5145]",area_sqkm:"1711",color_group:"7",names:'{ "en": [ "Guadeloupe", "gp", "" ], "fr": [ "Guadeloupe", "971" ] }'},{feature_id:"16650295",name:"",name_en:"Cyprus",description:"sovereign state",iso_3166_1:"CY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CYP",wikidata_id:"Q229",region:"Asia",subregion:"Western Asia",centroid:"[33.3986,35.1661]",bounds:"[32.2692,34.6323,34.6066,35.7109]",area_sqkm:"10996",color_group:"1",names:'{ "el": [ "", " " ], "en": [ "Cyprus", "Republic of Cyprus", "cy", "" ], "tr": [ "Kbrs Cumhuriyeti", "Kbrs" ] }'},{feature_id:"9244822",name:"Martinique",name_en:"Martinique",description:"dependent territory",iso_3166_1:"MQ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MTQ",wikidata_id:"Q17054",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.0154,14.6366]",bounds:"[-61.2288,14.3887,-60.8101,14.8782]",area_sqkm:"1147",color_group:"7",names:'{ "en": [ "Martinique", "", "MQ" ], "fr": [ "Martinique", "972" ] }'},{feature_id:"15274198",name:"Turks and Caicos Islands",name_en:"Turks and Caicos Islands",description:"dependent territory",iso_3166_1:"TC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"TCA",wikidata_id:"Q18221",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-71.75920000000001,21.7779]",bounds:"[-72.48220000000001,21.1774,-71.0819,21.9624]",area_sqkm:"1041",color_group:"6",names:'{ "en": [ "Turks and Caicos Islands", "TCI", "", "tc", "Turks & Caicos" ] }'},{feature_id:"528884",name:"Kula Kangri",name_en:"Kula Kangri",description:"disputed territory",iso_3166_1:"D0BTCN1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",color_group:"",names:""},{feature_id:"1183763",name:"",name_en:"Bangladesh",description:"sovereign state",iso_3166_1:"BD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGD",wikidata_id:"Q902",region:"Asia",subregion:"Southern Asia",centroid:"[89.8601,23.7235]",bounds:"[88.0004,20.5751,92.6795,26.6395]",area_sqkm:"155617",color_group:"3",names:'{ "bn": [ "", " ", "bd" ], "en": [ "Bangladesh", "bd", "", "BAN" ] }'},{feature_id:"5640274",name:"Ghana",name_en:"Ghana",description:"sovereign state",iso_3166_1:"GH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GHA",wikidata_id:"Q117",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-1.0593,7.9674]",bounds:"[-3.2551,4.7392,1.2001,11.1683]",area_sqkm:"242806",color_group:"5",names:'{ "ak": [ "Ghana" ], "ee": [ "Ghana" ], "en": [ "Ghana", "Republic of Ghana", "", "gh", "GHA" ] }'},{feature_id:"922100",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",description:"disputed territory",iso_3166_1:"D0CNIN8",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",color_group:"",names:""},{feature_id:"790542",name:"Aruba",name_en:"Aruba",description:"dependent territory",iso_3166_1:"AW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NL",iso_3166_1_alpha_3:"ABW",wikidata_id:"Q21203",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-69.98180000000001,12.5176]",bounds:"[-70.0637,12.4118,-69.8657,12.6234]",area_sqkm:"185",color_group:"4",names:'{ "en": [ "Aruba", "ISO 3166-1:AW", "America\\/Aruba", "Island of Aruba", "aw", "", "ARU" ], "nl": [ "Aruba", "AW", "ABW" ], "pap": [ "Aruba" ] }'},{feature_id:"1970210",name:"Bouvet Island",name_en:"Bouvet Island",description:"dependent territory",iso_3166_1:"BV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NO",iso_3166_1_alpha_3:"BVT",wikidata_id:"Q23408",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[3.3595,-54.4197]",bounds:"[3.2845,-54.4549,3.4333,-54.3864]",area_sqkm:"86",color_group:"5",names:'{ "en": [ "Bouvet Island", "bv", "", "Bouvetya" ] }'},{feature_id:"397812",name:"Tigri Area",name_en:"Tigri Area",description:"disputed territory",iso_3166_1:"D0GYSR1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",color_group:"",names:""},{feature_id:"14487780",name:"",name_en:"Taiwan",description:"sovereign state",iso_3166_1:"TW",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",region:"Asia",subregion:"Eastern Asia",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"856564",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",description:"disputed territory",iso_3166_1:"D0CNIN7",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",color_group:"",names:""},{feature_id:"1446388",name:"Doklam Plateau",name_en:"Doklam Plateau",description:"disputed territory",iso_3166_1:"D0BTCN2",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",color_group:"",names:""},{feature_id:"3084336",name:"",name_en:"China",description:"sovereign state",iso_3166_1:"CN",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",region:"Asia",subregion:"Eastern Asia",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11603523",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"1511449",name:"Bnin",name_en:"Benin",description:"sovereign state",iso_3166_1:"BJ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEN",wikidata_id:"Q962",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[2.283,9.333299999999999]",bounds:"[0.7798,6.2347,3.8534,12.4092]",area_sqkm:"118068",color_group:"1",names:'{ "en": [ "Benin", "Republic of Benin", "Dahomey", "bj", "", "BEN" ], "fr": [ "Bnin", "La Rpublique du Bnin" ] }'},{feature_id:"8458376",name:"",name_en:"Libya",description:"sovereign state",iso_3166_1:"LY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBY",wikidata_id:"Q1016",region:"Africa",subregion:"Northern Africa",centroid:"[17.4446,26.5832]",bounds:"[9.392300000000001,19.5087,25.1471,33.1669]",area_sqkm:"1835729",color_group:"1",names:'{ "ar": [ "", "", "", "", "", "", "", " ", " ", " ()", " ()", " ()", " ()" ], "en": [ "Libya", "State of Libya", "ly", "", "LBA" ] }'},{feature_id:"7934197",name:"Kosov - ",name_en:"Kosovo",description:"disputed state",iso_3166_1:"XK",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",region:"Europe",subregion:"Southern Europe",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"10490027",name:"New Zealand",name_en:"New Zealand",description:"sovereign state",iso_3166_1:"NZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NZL",wikidata_id:"Q664",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[171.0074,-43.6656]",bounds:"[-176.8931,-52.6088,178.8243,-34.1292]",area_sqkm:"352083",color_group:"3",names:'{ "en": [ "New Zealand", "NZ", "NZL", "Dominion of New Zealand", "Aotearoa", "nz", "" ] }'},{feature_id:"10031263",name:"Mozambique",name_en:"Mozambique",description:"sovereign state",iso_3166_1:"MZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MOZ",wikidata_id:"Q1029",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[34.3703,-18.8696]",bounds:"[30.2167,-26.8681,40.8393,-10.4709]",area_sqkm:"826132",color_group:"4",names:'{ "en": [ "Mozambique", "Moambique", "Repblica de Moambique", "MZ", "MOZ", "mz", "", "Republic of Mozambique" ], "pt": [ "Moambique", "Repblica de Moambique", "Republica de Mocambique", "Mocambique" ] }'},{feature_id:"10358950",name:"Nederland",name_en:"Netherlands",description:"sovereign state",iso_3166_1:"NL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NLD",wikidata_id:"Q55",region:"Europe",subregion:"Western Europe",centroid:"[5.5869,52.1287]",bounds:"[3.3583,50.7502,7.2275,53.555]",area_sqkm:"57203",color_group:"4",names:'{ "de": [ "Niederlande", "Holland", "NL", "nl" ], "en": [ "Netherlands", "Holland", "the Netherlands", "NL", "NED", "Nederland", "nl", "", "Netherlands (after 1945)" ], "fr": [ "Pays-Bas", "Hollande", "NL", "nl", "Les Pays-Bas", "NED", "" ], "nl": [ "Nederland", "NL", "NED", "nl", "NLD" ], "nds": [ "Nedderlannen" ] }'},{feature_id:"1708532",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",color_group:"",names:""},{feature_id:"6885481",name:"India",name_en:"India",description:"sovereign state",iso_3166_1:"IN",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",region:"Asia",subregion:"Southern Asia",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.176,35.6733]",area_sqkm:"3403202",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"13045950",name:"",name_en:"Serbia",description:"sovereign state",iso_3166_1:"RS",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",region:"Europe",subregion:"Southern Europe",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"3870771",name:"Cuba",name_en:"Cuba",description:"sovereign state",iso_3166_1:"CU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CUB",wikidata_id:"Q241",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-77.8291,21.5254]",bounds:"[-84.9521,19.8262,-74.1314,23.2767]",area_sqkm:"120464",color_group:"3",names:'{ "en": [ "Cuba", "Republic of Cuba", "cu", "", "CUB" ], "es": [ "Cuba", "Repblica de Cuba", "Republica de Cuba" ] }'},{feature_id:"1445925",name:"Belize",name_en:"Belize",description:"sovereign state",iso_3166_1:"BZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLZ",wikidata_id:"Q242",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-88.72709999999999,17.1949]",bounds:"[-89.22499999999999,15.8859,-87.486,18.4958]",area_sqkm:"23325",color_group:"1",names:'{ "en": [ "Belize", "bz", "" ], "es": [ "Belice" ] }'},{feature_id:"6819949",name:"sland",name_en:"Iceland",description:"sovereign state",iso_3166_1:"IS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISL",wikidata_id:"Q189",region:"Europe",subregion:"Northern Europe",centroid:"[-18.32,65.0123]",bounds:"[-24.5327,63.2958,-13.4946,66.5664]",area_sqkm:"241784",color_group:"1",names:'{ "en": [ "Iceland", "Republic of Iceland", "is", "Island", "", "ISL" ], "is": [ "sland", "Lveldi sland" ] }'},{feature_id:"3084336",name:"",name_en:"China",description:"sovereign state",iso_3166_1:"CN",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",region:"Asia",subregion:"Eastern Asia",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"987152",name:"Azrbaycan",name_en:"Azerbaijan",description:"sovereign state",iso_3166_1:"AZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AZE",wikidata_id:"Q227",region:"Asia",subregion:"Western Asia",centroid:"[47.7228,40.176]",bounds:"[44.7645,38.3929,50.6248,41.913]",area_sqkm:"113049",color_group:"1",names:'{ "az": [ "Azrbaycan", "Azrbaycan Respublikas" ], "en": [ "Azerbaijan", "Republic of Azerbaijan", "az", "", "AZE" ] }'},{feature_id:"2297878",name:"",name_en:"Bulgaria",description:"sovereign state",iso_3166_1:"BG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGR",wikidata_id:"Q219",region:"Europe",subregion:"Eastern Europe",centroid:"[25.195,42.7429]",bounds:"[22.3564,41.2354,28.6119,44.2153]",area_sqkm:"151322",color_group:"4",names:'{ "bg": [ "", " " ], "en": [ "Bulgaria", "Republic of Bulgaria", "bg", "", "BUL" ], "ru": [ "", "", " " ], "tr": [ "Bulgaristan", "Bulgaristan Cumhuriyeti" ] }'},{feature_id:"15929579",name:"Ozbekiston",name_en:"Uzbekistan",description:"sovereign state",iso_3166_1:"UZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UZB",wikidata_id:"Q265",region:"Asia",subregion:"Central Asia",centroid:"[63.3577,41.5182]",bounds:"[55.9742,37.1818,73.1521,45.5821]",area_sqkm:"605881",color_group:"2",names:'{ "en": [ "Uzbekistan", "Republic of Uzbekistan", "uz", "", "UZB" ], "ru": [ "", " " ], "uz": [ "Ozbekiston", "Ozbekiston Respublikasi" ] }'},{feature_id:"921612",name:"sterreich",name_en:"Austria",description:"sovereign state",iso_3166_1:"AT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUT",wikidata_id:"Q40",region:"Europe",subregion:"Western Europe",centroid:"[14.7915,47.713]",bounds:"[9.5307,46.3721,17.1584,49.0204]",area_sqkm:"124043",color_group:"3",names:'{ "de": [ "sterreich", "Republik sterreich" ], "en": [ "Austria", "sterreich", "Republic of Austria", "Republik sterreich", "AT", "at", "AUT", "" ], "fr": [ "Autriche", "AUT" ], "bar": [ "stareich" ] }'},{feature_id:"10817699",name:"Norfolk Island",name_en:"Norfolk Island",description:"dependent territory",iso_3166_1:"NF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"NFK",wikidata_id:"Q31057",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[167.9588,-29.0289]",bounds:"[167.9149,-29.1318,167.997,-28.9952]",area_sqkm:"43",color_group:"1",names:'{ "en": [ "Norfolk Island", "", "Norfolk Island, Other Territories, Australia", "Norfolk Island, Other Territories" ] }'},{feature_id:"13766778",name:"",name_en:"South Korea",description:"sovereign state",iso_3166_1:"KR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KOR",wikidata_id:"Q884",region:"Asia",subregion:"Eastern Asia",centroid:"[127.9592,36.4849]",bounds:"[124.6096,33.1121,131.873,38.6175]",area_sqkm:"124983",color_group:"4",names:'{ "en": [ "South Korea", "Republic of Korea", "ROK", "Daehan Minguk", "The Republic of Great Han", "Republic of Great Han", "kr", "Rep. Korea", "S. Korea", "Korea Republic", "Republic of South Korea", "", "KOR" ], "ko": [ "", "", "", "", "", "" ] }'},{feature_id:"922100",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",description:"disputed territory",iso_3166_1:"D0CNIN8",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",color_group:"",names:""},{feature_id:"594420",name:"Kuril Islands",name_en:"Kuril Islands",description:"disputed territory",iso_3166_1:"D0JPRU1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[147.8445,44.9901]",bounds:"[145.3993,43.3607,148.9003,45.5493]",area_sqkm:"7154",color_group:"",names:""},{feature_id:"1446388",name:"Doklam Plateau",name_en:"Doklam Plateau",description:"disputed territory",iso_3166_1:"D0BTCN2",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",color_group:"",names:""},{feature_id:"1380852",name:"Arunachal Pradash",name_en:"Arunachal Pradash",description:"disputed territory",iso_3166_1:"D0CNIN0",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",color_group:"",names:""},{feature_id:"1249298",name:"Barbados",name_en:"Barbados",description:"sovereign state",iso_3166_1:"BB",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRB",wikidata_id:"Q244",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-59.559,13.1898]",bounds:"[-59.6526,13.0447,-59.4203,13.3348]",area_sqkm:"446",color_group:"4",names:'{ "en": [ "Barbados", "BB", "bb", "", "BAR" ] }'},{feature_id:"12849361",name:"So Tom e Prncipe",name_en:"So Tom and Prncipe",description:"sovereign state",iso_3166_1:"ST",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"STP",wikidata_id:"Q1039",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[6.595,0.216]",bounds:"[6.4605,-0.0138,7.4624,1.7015]",area_sqkm:"1009",color_group:"1",names:'{ "en": [ "So Tom and Prncipe", "Democratic Republic of So Tom and Prncipe", "So Tom og Prncipe", "Sao Tome and Principe", "st", "", "STP" ], "pt": [ "So Tom e Prncipe", "Sao Tome e Principe" ] }'},{feature_id:"7016556",name:"",name_en:"Iran",description:"sovereign state",iso_3166_1:"IR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRN",wikidata_id:"Q794",region:"Asia",subregion:"Southern Asia",centroid:"[53.7474,32.719]",bounds:"[44.0319,25.0591,63.3209,39.7831]",area_sqkm:"1936614",color_group:"4",names:'{ "en": [ "Iran", "Islamic Republic of Iran", "Persia", "ir", "Islamic Rep. Iran", "", "Republic of Iran" ], "fa": [ "", "  ", "", "", " " ], "azb": [ "" ] }'},{feature_id:"462853",name:"Anguilla",name_en:"Anguilla",description:"dependent territory",iso_3166_1:"AI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"AIA",wikidata_id:"Q25228",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-63.0406,18.2177]",bounds:"[-63.4296,18.1491,-62.9244,18.5953]",area_sqkm:"84",color_group:"6",names:'{ "en": [ "Anguilla", "ai", "" ] }'},{feature_id:"4067368",name:"Rpublique Dmocratique du Congo",name_en:"Democratic Republic of the Congo",description:"sovereign state",iso_3166_1:"CD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COD",wikidata_id:"Q974",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[22.4374,-4.0875]",bounds:"[12.2003,-13.4548,31.3328,5.3922]",area_sqkm:"2360347",color_group:"4",names:'{ "en": [ "Democratic Republic of the Congo", "DRC", "DR Congo", "Congo-Kinshasa", "Zaire", "Congo", "Democratic Republic of Congo", "cd", "Dem. Republic of the Congo", "Dem. Republic of Congo", "Dem. Rep. Congo", "", "Congo (Kinshasa)", "COD" ], "sw": [ "Jamhuri ya Kidemokrasia ya Kongo" ] }'},{feature_id:"9113753",name:"Malta",name_en:"Malta",description:"sovereign state",iso_3166_1:"MT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLT",wikidata_id:"Q233",region:"Europe",subregion:"Southern Europe",centroid:"[14.4137,35.9024]",bounds:"[14.1834,35.8062,14.5765,36.0824]",area_sqkm:"392",color_group:"1",names:'{ "en": [ "Malta", "Republic of Malta", "mt", "", "MLT" ], "fr": [ "Malte" ], "it": [ "Malta", "Repubblica di Malta" ], "mt": [ "Malta" ] }'},{feature_id:"3936309",name:"Curaao",name_en:"Curaao",description:"dependent territory",iso_3166_1:"CW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NL",iso_3166_1_alpha_3:"CUW",wikidata_id:"Q25279",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-69.0407,12.2129]",bounds:"[-69.1623,11.978,-68.6395,12.3924]",area_sqkm:"451",color_group:"4",names:'{ "en": [ "Curaao", "Island Territory of Curaao", "Curacau", "Curaoa", "Curaao", "Krsou", "Korsou", "Curocao", "ISO 3166-1:CW", "CUW", "Curazao", "Curacao", "Country of Curaao", "", "CW" ], "pap": [ "Krsou", "Kurasoleo", "Curacao", "Korsou", "Corsou", "Corsouw", "Krsou", "Curaao", "Corsow" ] }'},{feature_id:"15077599",name:"",name_en:"Tunisia",description:"sovereign state",iso_3166_1:"TN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUN",wikidata_id:"Q948",region:"Africa",subregion:"Northern Africa",centroid:"[8.841200000000001,33.8627]",bounds:"[7.5227,30.2303,11.6112,37.5597]",area_sqkm:"188995",color_group:"4",names:'{ "ar": [ "", " ", " ", "" ], "en": [ "Tunisia", "Republic of Tunisia", "Tnis", "Tunisian Republic", "al-Jumhriyyah at-Tnisiyyah", "tn", "", "TUN" ], "fr": [ "Tunisie" ] }'},{feature_id:"13373642",name:"Slovensko",name_en:"Slovakia",description:"sovereign state",iso_3166_1:"SK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVK",wikidata_id:"Q214",region:"Europe",subregion:"Eastern Europe",centroid:"[19.6543,48.6813]",bounds:"[16.8334,47.7312,22.5665,49.6138]",area_sqkm:"74312",color_group:"2",names:'{ "cs": [ "Slovensko", "Slovensk republika", "Slovensk tt" ], "de": [ "Slowakei", "Slowakische Republik", "Slowakien" ], "en": [ "Slovakia", "Slovak Republic", "sk", "", "SVK" ], "hu": [ "Szlovkia", "Szlovk Kztrsasg", "Felvidk" ], "sk": [ "Slovensko", "Slovensk republika" ] }'},{feature_id:"2167023",name:"British Virgin Islands",name_en:"British Virgin Islands",description:"dependent territory",iso_3166_1:"VG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"VGB",wikidata_id:"Q25305",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-64.64,18.4204]",bounds:"[-64.8501,18.3064,-64.2706,18.7497]",area_sqkm:"164",color_group:"6",names:'{ "en": [ "British Virgin Islands", "Virgin Islands", "BVI", "vg", "", "IVB" ] }'},{feature_id:"8589445",name:"Lietuva",name_en:"Lithuania",description:"sovereign state",iso_3166_1:"LT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LTU",wikidata_id:"Q37",region:"Europe",subregion:"Northern Europe",centroid:"[24.1282,55.195]",bounds:"[20.9539,53.8988,26.8354,56.4502]",area_sqkm:"114290",color_group:"6",names:'{ "de": [ "Litauen" ], "en": [ "Lithuania", "Republic of Lithuania", "lt", "Lietuva", "", "LTU" ], "lt": [ "Lietuva", "Lietuvos Respublika" ], "ru": [ "", "Lietuva", " " ] }'},{feature_id:"12914881",name:"",name_en:"Saudi Arabia",description:"sovereign state",iso_3166_1:"SA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SAU",wikidata_id:"Q851",region:"Asia",subregion:"Western Asia",centroid:"[44.1943,24.5136]",bounds:"[34.4953,16.3795,55.6666,32.1537]",area_sqkm:"2121348",color_group:"6",names:'{ "ar": [ "", " ", " ", "", "  " ], "en": [ "Saudi Arabia", "Kingdom of Saudi Arabia", "", "KSA", "sa" ] }'},{feature_id:"13045950",name:"",name_en:"Serbia",description:"sovereign state",iso_3166_1:"RS",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",region:"Europe",subregion:"Southern Europe",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"8851612",name:"Malawi",name_en:"Malawi",description:"sovereign state",iso_3166_1:"MW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MWI",wikidata_id:"Q1020",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[33.7428,-13.2731]",bounds:"[32.6748,-17.1259,35.9173,-9.3622]",area_sqkm:"122428",color_group:"1",names:'{ "en": [ "Malawi", "Republic of Malawi", "mw", "", "MAW" ], "ny": [ "Malai" ] }'},{feature_id:"14356523",name:"Switzerland",name_en:"Switzerland",description:"sovereign state",iso_3166_1:"CH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHE",wikidata_id:"Q39",region:"Europe",subregion:"Western Europe",centroid:"[8.4481,46.8224]",bounds:"[5.9559,45.818,10.4921,47.8085]",area_sqkm:"59508",color_group:"5",names:'{ "de": [ "Schweiz", "Schweizerische Eidgenossenschaft", "Eidgenossenschaft", "CH", "SUI", "CHE" ], "en": [ "Switzerland", "Swiss Confederation", "CH", "SUI", "Suisse", "Schweiz", "Svizzera", "", "Swiss" ], "fr": [ "Suisse", "Confdration helvtique", "Confdration suisse", "CH", "SUI", "Helvtie", "" ], "gsw": [ "Schwiz", "Schwiiz, Schwyz (aber nd zverwgsle mit Schwyz, wo e Gmaind, en Bezirk und en Kanton bedte chan)", "Eidgenosseschaft", "Helvezie" ] }'},{feature_id:"12259354",name:"Saint-Barthlemy",name_en:"Saint-Barthlemy",description:"dependent territory",iso_3166_1:"BL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"BLM",wikidata_id:"Q25362",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-62.8117,17.9036]",bounds:"[-62.9101,17.8782,-62.7891,17.9608]",area_sqkm:"21",color_group:"7",names:'{ "en": [ "Saint Barthlemy", "Saint Barthlemy", "Ouanalao", "Collectivit de Saint-Barthlemy", "Saint Barths", "Ile Saint-Barthlemy", "Saint Barthlmy", "St. Barthelemy", "St barths", "St. Barthlemy", "Saint Barts", "Saint-Barthlmy", "St. Barths", "ISO 3166-1:BL", "le Saint-Barthlemy", "Saint Bartz", "St barts", "St. Barth", "America\\/St Barthelemy", "Collectivity of Saint Barthlemy", "Saint-Barthelemy", "Saint Barthelemy", "St barthelemy", "Saint Barth", "bl", "", "Collectivite de Saint-Barthelemy", "Ile Saint-Barthelemy", "Collectivity of Saint Barthelemy", "St. Barts", "FR-BL" ], "fr": [ "Saint-Barthlemy", "Saint Barthlemy", "St Barth", "Collectivite d\'outre-mer de Saint-Barthelemy", "Collectivit d\'outre-mer de Saint-Barthlemy", "Saint-Barthlmy", "Saint-Barth", "Saint Barth", "977", "bl", "", "ISO 3166-1:BL", "FR-BL" ] }'},{feature_id:"16322626",name:" ",name_en:"Western Sahara",description:"disputed state",iso_3166_1:"EH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESH",wikidata_id:"Q6250",region:"Africa",subregion:"Northern Africa",centroid:"[-13.686,24.2721]",bounds:"[-17.1033,20.7697,-8.6663,27.6837]",area_sqkm:"298478",color_group:"4",names:'{ "ar": [ " ", " " ], "en": [ "Western Sahara", "eh", "West Sahara", "Spanish Sahara", "West-Sahara", "" ] }'},{feature_id:"12521613",name:"Saint-Martin",name_en:"Saint Martin",description:"dependent territory",iso_3166_1:"MF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MAF",wikidata_id:"Q25596",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-63.0507,18.0848]",bounds:"[-63.1529,18.0447,-62.9703,18.1253]",area_sqkm:"52",color_group:"7",names:'{ "en": [ "Saint Martin", "St. Martin" ], "fr": [ "Saint-Martin", "le de Saint-Martin", "le de Saint Martin" ] }'},{feature_id:"15798512",name:"Virgin Islands",name_en:"Virgin Islands",description:"dependent territory",iso_3166_1:"VI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"VIR",wikidata_id:"Q26262",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-64.75920000000001,17.7289]",bounds:"[-65.0853,17.674,-64.5652,18.413]",area_sqkm:"370",color_group:"4",names:'{ "en": [ "Virgin Islands" ] }'},{feature_id:"2560047",name:"Cameroun - Cameroon",name_en:"Cameroon",description:"sovereign state",iso_3166_1:"CM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CMR",wikidata_id:"Q1009",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[13.6386,7.4045]",bounds:"[8.498699999999999,1.6514,16.1912,13.0809]",area_sqkm:"470320",color_group:"1",names:'{ "en": [ "Cameroon", "Republic of Cameroon", "cm", "", "CMR", "CAM" ], "fr": [ "Cameroun", "Rpublique du Cameroun", "CMR" ] }'},{feature_id:"13045950",name:"",name_en:"Serbia",description:"sovereign state",iso_3166_1:"RS",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",region:"Europe",subregion:"Southern Europe",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"13308115",name:"Sint Maarten",name_en:"Sint Maarten",description:"dependent territory",iso_3166_1:"SX",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NL",iso_3166_1_alpha_3:"SXM",wikidata_id:"Q26273",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-63.0544,18.034]",bounds:"[-63.138,18.0054,-63.0132,18.0626]",area_sqkm:"34",color_group:"4",names:'{ "en": [ "Sint Maarten", "St. Maarten", "Saint Martin (Dutch part)", "Sint Maarten (Dutch part)", "", "St Martin", "SX", "NL-SX", "Saint Martin" ], "es": [ "Sint Maarten", "San Martn", "San Martin" ] }'},{feature_id:"6885481",name:"India",name_en:"India",description:"sovereign state",iso_3166_1:"IN",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",region:"Asia",subregion:"Southern Asia",centroid:"[78.64960000000001,23.3717]",bounds:"[68.17449999999999,6.756,97.3954,37.0919]",area_sqkm:"3626444",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"7278695",name:"",name_en:"Israel",description:"sovereign state",iso_3166_1:"IL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISR",wikidata_id:"Q801",region:"Asia",subregion:"Western Asia",centroid:"[34.665,31.434]",bounds:"[34.2678,29.4956,35.8945,33.333]",area_sqkm:"25871",color_group:"3",names:'{ "ar": [ "", " ", " " ], "en": [ "Israel", "State of Israel", "il", "", "Holy Land", "the Jewish state", "ISR" ], "he": [ "", " ", " " ], "ru": [ "", " " ] }'},{feature_id:"1773598",name:"Bonaire, Sint Eustatius and Saba",name_en:"Bonaire, Sint Eustatius and Saba",description:"dependent territory",iso_3166_1:"BQ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NL",iso_3166_1_alpha_3:"BES",wikidata_id:"Q27561",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-68.2465,12.1671]",bounds:"[-68.4207,12.0243,-62.9459,17.6501]",area_sqkm:"325",color_group:"4",names:'{ "en": [ "Caribbean Netherlands", "BES islands", "" ] }'},{feature_id:"3018798",name:"Chile",name_en:"Chile",description:"sovereign state",iso_3166_1:"CL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHL",wikidata_id:"Q298",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-72.3188,-37.8958]",bounds:"[-109.4498,-55.982,-66.4148,-17.4986]",area_sqkm:"1020689",color_group:"5",names:'{ "en": [ "Chile", "cl", "Repblica de Chile", "", "Republica de Chile", "Republic of Chile", "CHI" ], "es": [ "Chile", "Repblica de Chile", "Republica de Chile" ] }'},{feature_id:"9048209",name:"Mali",name_en:"Mali",description:"sovereign state",iso_3166_1:"ML",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLI",wikidata_id:"Q912",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-0.7247,17.4996]",bounds:"[-12.2403,10.1521,4.2493,24.9999]",area_sqkm:"1310878",color_group:"1",names:'{ "bm": [ "Mali" ], "en": [ "Mali", "Republic of Mali", "Rpublique du Mali", "ml", "", "Republique du Mali", "MLI" ], "fr": [ "Mali", "Rpublique du Mali" ] }'},{feature_id:"9834636",name:"Crna Gora",name_en:"Montenegro",description:"sovereign state",iso_3166_1:"ME",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNE",wikidata_id:"Q236",region:"Europe",subregion:"Southern Europe",centroid:"[19.2878,42.7151]",bounds:"[18.4354,41.8468,20.3555,43.5518]",area_sqkm:"19002",color_group:"4",names:'{ "en": [ "Montenegro", "me", "", "MNE" ], "sr": [ " " ], "sr-el": [ "Crna Gora" ] }'},{feature_id:"15864041",name:"United States",name_en:"United States",description:"sovereign state",iso_3166_1:"US",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"USA",wikidata_id:"Q30",region:"Americas",subregion:"Northern America",centroid:"[-99.5889,38.1815]",bounds:"[-179.1448,18.9107,179.7749,71.3904]",area_sqkm:"16834531",color_group:"4",names:'{ "en": [ "United States of America", "the United States", "the United States of America", "United States", "America", "the States", "U.S.A.", "USA", "U.S.", "US", "the US", "the USA", "US of A", "" ] }'},{feature_id:"13701210",name:"South Georgia and South Sandwich Islands",name_en:"South Georgia and South Sandwich Islands",description:"dependent territory",iso_3166_1:"GS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"SGS",wikidata_id:"Q35086",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-36.4992,-54.4399]",bounds:"[-42.2024,-59.4855,-26.2675,-53.3417]",area_sqkm:"7350",color_group:"6",names:'{ "en": [ "South Georgia and the South Sandwich Islands", "South Georgia", "South Sandwich Islands", "gs", "SGSSI", "", "South Georgia and South Sandwich Islands" ] }'},{feature_id:"2363892",name:"Paracel Islands",name_en:"Paracel Islands",description:"disputed territory",iso_3166_1:"D0CNTWVN1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",color_group:"",names:""},{feature_id:"10227881",name:"Nauru",name_en:"Nauru",description:"sovereign state",iso_3166_1:"NR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NRU",wikidata_id:"Q697",region:"Oceania",subregion:"Micronesia",centroid:"[166.9315,-0.5286999999999999]",bounds:"[166.9096,-0.5542,166.9593,-0.5021]",area_sqkm:"22",color_group:"3",names:'{ "en": [ "Nauru", "Republic of Nauru", "Pleasant Island", "Naoero", "nr", "" ], "na": [ "Naoero" ] }'},{feature_id:"1511924",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK1",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",color_group:"",names:""},{feature_id:"397812",name:"Tigri Area",name_en:"Tigri Area",description:"disputed territory",iso_3166_1:"D0GYSR1",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",color_group:"",names:""},{feature_id:"2298356",name:"Spratly Islands",name_en:"Spratly Islands",description:"disputed territory",iso_3166_1:"D0CNPHTWVN1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",color_group:"",names:""},{feature_id:"2232820",name:"Susta disputed area",name_en:"Susta disputed area",description:"disputed territory",iso_3166_1:"D0INNP2",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",color_group:"",names:""},{feature_id:"16060652",name:"Vatican City",name_en:"Vatican City",description:"sovereign state",iso_3166_1:"VA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VAT",wikidata_id:"Q237",region:"Europe",subregion:"Southern Europe",centroid:"[12.4532,41.9039]",bounds:"[12.4457,41.9003,12.4585,41.9076]",area_sqkm:"0",color_group:"1",names:'{ "en": [ "Vatican City", "Vatican City State", "Papal State", "Vatican", "va", "", "The Vatican", "vat", "Status Civitatis Vaticanae", "Stato della Citt del Vaticano", "Citt del Vaticano", "Civitas Vaticana", "State of Vatican City" ], "it": [ "Citt del Vaticano", "Vaticano", "Stato della Citt del Vaticano" ], "la": [ "Civitas Vaticana", "Status Civitatis Vaticanae", "Status Civitatis Vatican" ] }'},{feature_id:"11276471",name:" ",name_en:"Palestine",description:"disputed state",iso_3166_1:"PS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PSE",wikidata_id:"Q219060",region:"Asia",subregion:"Western Asia",centroid:"[35.2703,31.9492]",bounds:"[34.2186,31.2199,35.5739,32.5525]",area_sqkm:"7187",color_group:"3",names:'{ "ar": [ "", " " ], "en": [ "State of Palestine", "Palestinian Authority", "PA", "", "Palestinian state", "Palestine" ] }'},{feature_id:"13832400",name:"South Sudan",name_en:"South Sudan",description:"sovereign state",iso_3166_1:"SS",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"13242566",name:"Singapore",name_en:"Singapore",description:"sovereign state",iso_3166_1:"SG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SGP",wikidata_id:"Q334",region:"Asia",subregion:"South-eastern Asia",centroid:"[103.8297,1.3389]",bounds:"[103.6057,1.1587,104.0855,1.4707]",area_sqkm:"724",color_group:"5",names:'{ "en": [ "Singapore", "Republic of Singapore", "SG", "sg", "", "Singapore City", "SGP" ], "ms": [ "Singapura" ], "zh": [ "", "", "" ] }'},{feature_id:"8982683",name:"Maldives",name_en:"Maldives",description:"sovereign state",iso_3166_1:"MV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDV",wikidata_id:"Q826",region:"Asia",subregion:"Southern Asia",centroid:"[73.09999999999999,-0.6321]",bounds:"[72.6392,-0.7037,73.75960000000001,7.1064]",area_sqkm:"226",color_group:"2",names:'{ "dv": [ "", " ", " " ], "en": [ "Maldives", "mv", "", "Republic of Maldives", "MDV" ] }'},{feature_id:"397320",name:"Angola",name_en:"Angola",description:"sovereign state",iso_3166_1:"AO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AGO",wikidata_id:"Q916",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[18.8562,-12.005]",bounds:"[11.6693,-18.0395,24.0837,-4.3607]",area_sqkm:"1290030",color_group:"3",names:'{ "en": [ "Angola", "Republic of Angola", "ao", "", "Ngola", "ANG" ], "pt": [ "Angola" ] }'},{feature_id:"4984903",name:"Fiji",name_en:"Fiji",description:"sovereign state",iso_3166_1:"FJ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FJI",wikidata_id:"Q712",region:"Oceania",subregion:"Melanesia",centroid:"[177.9783,-17.7941]",bounds:"[-180,-21.0424,179.9999,-12.4617]",area_sqkm:"19940",color_group:"5",names:'{ "en": [ "Fiji", "Republic of Fiji", "fj", "", "FIJ" ], "fj": [ "Viti", "Matanitu Tugalala o Viti" ], "hi": [ "" ], "hif": [ "Fiji" ] }'},{feature_id:"5181520",name:"Guyane",name_en:"French Guiana",description:"dependent territory",iso_3166_1:"GF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"GUF",wikidata_id:"Q3769",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-53.0359,3.9351]",bounds:"[-54.53,2.1229,-51.6202,5.7517]",area_sqkm:"84341",color_group:"7",names:'{ "en": [ "French Guiana", "gf", "", "Guyane", "Guiana (France)", "Guyane franaise" ], "fr": [ "Guyane", "973" ] }'},{feature_id:"13897796",name:"Espaa",name_en:"Spain",description:"sovereign state",iso_3166_1:"ES",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESP",wikidata_id:"Q29",region:"Europe",subregion:"Southern Europe",centroid:"[-3.4204,40.0061]",bounds:"[-18.1608,27.6378,4.3277,43.7904]",area_sqkm:"667403",color_group:"4",names:'{ "ca": [ "Espanya", "Regne d\'Espanya", "ES", "ESP", "Estat espanyol", "" ], "en": [ "Spain", "Espaa", "Kingdom of Spain", "ES", "ESP", "" ], "es": [ "Espaa", "Reino de Espaa", "ES", "ESP", "Estado espaol", "" ] }'},{feature_id:"528393",name:"Antarctica",name_en:"Antarctica",description:"treaty state",iso_3166_1:"AQ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATA",wikidata_id:"Q51",region:"Antarctica",subregion:"Antarctica",centroid:"[63.6432,-78.41679999999999]",bounds:"[-180,-85.05110000000001,180,-60.5155]",area_sqkm:"58466582",color_group:"4",names:'{ "en": [ "Antarctica" ] }'},{feature_id:"15536130",name:"  ",name_en:"United Arab Emirates",description:"sovereign state",iso_3166_1:"AE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARE",wikidata_id:"Q878",region:"Asia",subregion:"Western Asia",centroid:"[55.1509,24.3653]",bounds:"[51.498,22.6282,56.3816,26.0788]",area_sqkm:"78088",color_group:"2",names:'{ "ar": [ "  ", "", "   " ], "en": [ "United Arab Emirates", "U.A.E.", "", "UAE", "ae", "Emirates", "the United Arab Emirates", "the UAE", "the U.A.E.", "the Emirates" ] }'},{feature_id:"659466",name:"Argentina",name_en:"Argentina",description:"sovereign state",iso_3166_1:"AR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARG",wikidata_id:"Q414",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-64.9932,-38.6979]",bounds:"[-73.56529999999999,-55.0572,-53.6358,-21.7815]",area_sqkm:"3369093",color_group:"3",names:'{ "en": [ "Argentina", "AR", "ar", "", "Argentine Republic", "ARG" ], "es": [ "Argentina", "Repblica Argentina", "Provincias Unidas del Ro de la Plata", "Confederacin Argentina", "Republica Argentina", "Provincias Unidas del Rio de la Plata", "Confederacion Argentina", "" ] }'},{feature_id:"11538606",name:"Per",name_en:"Peru",description:"sovereign state",iso_3166_1:"PE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PER",wikidata_id:"Q419",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-75.8061,-9.3155]",bounds:"[-81.32850000000001,-18.3517,-68.6521,-0.0389]",area_sqkm:"1324621",color_group:"4",names:'{ "en": [ "Peru", "pe", "Republic of Peru", "Repblica del Per", "", "Republica del Peru" ], "es": [ "Per", "Repblica del Per", "Peru", "Republica del Peru", "pe" ], "qu": [ "Piruw" ] }'},{feature_id:"2822268",name:"Cayman Islands",name_en:"Cayman Islands",description:"dependent territory",iso_3166_1:"KY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"CYM",wikidata_id:"Q5785",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-81.17149999999999,19.3299]",bounds:"[-81.42059999999999,19.2632,-79.723,19.7567]",area_sqkm:"284",color_group:"6",names:'{ "en": [ "Cayman Islands", "ky", "", "CAY" ] }'},{feature_id:"266740",name:"Hala'ib Triangle",name_en:"Hala'ib Triangle",description:"disputed territory",iso_3166_1:"D0EGSD1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.5497,22.5762]",bounds:"[34.0814,22,36.8944,23.1463]",area_sqkm:"19449",color_group:"",names:""},{feature_id:"70132",name:"Kafia Kingi",name_en:"Kafia Kingi",description:"disputed territory",iso_3166_1:"D0SDSS2",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[24.1191,9.260199999999999]",bounds:"[23.4407,8.683,24.8471,9.8377]",area_sqkm:"13301",color_group:"",names:""},{feature_id:"856077",name:"Australia",name_en:"Australia",description:"sovereign state",iso_3166_1:"AU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUS",wikidata_id:"Q408",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[133.5282,-25.7567]",bounds:"[72.5827,-54.778,167.997,-9.142200000000001]",area_sqkm:"8694425",color_group:"1",names:'{ "en": [ "Australia", "Commonwealth of Australia", "AU", "AUS", "au", "British Colony of Australia", "", "Straya" ] }'},{feature_id:"11145394",name:" - Pakistan",name_en:"Pakistan",description:"sovereign state",iso_3166_1:"PK",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",region:"Asia",subregion:"Southern Asia",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"16453882",name:"Zambia",name_en:"Zambia",description:"sovereign state",iso_3166_1:"ZM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZMB",wikidata_id:"Q953",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[25.4621,-13.2073]",bounds:"[22,-18.0765,33.703,-8.2415]",area_sqkm:"778428",color_group:"5",names:'{ "en": [ "Zambia", "Republic of Zambia", "zm", "ZAM", "" ], "ny": [ "Zambia" ] }'},{feature_id:"13832400",name:"South Sudan",name_en:"South Sudan",description:"sovereign state",iso_3166_1:"SS",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"16126190",name:"Venezuela",name_en:"Venezuela",description:"sovereign state",iso_3166_1:"VE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VEN",wikidata_id:"Q717",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-65.43519999999999,6.4568]",bounds:"[-73.35290000000001,0.6514,-59.8065,12.4912]",area_sqkm:"927706",color_group:"1",names:'{ "en": [ "Venezuela", "Bolivarian Republic of Venezuela", "BR Venezuela", "VE", "", "Estados Unidos de Venezuela", "Vzla", "VEN" ], "es": [ "Venezuela", "RB Venezuela", "VE", "La Repblica Bolivarana de Venezuela", "Estados Unidos de Venezuela", "Republica Bolivariana de Venezuela", "La Republica Bolivarana de Venezuela", "La Repblica Bolivariana de Venezuela", "La Republica Bolivariana de Venezuela", "Repblica Bolivariana de Venezuela", "Vzla" ] }'},{feature_id:"14749917",name:"Timor-Leste - Timor Lorosae",name_en:"East Timor",description:"sovereign state",iso_3166_1:"TL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TLS",wikidata_id:"Q574",region:"Asia",subregion:"South-eastern Asia",centroid:"[125.7585,-8.891500000000001]",bounds:"[124.043,-9.5036,127.3423,-8.126899999999999]",area_sqkm:"15203",color_group:"2",names:'{ "en": [ "East Timor", "Democratic Republic of Timor-Leste", "Timor-Leste", "tl", "", "Timor Leste", "Democratic Republic of East Timor", "TLS" ], "pt": [ "Timor-Leste", "Timor Leste" ], "tet": [ "Timor-Leste" ] }'},{feature_id:"1380852",name:"Arunachal Pradash",name_en:"Arunachal Pradash",description:"disputed territory",iso_3166_1:"D0CNIN0",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",color_group:"",names:""},{feature_id:"14094543",name:"Suriname",name_en:"Suriname",description:"sovereign state",iso_3166_1:"SR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SUR",wikidata_id:"Q730",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-56.1089,3.923]",bounds:"[-58.0547,1.834,-53.9802,6.0088]",area_sqkm:"146569",color_group:"1",names:'{ "en": [ "Suriname", "Surinam", "Republic of Suriname", "Republic of Surinam", "Dutch Guiana", "sr", "", "SUR" ], "nl": [ "Suriname", "Republiek Suriname", "SR", "SUR" ], "srn": [ "Sranankondre" ] }'},{feature_id:"1249780",name:"Chumar disputed area",name_en:"Chumar disputed area",description:"disputed territory",iso_3166_1:"D0CNIN5",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",color_group:"",names:""},{feature_id:"2298356",name:"Spratly Islands",name_en:"Spratly Islands",description:"disputed territory",iso_3166_1:"D0CNPHTWVN1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",color_group:"",names:""},{feature_id:"1184244",name:"Chumar East disputed area",name_en:"Chumar East disputed area",description:"disputed territory",iso_3166_1:"D0CNIN4",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",color_group:"",names:""},{feature_id:"1511924",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",color_group:"",names:""},{feature_id:"8392835",name:"Liberia",name_en:"Liberia",description:"sovereign state",iso_3166_1:"LR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBR",wikidata_id:"Q1014",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-9.638199999999999,6.456]",bounds:"[-11.4918,4.3535,-7.3672,8.551]",area_sqkm:"97145",color_group:"2",names:'{ "en": [ "Liberia", "Republic of Liberia", "lr", "", "LBR" ] }'},{feature_id:"9965705",name:"",name_en:"Morocco",description:"sovereign state",iso_3166_1:"MA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAR",wikidata_id:"Q1028",region:"Africa",subregion:"Northern Africa",centroid:"[-6.1699,31.8889]",bounds:"[-13.1671,27.6705,-1.0108,35.9222]",area_sqkm:"489286",color_group:"2",names:'{ "ar": [ "", " ", " " ], "en": [ "Morocco", "Kingdom of Morocco", "Arab Maghreb", "Marocco", "al-Marib", "Lmarib", "Maroc", "ma", "", "MAR" ], "fr": [ "Maroc", "Royaume du Maroc", "ma" ], "ary": [ "" ] }'},{feature_id:"1642996",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",description:"disputed territory",iso_3166_1:"D0GFSR1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",color_group:"",names:""},{feature_id:"2298356",name:"Spratly Islands",name_en:"Spratly Islands",description:"disputed territory",iso_3166_1:"D0CNPHTWVN1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",color_group:"",names:""},{feature_id:"11473082",name:"Paraguay",name_en:"Paraguay",description:"sovereign state",iso_3166_1:"PY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRY",wikidata_id:"Q733",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-58.4145,-23.4993]",bounds:"[-62.6415,-27.5759,-54.2591,-19.2928]",area_sqkm:"436149",color_group:"6",names:'{ "en": [ "Paraguay", "Republic of Paraguay", "py", "", "Heart of South America" ], "es": [ "Paraguay", "Repblica del Paraguay", "Republica del Paraguay" ], "gn": [ "Paragui" ] }'},{feature_id:"397812",name:"Tigri Area",name_en:"Tigri Area",description:"disputed territory",iso_3166_1:"D0GYSR1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",color_group:"",names:""},{feature_id:"6426718",name:"Guyana",name_en:"Guyana",description:"sovereign state",iso_3166_1:"GY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GUY",wikidata_id:"Q734",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-58.9506,4.8622]",bounds:"[-61.3918,1.1701,-56.4917,8.5349]",area_sqkm:"213209",color_group:"3",names:'{ "en": [ "Guyana", "Co-operative Republic of Guyana", "gy", "Republic of Guyana", "", "GUY" ] }'},{feature_id:"4395071",name:"Ecuador",name_en:"Ecuador",description:"sovereign state",iso_3166_1:"EC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ECU",wikidata_id:"Q736",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-78.27249999999999,-1.7987]",bounds:"[-92.0081,-5.0161,-75.1944,1.6817]",area_sqkm:"257928",color_group:"1",names:'{ "en": [ "Ecuador", "Republic of Ecuador", "ec", "ecu", "ECU", "EC", "Republic of the Equator", "The Ecuadorian State", "" ], "es": [ "Ecuador", "Republica del Ecuador", "Repblica del Ecuador", "ECU", "EC", "ecu", "ec", "el Ecuador", "Estado Ecuatoriano" ], "qu": [ "Ecuador", "Ikwayur Runaq Imayka", "ECU", "EC", "ecu", "ec" ] }'},{feature_id:"8654982",name:"Luxembourg",name_en:"Luxembourg",description:"sovereign state",iso_3166_1:"LU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LUX",wikidata_id:"Q32",region:"Europe",subregion:"Western Europe",centroid:"[6.0814,49.8167]",bounds:"[5.7358,49.4478,6.531,50.1827]",area_sqkm:"4011",color_group:"1",names:'{ "de": [ "Luxemburg", "Groussherzogtum Ltzebuerg", "Grand-Duch de Luxembourg" ], "en": [ "Luxembourg", "Luxemburg", "Grand Duchy of Luxembourg", "LU", "lu", "", "LUX" ], "fr": [ "Luxembourg", "Grand-Duch de Luxembourg", "Grand-duch de Luxembourg", "grand-duch de Luxembourg", "LUX", "LU", "" ], "lb": [ "Ltzebuerg", "Groussherzogtum Ltzebuerg", "Ltzebuerger Land", "Grand-Duch de Luxembourg", "Grand-Duch" ], "pt": [ "Luxemburgo", "Gro-de-bico do Luxemburgo", "de Luxemburgo", "Gro-Ducado de Luxemburgo" ] }'},{feature_id:"8261759",name:"",name_en:"Lebanon",description:"sovereign state",iso_3166_1:"LB",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBN",wikidata_id:"Q822",region:"Asia",subregion:"Western Asia",centroid:"[35.9001,33.878]",bounds:"[35.1036,33.0554,36.6233,34.6921]",area_sqkm:"12369",color_group:"4",names:'{ "ar": [ "", " " ], "en": [ "Lebanon", "Lebanese Republic", "lb", "Republic of Lebanon", "", "LBN" ] }'},{feature_id:"3477553",name:"Colombia",name_en:"Colombia",description:"sovereign state",iso_3166_1:"CO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COL",wikidata_id:"Q739",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-72.6147,4.1587]",bounds:"[-81.73569999999999,-4.2285,-66.84650000000001,13.3948]",area_sqkm:"1151361",color_group:"2",names:'{ "en": [ "Colombia", "", "Repblica de Colombia", "Republic of Colombia", "Republica de Colombia", "COL" ], "es": [ "Colombia", "Repblica de Colombia (wayuunaiki)", "Repblica de Colombia", "Republica de Colombia" ] }'},{feature_id:"724999",name:"",name_en:"Armenia",description:"sovereign state",iso_3166_1:"AM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARM",wikidata_id:"Q399",region:"Asia",subregion:"Western Asia",centroid:"[44.8409,40.0811]",bounds:"[43.4483,38.8402,46.633,41.2999]",area_sqkm:"39160",color_group:"3",names:'{ "en": [ "Armenia", "Republic of Armenia", "", "ARM" ], "hy": [ "", "", "", " ", "" ] }'},{feature_id:"1576987",name:"Bermuda",name_en:"Bermuda",description:"dependent territory",iso_3166_1:"BM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"BMU",wikidata_id:"Q23635",region:"Americas",subregion:"Northern America",centroid:"[-64.77370000000001,32.3019]",bounds:"[-64.8871,32.247,-64.64660000000001,32.3908]",area_sqkm:"64",color_group:"6",names:'{ "en": [ "Bermuda", "Somers Isles", "Bermuda Islands", "Atlantic\\/Bermuda", "Bermudian Islands", "Bermoothes", "Virgineola", "The Somers Isles", "Summers\' Isles", "Territory of Bermuda", "Bermudas", "Somers Islands", "Colony of Bermuda", "Devil\'s Isles", "Summer\'s Isles", "Isle of Devils", "bm", "" ] }'},{feature_id:"5443669",name:"The Gambia",name_en:"Gambia",description:"sovereign state",iso_3166_1:"GM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GMB",wikidata_id:"Q1005",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-15.9728,13.4365]",bounds:"[-16.8133,13.0458,-13.7917,13.8266]",area_sqkm:"11731",color_group:"1",names:'{ "en": [ "Gambia", "gm", "Islamic Republic of the Gambia", "", "Republic of The Gambia", "The Gambia", "GAM" ] }'},{feature_id:"10162336",name:"Namibia",name_en:"Namibia",description:"sovereign state",iso_3166_1:"NA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NAM",wikidata_id:"Q1030",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[17.2133,-23.1061]",bounds:"[11.737,-28.9695,25.2562,-16.9635]",area_sqkm:"890791",color_group:"4",names:'{ "af": [ "Namibi", "Republiek van Namibi" ], "en": [ "Namibia", "Republic of Namibia", "na", "", "NAM" ] }'},{feature_id:"6951013",name:"Indonesia",name_en:"Indonesia",description:"sovereign state",iso_3166_1:"ID",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IDN",wikidata_id:"Q252",region:"Asia",subregion:"South-eastern Asia",centroid:"[113.3193,0.1133]",bounds:"[95.01049999999999,-11.0097,141.0296,6.0769]",area_sqkm:"1914185",color_group:"6",names:'{ "en": [ "Indonesia", "Republic of Indonesia", "NKRI", "Negara Kesatuan Republik Indonesia", "Republik Indonesia", "ID", "IDN", "RI", "id", "", "INA" ], "id": [ "Indonesia", "Republik Indonesia", "Negara Kesatuan Republik Indonesia", "NKRI", "ID", "INA", "IDN" ], "jv": [ "Indonsia" ], "su": [ "Indonsia" ] }'},{feature_id:"9179279",name:"Marshall Islands",name_en:"Marshall Islands",description:"sovereign state",iso_3166_1:"MH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MHL",wikidata_id:"Q709",region:"Oceania",subregion:"Micronesia",centroid:"[171.3717,7.109]",bounds:"[160.7953,4.5725,172.1725,14.7232]",area_sqkm:"314",color_group:"2",names:'{ "en": [ "Marshall Islands", "Republic of the Marshall Islands", "Aolepn Aorkin Maje", "mh", "", "MHL" ], "mh": [ "Majl", "Aolepn Aorkin Maje" ] }'},{feature_id:"12587188",name:"Saint-Pierre-et-Miquelon",name_en:"Saint Pierre and Miquelon",description:"dependent territory",iso_3166_1:"PM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"SPM",wikidata_id:"Q34617",region:"Americas",subregion:"Northern America",centroid:"[-56.3267,46.9642]",bounds:"[-56.406,46.7489,-56.1266,47.145]",area_sqkm:"331",color_group:"7",names:'{ "en": [ "Saint Pierre and Miquelon", "Saint-Pierre-et-Miquelon", "Saint-Pierre et Miquelon", "pm", "St. Pierre and Miquelon", "St Pierre and Miquelon", "" ], "fr": [ "Saint-Pierre-et-Miquelon", "les Saint-Pierre-et-Miquelon", "975" ] }'},{feature_id:"8523905",name:"Liechtenstein",name_en:"Liechtenstein",description:"sovereign state",iso_3166_1:"LI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LIE",wikidata_id:"Q347",region:"Europe",subregion:"Western Europe",centroid:"[9.547000000000001,47.1593]",bounds:"[9.4717,47.0484,9.6356,47.2706]",area_sqkm:"235",color_group:"2",names:'{ "de": [ "Liechtenstein", "Frstentum Liechtenstein", "Frstentum Lichtenstein" ], "en": [ "Liechtenstein", "LI", "Principality of Liechtenstein", "FL", "li", "", "LIE" ], "gsw": [ "Liachtaschta" ] }'},{feature_id:"66130068",name:"",name_en:"Macau",description:"dependent territory",iso_3166_1:"MO",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",region:"Asia",subregion:"Eastern Asia",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"11407536",name:"Papua New Guinea",name_en:"Papua New Guinea",description:"sovereign state",iso_3166_1:"PG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PNG",wikidata_id:"Q691",region:"Oceania",subregion:"Melanesia",centroid:"[144.3478,-6.6693]",bounds:"[140.8424,-11.6554,155.9831,-1.3148]",area_sqkm:"468868",color_group:"4",names:'{ "en": [ "Papua New Guinea", "Independent State of Papua New Guinea", "PNG", "pg", "" ], "tpi": [ "Papua Niugini" ] }'},{feature_id:"7540850",name:"",name_en:"Japan",description:"sovereign state",iso_3166_1:"JP",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",region:"Asia",subregion:"Eastern Asia",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"14487780",name:"",name_en:"Taiwan",description:"sovereign state",iso_3166_1:"TW",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",region:"Asia",subregion:"Eastern Asia",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"14291141",name:"Sverige",name_en:"Sweden",description:"sovereign state",iso_3166_1:"SE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWE",wikidata_id:"Q34",region:"Europe",subregion:"Northern Europe",centroid:"[14.9499,62.9927]",bounds:"[10.9577,55.3367,24.1762,69.0599]",area_sqkm:"990948",color_group:"1",names:'{ "en": [ "Sweden", "Kingdom of Sweden", "SE", "se", "SWE" ], "sv": [ "Sverige", "Konungariket Sverige", "Kungariket Sverige", "Kungadmet Sverige", "SE", "SWE" ] }'},{feature_id:"3608618",name:"Rpublique du Congo",name_en:"Republic of the Congo",description:"sovereign state",iso_3166_1:"CG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COG",wikidata_id:"Q971",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[16.0718,-0.6664]",bounds:"[11.1466,-5.0375,18.644,3.7122]",area_sqkm:"345037",color_group:"2",names:'{ "en": [ "Republic of the Congo", "Congo-Brazzaville", "Congo Republic", "Rpublique du Congo", "Republic of Congo", "cg", "Rep. Congo", "", "Republique du Congo", "Congo (Brazzaville)", "CGO" ], "fr": [ "Rpublique du Congo", "Congo", "Congo-Brazzaville" ] }'},{feature_id:"66130068",name:"",name_en:"Macau",description:"dependent territory",iso_3166_1:"MO",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",region:"Asia",subregion:"Eastern Asia",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"7147622",name:"Ireland - ire",name_en:"Ireland",description:"sovereign state",iso_3166_1:"IE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRL",wikidata_id:"Q27",region:"Europe",subregion:"Northern Europe",centroid:"[-8.113200000000001,53.4616]",bounds:"[-10.6613,51.422,-5.9941,55.4367]",area_sqkm:"115782",color_group:"2",names:'{ "en": [ "Ireland", "ire", "IE", "IRL", "Republic of Ireland", "Hibernia", "Ireland, Republic of", "ie", "ireland", "", "Eire", "Southern Ireland" ], "fr": [ "Irlande", "Rpublique d\'Irlande", "Eire", "ire", "Republic of Ireland", "Ireland" ], "ga": [ "Poblacht na hireann", "ire" ] }'},{feature_id:"135174",name:"Shqipria",name_en:"Albania",description:"sovereign state",iso_3166_1:"AL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ALB",wikidata_id:"Q222",region:"Europe",subregion:"Southern Europe",centroid:"[20.0221,41.1701]",bounds:"[19.2635,39.6449,21.0569,42.6603]",area_sqkm:"38143",color_group:"1",names:'{ "en": [ "Albania", "Republic of Albania", "al", "Republika e Shqipris", "Shqipris", "", "ALB" ], "sq": [ "Shqipria", "Republika e Shqipris" ] }'},{feature_id:"14553307",name:"",name_en:"Tajikistan",description:"sovereign state",iso_3166_1:"TJ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TJK",wikidata_id:"Q863",region:"Asia",subregion:"Central Asia",centroid:"[70.94499999999999,38.8917]",bounds:"[67.34220000000001,36.6718,75.1558,41.0442]",area_sqkm:"181309",color_group:"3",names:'{ "en": [ "Tajikistan", "Republic of Tajikistan", "tj", "", "TJK" ], "ru": [ "", " " ], "tg": [ "", " " ] }'},{feature_id:"66130068",name:"",name_en:"Macau",description:"dependent territory",iso_3166_1:"MO",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",region:"Asia",subregion:"Eastern Asia",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"5115979",name:"France",name_en:"France",description:"sovereign state",iso_3166_1:"FR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FRA",wikidata_id:"Q142",region:"Europe",subregion:"Western Europe",centroid:"[2.1592,46.8894]",bounds:"[-5.143,41.3333,9.5603,51.0892]",area_sqkm:"795594",color_group:"7",names:'{ "en": [ "France", "fr", "FR", "", "Rpublique franaise", "La France", "Republic of France", "French Republic", "FRA" ], "es": [ "Francia", "Repblica Francesa", "Republica Francesa" ], "fr": [ "France", "FR", "Rpublique franaise", "FRA", "RF", "", "fr", "l\'Hexagone" ] }'},{feature_id:"1708061",name:"Bolivia",name_en:"Bolivia",description:"sovereign state",iso_3166_1:"BO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BOL",wikidata_id:"Q750",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-63.6244,-16.3961]",bounds:"[-69.6444,-22.9004,-57.4526,-9.6669]",area_sqkm:"1143748",color_group:"1",names:'{ "ay": [ "Wuliwya" ], "en": [ "Bolivia", "Plurinational State of Bolivia", "bo", "bol", "", "Republic of Bolivia", "BOL" ], "es": [ "Bolivia", "Repblica de Bolivia", "Estado Plurinacional de Bolivia" ], "qu": [ "Buliwya" ] }'},{feature_id:"9375898",name:"Mauritius",name_en:"Mauritius",description:"sovereign state",iso_3166_1:"MU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MUS",wikidata_id:"Q1027",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[57.5902,-20.2529]",bounds:"[56.5853,-20.5248,63.5033,-10.3372]",area_sqkm:"2165",color_group:"1",names:'{ "en": [ "Mauritius", "Republic of Mauritius", "Maurice", "Moris", "mu", "", "MRI" ], "bho": [ "", "" ] }'},{feature_id:"66064479",name:"",name_en:"Hong Kong",description:"dependent territory",iso_3166_1:"HK",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",region:"Asia",subregion:"Eastern Asia",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"7409708",name:"Cte dIvoire",name_en:"Ivory Coast",description:"sovereign state",iso_3166_1:"CI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CIV",wikidata_id:"Q1008",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-5.5573,7.5616]",bounds:"[-8.6029,4.3609,-2.4947,10.7397]",area_sqkm:"327143",color_group:"4",names:'{ "en": [ "Ivory Coast", "Republic of Cte d\'Ivoire", "ci", "Cote d\'Ivoire", "", "Cte d\'Ivoire", "Republic of Cote d\'Ivoire", "Cte-d\'Ivoire", "Cte D\'Ivoire", "Cote D\'Ivoire", "Cote d\'lvoire", "Ivory coast", "Cote D\' Ivoire", "Cote d\' Ivoire", "Cte dIvoire", "Cte d\'Ivorie", "Cte d\'ivoire", "Cote d\'ivoire", "Cote dIvoire", "Cote d ivoire", "Cote divoire", "Cote Ivoire", "Cote dIvoire", "Rpublique de Cte d\'Ivoire", "Republic of Ivory Coast", "Cote Divoire", "Cote-d\'Ivoire", "Cote d\'ivore", "Cote dIvoire", "Cte dIvoire", "Cte Divoire", "Cte D\'ivoire", "Republic of the Ivory Coast", "The Ivory Coast", "CIV" ], "fr": [ "Cte d\'Ivoire", "Cte dIvoire", "Cte-dIvoire", "Cte-d\'Ivoire" ] }'},{feature_id:"1577460",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK2",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",color_group:"",names:""},{feature_id:"9769107",name:" ",name_en:"Mongolia",description:"sovereign state",iso_3166_1:"MN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNG",wikidata_id:"Q711",region:"Asia",subregion:"Eastern Asia",centroid:"[105.2046,47.1285]",bounds:"[87.7367,41.5827,119.9322,52.1514]",area_sqkm:"2281619",color_group:"3",names:'{ "en": [ "Mongolia", "mn", "Mongol uls", "MNG", "", "MGL" ], "mn": [ " ", "" ] }'},{feature_id:"15012066",name:"Trinidad and Tobago",name_en:"Trinidad and Tobago",description:"sovereign state",iso_3166_1:"TT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TTO",wikidata_id:"Q754",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.2604,10.4435]",bounds:"[-61.9305,10.0424,-60.4924,11.3584]",area_sqkm:"5263",color_group:"5",names:'{ "en": [ "Trinidad and Tobago", "Republic of Trinidad and Tobago", "tt", "", "TTO" ] }'},{feature_id:"12652781",name:"Saint Vincent and the Grenadines",name_en:"Saint Vincent and the Grenadines",description:"sovereign state",iso_3166_1:"VC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VCT",wikidata_id:"Q757",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.1949,13.2528]",bounds:"[-61.4611,12.5829,-61.1148,13.3829]",area_sqkm:"401",color_group:"1",names:'{ "en": [ "Saint Vincent and the Grenadines", "vc", "St. Vincent and the Grenadines", "St Vincent and the Grenadines", "Saint Vincent", "St. Vincent", "St Vincent", "" ] }'},{feature_id:"12456064",name:"Saint Lucia",name_en:"Saint Lucia",description:"sovereign state",iso_3166_1:"LC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LCA",wikidata_id:"Q760",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-60.9776,13.909]",bounds:"[-61.0794,13.708,-60.8728,14.1096]",area_sqkm:"624",color_group:"3",names:'{ "en": [ "Saint Lucia", "lc", "St. Lucia", "St Lucia", "" ] }'},{feature_id:"12390520",name:"Saint Kitts and Nevis",name_en:"Saint Kitts and Nevis",description:"sovereign state",iso_3166_1:"KN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KNA",wikidata_id:"Q763",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-62.7446,17.3156]",bounds:"[-62.8642,17.094,-62.5394,17.4177]",area_sqkm:"276",color_group:"1",names:'{ "en": [ "Saint Kitts and Nevis", "Saint Christopher and Nevis", "Federation of Saint Kitts and Nevis", "kn", "St. Kitts and Nevis", "St Kitts and Nevis", "" ] }'},{feature_id:"14487780",name:"",name_en:"Taiwan",description:"sovereign state",iso_3166_1:"TW",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",region:"Asia",subregion:"Eastern Asia",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"1118231",name:"",name_en:"Bahrain",description:"sovereign state",iso_3166_1:"BH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHR",wikidata_id:"Q398",region:"Asia",subregion:"Western Asia",centroid:"[50.5534,26.025]",bounds:"[50.3152,25.5717,50.8245,26.4229]",area_sqkm:"858",color_group:"1",names:'{ "ar": [ "", " " ], "en": [ "Bahrain", "bh", "Kingdom of Bahrain", "", "BAH" ] }'},{feature_id:"7868534",name:"Kiribati",name_en:"Kiribati",description:"sovereign state",iso_3166_1:"KI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KIR",wikidata_id:"Q710",region:"Oceania",subregion:"Micronesia",centroid:"[-157.371,1.8709]",bounds:"[-174.5434,-11.4479,176.8485,4.6994]",area_sqkm:"1021",color_group:"5",names:'{ "en": [ "Kiribati", "Republic of Kiribati", "", "ki", "KIR" ] }'},{feature_id:"12980429",name:"Sngal",name_en:"Senegal",description:"sovereign state",iso_3166_1:"SN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SEN",wikidata_id:"Q1041",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-14.6562,14.5118]",bounds:"[-17.5301,12.3068,-11.3463,16.6916]",area_sqkm:"203620",color_group:"2",names:'{ "en": [ "Senegal", "Republic of Senegal", "Rpublique du Sngal", "sn", "Sngal", "", "Republique du Senegal", "SEN" ], "ff": [ "Senegaal" ], "fr": [ "Sngal", "La Rpublique du Sngal" ], "wo": [ "Senegaal" ] }'},{feature_id:"4460609",name:"",name_en:"Egypt",description:"sovereign state",iso_3166_1:"EG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EGY",wikidata_id:"Q79",region:"Africa",subregion:"Northern Africa",centroid:"[29.4676,26.9406]",bounds:"[24.6929,21.9993,36.8944,31.6717]",area_sqkm:"1121082",color_group:"4",names:'{ "ar": [ "", " ", "  " ], "en": [ "Egypt", "Republic of Egypt", "eg", "EGY", "", "Arab Republic of Egypt", "Arab Rep. Egypt", "Rep. Egypt" ], "arz": [ "" ] }'},{feature_id:"332276",name:"Golan Heights",name_en:"Golan Heights",description:"disputed territory",iso_3166_1:"D0ILSY1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.749,33.008]",bounds:"[35.6118,32.6823,35.8962,33.333]",area_sqkm:"1370",color_group:"",names:""},{feature_id:"1642529",name:"",name_en:"Bhutan",description:"sovereign state",iso_3166_1:"BT",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",region:"Asia",subregion:"Southern Asia",centroid:"[90.3571,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43658",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"528884",name:"Kula Kangri",name_en:"Kula Kangri",description:"disputed territory",iso_3166_1:"D0BTCN1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",color_group:"",names:""},{feature_id:"1315316",name:"Kauirik disputed area",name_en:"Kauirik disputed area",description:"disputed territory",iso_3166_1:"D0CNIN6",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",color_group:"",names:""},{feature_id:"2428952",name:"Burundi",name_en:"Burundi",description:"sovereign state",iso_3166_1:"BI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BDI",wikidata_id:"Q967",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.9633,-3.3895]",bounds:"[29.0007,-4.4677,30.8483,-2.31]",area_sqkm:"26936",color_group:"2",names:'{ "en": [ "Burundi", "Republic of Burundi", "bi", "", "Republika y\'Uburundi", "Gouvernement du Burundi", "BDI" ], "fr": [ "Burundi", "Rpublique du Burundi" ], "rn": [ "Uburundi", "Republika y\'Uburundi" ] }'},{feature_id:"7475312",name:"Jamaica",name_en:"Jamaica",description:"sovereign state",iso_3166_1:"JM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JAM",wikidata_id:"Q766",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-77.1598,18.1156]",bounds:"[-78.3687,17.7057,-76.1824,18.5249]",area_sqkm:"11611",color_group:"1",names:'{ "en": [ "Jamaica", "JA", "Commonwealth of Jamaica", "Jamdung", "jm", "", "JAM" ], "jam": [ "Jumieka" ] }'},{feature_id:"528884",name:"Kula Kangri",name_en:"Kula Kangri",description:"disputed territory",iso_3166_1:"D0BTCN1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",color_group:"",names:""},{feature_id:"1577460",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK2",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",color_group:"",names:""},{feature_id:"3084336",name:"",name_en:"China",description:"sovereign state",iso_3166_1:"CN",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",region:"Asia",subregion:"Eastern Asia",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"856564",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",description:"disputed territory",iso_3166_1:"D0CNIN7",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",color_group:"",names:""},{feature_id:"66064479",name:"",name_en:"Hong Kong",description:"dependent territory",iso_3166_1:"HK",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",region:"Asia",subregion:"Eastern Asia",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"66064479",name:"",name_en:"Hong Kong",description:"dependent territory",iso_3166_1:"HK",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"CN",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",region:"Asia",subregion:"Eastern Asia",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"16716022",name:"Sovereign Base Areas of Akrotiri and Dhekelia",name_en:"Sovereign Base Areas of Akrotiri and Dhekelia",description:"dependent territory",iso_3166_1:"XS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"XSB",wikidata_id:"Q37362",region:"Asia",subregion:"Western Asia",centroid:"[33.7622,35.0331]",bounds:"[32.7549,34.5623,33.9166,35.1237]",area_sqkm:"311",color_group:"6",names:'{ "en": [ "Akrotiri and Dhekelia", "Sovereign Base Areas of Akrotiri and Dhekelia" ] }'},{feature_id:"4919370",name:"Froyar",name_en:"Faroe Islands",description:"dependent territory",iso_3166_1:"FO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"DK",iso_3166_1_alpha_3:"FRO",wikidata_id:"Q4628",region:"Europe",subregion:"Northern Europe",centroid:"[-7.0174,62.1252]",bounds:"[-7.6947,61.3921,-6.2572,62.3957]",area_sqkm:"3092",color_group:"4",names:'{ "en": [ "Faroe Islands", "Faeroe Islands", "Atlantic\\/Faroe", "Fareo islands", "Faeroyene", "Far Oer", "Faeroerne", "Faer Oer", "Faroe Isles", "Faroer", "Frer", "Faeroe Isles", "Faroes", "Faroese Islands", "Foroyar", "Faeroes", "Faeroer", "Froyar", "Faroe Island", "The Faroe Islands", "Frer", "Freyjar", "Fr er", "Faeroe Is", "The Faeroe Islands", "Fryene", "Frerne", "Fare Islands", "Sheep Islands", "Froes", "fo", "" ], "fo": [ "Froyar", "Froyum", "Froya", "Faroe Islands" ] }'},{feature_id:"13177035",name:"Sierra Leone",name_en:"Sierra Leone",description:"sovereign state",iso_3166_1:"SL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLE",wikidata_id:"Q1044",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-11.875,8.4655]",bounds:"[-13.3064,6.9246,-10.2741,10.0001]",area_sqkm:"73816",color_group:"1",names:'{ "en": [ "Sierra Leone", "Republic of Sierra Leone", "sl", "", "SLE" ] }'},{feature_id:"1577460",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK2",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",color_group:"",names:""},{feature_id:"12193984",name:"Rwanda",name_en:"Rwanda",description:"sovereign state",iso_3166_1:"RW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RWA",wikidata_id:"Q1037",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.9879,-1.9431]",bounds:"[28.862,-2.8388,30.8993,-1.0479]",area_sqkm:"25346",color_group:"5",names:'{ "en": [ "Rwanda", "Republic of Rwanda", "rw", "" ], "rw": [ "Rwanda", "Repubulika y\'u Rwanda" ] }'},{feature_id:"11210937",name:"Belau",name_en:"Palau",description:"sovereign state",iso_3166_1:"PW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PLW",wikidata_id:"Q695",region:"Oceania",subregion:"Micronesia",centroid:"[134.5573,7.5288]",bounds:"[131.1199,2.9715,134.7214,8.094099999999999]",area_sqkm:"492",color_group:"2",names:'{ "en": [ "Palau", "Republic of Palau", "Belau", "Pelew", "pw", "Republic of Belau", "" ] }'},{feature_id:"1642529",name:"",name_en:"Bhutan",description:"sovereign state",iso_3166_1:"BT",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",region:"Asia",subregion:"Southern Asia",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"6230097",name:"Guernsey",name_en:"Guernsey",description:"dependent territory",iso_3166_1:"GG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"GGY",wikidata_id:"Q25230",region:"Europe",subregion:"Northern Europe",centroid:"[-2.5827,49.4632]",bounds:"[-2.6751,49.4002,-2.1586,49.7328]",area_sqkm:"124",color_group:"6",names:'{ "en": [ "Guernsey", "Bailliage de Guernesey", "Bailiwick of Guernsey", "gg", "", "XA-GG", "Lisia", "GGY", "GB-GSY", "GBG", "Great Britain Guernsey" ] }'},{feature_id:"5967950",name:"Grenada",name_en:"Grenada",description:"sovereign state",iso_3166_1:"GD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRD",wikidata_id:"Q769",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.6867,12.111]",bounds:"[-61.8026,11.9847,-61.3783,12.5402]",area_sqkm:"365",color_group:"2",names:'{ "en": [ "Grenada", "gd", "", "GRN" ] }'},{feature_id:"7213160",name:"Isle of Man",name_en:"Isle of Man",description:"dependent territory",iso_3166_1:"IM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"IMN",wikidata_id:"Q9676",region:"Europe",subregion:"Northern Europe",centroid:"[-4.5149,54.2362]",bounds:"[-4.8307,54.0431,-4.3079,54.4181]",area_sqkm:"978",color_group:"6",names:'{ "en": [ "Isle of Man", "Ellan Vannin", "Mann", "the Isle of Man", "im", "Manx", "" ] }'},{feature_id:"7606383",name:"Jersey",name_en:"Jersey",description:"dependent territory",iso_3166_1:"JE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"JEY",wikidata_id:"Q785",region:"Europe",subregion:"Northern Europe",centroid:"[-2.1258,49.213]",bounds:"[-2.2545,49.1631,-2.017,49.2623]",area_sqkm:"186",color_group:"6",names:'{ "en": [ "Jersey", "Balliwick of Jersey", "je", "Bailiwick of Jersey", "" ] }'},{feature_id:"65998863",name:"Landskapet land",name_en:"land Islands",description:"dependent territory",iso_3166_1:"AX",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FI",iso_3166_1_alpha_3:"ALA",wikidata_id:"Q5689",region:"Europe",subregion:"Northern Europe",centroid:"[19.9087,60.1993]",bounds:"[19.2633,59.7333,21.3303,60.6657]",area_sqkm:"3291",color_group:"4",names:'{ "en": [ "land Islands", "land", "Ahvenanmaa", "Aaland", "Aaland Islands", "land region", "ax", "Aland", "", "Aland Islands" ], "sv": [ "land", "Ahvenanmaa", "Landskapet land" ] }'},{feature_id:"14160073",name:"Svalbard and Jan Mayen",name_en:"Svalbard and Jan Mayen",description:"dependent territory",iso_3166_1:"SJ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NO",iso_3166_1_alpha_3:"SJM",wikidata_id:"Q25231",region:"Europe",subregion:"Northern Europe",centroid:"[18.5821,78.4378]",bounds:"[-9.086399999999999,70.8278,37.0668,80.8212]",area_sqkm:"336616",color_group:"5",names:'{ "en": [ "Svalbard", "Svaldbard", "Spitsburgen", "Svalbard Archipelago", "Svaalbard", "Svalbard Islands", "Sval\'bard", "Spitzburgen", "Svalbard Island", "Spitzbergen" ], "nb": [ "Svalbard", "Svalbardianer", "Svalbardianar" ], "ru": [ "", "", "", "" ] }'},{feature_id:"15667434",name:"Uruguay",name_en:"Uruguay",description:"sovereign state",iso_3166_1:"UY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"URY",wikidata_id:"Q77",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-55.7992,-32.5631]",bounds:"[-58.4891,-34.9735,-53.1014,-30.0855]",area_sqkm:"213064",color_group:"1",names:'{ "en": [ "Uruguay", "Repblica Oriental del Uruguay", "uy", "", "Republica Oriental del Uruguay", "URU" ], "es": [ "Uruguay", "Repblica Oriental de Uruguay" ] }'},{feature_id:"6164571",name:"Guatemala",name_en:"Guatemala",description:"sovereign state",iso_3166_1:"GT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GTM",wikidata_id:"Q774",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-90.29559999999999,15.7886]",bounds:"[-92.22490000000001,13.7402,-88.2325,17.8166]",area_sqkm:"113759",color_group:"3",names:'{ "en": [ "Guatemala", "gt", "", "Republic of Guatemala", "GUA" ], "es": [ "Guatemala", "Repblica de Guatemala", "Republica de Guatemala" ] }'},{feature_id:"7082091",name:"",name_en:"Iraq",description:"sovereign state",iso_3166_1:"IQ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRQ",wikidata_id:"Q796",region:"Asia",subregion:"Western Asia",centroid:"[42.461,33.3185]",bounds:"[38.7923,29.0583,48.6128,37.3815]",area_sqkm:"522150",color_group:"1",names:'{ "ar": [ "", " ", " " ], "en": [ "Iraq", "Republic of Iraq", "al-Irq", "Jumhriyyat al-Irq", "Komar-i raq", "iq", "", "IRQ" ], "ckb": [ "" ] }'},{feature_id:"13439176",name:"Slovenija",name_en:"Slovenia",description:"sovereign state",iso_3166_1:"SI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVN",wikidata_id:"Q215",region:"Europe",subregion:"Southern Europe",centroid:"[14.634,46.1541]",bounds:"[13.3757,45.4216,16.6118,46.8768]",area_sqkm:"29228",color_group:"2",names:'{ "de": [ "Slowenien", "Republik Slowenien" ], "en": [ "Slovenia", "Slovenija", "Republika Slovenija", "si", "", "svn", "slo", "Republic of Slovenia", "SLO" ], "hr": [ "Slovenija" ], "sl": [ "Slovenija", "Republika Slovenija" ] }'},{feature_id:"7802995",name:"Kenya",name_en:"Kenya",description:"sovereign state",iso_3166_1:"KE",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"10293416",name:"Nepal",name_en:"Nepal",description:"sovereign state",iso_3166_1:"NP",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NPL",wikidata_id:"Q837",region:"Asia",subregion:"Southern Asia",centroid:"[83.0746,28.4212]",bounds:"[80.05549999999999,26.3546,88.2016,30.448]",area_sqkm:"168299",color_group:"2",names:'{ "en": [ "Nepal", "NPL", "Federal Democratic Republic of Nepal", "NEP", "NP", "" ], "ne": [ "", "   ", "   " ], "mai": [ "", "   " ] }'},{feature_id:"13111491",name:"Seychelles",name_en:"Seychelles",description:"sovereign state",iso_3166_1:"SC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYC",wikidata_id:"Q1042",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[55.4924,-4.6841]",bounds:"[46.2029,-10.2271,56.2947,-3.7129]",area_sqkm:"498",color_group:"5",names:'{ "en": [ "Seychelles", "Republic of Seychelles", "sc", "", "SEY" ], "fr": [ "Seychelles", "Rpublique des Seychelles", "Repiblik Sesel", "", "sc", "SEY" ] }'},{feature_id:"200766",name:"",name_en:"Algeria",description:"sovereign state",iso_3166_1:"DZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DZA",wikidata_id:"Q262",region:"Africa",subregion:"Northern Africa",centroid:"[0.5969,28.4756]",bounds:"[-8.667999999999999,18.9562,11.9942,37.0897]",area_sqkm:"2639266",color_group:"5",names:'{ "ar": [ "", "   " ], "en": [ "Algeria", "Peoples Democratic Republic of Algeria", "dz", "", "ALG" ], "fr": [ "Algrie", "Rpublique algrienne dmocratique et populaire", "RADP", "dz", "Algerie" ] }'},{feature_id:"11735219",name:"Polska",name_en:"Poland",description:"sovereign state",iso_3166_1:"PL",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"POL",wikidata_id:"Q36",region:"Europe",subregion:"Eastern Europe",centroid:"[19.1972,52.0136]",bounds:"[14.1229,49.002,24.1458,54.8358]",area_sqkm:"509240",color_group:"3",names:'{ "de": [ "Polen", "Republik Polen" ], "en": [ "Poland", "POL", "Republic of Poland", "PL", "Polska", "" ], "pl": [ "Polska", "Rzeczpospolita Polska", "RP", "POL", "PL" ], "ru": [ "", "Polska", " " ] }'},{feature_id:"1052704",name:"Bahamas",name_en:"Bahamas",description:"sovereign state",iso_3166_1:"BS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHS",wikidata_id:"Q778",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-78.0455,24.7032]",bounds:"[-79.30549999999999,20.912,-72.7118,27.2629]",area_sqkm:"14194",color_group:"1",names:'{ "en": [ "Bahamas", "Commonwealth of the Bahamas", "bs", "", "The Bahamas", "Bahama Islands" ] }'},{feature_id:"13045950",name:"",name_en:"Serbia",description:"sovereign state",iso_3166_1:"RS",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",region:"Europe",subregion:"Southern Europe",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"6885481",name:"India",name_en:"India",description:"sovereign state",iso_3166_1:"IN",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",region:"Asia",subregion:"Southern Asia",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"10621090",name:"Niger",name_en:"Niger",description:"sovereign state",iso_3166_1:"NE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NER",wikidata_id:"Q1032",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[9.891299999999999,17.5768]",bounds:"[0.1673,11.6961,15.9979,23.518]",area_sqkm:"1248250",color_group:"4",names:'{ "en": [ "Niger", "Republic of Niger", "Republic Niger", "ne", "", "The Niger", "Republic of The Niger" ], "fr": [ "Niger", "Rpublique du Niger", "NIG", "NE", "ne", "" ], "ha": [ "Nijar" ] }'},{feature_id:"3805282",name:"Hrvatska",name_en:"Croatia",description:"sovereign state",iso_3166_1:"HR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HRV",wikidata_id:"Q224",region:"Europe",subregion:"Southern Europe",centroid:"[15.3255,44.7753]",bounds:"[13.4898,42.3922,19.4473,46.5549]",area_sqkm:"80481",color_group:"5",names:'{ "en": [ "Croatia", "Republic of Croatia", "HR", "HRV", "hr", "", "CRO" ], "hr": [ "Hrvatska", "Republika Hrvatska" ] }'},{feature_id:"593924",name:"Antigua and Barbuda",name_en:"Antigua and Barbuda",description:"sovereign state",iso_3166_1:"AG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATG",wikidata_id:"Q781",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.7945,17.0856]",bounds:"[-62.3473,16.9323,-61.657,17.7294]",area_sqkm:"443",color_group:"2",names:'{ "en": [ "Antigua and Barbuda", "ag", "", "ANT" ] }'},{feature_id:"15995122",name:"Vanuatu",name_en:"Vanuatu",description:"sovereign state",iso_3166_1:"VU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VUT",wikidata_id:"Q686",region:"Oceania",subregion:"Melanesia",centroid:"[167.051,-15.1569]",bounds:"[166.5414,-20.2532,170.2402,-13.0725]",area_sqkm:"12996",color_group:"6",names:'{ "bi": [ "Vanuatu" ], "en": [ "Vanuatu", "Republic of Vanuatu", "vu", "", "vut", "van", "VAN" ], "fr": [ "Vanuatu", "Rpublique de Vanuatu" ] }'},{feature_id:"7540850",name:"",name_en:"Japan",description:"sovereign state",iso_3166_1:"JP",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",region:"Asia",subregion:"Eastern Asia",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473647",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"6688865",name:"Honduras",name_en:"Honduras",description:"sovereign state",iso_3166_1:"HN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HND",wikidata_id:"Q783",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-87.2195,14.5108]",bounds:"[-89.35639999999999,12.9837,-83.1358,17.4177]",area_sqkm:"116438",color_group:"2",names:'{ "en": [ "Honduras", "hn", "", "Republic of Honduras", "Honduran Republic", "HON" ], "es": [ "Honduras", "Repblica de Honduras" ] }'},{feature_id:"5836889",name:"",name_en:"Greece",description:"sovereign state",iso_3166_1:"GR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRC",wikidata_id:"Q41",region:"Europe",subregion:"Southern Europe",centroid:"[21.7609,39.1182]",bounds:"[19.3728,34.8006,29.6457,41.7489]",area_sqkm:"170162",color_group:"2",names:'{ "el": [ "", "", " ", "  ", "  ", "" ], "en": [ "Greece", "Hellenic Republic", "Hellas", "gr", "", "Greek Republic", "GRE" ] }'},{feature_id:"8065140",name:"",name_en:"Kyrgyzstan",description:"sovereign state",iso_3166_1:"KG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KGZ",wikidata_id:"Q813",region:"Asia",subregion:"Central Asia",centroid:"[75.0168,41.2558]",bounds:"[69.26390000000001,39.1824,80.2504,43.2655]",area_sqkm:"265841",color_group:"5",names:'{ "en": [ "Kyrgyzstan", "Kyrgyz Republic", "kg", "Kirgizia", "", "KGZ" ], "ky": [ "", " , Kyrgyz Respublikasy" ], "ru": [ "", " ", " ", "" ] }'},{feature_id:"5705811",name:"Gibraltar",name_en:"Gibraltar",description:"dependent territory",iso_3166_1:"GI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"GIB",wikidata_id:"Q1410",region:"Europe",subregion:"Southern Europe",centroid:"[-5.3482,36.134]",bounds:"[-5.3677,36.1089,-5.3386,36.159]",area_sqkm:"8",color_group:"6",names:'{ "en": [ "Gibraltar", "gi", "Gib", "The Rock of Gibraltar", "" ], "es": [ "Gibraltar" ] }'},{feature_id:"7737469",name:"",name_en:"Kazakhstan",description:"sovereign state",iso_3166_1:"KZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KAZ",wikidata_id:"Q232",region:"Asia",subregion:"Central Asia",centroid:"[66.572,48.5488]",bounds:"[46.4929,40.5688,87.3147,55.4454]",area_sqkm:"4064264",color_group:"6",names:'{ "en": [ "Kazakhstan", "Republic of Kazakhstan", "kz", "Qazaqstan", "", "KAZ" ], "kk": [ "", " ", "  \'" ], "ru": [ "", " ", "" ] }'},{feature_id:"5574713",name:"Deutschland",name_en:"Germany",description:"sovereign state",iso_3166_1:"DE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DEU",wikidata_id:"Q183",region:"Europe",subregion:"Western Europe",centroid:"[10.5807,51.3283]",bounds:"[5.8663,47.2702,15.0418,55.0568]",area_sqkm:"567005",color_group:"2",names:'{ "de": [ "Deutschland", "BR Deutschland", "BRD", "Bundesrepublik Deutschland" ], "en": [ "Germany", "FRG", "BRD", "Bundesrepublik Deutschland", "Federal Republic of Germany", "de", "", "Deutschland", "GER" ], "fr": [ "Allemagne", "RFA", "Rpublique fdrale allemande", "Rpublique fdrale d\'Allemagne" ], "bar": [ "Deitschland" ], "nds": [ "Dtschland" ] }'},{feature_id:"1315316",name:"Kauirik disputed area",name_en:"Kauirik disputed area",description:"disputed territory",iso_3166_1:"D0CNIN6",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",color_group:"",names:""},{feature_id:"1708532",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",color_group:"",names:""},{feature_id:"5050438",name:"Suomi",name_en:"Finland",description:"sovereign state",iso_3166_1:"FI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FIN",wikidata_id:"Q33",region:"Europe",subregion:"Northern Europe",centroid:"[27.5283,65.4504]",bounds:"[20.5471,59.6761,31.5879,70.0924]",area_sqkm:"760676",color_group:"4",names:'{ "de": [ "Finnland", "Finland", "Suomi", "Republik Finnland", "Suomen tasavalta", "Republiken Finland" ], "en": [ "Finland", "Republic of Finland", "Finlande", "Finlandia", "Finnland", "Finnia", "Land of Thousand Lakes", "fi", "Suomi", "Suomen tasavalta", "Republiken Finland", "", "FIN" ], "fi": [ "Suomi", "Suomen tasavalta", "Finland", "Republiken Finland" ], "sv": [ "Finland", "Republiken Finland", "Suomi", "Suomen tasavalta" ] }'},{feature_id:"1774068",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS2",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",color_group:"",names:""},{feature_id:"4263996",name:"Dominica",name_en:"Dominica",description:"sovereign state",iso_3166_1:"DM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DMA",wikidata_id:"Q784",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-61.3411,15.4238]",bounds:"[-61.4801,15.2074,-61.2402,15.6399]",area_sqkm:"786",color_group:"4",names:'{ "en": [ "Dominica", "Commonwealth of Dominica", "The Commonwealth of Dominica", "", "dm", "DOM", "DMA" ] }'},{feature_id:"3346486",name:"Christmas Island",name_en:"Christmas Island",description:"dependent territory",iso_3166_1:"CX",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CXR",wikidata_id:"Q31063",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[105.6169,-10.4914]",bounds:"[105.5333,-10.5705,105.7126,-10.4124]",area_sqkm:"139",color_group:"1",names:'{ "en": [ "Christmas Island", "cx", "", "Christmas Island, Other Territories", "Christmas Island, Other Territories, Australia" ] }'},{feature_id:"9638027",name:"Moldova",name_en:"Moldova",description:"sovereign state",iso_3166_1:"MD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDA",wikidata_id:"Q217",region:"Europe",subregion:"Eastern Europe",centroid:"[28.8269,47.0019]",bounds:"[26.6197,45.4689,30.1628,48.4923]",area_sqkm:"49957",color_group:"3",names:'{ "en": [ "Moldova", "md", "Republic of Moldova", "Moldavia", "Republica Moldova", "", "MDA" ], "ro": [ "Republica Moldova", "R. Moldova", "Moldova", "RM", "Rep. Moldova" ], "uk": [ "" ] }'},{feature_id:"9310359",name:"",name_en:"Mauritania",description:"sovereign state",iso_3166_1:"MR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MRT",wikidata_id:"Q1025",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-11.4598,21.1503]",bounds:"[-17.0698,14.7202,-4.83,27.3129]",area_sqkm:"1121076",color_group:"3",names:'{ "ar": [ "", "  " ], "en": [ "Mauritania", "Islamic Republic of Mauritania", "Muritanya", "Agawej", "Gnnaar", "Murutaane", "Moritani", "mr", "", "Gannaar", "MTN" ], "fr": [ "Mauritanie", "Rpublique islamique de Mauritanie" ] }'},{feature_id:"7540850",name:"",name_en:"Japan",description:"sovereign state",iso_3166_1:"JP",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",region:"Asia",subregion:"Eastern Asia",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"4329533",name:"Repblica Dominicana",name_en:"Dominican Republic",description:"sovereign state",iso_3166_1:"DO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DOM",wikidata_id:"Q786",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-70.1246,18.7721]",bounds:"[-72.0094,17.4703,-68.32340000000001,19.9324]",area_sqkm:"51251",color_group:"5",names:'{ "en": [ "Dominican Republic", "Repblica Dominicana", "", "RD", "DR", "Republica Dominicana" ], "es": [ "Repblica Dominicana", "Republica Dominicana" ] }'},{feature_id:"69635",name:"",name_en:"Afghanistan",description:"sovereign state",iso_3166_1:"AF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AFG",wikidata_id:"Q889",region:"Asia",subregion:"Southern Asia",centroid:"[65.7792,34.0569]",bounds:"[60.4734,29.3778,74.8857,38.4911]",area_sqkm:"774224",color_group:"5",names:'{ "en": [ "Afghanistan", "af", "", "Islamic Republic of Afghanistan", "AFG" ], "fa": [ "" ], "ps": [ "" ] }'},{feature_id:"1839121",name:"Bosna i Hercegovina",name_en:"Bosnia and Herzegovina",description:"sovereign state",iso_3166_1:"BA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BIH",wikidata_id:"Q225",region:"Europe",subregion:"Southern Europe",centroid:"[17.9371,43.9344]",bounds:"[15.7212,42.5605,19.6235,45.2764]",area_sqkm:"71632",color_group:"1",names:'{ "bs": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ], "en": [ "Bosnia and Herzegovina", "Bosnia-Herzegovina", "Bosnia", "BiH", "Bosnia & Herzegovina", "B&H", "", "ba", "BIH" ], "hr": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ] }'},{feature_id:"3412007",name:"Cocos (Keeling) Islands",name_en:"Cocos (Keeling) Islands",description:"dependent territory",iso_3166_1:"CC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CCK",wikidata_id:"Q36004",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[96.83029999999999,-12.171]",bounds:"[96.8168,-12.2092,96.9295,-11.8146]",area_sqkm:"14",color_group:"1",names:'{ "en": [ "Cocos Islands", "Cocos Islands", "Keeling Islands", "Territory of the Cocos (Keeling) Islands", "cc", "" ], "ms": [ "Kepulauan Cocos" ] }'},{feature_id:"1314852",name:"",name_en:"Belarus",description:"sovereign state",iso_3166_1:"BY",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLR",wikidata_id:"Q184",region:"Europe",subregion:"Eastern Europe",centroid:"[27.883,53.7747]",bounds:"[23.1783,51.2322,32.7763,56.1721]",area_sqkm:"347178",color_group:"1",names:'{ "be": [ "", " ", " " ], "en": [ "Belarus", "", "White Russia", "White Ruthenia", "Republic of Belarus", "by", "Byeloruss", "BLR", "Bielorussia", "Belorussia", "Byelorussia" ], "ru": [ "", "", " ", " ", "" ] }'},{feature_id:"1774068",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS2",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",color_group:"",names:""},{feature_id:"987636",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",description:"disputed territory",iso_3166_1:"D0CNIN1",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",color_group:"",names:""},{feature_id:"12062909",name:"Romnia",name_en:"Romania",description:"sovereign state",iso_3166_1:"RO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ROU",wikidata_id:"Q218",region:"Europe",subregion:"Eastern Europe",centroid:"[24.2311,45.9908]",bounds:"[20.262,43.6188,29.7153,48.2654]",area_sqkm:"341465",color_group:"1",names:'{ "en": [ "Romania", "Roumania", "Rumania", "Romnia", "ro", "" ], "fr": [ "Roumanie" ], "ro": [ "Romnia", "Romania", "ro", "" ] }'},{feature_id:"791028",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",description:"disputed territory",iso_3166_1:"D0CNIN9",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",color_group:"",names:""},{feature_id:"14684378",name:"",name_en:"Thailand",description:"sovereign state",iso_3166_1:"TH",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"THA",wikidata_id:"Q869",region:"Asia",subregion:"South-eastern Asia",centroid:"[101.6544,13.1506]",bounds:"[97.34350000000001,5.612,105.6367,20.4644]",area_sqkm:"541799",color_group:"3",names:'{ "en": [ "Thailand", "Kingdom of Thailand", "th", "Siam", "", "Land of Smiles", "THA" ], "th": [ "", "Thailand", "", "", "Kingdom of Thailand", "" ] }'},{feature_id:"7934197",name:"Kosov - ",name_en:"Kosovo",description:"disputed state",iso_3166_1:"XK",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",region:"Europe",subregion:"Southern Europe",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"6623328",name:"Heard and McDonald Islands",name_en:"Heard and McDonald Islands",description:"dependent territory",iso_3166_1:"HM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"HMD",wikidata_id:"Q131198",region:"Oceania",subregion:"Australia and New Zealand",centroid:"[73.5286,-53.0783]",bounds:"[72.5827,-53.1949,73.8764,-52.9022]",area_sqkm:"612",color_group:"1",names:'{ "en": [ "Heard Island and McDonald Islands", "hm", "Territory of Heard Island and McDonald Islands", "HIMI", "", "Heard and McDonald Islands" ] }'},{feature_id:"6557795",name:"Hati",name_en:"Haiti",description:"sovereign state",iso_3166_1:"HT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HTI",wikidata_id:"Q790",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-72.29510000000001,18.9902]",bounds:"[-74.4806,18.0214,-71.622,20.0894]",area_sqkm:"28641",color_group:"2",names:'{ "en": [ "Haiti", "Republic of Haiti", "ht", "Hayti", "HT", "Rpublique d\'Hati", "Haitian Republic", "Ayiti", "", "HAI" ], "ht": [ "Ayiti", "Repiblik d Ayiti" ] }'},{feature_id:"7934197",name:"Kosov - ",name_en:"Kosovo",description:"disputed state",iso_3166_1:"XK",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",region:"Europe",subregion:"Southern Europe",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"1642529",name:"",name_en:"Bhutan",description:"sovereign state",iso_3166_1:"BT",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",region:"Asia",subregion:"Southern Asia",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"4526290",name:"El Salvador",name_en:"El Salvador",description:"sovereign state",iso_3166_1:"SV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLV",wikidata_id:"Q792",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-88.9105,13.802]",bounds:"[-90.1326,13.1524,-87.6905,14.4497]",area_sqkm:"21644",color_group:"1",names:'{ "en": [ "El Salvador", "sv", "", "Republic of El Salvador", "ESA" ], "es": [ "El Salvador", "Repblica de El Salvador", "Republica de El Salvador" ] }'},{feature_id:"7540850",name:"",name_en:"Japan",description:"sovereign state",iso_3166_1:"JP",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",region:"Asia",subregion:"Eastern Asia",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"4001848",name:"esko",name_en:"Czechia",description:"sovereign state",iso_3166_1:"CZ",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CZE",wikidata_id:"Q213",region:"Europe",subregion:"Eastern Europe",centroid:"[15.5271,49.8197]",bounds:"[12.0906,48.552,18.8592,51.0557]",area_sqkm:"121734",color_group:"1",names:'{ "cs": [ "esko", "R", "cz", "cze", "esk republika", "Czechia" ], "de": [ "Tschechien", "Tschechische Republik" ], "en": [ "Czech Republic", "CZR", "cz", "esko", "esk republika", "R", "", "cze", "CZE", "Czechia" ], "sk": [ "esko", "esk republika" ] }'},{feature_id:"3739698",name:"Costa Rica",name_en:"Costa Rica",description:"sovereign state",iso_3166_1:"CR",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CRI",wikidata_id:"Q800",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-83.6675,9.6333]",bounds:"[-87.102,5.4991,-82.5514,11.2197]",area_sqkm:"52305",color_group:"3",names:'{ "en": [ "Costa Rica", "Republic of Costa Rica", "", "cr", "CRI", "CRC" ], "es": [ "Costa Rica", "CR", "Repblica de Costa Rica", "CRC" ] }'},{feature_id:"10424481",name:"Nouvelle-Caldonie",name_en:"New Caledonia",description:"dependent territory",iso_3166_1:"NC",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"NCL",wikidata_id:"Q33788",region:"Oceania",subregion:"Melanesia",centroid:"[165.2478,-21.24]",bounds:"[158.2487,-22.848,172.09,-18.0264]",area_sqkm:"20324",color_group:"7",names:'{ "en": [ "New Caledonia", "nc", "", "Nouvelle-Caldonie" ], "fr": [ "Nouvelle-Caldonie", "La nouvelle caledonie", "Nouvelle caledonie", "Nouvelle Caldonie", "Nouvelle-Caledonie", "New Caledonia", "988" ] }'},{feature_id:"15405287",name:"Uganda",name_en:"Uganda",description:"sovereign state",iso_3166_1:"UG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UGA",wikidata_id:"Q1036",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[32.7123,1.3729]",bounds:"[29.5607,-1.4873,35.0197,4.2266]",area_sqkm:"243407",color_group:"6",names:'{ "en": [ "Uganda", "Republic of Uganda", "ug", "", "UGA" ], "lg": [ "Yuganda" ], "sw": [ "Uganda", "Jamhuri ya Uganda" ] }'},{feature_id:"15470822",name:"",name_en:"Ukraine",description:"sovereign state",iso_3166_1:"UA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UKR",wikidata_id:"Q212",region:"Europe",subregion:"Eastern Europe",centroid:"[31.0081,48.5409]",bounds:"[22.1376,44.3866,40.2256,52.3794]",area_sqkm:"922375",color_group:"5",names:'{ "en": [ "Ukraine", "UA", "UKR", "ua", "Ukrainia", "" ], "ru": [ "" ], "uk": [ "", "", "", "ua" ] }'},{feature_id:"7671921",name:"",name_en:"Jordan",description:"sovereign state",iso_3166_1:"JO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JOR",wikidata_id:"Q810",region:"Asia",subregion:"Western Asia",centroid:"[36.3091,31.3051]",bounds:"[34.9581,29.1896,39.3001,33.3746]",area_sqkm:"104752",color_group:"5",names:'{ "ar": [ "", "  ", "  " ], "en": [ "Jordan", "Hashemite Kingdom of Jordan", "JO", "JOR", "jo", "Kingdom of Jordan", "" ] }'},{feature_id:"6099036",name:"Guam",name_en:"Guam",description:"dependent territory",iso_3166_1:"GU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"GUM",wikidata_id:"Q16635",region:"Oceania",subregion:"Micronesia",centroid:"[144.7579,13.45]",bounds:"[144.618,13.2343,144.9569,13.6542]",area_sqkm:"568",color_group:"4",names:'{ "ch": [ "Guhn" ], "en": [ "Guam", "GU", "", "Territory of Guam" ] }'},{feature_id:"12718324",name:"Samoa",name_en:"Samoa",description:"sovereign state",iso_3166_1:"WS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"WSM",wikidata_id:"Q683",region:"Oceania",subregion:"Polynesia",centroid:"[-172.439,-13.6221]",bounds:"[-172.8041,-14.0772,-171.3978,-13.4398]",area_sqkm:"2956",color_group:"3",names:'{ "en": [ "Samoa", "Western Samoa", "Independent State of Samoa", "ws", "" ], "sm": [ "Smoa" ] }'},{feature_id:"987636",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",description:"disputed territory",iso_3166_1:"D0CNIN1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",color_group:"",names:""},{feature_id:"659956",name:"Liancourt Rocks",name_en:"Liancourt Rocks",description:"disputed territory",iso_3166_1:"D0JPKR1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[131.8648,37.242]",bounds:"[131.8614,37.238,131.8728,37.2477]",area_sqkm:"0",color_group:"",names:""},{feature_id:"2691110",name:"Canada",name_en:"Canada",description:"sovereign state",iso_3166_1:"CA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAN",wikidata_id:"Q16",region:"Americas",subregion:"Northern America",centroid:"[-116.9186,60.2273]",bounds:"[-141.016,41.6814,-52.6194,83.13679999999999]",area_sqkm:"25442850",color_group:"6",names:'{ "en": [ "Canada", "Dominion of Canada", "British North America", "CAN", "CA", "ca", "CDN", "" ], "fr": [ "Canada", "CA" ] }'},{feature_id:"1118708",name:"Demchok disputed area",name_en:"Demchok disputed area",description:"disputed territory",iso_3166_1:"D0CNIN3",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",color_group:"",names:""},{feature_id:"11341997",name:"Panama",name_en:"Panama",description:"sovereign state",iso_3166_1:"PA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAN",wikidata_id:"Q804",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-81.4812,8.420199999999999]",bounds:"[-83.05159999999999,7.2042,-77.13939999999999,9.6457]",area_sqkm:"76373",color_group:"4",names:'{ "en": [ "Panama", "Republic of Panama", "pa", "" ], "es": [ "Panam", "Repblica de Panam" ] }'},{feature_id:"10555557",name:"Nicaragua",name_en:"Nicaragua",description:"sovereign state",iso_3166_1:"NI",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NIC",wikidata_id:"Q811",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-85.5806,12.8787]",bounds:"[-87.69029999999999,10.7094,-82.7346,15.0294]",area_sqkm:"132107",color_group:"1",names:'{ "en": [ "Nicaragua", "ni", "", "Republic of Nicaragua", "NIC", "NI", "NCA" ], "es": [ "Nicaragua", "Repblica de Nicaragua", "Republica de Nicaragua", "Salve a ti, Nicaragua" ] }'},{feature_id:"9506973",name:"Mxico",name_en:"Mexico",description:"sovereign state",iso_3166_1:"MX",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MEX",wikidata_id:"Q96",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-102.3697,23.9442]",bounds:"[-118.3643,14.53,-86.7105,32.7188]",area_sqkm:"2168490",color_group:"6",names:'{ "en": [ "Mexico", "MX", "mx", "", "United Mexican States", "Mexican Republic", "MEX" ], "es": [ "Mxico", "mx", "Mjico", "Mejico", "Estados Unidos Mexicanos", "MX", "MEX", "Mexico", "Republica Mexicana", "Repblica Mexicana" ] }'},{feature_id:"13570254",name:"",name_en:"Somalia",description:"sovereign state",iso_3166_1:"SO",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SOM",wikidata_id:"Q1045",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[46.8166,5.1742]",bounds:"[40.9924,-1.6627,51.4156,11.9893]",area_sqkm:"643601",color_group:"2",names:'{ "ar": [ "", "", " ", "  " ], "en": [ "Somalia", "Federal Republic of Somalia", "a-ml", "Soomaaliya", "so", "", "SOM" ], "so": [ "Soomaaliya", "Soomaaliyeey toosoo" ] }'},{feature_id:"4657219",name:"Eritrea - ",name_en:"Eritrea",description:"sovereign state",iso_3166_1:"ER",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ERI",wikidata_id:"Q986",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[38.0893,15.2]",bounds:"[36.4282,12.3629,43.1588,17.9992]",area_sqkm:"126770",color_group:"3",names:'{ "en": [ "Eritrea", "State of Eritrea", "Ertr", "Iritriy", "er", "", "ERI", "IRI" ], "ti": [ "", " ", "  " ] }'},{feature_id:"15601741",name:"United Kingdom",name_en:"United Kingdom",description:"sovereign state",iso_3166_1:"GB",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GBR",wikidata_id:"Q145",region:"Europe",subregion:"Northern Europe",centroid:"[-2.1838,54.5475]",bounds:"[-8.6501,49.8668,1.763,60.8608]",area_sqkm:"415318",color_group:"6",names:'{ "en": [ "United Kingdom", "", "UK", "United Kingdom of Great Britain and Northern Ireland", "U.K.", "GBR" ], "fr": [ "Royaume-Uni", "UK", "Royaume-Uni de Grande-Bretagne et dIrlande du Nord", "Royaume Uni", "GB", "GBR" ] }'},{feature_id:"725492",name:"Senkaku Islands",name_en:"Senkaku Islands",description:"disputed territory",iso_3166_1:"D0CNJPTW1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",color_group:"",names:""},{feature_id:"10948757",name:"Northern Mariana Islands",name_en:"Northern Mariana Islands",description:"dependent territory",iso_3166_1:"MP",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"MNP",wikidata_id:"Q16644",region:"Oceania",subregion:"Micronesia",centroid:"[145.7471,15.1905]",bounds:"[144.885,14.1101,146.066,20.555]",area_sqkm:"515",color_group:"4",names:'{ "ch": [ "Notte Marinas", "Sankattan Siha Na Islas Marinas" ], "en": [ "Northern Mariana Islands", "MP", "NMI", "Commonwealth of the Northern Maria Islands", "CNMI", "" ] }'},{feature_id:"8196231",name:"Latvija",name_en:"Latvia",description:"sovereign state",iso_3166_1:"LV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LVA",wikidata_id:"Q211",region:"Europe",subregion:"Northern Europe",centroid:"[24.4397,56.9003]",bounds:"[20.9706,55.6744,28.2422,58.0856]",area_sqkm:"117706",color_group:"4",names:'{ "en": [ "Latvia", "Republic of Latvia", "Latvian Republic", "lv", "Latvija", "", "LAT", "LVA" ], "lv": [ "Latvija", "Latvijas Republika", "LAT", "LVA" ], "ru": [ "", "Latvija", " ", " " ] }'},{feature_id:"15339747",name:"Tuvalu",name_en:"Tuvalu",description:"sovereign state",iso_3166_1:"TV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUV",wikidata_id:"Q672",region:"Oceania",subregion:"Polynesia",centroid:"[178.6758,-7.4786]",bounds:"[176.0588,-10.7919,179.4781,-5.6425]",area_sqkm:"38",color_group:"1",names:'{ "en": [ "Tuvalu", "Ellice Islands", "tv", "", "TUV" ] }'},{feature_id:"1642996",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",description:"disputed territory",iso_3166_1:"D0GFSR1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",color_group:"",names:""},{feature_id:"135668",name:"Abyei",name_en:"Abyei",description:"disputed territory",iso_3166_1:"D0SDSS1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[28.4279,9.716799999999999]",bounds:"[27.833,9.3348,29.0004,10.1667]",area_sqkm:"10928",color_group:"",names:""},{feature_id:"2363892",name:"Paracel Islands",name_en:"Paracel Islands",description:"disputed territory",iso_3166_1:"D0CNTWVN1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",color_group:"",names:""},{feature_id:"201204",name:"Bir Tawil",name_en:"Bir Tawil",description:"disputed territory",iso_3166_1:"D0EGSD2",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[33.6971,21.8656]",bounds:"[33.1724,21.7249,34.0814,22.0065]",area_sqkm:"2216",color_group:"",names:""},{feature_id:"9572425",name:"Federated States of Micronesia",name_en:"Federated States of Micronesia",description:"sovereign state",iso_3166_1:"FM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FSM",wikidata_id:"Q702",region:"Oceania",subregion:"Micronesia",centroid:"[158.2402,6.8852]",bounds:"[137.4253,1.0253,163.0356,10.0906]",area_sqkm:"785",color_group:"5",names:'{ "en": [ "Federated States of Micronesia", "Micronesia", "FSM", "fm", "Fed. Sts. Micronesia", "Fed. Sts. of Micronesia", "Federated States of Micronesia, FSM", "" ] }'},{feature_id:"13832400",name:"South Sudan",name_en:"South Sudan",description:"sovereign state",iso_3166_1:"SS",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"8130686",name:"",name_en:"Laos",description:"sovereign state",iso_3166_1:"LA",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LAO",wikidata_id:"Q819",region:"Asia",subregion:"South-eastern Asia",centroid:"[102.1592,18.2605]",bounds:"[100.0818,13.9098,107.635,22.5049]",area_sqkm:"244136",color_group:"1",names:'{ "en": [ "Laos", "Lao People\'s Democratic Republic", "la", "Lao PDR", "", "LAO" ], "lo": [ "", "  " ] }'},{feature_id:"4788293",name:"Ethiopia",name_en:"Ethiopia",description:"sovereign state",iso_3166_1:"ET",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ETH",wikidata_id:"Q115",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[38.9667,9.196999999999999]",bounds:"[32.9975,3.3961,47.9878,14.8942]",area_sqkm:"1150612",color_group:"4",names:'{ "am": [ "" ], "en": [ "Ethiopia", "Federal Democratic Republic of Ethiopia", "et", "", "ETH" ], "om": [ "Itoophiyaa" ] }'},{feature_id:"1839604",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS3",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",color_group:"",names:""},{feature_id:"1053172",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",description:"disputed territory",iso_3166_1:"D0CNIN2",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",color_group:"",names:""},{feature_id:"1839604",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS3",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",color_group:"",names:""},{feature_id:"2167284",name:"Greater Tunb Island",name_en:"Greater Tunb Island",description:"disputed territory",iso_3166_1:"D0AEIR2",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[55.3051,26.2649]",bounds:"[55.2855,26.2475,55.3228,26.2821]",area_sqkm:"12",color_group:"",names:""},{feature_id:"14815449",name:"Togo",name_en:"Togo",description:"sovereign state",iso_3166_1:"TG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TGO",wikidata_id:"Q945",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[1.0401,8.6357]",bounds:"[-0.1438,6.1126,1.8091,11.1373]",area_sqkm:"57966",color_group:"3",names:'{ "ee": [ "Togo" ], "en": [ "Togo", "Togolese Republic", "Rpublique Togolaise", "tg", "", "Republique Togolaise", "TOG" ], "fr": [ "Togo", "Rpublique togolaise" ] }'},{feature_id:"15732968",name:"US Minor Outlying Islands",name_en:"US Minor Outlying Islands",description:"dependent territory",iso_3166_1:"UM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"UMI",wikidata_id:"Q16645",region:"Oceania",subregion:"Micronesia",centroid:"[166.6495,19.2894]",bounds:"[-176.6238,-0.3805,166.6575,19.3187]",area_sqkm:"29",color_group:"4",names:'{ "en": [ "United States Minor Outlying Islands", "um", "US Minor Outlying Islands", "U.S. Minor Outlying Islands", "" ] }'},{feature_id:"1970676",name:"East Jerusalem",name_en:"East Jerusalem",description:"disputed territory",iso_3166_1:"D0ILPS1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",color_group:"",names:""},{feature_id:"1839604",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS3",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",color_group:"",names:""},{feature_id:"7802995",name:"Kenya",name_en:"Kenya",description:"sovereign state",iso_3166_1:"KE",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"6885481",name:"India",name_en:"India",description:"sovereign state",iso_3166_1:"IN",disputed:"FALSE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",region:"Asia",subregion:"Southern Asia",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"2756660",name:"Cabo Verde",name_en:"Cape Verde",description:"sovereign state",iso_3166_1:"CV",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CPV",wikidata_id:"Q1011",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-23.6351,15.1204]",bounds:"[-25.3616,14.8021,-22.6572,17.2053]",area_sqkm:"4305",color_group:"1",names:'{ "en": [ "Cape Verde", "Republic of Cape Verde", "Cabo Verde", "CV", "CPV", "cv", "" ], "pt": [ "Cabo Verde", "Repblica de Cabo Verde" ], "kea": [ "Kabu Verdi", "Kauberdi", "Kab Verd" ] }'},{feature_id:"2887721",name:"Centrafrique",name_en:"Central African Republic",description:"sovereign state",iso_3166_1:"CF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAF",wikidata_id:"Q929",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[20.6627,6.638]",bounds:"[14.4152,2.2227,27.4536,11.017]",area_sqkm:"628505",color_group:"5",names:'{ "en": [ "Central African Republic", "CAR", "Kdrsse t Bafrka", "Rpublique centrafricaine", "Centrafrique", "cf", "", "Republique centrafricaine", "CAF" ], "fr": [ "Rpublique centrafricaine", "Centrafrique" ], "sg": [ "Kdrsse t Bafrka" ] }'},{feature_id:"8720528",name:" ",name_en:"North Macedonia",description:"sovereign state",iso_3166_1:"MK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MKD",wikidata_id:"Q221",region:"Europe",subregion:"Southern Europe",centroid:"[21.7483,41.6182]",bounds:"[20.453,40.8535,23.034,42.3741]",area_sqkm:"34040",color_group:"5",names:'{ "en": [ "North Macedonia", "Republic of North Macedonia", "MKD", "FYROM", "FYR Macedonia", "Macedonia", "Former Yugoslav Republic of Macedonia", "Republic of Macedonia", "", "mk" ], "mk": [ "", "  ", " ", " " ], "sq": [ "Maqedonia e Veriut", "Maqedonia", "IRJM", "Ish Republika Jugosllave e Maqedonis", "Republika e Maqedonis s Veriut" ] }'},{feature_id:"7999611",name:"",name_en:"Kuwait",description:"sovereign state",iso_3166_1:"KW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KWT",wikidata_id:"Q817",region:"Asia",subregion:"Western Asia",centroid:"[47.4272,29.3169]",bounds:"[46.558,28.5235,48.7781,30.1033]",area_sqkm:"19829",color_group:"2",names:'{ "ar": [ "", " " ], "en": [ "Kuwait", "", "State of Kuwait", "Dawlat al-Kuwait", "kw", "KUW" ] }'},{feature_id:"5509199",name:"",name_en:"Georgia",description:"sovereign state",iso_3166_1:"GE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GEO",wikidata_id:"Q230",region:"Asia",subregion:"Western Asia",centroid:"[43.6774,42.3325]",bounds:"[40.0068,41.0553,46.7365,43.5863]",area_sqkm:"93812",color_group:"5",names:'{ "en": [ "Georgia", "Republic of Georgia", "GE", "", "GEO" ], "ka": [ "", " " ], "xmf": [ "" ] }'},{feature_id:"266251",name:"American Samoa",name_en:"American Samoa",description:"dependent territory",iso_3166_1:"AS",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"ASM",wikidata_id:"Q16641",region:"Oceania",subregion:"Polynesia",centroid:"[-170.7511,-14.3018]",bounds:"[-171.0902,-14.5488,-168.1432,-11.0478]",area_sqkm:"216",color_group:"4",names:'{ "en": [ "American Samoa", "as", "East Samoa", "Samoa (American)", "Territory of American Samoa", "", "U.S. Samoa", "US Samoa", "ASA" ], "sm": [ "Amerika Smoa" ] }'},{feature_id:"725492",name:"Senkaku Islands",name_en:"Senkaku Islands",description:"disputed territory",iso_3166_1:"D0CNJPTW1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",color_group:"",names:""},{feature_id:"1511924",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",description:"disputed territory",iso_3166_1:"D0INPK1",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",color_group:"",names:""},{feature_id:"331777",name:"Andorra",name_en:"Andorra",description:"sovereign state",iso_3166_1:"AD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AND",wikidata_id:"Q228",region:"Europe",subregion:"Southern Europe",centroid:"[1.5893,42.5425]",bounds:"[1.4138,42.4288,1.7865,42.6549]",area_sqkm:"629",color_group:"1",names:'{ "ca": [ "Andorra", "el pas dels Pirineus", "Principat d\'Andorra", "les Valls d\'Andorra" ], "en": [ "Andorra", "Principality of Andorra", "Principality of the Valleys of Andorra", "ad", "", "AND" ], "es": [ "Andorra", "Principado de Andorra" ] }'},{feature_id:"2036212",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",description:"disputed territory",iso_3166_1:"D0INNP1",disputed:"TRUE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",color_group:"",names:""},{feature_id:"6361181",name:"Guin-Bissau",name_en:"Guinea-Bissau",description:"sovereign state",iso_3166_1:"GW",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNB",wikidata_id:"Q1007",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[-14.5964,11.805]",bounds:"[-16.7153,10.8643,-13.6342,12.6855]",area_sqkm:"35004",color_group:"3",names:'{ "en": [ "Guinea-Bissau", "Republic of Guinea-Bissau", "", "gw", "GBS" ], "pt": [ "Guin-Bissau", "Repblica da Guin-Bissau" ] }'},{feature_id:"7802995",name:"Kenya",name_en:"Kenya",description:"sovereign state",iso_3166_1:"KE",disputed:"FALSE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"3674157",name:"Cook Islands",name_en:"Cook Islands",description:"dependent territory",iso_3166_1:"CK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NZ",iso_3166_1_alpha_3:"COK",wikidata_id:"Q26988",region:"Oceania",subregion:"Polynesia",centroid:"[-159.7783,-21.2339]",bounds:"[-165.8794,-21.9591,-157.3206,-8.9147]",area_sqkm:"275",color_group:"3",names:'{ "en": [ "Cook Islands", "ck", "", "COK" ] }'},{feature_id:"10752170",name:"Niue",name_en:"Niue",description:"dependent territory",iso_3166_1:"NU",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NZ",iso_3166_1_alpha_3:"NIU",wikidata_id:"Q34020",region:"Oceania",subregion:"Polynesia",centroid:"[-169.8494,-19.054]",bounds:"[-169.9508,-19.1561,-169.7737,-18.9523]",area_sqkm:"283",color_group:"3",names:'{ "en": [ "Niue", "Niu", "nu", "" ] }'},{feature_id:"4132923",name:"Danmark",name_en:"Denmark",description:"sovereign state",iso_3166_1:"DK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DNK",wikidata_id:"Q35",region:"Europe",subregion:"Northern Europe",centroid:"[9.314399999999999,55.9565]",bounds:"[8.0725,54.5591,15.1974,57.7522]",area_sqkm:"76801",color_group:"4",names:'{ "da": [ "Danmark", "DK", "dk" ], "de": [ "Dnemark" ], "en": [ "Denmark", "DK", "Danmark", "DNK", "DEK", "dk", "Denmark proper", "metropolitan Denmark", "", "DEN", "TAN" ], "sv": [ "Danmark", "Danska kungariket", "DK", "Kungariket Danmark", "Kungadmet Danmark", "Kongeriget Danmark", "Danska kungadmet" ] }'},{feature_id:"7802995",name:"Kenya",name_en:"Kenya",description:"sovereign state",iso_3166_1:"KE",disputed:"FALSE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"11669685",name:"Pitcairn Islands",name_en:"Pitcairn Islands",description:"dependent territory",iso_3166_1:"PN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"PCN",wikidata_id:"Q35672",region:"Oceania",subregion:"Polynesia",centroid:"[-128.3268,-24.376]",bounds:"[-130.7562,-25.0798,-124.772,-23.9077]",area_sqkm:"59",color_group:"6",names:'{ "en": [ "Pitcairn Islands", "pn", "", "Pitcairn, Henderson, Ducie and Oeno Islands" ] }'},{feature_id:"5247151",name:"Polynsie Franaise",name_en:"French Polynesia",description:"dependent territory",iso_3166_1:"PF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"PYF",wikidata_id:"Q30971",region:"Oceania",subregion:"Polynesia",centroid:"[-149.4451,-17.688]",bounds:"[-154.7272,-27.9005,-134.4511,-7.895]",area_sqkm:"4633",color_group:"7",names:'{ "en": [ "French Polynesia", "pf", "" ], "fr": [ "Polynsie franaise", "tablissements franais de l\'Ocanie", "Polynsie Francaise", "tablissements franais de lOcanie", "F-OH", "Polynesie francaise", "987" ], "ty": [ "Prnetia farni" ] }'},{feature_id:"13504706",name:"Solomon Islands",name_en:"Solomon Islands",description:"sovereign state",iso_3166_1:"SB",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLB",wikidata_id:"Q685",region:"Oceania",subregion:"Melanesia",centroid:"[160.1487,-9.598699999999999]",bounds:"[155.5122,-12.3083,170.1925,-5.0269]",area_sqkm:"28968",color_group:"1",names:'{ "en": [ "Solomon Islands", "sb", "", "SOL" ] }'},{feature_id:"1380372",name:"Belgique - Belgi  Belgien",name_en:"Belgium",description:"sovereign state",iso_3166_1:"BE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEL",wikidata_id:"Q31",region:"Europe",subregion:"Western Europe",centroid:"[4.8641,50.5117]",bounds:"[2.5454,49.4972,6.4082,51.5051]",area_sqkm:"48408",color_group:"3",names:'{ "de": [ "Belgien" ], "en": [ "Belgium", "Kingdom of Belgium", "BEL", "be", "" ], "fr": [ "Belgique", "Royaume de Belgique", "BE" ], "nl": [ "Belgi", "Koninkrijk Belgi", "Belgie", "BE", "BEL" ] }'},{feature_id:"2232820",name:"Susta disputed area",name_en:"Susta disputed area",description:"disputed territory",iso_3166_1:"D0INNP2",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",color_group:"",names:""},{feature_id:"1905140",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS4",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",color_group:"",names:""},{feature_id:"1905140",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS4",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",color_group:"",names:""},{feature_id:"2101748",name:"Abu Musa Island",name_en:"Abu Musa Island",description:"disputed territory",iso_3166_1:"D0AEIR1",disputed:"TRUE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[55.0306,25.8779]",bounds:"[55.0093,25.8558,55.0567,25.9]",area_sqkm:"14",color_group:"",names:""},{feature_id:"10686628",name:"Nigeria",name_en:"Nigeria",description:"sovereign state",iso_3166_1:"NG",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NGA",wikidata_id:"Q1033",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[7.99,9.104900000000001]",bounds:"[2.6732,4.2707,14.6784,13.8789]",area_sqkm:"930279",color_group:"3",names:'{ "en": [ "Nigeria", "Federal Republic of Nigeria", "", "NG", "FRN", "NGA", "NGR", "Naija" ], "ha": [ "Nijeriya" ], "ig": [ "Naijiria" ], "yo": [ "Njr", "Nj", "Nigeria", "NG", "", "Orl-d Olmniira Alpap Njr" ] }'},{feature_id:"11079852",name:"",name_en:"Oman",description:"sovereign state",iso_3166_1:"OM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"OMN",wikidata_id:"Q842",region:"Asia",subregion:"Western Asia",centroid:"[57.0243,20.8862]",bounds:"[52,16.6501,59.8398,26.4049]",area_sqkm:"331175",color_group:"1",names:'{ "ar": [ " ", "", "", " " ], "en": [ "Oman", "om", "", "Sultanate of Oman" ] }'},{feature_id:"1184244",name:"Chumar East disputed area",name_en:"Chumar East disputed area",description:"disputed territory",iso_3166_1:"D0CNIN4",disputed:"TRUE",worldview:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",color_group:"",names:""},{feature_id:"11145394",name:" - Pakistan",name_en:"Pakistan",description:"sovereign state",iso_3166_1:"PK",disputed:"FALSE",worldview:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",region:"Asia",subregion:"Southern Asia",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"15208670",name:"Trkmenistan",name_en:"Turkmenistan",description:"sovereign state",iso_3166_1:"TM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TKM",wikidata_id:"Q874",region:"Asia",subregion:"Central Asia",centroid:"[58.902,39.0689]",bounds:"[52.4511,35.1308,66.6922,42.799]",area_sqkm:"633155",color_group:"3",names:'{ "en": [ "Turkmenistan", "Turkmenia", "tm", "", "TKM" ], "ru": [ "", "" ], "tk": [ "Trkmenistan", "Trkmenistan \\/ " ] }'},{feature_id:"3543159",name:"Comores -  - Komori",name_en:"Comoros",description:"sovereign state",iso_3166_1:"KM",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COM",wikidata_id:"Q970",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[43.3307,-11.6527]",bounds:"[43.2291,-12.4221,44.5406,-11.3649]",area_sqkm:"1720",color_group:"2",names:'{ "ar": [ " " ], "en": [ "Comoros", "Juzur al-Qumur", "Juzur al-Qamar", "Union of the Comoros", "Udzima wa Komori", "Union des Comores", "al-Ittid al-Qumur", "km", "", "Massiwa ya komori", "ouvoimoja wakomori", "COM" ], "fr": [ "Comores", "Union des Comores" ] }'},{feature_id:"16191729",name:"Vit Nam",name_en:"Vietnam",description:"sovereign state",iso_3166_1:"VN",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VNM",wikidata_id:"Q881",region:"Asia",subregion:"South-eastern Asia",centroid:"[107.6937,16.115]",bounds:"[102.1448,7.6024,116.6811,23.3923]",area_sqkm:"348204",color_group:"5",names:'{ "en": [ "Vietnam", "Viet Nam", "Socialist Republic of Vietnam", "", "VN", "VIE" ], "vi": [ "Vit Nam", "VN", "nc Vit", "Vit quc", "t Vit", "nc Vit Nam", "quc gia Vit Nam", "Cng ha x hi ch ngha Vit Nam" ] }'},{feature_id:"14880988",name:"Tokelau",name_en:"Tokelau",description:"dependent territory",iso_3166_1:"TK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"NZ",iso_3166_1_alpha_3:"TKL",wikidata_id:"Q36823",region:"Oceania",subregion:"Polynesia",centroid:"[-171.7801,-9.175700000000001]",bounds:"[-172.5208,-9.444000000000001,-171.1814,-8.532]",area_sqkm:"15",color_group:"3",names:'{ "en": [ "Tokelau", "tk", "" ] }'},{feature_id:"16257267",name:"Wallis-et-Futuna",name_en:"Wallis and Futuna",description:"dependent territory",iso_3166_1:"WF",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"WLF",wikidata_id:"Q35555",region:"Oceania",subregion:"Polynesia",centroid:"[-176.2086,-13.2859]",bounds:"[-178.1824,-14.3622,-176.1242,-13.1828]",area_sqkm:"153",color_group:"7",names:'{ "en": [ "Wallis and Futuna", "wf", "" ], "fr": [ "Wallis-et-Futuna", "Wallis et Futuna", "Emeni Simete", "les Wallis et Futuna", "Makape Papilio", "le de Futuna", "986", "Collectivit des les Wallis et Futuna" ] }'},{feature_id:"16388343",name:"",name_en:"Yemen",description:"sovereign state",iso_3166_1:"YE",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"YEM",wikidata_id:"Q805",region:"Asia",subregion:"Western Asia",centroid:"[47.4901,15.822]",bounds:"[41.9037,12.1081,54.5343,19]",area_sqkm:"474122",color_group:"5",names:'{ "ar": [ "", " " ], "en": [ "Yemen", "Republic of Yemen", "ye", "Rep. Yemen", "", "YEM" ] }'},{feature_id:"1774068",name:"Ilemi Triangle",name_en:"Ilemi Triangle",description:"disputed territory",iso_3166_1:"D0KESS2",disputed:"TRUE",worldview:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",color_group:"",names:""},{feature_id:"2429428",name:"Pratas Island",name_en:"Pratas Island",description:"disputed territory",iso_3166_1:"D0CNTW1",disputed:"TRUE",worldview:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",region:"",subregion:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",color_group:"",names:""},{feature_id:"4853832",name:"Falkland Islands (Islas Malvinas)",name_en:"Falkland Islands (Islas Malvinas)",description:"dependent territory",iso_3166_1:"FK",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"GB",iso_3166_1_alpha_3:"FLK",wikidata_id:"Q9648",region:"Americas",subregion:"Latin America and the Caribbean",centroid:"[-58.6015,-51.8]",bounds:"[-61.4563,-52.9191,-57.7147,-50.9967]",area_sqkm:"19459",color_group:"6",names:'{ "en": [ "Falkland Islands", "Falklands", "Malvinas", "Islas Malvinas", "fk", "flk", "" ] }'},{feature_id:"11800760",name:"Portugal",name_en:"Portugal",description:"sovereign state",iso_3166_1:"PT",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRT",wikidata_id:"Q45",region:"Europe",subregion:"Southern Europe",centroid:"[-8.296200000000001,39.6065]",bounds:"[-31.2694,30.0305,-6.1892,42.1543]",area_sqkm:"119609",color_group:"1",names:'{ "en": [ "Portugal", "Portuguese Republic", "PT", "pt", "" ], "fr": [ "Portugal" ], "pt": [ "Portugal", "Repblica Portuguesa", "Repblica de Portugal", "PT", "pt", "" ] }'},{feature_id:"2953431",name:"Tchad ",name_en:"Chad",description:"sovereign state",iso_3166_1:"TD",disputed:"FALSE",worldview:"all",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TCD",wikidata_id:"Q657",region:"Africa",subregion:"Sub-Saharan Africa",centroid:"[18.6422,15.5973]",bounds:"[13.4731,7.4418,24.0016,23.4504]",area_sqkm:"1329064",color_group:"6",names:'{ "ar": [ "", " ", "" ], "en": [ "Chad", "Republic of Chad", "Rpublique du Tchad", " ", "umhriyyat Td", "Tchad", "td", "", "Republique du Tchad", "CHA", "GUM" ], "fr": [ "Tchad", "Rpublique du Tchad" ] }'}];function se(e,t,i){const r=e.slice();return r[12]=t[i],r}function le(e){let t,i,r,n,a,o,s,l,b,x,w,S,A,k,E,I,T,C,P,L,R,M,z,D,B,F,O,N,U,q,V,j,G,K,Z,H,Q,W,J,X,Y,$,ee,te,ie,re,ne,ae,oe,se,le,ue,ce,Ie,Te,Ce=e[2].score+"",Pe=e[2].turn+"",Le=e[2].correctAnswer.wikidata.hasOwnProperty("flag"),Re=e[2].correctAnswer.name_lang+"",Me=e[2].correctAnswer.wikidata.hasOwnProperty("website"),ze=e[2].correctAnswer.wikidata.hasOwnProperty("pageBanner"),De=e[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms"),Be=e[2].correctAnswer.wikidata.hasOwnProperty("namedAfterLabels")&&e[2].correctAnswer.wikidata.namedAfterLabels.value.length,Fe=!/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function Oe(e,t){return e[2].answerIsCorrect?de:pe}let Ne=Oe(e),Ue=Ne(e),qe=e[2].turn>0&&he(e),Ve=Le&&fe(e),je=e[2].correctAnswer.name_lang!=e[2].correctAnswer.name&&_e(e),Ge=Me&&me(e),Ke=ze&&ge(e),Ze=De&&ye(e),He=Be&&ve(e),Qe=Fe&&function(e){let t,i=e[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio"),r=i&&be(e);return{c(){r&&r.c(),t=_()},m(e,i){r&&r.m(e,i),c(e,t,i)},p(e,n){4&n&&(i=e[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio")),i?r?r.p(e,n):(r=be(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&p(t)}}}(e);function We(e,t){return(null==H||4&t)&&(H=!!e[2].correctAnswer.wikidata.hasOwnProperty("capitalLabel")),H?we:xe}let Je=We(e,-1),Xe=Je(e);function Ye(e,t){return(null==ee||4&t)&&(ee=!!e[2].correctAnswer.wikidata.hasOwnProperty("officialLanguageLabels")),ee?Ae:Se}let $e=Ye(e,-1),et=$e(e);function tt(e,t){return(null==ne||4&t)&&(ne=!!e[2].correctAnswer.wikidata.hasOwnProperty("spokenLanguageLabels")),ne?Ee:ke}let it=tt(e,-1),rt=it(e);return{c(){t=d("div"),Ue.c(),i=f(),r=d("p"),n=h("Score\n          "),a=h(Ce),o=h("\n          /\n          "),s=h(Pe),l=f(),qe&&qe.c(),b=f(),x=d("progress"),A=f(),k=d("button"),k.textContent="Try another",E=f(),I=d("div"),T=d("div"),C=d("div"),P=d("div"),Ve&&Ve.c(),L=f(),R=d("div"),M=d("h3"),z=h(Re),D=f(),je&&je.c(),B=f(),Ge&&Ge.c(),F=f(),Ke&&Ke.c(),O=f(),N=d("div"),U=d("p"),Ze&&Ze.c(),q=f(),V=d("ul"),He&&He.c(),j=f(),Qe&&Qe.c(),G=f(),K=d("li"),Z=h("Capital:\n              "),Xe.c(),Q=f(),W=d("h4"),W.textContent="Languages",J=f(),X=d("ul"),Y=d("li"),$=h("Official:\n              "),et.c(),te=f(),ie=d("li"),re=h("Other:\n              "),rt.c(),ae=f(),oe=d("div"),se=h("Data source:\n          "),le=d("a"),ue=h("Wikidata"),g(x,"class","uk-progress"),x.value=w=e[2].score,g(x,"max",S=e[2].turn),v(x,"background-color","red"),g(t,"class","uk-margin-remove"),g(t,"uk-alert",""),g(k,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),v(k,"background-color","#1ba3e3"),g(k,"href","#map"),g(k,"uk-scroll",""),g(P,"class","uk-width-auto"),g(M,"class","uk-card-title uk-margin-remove-bottom"),g(R,"class","uk-width-expand uk-overflow-hidden"),g(C,"class","uk-grid-small uk-flex-middle"),g(C,"uk-grid",""),g(T,"class","uk-card-header"),g(V,"class","uk-list"),g(X,"class","uk-list"),g(N,"class","uk-card-body"),g(le,"href",ce=e[2].correctAnswer.wikidata.country.value),g(le,"class","uk-button uk-button-text"),g(oe,"class","uk-card-footer"),g(I,"class","uk-card uk-card-default uk-margin-top")},m(p,d){c(p,t,d),Ue.m(t,null),u(t,i),u(t,r),u(r,n),u(r,a),u(r,o),u(r,s),u(r,l),qe&&qe.m(r,null),u(r,b),u(r,x),c(p,A,d),c(p,k,d),c(p,E,d),c(p,I,d),u(I,T),u(T,C),u(C,P),Ve&&Ve.m(P,null),u(C,L),u(C,R),u(R,M),u(M,z),u(R,D),je&&je.m(R,null),u(R,B),Ge&&Ge.m(R,null),u(I,F),Ke&&Ke.m(I,null),u(I,O),u(I,N),u(N,U),Ze&&Ze.m(U,null),u(N,q),u(N,V),He&&He.m(V,null),u(V,j),Qe&&Qe.m(V,null),u(V,G),u(V,K),u(K,Z),Xe.m(K,null),u(N,Q),u(N,W),u(N,J),u(N,X),u(X,Y),u(Y,$),et.m(Y,null),u(X,te),u(X,ie),u(ie,re),rt.m(ie,null),u(I,ae),u(I,oe),u(oe,se),u(oe,le),u(le,ue),Ie||(Te=m(k,"click",e[4]),Ie=!0)},p(e,n){Ne===(Ne=Oe(e))&&Ue?Ue.p(e,n):(Ue.d(1),Ue=Ne(e),Ue&&(Ue.c(),Ue.m(t,i))),4&n&&Ce!==(Ce=e[2].score+"")&&y(a,Ce),4&n&&Pe!==(Pe=e[2].turn+"")&&y(s,Pe),e[2].turn>0?qe?qe.p(e,n):(qe=he(e),qe.c(),qe.m(r,b)):qe&&(qe.d(1),qe=null),4&n&&w!==(w=e[2].score)&&(x.value=w),4&n&&S!==(S=e[2].turn)&&g(x,"max",S),4&n&&(Le=e[2].correctAnswer.wikidata.hasOwnProperty("flag")),Le?Ve?Ve.p(e,n):(Ve=fe(e),Ve.c(),Ve.m(P,null)):Ve&&(Ve.d(1),Ve=null),4&n&&Re!==(Re=e[2].correctAnswer.name_lang+"")&&y(z,Re),e[2].correctAnswer.name_lang!=e[2].correctAnswer.name?je?je.p(e,n):(je=_e(e),je.c(),je.m(R,B)):je&&(je.d(1),je=null),4&n&&(Me=e[2].correctAnswer.wikidata.hasOwnProperty("website")),Me?Ge?Ge.p(e,n):(Ge=me(e),Ge.c(),Ge.m(R,null)):Ge&&(Ge.d(1),Ge=null),4&n&&(ze=e[2].correctAnswer.wikidata.hasOwnProperty("pageBanner")),ze?Ke?Ke.p(e,n):(Ke=ge(e),Ke.c(),Ke.m(I,O)):Ke&&(Ke.d(1),Ke=null),4&n&&(De=e[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms")),De?Ze?Ze.p(e,n):(Ze=ye(e),Ze.c(),Ze.m(U,null)):Ze&&(Ze.d(1),Ze=null),4&n&&(Be=e[2].correctAnswer.wikidata.hasOwnProperty("namedAfterLabels")&&e[2].correctAnswer.wikidata.namedAfterLabels.value.length),Be?He?He.p(e,n):(He=ve(e),He.c(),He.m(V,j)):He&&(He.d(1),He=null),Fe&&Qe.p(e,n),Je===(Je=We(e,n))&&Xe?Xe.p(e,n):(Xe.d(1),Xe=Je(e),Xe&&(Xe.c(),Xe.m(K,null))),$e===($e=Ye(e,n))&&et?et.p(e,n):(et.d(1),et=$e(e),et&&(et.c(),et.m(Y,null))),it===(it=tt(e,n))&&rt?rt.p(e,n):(rt.d(1),rt=it(e),rt&&(rt.c(),rt.m(ie,null))),4&n&&ce!==(ce=e[2].correctAnswer.wikidata.country.value)&&g(le,"href",ce)},d(e){e&&p(t),Ue.d(),qe&&qe.d(),e&&p(A),e&&p(k),e&&p(E),e&&p(I),Ve&&Ve.d(),je&&je.d(),Ge&&Ge.d(),Ke&&Ke.d(),Ze&&Ze.d(),He&&He.d(),Qe&&Qe.d(),Xe.d(),et.d(),rt.d(),Ie=!1,Te()}}}function ue(e){let t,i,r,n,a,o,s,l,_,m,v,b,x,w,S,A,k,E,I,T,C=e[2].correctAnswer.subregion+"",P=e[2].score+"",L=e[2].turn+"";function R(e,t){return 0==e[1].difficultyLevel?Ce:1==e[1].difficultyLevel?Te:2==e[1].difficultyLevel?Ie:void 0}let M=R(e),z=M&&M(e),D=e[2].choices,B=[];for(let t=0;t<D.length;t+=1)B[t]=Me(se(e,D,t));let F=e[2].turn>0&&ze(e);return{c(){t=d("h4"),i=h("Identify this territory in "),r=h(C),n=h(":"),a=f(),o=d("p"),s=d("small"),z&&z.c(),l=f(),_=d("div");for(let e=0;e<B.length;e+=1)B[e].c();m=f(),v=d("p"),b=h("Score\n        "),x=h(P),w=h("\n        /\n        "),S=h(L),A=f(),F&&F.c(),k=f(),E=d("progress"),g(_,"class","uk-child-width-expand uk-grid-small uk-grid-match"),g(_,"uk-grid",""),g(E,"class","uk-progress"),E.value=I=e[2].score,g(E,"max",T=e[2].turn)},m(e,p){c(e,t,p),u(t,i),u(t,r),u(t,n),c(e,a,p),c(e,o,p),u(o,s),z&&z.m(s,null),c(e,l,p),c(e,_,p);for(let e=0;e<B.length;e+=1)B[e].m(_,null);c(e,m,p),c(e,v,p),u(v,b),u(v,x),u(v,w),u(v,S),u(v,A),F&&F.m(v,null),u(v,k),u(v,E)},p(e,t){if(4&t&&C!==(C=e[2].correctAnswer.subregion+"")&&y(r,C),M===(M=R(e))&&z?z.p(e,t):(z&&z.d(1),z=M&&M(e),z&&(z.c(),z.m(s,null))),38&t){let i;for(D=e[2].choices,i=0;i<D.length;i+=1){const r=se(e,D,i);B[i]?B[i].p(r,t):(B[i]=Me(r),B[i].c(),B[i].m(_,null))}for(;i<B.length;i+=1)B[i].d(1);B.length=D.length}4&t&&P!==(P=e[2].score+"")&&y(x,P),4&t&&L!==(L=e[2].turn+"")&&y(S,L),e[2].turn>0?F?F.p(e,t):(F=ze(e),F.c(),F.m(v,k)):F&&(F.d(1),F=null),4&t&&I!==(I=e[2].score)&&(E.value=I),4&t&&T!==(T=e[2].turn)&&g(E,"max",T)},d(e){e&&p(t),e&&p(a),e&&p(o),z&&z.d(),e&&p(l),e&&p(_),function(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}(B,e),e&&p(m),e&&p(v),F&&F.d()}}}function ce(e){let t;function i(e,t){return e[2].dataLoaded?De:Be}let r=i(e),n=r(e);return{c(){n.c(),t=_()},m(e,i){n.m(e,i),c(e,t,i)},p(e,a){r===(r=i(e))&&n?n.p(e,a):(n.d(1),n=r(e),n&&(n.c(),n.m(t.parentNode,t)))},d(e){n.d(e),e&&p(t)}}}function pe(e){let t,i,r,n,a=e[2].correctAnswer.name_lang+"";return{c(){t=d("h3"),i=h("Sorry, it was "),r=h(a),n=h(" ")},m(e,a){c(e,t,a),u(t,i),u(t,r),u(t,n)},p(e,t){4&t&&a!==(a=e[2].correctAnswer.name_lang+"")&&y(r,a)},d(e){e&&p(t)}}}function de(e){let t,i,r,n,a,o=e[2].correctAnswer.name_lang+"";return{c(){t=d("h3"),i=h(o),r=h(" is "),n=d("b"),n.textContent="correct",a=h(" ")},m(e,o){c(e,t,o),u(t,i),u(t,r),u(t,n),u(t,a)},p(e,t){4&t&&o!==(o=e[2].correctAnswer.name_lang+"")&&y(i,o)},d(e){e&&p(t)}}}function he(e){let t,i,r,n=Math.round(e[2].score/e[2].turn*100)+"";return{c(){t=h("("),i=h(n),r=h("%)")},m(e,n){c(e,t,n),c(e,i,n),c(e,r,n)},p(e,t){4&t&&n!==(n=Math.round(e[2].score/e[2].turn*100)+"")&&y(i,n)},d(e){e&&p(t),e&&p(i),e&&p(r)}}}function fe(e){let t,i,r,n,a;return{c(){t=d("a"),i=d("img"),g(i,"alt",r="Flag of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=e[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",n),g(i,"class","flag svelte-1hbewvp"),g(t,"href",a=e[2].correctAnswer.wikidata.flag.value)},m(e,r){c(e,t,r),u(t,i)},p(e,o){4&o&&r!==(r="Flag of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&o&&i.src!==(n=e[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",n),4&o&&a!==(a=e[2].correctAnswer.wikidata.flag.value)&&g(t,"href",a)},d(e){e&&p(t)}}}function _e(e){let t,i,r=e[2].correctAnswer.name+"";return{c(){t=d("p"),i=h(r),g(t,"class","uk-text-meta uk-margin-remove-top")},m(e,r){c(e,t,r),u(t,i)},p(e,t){4&t&&r!==(r=e[2].correctAnswer.name+"")&&y(i,r)},d(e){e&&p(t)}}}function me(e){let t,i,r,n=e[2].correctAnswer.wikidata.website.value+"";return{c(){t=d("a"),i=h(n),g(t,"href",r=e[2].correctAnswer.wikidata.website.value)},m(e,r){c(e,t,r),u(t,i)},p(e,a){4&a&&n!==(n=e[2].correctAnswer.wikidata.website.value+"")&&y(i,n),4&a&&r!==(r=e[2].correctAnswer.wikidata.website.value)&&g(t,"href",r)},d(e){e&&p(t)}}}function ge(e){let t,i,r,n;return{c(){t=d("div"),i=d("img"),g(i,"alt",r="Header image of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=e[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",n),g(t,"class","uk-card-media-top")},m(e,r){c(e,t,r),u(t,i)},p(e,t){4&t&&r!==(r="Header image of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&t&&i.src!==(n=e[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",n)},d(e){e&&p(t)}}}function ye(e){let t,i,r,n,a,o;return{c(){t=d("a"),i=d("img"),o=h("\n              Coat of arms"),g(i,"alt",r="Coat of arms of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(n=e[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",n),g(t,"href",a=e[2].correctAnswer.wikidata.coatOfArms.value)},m(e,r){c(e,t,r),u(t,i),c(e,o,r)},p(e,o){4&o&&r!==(r="Coat of arms of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&o&&i.src!==(n=e[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",n),4&o&&a!==(a=e[2].correctAnswer.wikidata.coatOfArms.value)&&g(t,"href",a)},d(e){e&&p(t),e&&p(o)}}}function ve(e){let t,i,r,n=e[2].correctAnswer.wikidata.namedAfterLabels.value+"";return{c(){t=d("li"),i=h("Country named after:\n                "),r=h(n)},m(e,n){c(e,t,n),u(t,i),u(t,r)},p(e,t){4&t&&n!==(n=e[2].correctAnswer.wikidata.namedAfterLabels.value+"")&&y(r,n)},d(e){e&&p(t)}}}function be(e){let t,i,r,n,a,o,s,l=e[2].correctAnswer.wikidata.anthemLabel.value+"";return{c(){t=d("li"),i=h("Anthem:\n                  "),r=h(l),n=f(),a=d("audio"),o=d("source"),g(o,"type","audio/ogg"),o.src!==(s=e[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(o,"src",s),a.controls=!0},m(e,s){c(e,t,s),u(t,i),u(t,r),u(t,n),u(t,a),u(a,o)},p(e,t){4&t&&l!==(l=e[2].correctAnswer.wikidata.anthemLabel.value+"")&&y(r,l),4&t&&o.src!==(s=e[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(o,"src",s)},d(e){e&&p(t)}}}function xe(t){let i;return{c(){i=h("None")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function we(e){let t,i=e[2].correctAnswer.wikidata.capitalLabel.value+"";return{c(){t=h(i)},m(e,i){c(e,t,i)},p(e,r){4&r&&i!==(i=e[2].correctAnswer.wikidata.capitalLabel.value+"")&&y(t,i)},d(e){e&&p(t)}}}function Se(t){let i;return{c(){i=h("Unknown")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Ae(e){let t,i,r,n,a=e[2].correctAnswer.wikidata.officialLanguageLabels.value.split(",").length+"",o=e[2].correctAnswer.wikidata.officialLanguageLabels.value+"";return{c(){t=d("b"),i=h(a),r=h("\n                -\n                "),n=h(o)},m(e,a){c(e,t,a),u(t,i),c(e,r,a),c(e,n,a)},p(e,t){4&t&&a!==(a=e[2].correctAnswer.wikidata.officialLanguageLabels.value.split(",").length+"")&&y(i,a),4&t&&o!==(o=e[2].correctAnswer.wikidata.officialLanguageLabels.value+"")&&y(n,o)},d(e){e&&p(t),e&&p(r),e&&p(n)}}}function ke(t){let i;return{c(){i=h("Unknown")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Ee(e){let t,i,r,n,a=e[2].correctAnswer.wikidata.spokenLanguageLabels.value.split(",").length+"",o=e[2].correctAnswer.wikidata.spokenLanguageLabels.value+"";return{c(){t=d("b"),i=h(a),r=h("\n                -\n                "),n=h(o)},m(e,a){c(e,t,a),u(t,i),c(e,r,a),c(e,n,a)},p(e,t){4&t&&a!==(a=e[2].correctAnswer.wikidata.spokenLanguageLabels.value.split(",").length+"")&&y(i,a),4&t&&o!==(o=e[2].correctAnswer.wikidata.spokenLanguageLabels.value+"")&&y(n,o)},d(e){e&&p(t),e&&p(r),e&&p(n)}}}function Ie(e){let t,i="Marco Polo mode activated! Hiding country names "+e[1].difficultyLevels[e[1].difficultyLevel];return{c(){t=h(i)},m(e,i){c(e,t,i)},p(e,r){2&r&&i!==(i="Marco Polo mode activated! Hiding country names "+e[1].difficultyLevels[e[1].difficultyLevel])&&y(t,i)},d(e){e&&p(t)}}}function Te(e){let t,i="Ferdinand Magellan mode activated! Check your map compass for North "+e[1].difficultyLevels[e[1].difficultyLevel];return{c(){t=h(i)},m(e,i){c(e,t,i)},p(e,r){2&r&&i!==(i="Ferdinand Magellan mode activated! Check your map compass for North "+e[1].difficultyLevels[e[1].difficultyLevel])&&y(t,i)},d(e){e&&p(t)}}}function Ce(t){return{c:e,m:e,p:e,d:e}}function Pe(e){let t,i=e[12].countryLabel.value.charAt(0)+e[12].countryLabel.value.replace(/./g,"_")+"";return{c(){t=h(i)},m(e,i){c(e,t,i)},p(e,r){4&r&&i!==(i=e[12].countryLabel.value.charAt(0)+e[12].countryLabel.value.replace(/./g,"_")+"")&&y(t,i)},d(e){e&&p(t)}}}function Le(e){let t,i=e[12].countryLabel.value+"";return{c(){t=h(i)},m(e,i){c(e,t,i)},p(e,r){4&r&&i!==(i=e[12].countryLabel.value+"")&&y(t,i)},d(e){e&&p(t)}}}function Re(e){let t,i,r;return{c(){t=d("img"),g(t,"class","uk-float-right flag svelte-1hbewvp"),g(t,"alt",i="Flag of "+e[12].countryLabel.value),t.src!==(r=Ne(e[12].flag.value,50))&&g(t,"src",r)},m(e,i){c(e,t,i)},p(e,n){4&n&&i!==(i="Flag of "+e[12].countryLabel.value)&&g(t,"alt",i),4&n&&t.src!==(r=Ne(e[12].flag.value,50))&&g(t,"src",r)},d(e){e&&p(t)}}}function Me(e){let t,i,r,a,o,s,l,h,_=e[12].hasOwnProperty("flag");function y(e,t){return e[1].difficultyLevel<=1?Le:2==e[1].difficultyLevel?Pe:void 0}let v=y(e),b=v&&v(e),x=_&&Re(e);return{c(){t=d("div"),i=d("div"),r=d("b"),b&&b.c(),a=f(),x&&x.c(),s=f(),g(i,"data-qid",o=e[12].wikidata_id),g(i,"class","uk-card uk-card-default uk-card-body uk-card-hover"),g(t,"class","uk-width-1-1")},m(o,p){c(o,t,p),u(t,i),u(i,r),b&&b.m(r,null),u(i,a),x&&x.m(i,null),u(t,s),l||(h=m(t,"click",(function(){n(e[5](e[12].countryLabel.value))&&e[5](e[12].countryLabel.value).apply(this,arguments)})),l=!0)},p(t,n){v===(v=y(e=t))&&b?b.p(e,n):(b&&b.d(1),b=v&&v(e),b&&(b.c(),b.m(r,null))),4&n&&(_=e[12].hasOwnProperty("flag")),_?x?x.p(e,n):(x=Re(e),x.c(),x.m(i,null)):x&&(x.d(1),x=null),4&n&&o!==(o=e[12].wikidata_id)&&g(i,"data-qid",o)},d(e){e&&p(t),b&&b.d(),x&&x.d(),l=!1,h()}}}function ze(e){let t,i,r,n=Math.round(e[2].score/e[2].turn*100)+"";return{c(){t=h("("),i=h(n),r=h("%)")},m(e,n){c(e,t,n),c(e,i,n),c(e,r,n)},p(e,t){4&t&&n!==(n=Math.round(e[2].score/e[2].turn*100)+"")&&y(i,n)},d(e){e&&p(t),e&&p(i),e&&p(r)}}}function De(t){let i,r,n,a,o;return{c(){i=d("h1"),i.textContent="Can you guess this country?",r=f(),n=d("button"),n.innerHTML="Let&#39;s get started!<br/>",g(n,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),v(n,"background-color","#1ba3e3")},m(e,s){c(e,i,s),c(e,r,s),c(e,n,s),a||(o=m(n,"click",t[6]),a=!0)},p:e,d(e){e&&p(i),e&&p(r),e&&p(n),a=!1,o()}}}function Be(t){let i;return{c(){i=d("h4"),i.innerHTML='<div uk-spinner=""></div>\n          Loading list of countries.'},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Fe(e){let t,i,r;function n(e,t){return e[2].showIntro?ce:e[2].choices?ue:e[2].endTurn?le:void 0}let a=n(e),o=a&&a(e);return{c(){t=d("main"),o&&o.c(),i=f(),r=d("footer"),r.innerHTML='<small> Built with\n        <a href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox</a>,\n        <a href="https://www.openstreetmap.org/">OpenStreetMap</a>,\n        <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a>\n        and\n        <a href="https://svelte.dev/">Svelte</a>\n        |\n        <a href="https://github.com/planemad/map-quiz">Source code</a></small>',g(r,"class","uk-margin-top"),g(t,"id","panel"),g(t,"class","uk-position-absolute uk-padding-small uk-width-1-1")},m(e,n){c(e,t,n),o&&o.m(t,null),u(t,i),u(t,r)},p(e,r){a===(a=n(e))&&o?o.p(e,r):(o&&o.d(1),o=a&&a(e),o&&(o.c(),o.m(t,i)))},d(e){e&&p(t),o&&o.d()}}}function Oe(e){let t,i,r,n,a;function o(t){e[7].call(null,t)}t=new $({props:{$$slots:{default:[Fe]},$$scope:{ctx:e}}});let s={style:e[1].mapStyle,worldview:e[1].mapWorldview,locale:e[1].locale,qid:e[1].startingCountryQid,location:{bounds:JSON.parse(e[3].Q142.bounds),point:e[1].userLocation},data:e[3]};return void 0!==e[0]&&(s.map=e[0]),r=new W({props:s}),A.push((()=>function(e,t,i){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=i,i(e.$$.ctx[r]))}(r,"map",o))),{c(){O(t.$$.fragment),i=f(),O(r.$$.fragment)},m(e,n){N(t,e,n),c(e,i,n),N(r,e,n),a=!0},p(e,[i]){const a={};32774&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a);const o={};var s;2&i&&(o.style=e[1].mapStyle),2&i&&(o.worldview=e[1].mapWorldview),2&i&&(o.locale=e[1].locale),2&i&&(o.qid=e[1].startingCountryQid),10&i&&(o.location={bounds:JSON.parse(e[3].Q142.bounds),point:e[1].userLocation}),8&i&&(o.data=e[3]),!n&&1&i&&(n=!0,o.map=e[0],s=()=>n=!1,E.push(s)),r.$set(o)},i(e){a||(B(t.$$.fragment,e),B(r.$$.fragment,e),a=!0)},o(e){F(t.$$.fragment,e),F(r.$$.fragment,e),a=!1},d(e){U(t,e),e&&p(i),U(r,e)}}}function Ne(e,t){return`${e}?width=${t}px`}function Ue(e,t,i){let r=null,n={locale:navigator.language,language:navigator.language.split("-")[0]||"en",userLocation:null,fallbackLanguage:"en",mapWorldview:"US",mapStyle:"mapbox://styles/planemad/ckgopajx83l581bo6qr5l86yg",choices:4,viewportWidth:window.innerWidth,startingCountryQid:null,difficultyLevel:0,difficultyLevels:["","",""]},a={dataLoaded:!1,showIntro:!0,turn:0,score:0,endTurn:!1,place:null,choices:null,answerIsCorrect:null,answerHistory:{},choices:[]};i(1,n.language=n.locale.split("-")[0],n),ae("https://freegeoip.app/json/",{},2e3,"Geoip detection timed out").then((e=>{if(200!==e.status)throw new Error("Status code not OK",e);return e.json()})).then((e=>{i(1,n.mapWorldview=function(e,t){let i="US",r=e||t.split("-")[1].toUpper();return["IN","JP","CN","US"].indexOf(r)>=0&&(i=r),i}(e.country_code,n.locale),n),i(1,n.userLocation={iso_3166_1:e.country_code,iso_3166_2:e.country_code+"-"+e.region_code,lngLat:{lng:e.longitude,lat:e.latitude}},n),1==n.locale.split("-").length&&i(1,n.locale+="-"+n.userLocation.iso_3166_1,n),console.log("Detected settings",n)})).catch((e=>{console.log("error",e)}));let o=oe.filter((e=>!("all"!=e.worldview&&e.worldview!=n.mapWorldview||"sovereign state"!=e.description&&"dependent territory"!=e.description))).reduce(((e,t)=>(e[t.wikidata_id]=t,e)),{});function s(){window.scrollTo(0,0),i(2,a.endTurn=!1,a),r.setPaintProperty("country-boundaries","fill-opacity",0);let e=Object.keys(o).sort(((e,t)=>e.localeCompare(t))),t=[];for(e.forEach((e=>{Object.keys(a.answerHistory).includes(e)||t.push(e)})),i(2,a.correctAnswer=null,a);null==a.correctAnswer;){let e=t[t.length*Math.random()<<0],r=o[e];0==n.difficultyLevel&&parseInt(r.area_sqkm)>5e5&&i(2,a.correctAnswer=r,a),1==n.difficultyLevel&&parseInt(r.area_sqkm)>5e4&&i(2,a.correctAnswer=r,a),2==n.difficultyLevel&&i(2,a.correctAnswer=r,a)}i(2,a.answerHistory[a.correctAnswer.wikidata_id]=[],a),i(2,a.choices=[],a),a.choices.push(a.correctAnswer),e.forEach((e=>{e!=a.correctAnswer.wikidata_id&&o[e].subregion==a.correctAnswer.subregion&&a.choices.length<n.choices&&a.choices.push(o[e])})),e.forEach((e=>{e!=a.correctAnswer.wikidata_id&&o[e].region==a.correctAnswer.region&&a.choices.length<n.choices&&a.choices.push(o[e])})),i(2,a.choices=function(e){for(var t,i,r=e.length;0!==r;)i=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[i],e[i]=t;return e}(a.choices),a);let s=a.correctAnswer.hasOwnProperty("capital");var l;J(`\n      select ${s?"(SAMPLE(?capitalLocation) as ?capitalLocation)":""} ?anthemLabel ?anthemAudio ?coatOfArms (GROUP_CONCAT(DISTINCT ?officialLanguageLabel; SEPARATOR=", ") AS ?officialLanguageLabels) (GROUP_CONCAT(DISTINCT ?spokenLanguageLabel; SEPARATOR=", ") AS ?spokenLanguageLabels) (SAMPLE(?website) AS ?website)  (GROUP_CONCAT(DISTINCT ?namedAfterLabel; SEPARATOR=", ") AS ?namedAfterLabels) (SAMPLE(?pageBanner) as ?pageBanner) where {\n\n        OPTIONAL {  wd:${a.correctAnswer.wikidata_id}  wdt:P85 ?anthem }.\n        OPTIONAL { ?anthem wdt:P51 ?anthemAudio }.\n        \n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P94 ?coatOfArms }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P856 ?website }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P138 ?namedAfter}.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P948 ?pageBanner}.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P37 ?officialLanguage }.\n        OPTIONAL { wd:${a.correctAnswer.wikidata_id} wdt:P2936 ?spokenLanguage }.\n\n        ${s?`OPTIONAL { wd:${a.correctAnswer.capital.value.replace("http://www.wikidata.org/entity/","")} wdt:P625 ?capitalLocation }.`:""}\n        \n      service wikibase:label { bd:serviceParam wikibase:language "${n.language},${n.fallbackLanguage}". \n      ?officialLanguage rdfs:label ?officialLanguageLabel .\n      ?spokenLanguage rdfs:label ?spokenLanguageLabel .\n      ?namedAfter rdfs:label ?namedAfterLabel .\n      ?anthem rdfs:label ?anthemLabel .\n      }\n      }\n      GROUP BY ?anthemLabel ?anthemAudio ?coatOfArms\n      `).then((e=>{let t;i(2,a.correctAnswer.wikidata=Object.assign(e[0],a.correctAnswer.wikidata),a),t=e[0].hasOwnProperty("capitalLocation")?Object.assign({type:"Feature",properties:{name:a.correctAnswer.capitalLabel.value,type:"capital"}},ie(a.correctAnswer.wikidata.capitalLocation.value)):{type:"Feature",properties:{name:a.correctAnswer.name_lang,type:"centroid"},geometry:{type:"Point",coordinates:JSON.parse(a.correctAnswer.centroid)}},r.getSource("capital-location").setData(t)})),l=a.correctAnswer.iso_3166_1,["country-label","settlement-minor-label","settlement-major-label","poi-label","water-point-label","water-line-label","waterway-label","water-line-label","waterway-label","natural-point-label","natural-line-label","roads"].forEach((e=>r.setLayoutProperty(e,"visibility","none"))),r.setPaintProperty("country-boundaries","fill-color",["case",["match",["get","iso_3166_1"],[l],!0,!1],"hsla(0, 0%, 94%, 0)",["match",["get","disputed"],["true"],!0,!1],"hsla(36, 0%, 10%, 0.05)","hsla(36, 0%, 100%, 0.89)"]),r.setPaintProperty("country-boundaries-outline","line-color",["match",["get","iso_3166_1"],l,"orange","hsla(0, 0%, 100%, 0)"]),r.setPaintProperty("admin-boundaries-line","line-color",["case",["match",["get","iso_3166_1"],[l],!0,!1],"hsl(0, 0%, 100%)",["match",["get","disputed"],["true"],!0,!1],"hsla(0, 0%, 82%,0.5)",["case",["==",["get","admin_level"],0],"hsla(0, 0%, 66%,0.5)","hsla(0, 0%, 66%,0)"]]),r.setLayoutProperty("country-label","symbol-sort-key",["match",["get","iso_3166_1"],l,0,1]),r.setLayoutProperty("settlement-minor-label","symbol-sort-key",["match",["get","iso_3166_1"],l,0,1]),r.setPaintProperty("country-label","text-opacity",["match",["get","iso_3166_1"],l,1,.3]),r.setPaintProperty("settlement-minor-label","text-opacity",["match",["get","iso_3166_1"],l,1,.2]),r.setPaintProperty("settlement-major-label","text-opacity",["match",["get","iso_3166_1"],l,1,.2]),r.setPaintProperty("settlement-minor-label","icon-opacity",["match",["get","iso_3166_1"],l,1,.1]),r.setPaintProperty("settlement-major-label","icon-opacity",["match",["get","iso_3166_1"],l,1,.1]),r.setPaintProperty("roads","line-opacity",["match",["get","iso_3166_1"],l,1,0]),r.fitBounds(JSON.parse(a.correctAnswer.bounds),{padding:.1*document.getElementById("map").offsetWidth,duration:1e3,bearing:n.difficultyLevel>=1?360*Math.random():0,maxZoom:9}),r.setPaintProperty("country-boundaries","fill-opacity",1),setTimeout((function(){r.easeTo({center:JSON.parse(a.correctAnswer.centroid),zoom:r.getZoom()<5?r.getZoom():5,duration:6e3})}),1e3)}return J(`\n  # List of all countries based on ISO 3166-2 country code with their capitals \n  SELECT DISTINCT  (SAMPLE(?location) as ?location) ?country ?countryLabel (SAMPLE(?capital) as ?capital) (SAMPLE(?capitalLabel) as ?capitalLabel) (SAMPLE(?flag) as ?flag) WHERE {\n  VALUES ?country { ${Object.keys(o).join(" ").replace(/Q/g,"wd:Q")}}\n  OPTIONAL { ?country wdt:P625 ?location }.\n  OPTIONAL { ?country wdt:P41 ?flag }.\n  OPTIONAL { ?country wdt:P36 ?capital }.\n    # Retrieve labels to enable group_concat \n    # https://stackoverflow.com/questions/48855767/group-concat-not-working\n    SERVICE wikibase:label {\n    bd:serviceParam wikibase:language "${n.language},${n.fallbackLanguage}". \n    ?country rdfs:label ?countryLabel . \n    ?capital rdfs:label ?capitalLabel . \n  }\n  }\nGROUP BY ?country ?countryLabel\nORDER BY ?countryLabel\n`).then((e=>{e.forEach((e=>{let t=e.country.value.replace("http://www.wikidata.org/entity/","");e.hasOwnProperty("flag")?(Object.assign(o[t],e),i(3,o[t].wikidata=e,o),i(3,o[t].name_lang=e.countryLabel.value,o)):delete o[t]})),a.dataLoaded||(i(2,a.dataLoaded=!0,a),r.easeTo({bearing:180,duration:1e3}))})),[r,n,a,o,s,function(e){i(2,a.endTurn=!0,a),window.scrollTo(0,0),r.easeTo({zoom:3,bearing:0,duration:1e3}),["country-label","settlement-minor-label","settlement-major-label","poi-label","water-point-label","water-line-label","waterway-label","natural-point-label","natural-line-label","roads"].forEach((e=>r.setLayoutProperty(e,"visibility","visible"))),e==a.correctAnswer.countryLabel.value?(i(2,a.score+=1,a),i(2,a.answerIsCorrect=!0,a),a.answerHistory[a.correctAnswer.wikidata_id].push(!0)):(i(2,a.answerIsCorrect=!1,a),a.answerHistory[a.correctAnswer.wikidata_id].push(!1)),i(2,a.turn+=1,a),a.answerIsCorrect&&a.turn>20&&a.score/a.turn>.8?i(1,n.difficultyLevel=2,n):a.answerIsCorrect&&a.turn>10&&a.score/a.turn>.4?i(1,n.difficultyLevel=1,n):i(1,n.difficultyLevel=0,n),i(2,a.choices=null,a)},function(){i(2,a.showIntro=!1,a),s()},function(e){r=e,i(0,r)}]}return new class extends j{constructor(e){super(),V(this,e,Ue,Oe,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
