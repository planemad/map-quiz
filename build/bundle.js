var app=function(){"use strict";function e(){}function t(e){return e()}function i(){return Object.create(null)}function r(e){e.forEach(t)}function a(e){return"function"==typeof e}function n(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function o(e,t,i,r){if(e){const a=s(e,t,i,r);return e[0](a)}}function s(e,t,i,r){return e[1]&&r?function(e,t){for(const i in t)e[i]=t[i];return e}(i.ctx.slice(),e[1](r(t))):i.ctx}function l(e,t,i,r,a,n,o){const l=function(e,t,i,r){if(e[2]&&r){const a=e[2](r(i));if(void 0===t.dirty)return a;if("object"==typeof a){const e=[],i=Math.max(t.dirty.length,a.length);for(let r=0;r<i;r+=1)e[r]=t.dirty[r]|a[r];return e}return t.dirty|a}return t.dirty}(t,r,a,n);if(l){const a=s(t,i,r,o);e.p(a,l)}}function u(e,t){e.appendChild(t)}function c(e,t,i){e.insertBefore(t,i||null)}function p(e){e.parentNode.removeChild(e)}function h(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function _(){return d("")}function m(e,t,i,r){return e.addEventListener(t,i,r),()=>e.removeEventListener(t,i,r)}function g(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function v(e,t,i,r){e.style.setProperty(t,i,r?"important":"")}let b;function x(e){b=e}function w(e){(function(){if(!b)throw new Error("Function called outside component initialization");return b})().$$.on_mount.push(e)}const S=[],A=[],k=[],E=[],I=Promise.resolve();let T=!1;function C(e){k.push(e)}let P=!1;const L=new Set;function R(){if(!P){P=!0;do{for(let e=0;e<S.length;e+=1){const t=S[e];x(t),M(t.$$)}for(x(null),S.length=0;A.length;)A.pop()();for(let e=0;e<k.length;e+=1){const t=k[e];L.has(t)||(L.add(t),t())}k.length=0}while(S.length);for(;E.length;)E.pop()();T=!1,P=!1,L.clear()}}function M(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const z=new Set;let D;function B(e,t){e&&e.i&&(z.delete(e),e.i(t))}function F(e,t,i,r){if(e&&e.o){if(z.has(e))return;z.add(e),D.c.push((()=>{z.delete(e),r&&(i&&e.d(1),r())})),e.o(t)}}function O(e){e&&e.c()}function N(e,i,n){const{fragment:o,on_mount:s,on_destroy:l,after_update:u}=e.$$;o&&o.m(i,n),C((()=>{const i=s.map(t).filter(a);l?l.push(...i):r(i),e.$$.on_mount=[]})),u.forEach(C)}function U(e,t){const i=e.$$;null!==i.fragment&&(r(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function q(e,t){-1===e.$$.dirty[0]&&(S.push(e),T||(T=!0,I.then(R)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(t,a,n,o,s,l,u=[-1]){const c=b;x(t);const h=a.props||{},d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:s,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let f=!1;if(d.ctx=n?n(t,h,((e,i,...r)=>{const a=r.length?r[0]:i;return d.ctx&&s(d.ctx[e],d.ctx[e]=a)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](a),f&&q(t,e)),i})):[],d.update(),f=!0,r(d.before_update),d.fragment=!!o&&o(d.ctx),a.target){if(a.hydrate){const e=function(e){return Array.from(e.childNodes)}(a.target);d.fragment&&d.fragment.l(e),e.forEach(p)}else d.fragment&&d.fragment.c();a.intro&&B(t.$$.fragment),N(t,a.target,a.anchor),R()}x(c)}class j{$destroy(){U(this,1),this.$destroy=e}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function G(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var K=G((function(e,t){e.exports=function(){var e,t,i;function r(r,a){if(e)if(t){var n="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",o={};e(o),i=a(o),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"})))}else t=a;else e=a}return r(["exports"],(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=r;function r(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=i,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var i,r,a,n,o;for(void 0===t&&(t=1e-6),a=e,o=0;o<8;o++){if(n=this.sampleCurveX(a)-e,Math.abs(n)<t)return a;var s=this.sampleCurveDerivativeX(a);if(Math.abs(s)<1e-6)break;a-=n/s}if((a=e)<(i=0))return i;if(a>(r=1))return r;for(;i<r;){if(n=this.sampleCurveX(a),Math.abs(n-e)<t)return a;e>n?i=a:r=a,a=.5*(r-i)+i}return a},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var a=n;function n(e,t){this.x=e,this.y=t}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=r,this},_rotateAround:function(e,t){var i=Math.cos(e),r=Math.sin(e),a=t.y+r*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-r*(this.y-t.y),this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e};var o="undefined"!=typeof self?self:{},s=Math.pow(2,53)-1;function l(e,t,r,a){var n=new i(e,t,r,a);return function(e){return n.solve(e)}}var u=l(.25,.1,.25,1);function c(e,t,i){return Math.min(i,Math.max(t,e))}function p(e,t,i){var r=i-t,a=((e-t)%r+r)%r+t;return a===t?i:a}function h(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var r=0,a=t;r<a.length;r+=1){var n=a[r];for(var o in n)e[o]=n[o]}return e}var d=1;function f(){return d++}function _(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function m(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function g(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function y(e,t){return-1!==e.indexOf(t,e.length-t.length)}function v(e,t,i){var r={};for(var a in e)r[a]=t.call(i||this,e[a],a,e);return r}function b(e,t,i){var r={};for(var a in e)t.call(i||this,e[a],a,e)&&(r[a]=e[a]);return r}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?v(e,x):e}var w={};function S(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function A(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function k(e){for(var t=0,i=0,r=e.length,a=r-1,n=void 0,o=void 0;i<r;a=i++)t+=((o=e[a]).x-(n=e[i]).x)*(n.y+o.y);return t}function E(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,i,r,a){var n=r||a;return t[i]=!n||n.toLowerCase(),""})),t["max-age"]){var i=parseInt(t["max-age"],10);isNaN(i)?delete t["max-age"]:t["max-age"]=i}return t}var T=null;function C(e){if(null==T){var t=e.navigator?e.navigator.userAgent:null;T=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return T}function P(e){try{var t=o[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}var L,R,M,z,D=o.performance&&o.performance.now?o.performance.now.bind(o.performance):Date.now.bind(Date),B=o.requestAnimationFrame||o.mozRequestAnimationFrame||o.webkitRequestAnimationFrame||o.msRequestAnimationFrame,F=o.cancelAnimationFrame||o.mozCancelAnimationFrame||o.webkitCancelAnimationFrame||o.msCancelAnimationFrame,O={now:D,frame:function(e){var t=B(e);return{cancel:function(){return F(t)}}},getImageData:function(e,t){void 0===t&&(t=0);var i=o.document.createElement("canvas"),r=i.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,r.drawImage(e,0,0,e.width,e.height),r.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:function(e){return L||(L=o.document.createElement("a")),L.href=e,L.href},hardwareConcurrency:o.navigator&&o.navigator.hardwareConcurrency||4,get devicePixelRatio(){return o.devicePixelRatio},get prefersReducedMotion(){return!!o.matchMedia&&(null==R&&(R=o.matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}},N={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},U={supported:!1,testSupport:function(e){!q&&z&&(V?j(e):M=e)}},q=!1,V=!1;function j(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,z),e.isContextLost())return;U.supported=!0}catch(e){}e.deleteTexture(t),q=!0}o.document&&((z=o.document.createElement("img")).onload=function(){M&&j(M),M=null,V=!0},z.onerror=function(){q=!0,M=null},z.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var G="01",K=function(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()};function Z(e){return 0===e.indexOf("mapbox:")}K.prototype._createSkuToken=function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",G,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt},K.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},K.prototype.transformRequest=function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}},K.prototype.normalizeStyleURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeGlyphsURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeSourceURL=function(e,t){if(!Z(e))return e;var i=J(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)},K.prototype.normalizeSpriteURL=function(e,t,i,r){var a=J(e);return Z(e)?(a.path="/styles/v1"+a.path+"/sprite"+t+i,this._makeAPIURL(a,this._customAccessToken||r)):(a.path+=""+t+i,X(a))},K.prototype.normalizeTileURL=function(e,t){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Z(e))return e;var i=J(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,(O.devicePixelRatio>=2||512===t?"@2x":"")+(U.supported?".webp":"$1")),i.path=i.path.replace(/^.+\/v4\//,"/"),i.path="/v4"+i.path;var r=this._customAccessToken||function(e){for(var t=0,i=e;t<i.length;t+=1){var r=i[t].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(i.params)||N.ACCESS_TOKEN;return N.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)},K.prototype.canonicalizeTileURL=function(e,t){var i=J(e);if(!i.path.match(/(^\/v4\/)/)||!i.path.match(/\.[\w]+$/))return e;var r="mapbox://tiles/";r+=i.path.replace("/v4/","");var a=i.params;return t&&(a=a.filter((function(e){return!e.match(/^access_token=/)}))),a.length&&(r+="?"+a.join("&")),r},K.prototype.canonicalizeTileset=function(e,t){for(var i=!!t&&Z(t),r=[],a=0,n=e.tiles||[];a<n.length;a+=1){var o=n[a];Q(o)?r.push(this.canonicalizeTileURL(o,i)):r.push(o)}return r},K.prototype._makeAPIURL=function(e,t){var i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=J(N.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"/"!==r.path&&(e.path=""+r.path+e.path),!N.REQUIRE_ACCESS_TOKEN)return X(e);if(!(t=t||N.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token="+t),X(e)};var H=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Q(e){return H.test(e)}var W=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function J(e){var t=e.match(W);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function X(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}function Y(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(o.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var $=function(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};$.prototype.getStorageKey=function(e){var t,i=Y(N.ACCESS_TOKEN);return t=i&&i.u?o.btoa(encodeURIComponent(i.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):N.ACCESS_TOKEN||"",e?"mapbox.eventData."+e+":"+t:"mapbox.eventData:"+t},$.prototype.fetchEventData=function(){var e=P("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{var r=o.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var a=o.localStorage.getItem(i);a&&(this.anonId=a)}catch(e){S("Unable to read from LocalStorage")}},$.prototype.saveEventData=function(){var e=P("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{o.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&o.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){S("Unable to write to LocalStorage")}},$.prototype.processRequests=function(e){},$.prototype.postEvent=function(e,t,i,r){var a=this;if(N.EVENTS_URL){var n=J(N.EVENTS_URL);n.params.push("access_token="+(r||N.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.12.0",skuId:G,userId:this.anonId},s=t?h(o,t):o,l={url:X(n),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xe(l,(function(e){a.pendingRequest=null,i(e),a.saveEventData(),a.processRequests(r)}))}},$.prototype.queueRequest=function(e,t){this.queue.push(e),this.processRequests(t)};var ee,te,ie=function(e){function t(){e.call(this,"map.load"),this.success={},this.skuToken=""}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postMapLoadEvent=function(e,t,i,r){this.skuToken=i,(N.EVENTS_URL&&r||N.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Z(e)||Q(e)})))&&this.queueRequest({id:t,timestamp:Date.now()},r)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var i=this.queue.shift(),r=i.id,a=i.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),m(this.anonId)||(this.anonId=_()),this.postEvent(a,{skuToken:this.skuToken},(function(e){e||r&&(t.success[r]=!0)}),e))}},t}($),re=new(function(e){function t(t){e.call(this,"appUserTurnstile"),this._customAccessToken=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.postTurnstileEvent=function(e,t){N.EVENTS_URL&&N.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Z(e)||Q(e)}))&&this.queueRequest(Date.now(),t)},t.prototype.processRequests=function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var i=Y(N.ACCESS_TOKEN),r=i?i.u:N.ACCESS_TOKEN,a=r!==this.eventData.tokenU;m(this.anonId)||(this.anonId=_(),a=!0);var n=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(n),l=(n-this.eventData.lastSuccess)/864e5;a=a||l>=1||l<-1||o.getDate()!==s.getDate()}else a=!0;if(!a)return this.processRequests();this.postEvent(n,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=n,t.eventData.tokenU=r)}),e)}},t}($)),ae=re.postTurnstileEvent.bind(re),ne=new ie,oe=ne.postMapLoadEvent.bind(ne),se=500,le=50;function ue(){o.caches&&!ee&&(ee=o.caches.open("mapbox-tiles"))}function ce(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}var pe,he=1/0;function de(){return null==pe&&(pe=o.OffscreenCanvas&&new o.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof o.createImageBitmap),pe}var fe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(fe);var _e,me,ge=function(e){function t(t,i,r){401===i&&Q(r)&&(t+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),e.call(this,t),this.status=i,this.url=r,this.name=this.constructor.name,this.message=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},t}(Error),ye=E()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===o.location.protocol?o.parent:o).location.href},ve=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(ye())&&!/^\w+:/.test(i))){if(o.fetch&&o.Request&&o.AbortController&&o.Request.prototype.hasOwnProperty("signal"))return function(e,t){var i,r=new o.AbortController,a=new o.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:ye(),signal:r.signal}),n=!1,s=!1,l=(i=a.url).indexOf("sku=")>0&&Q(i);"json"===e.type&&a.headers.set("Accept","application/json");var u=function(i,r,n){if(!s){if(i&&"SecurityError"!==i.message&&S(i),r&&n)return c(r);var u=Date.now();o.fetch(a).then((function(i){if(i.ok){var r=l?i.clone():null;return c(i,r,u)}return t(new ge(i.statusText,i.status,e.url))})).catch((function(e){20!==e.code&&t(new Error(e.message))}))}},c=function(i,r,l){("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then((function(e){s||(r&&l&&function(e,t,i){if(ue(),ee){var r={status:t.status,statusText:t.statusText,headers:new o.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var a=I(t.headers.get("Cache-Control")||"");a["no-store"]||(a["max-age"]&&r.headers.set("Expires",new Date(i+1e3*a["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===te)try{new Response(new ReadableStream),te=!0}catch(e){te=!1}te?t(e.body):e.blob().then(t)}(t,(function(t){var i=new o.Response(t,r);ue(),ee&&ee.then((function(t){return t.put(ce(e.url),i)})).catch((function(e){return S(e.message)}))})))}}(a,r,l),n=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))})).catch((function(e){s||t(new Error(e.message))}))};return l?function(e,t){if(ue(),!ee)return t(null);var i=ce(e.url);ee.then((function(e){e.match(i).then((function(r){var a=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),i=I(e.headers.get("Cache-Control")||"");return t>Date.now()&&!i["no-cache"]}(r);e.delete(i),a&&e.put(i,r.clone()),t(null,r,a)})).catch(t)})).catch(t)}(a,u):u(null,null),{cancel:function(){s=!0,n||r.abort()}}}(e,t);if(E()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){var i=new o.XMLHttpRequest;for(var r in i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer"),e.headers)i.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){var r=i.response;if("json"===e.type)try{r=JSON.parse(i.response)}catch(e){return t(e)}t(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new ge(i.statusText,i.status,e.url))},i.send(e.body),{cancel:function(){return i.abort()}}}(e,t)},be=function(e,t){return ve(h(e,{type:"arrayBuffer"}),t)},xe=function(e,t){return ve(h(e,{method:"POST"}),t)};_e=[],me=0;var we=function(e,t){if(U.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),me>=N.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:e,callback:t,cancelled:!1,cancel:function(){this.cancelled=!0}};return _e.push(i),i}me++;var r=!1,a=function(){if(!r)for(r=!0,me--;_e.length&&me<N.MAX_PARALLEL_IMAGE_REQUESTS;){var e=_e.shift();e.cancelled||(e.cancel=we(e.requestParameters,e.callback).cancel)}},n=be(e,(function(e,i,r,n){a(),e?t(e):i&&(de()?function(e,t){var i=new o.Blob([new Uint8Array(e)],{type:"image/png"});o.createImageBitmap(i).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of "+e.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(i,t):function(e,t,i,r){var a=new o.Image,n=o.URL;a.onload=function(){t(null,a),n.revokeObjectURL(a.src)},a.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var s=new o.Blob([new Uint8Array(e)],{type:"image/png"});a.cacheControl=i,a.expires=r,a.src=e.byteLength?n.createObjectURL(s):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(i,t,r,n))}));return{cancel:function(){n.cancel(),a()}}};function Se(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function Ae(e,t,i){if(i&&i[e]){var r=i[e].indexOf(t);-1!==r&&i[e].splice(r,1)}}var ke=function(e,t){void 0===t&&(t={}),h(this,t),this.type=e},Ee=function(e){function t(t,i){void 0===i&&(i={}),e.call(this,"error",h({error:t},i))}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ke),Ie=function(){};Ie.prototype.on=function(e,t){return this._listeners=this._listeners||{},Se(e,t,this._listeners),this},Ie.prototype.off=function(e,t){return Ae(e,t,this._listeners),Ae(e,t,this._oneTimeListeners),this},Ie.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Se(e,t,this._oneTimeListeners),this},Ie.prototype.fire=function(e,t){"string"==typeof e&&(e=new ke(e,t||{}));var i=e.type;if(this.listens(i)){e.target=this;for(var r=0,a=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];r<a.length;r+=1)a[r].call(this,e);for(var n=0,o=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];n<o.length;n+=1){var s=o[n];Ae(i,s,this._oneTimeListeners),s.call(this,e)}var l=this._eventedParent;l&&(h(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),l.fire(e))}else e instanceof Ee&&console.error(e.error);return this},Ie.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},Ie.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this};var Te={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ce=function(e,t,i,r){this.message=(e?e+": ":"")+i,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)};function Pe(e){var t=e.value;return t?[new Ce(e.key,t,"constants have been deprecated as of v8")]:[]}function Le(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var r=0,a=t;r<a.length;r+=1){var n=a[r];for(var o in n)e[o]=n[o]}return e}function Re(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Me(e){if(Array.isArray(e))return e.map(Me);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var i in e)t[i]=Me(e[i]);return t}return Re(e)}var ze=function(e){function t(t,i){e.call(this,i),this.message=i,this.key=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Error),De=function(e,t){void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var i=0,r=t;i<r.length;i+=1){var a=r[i];this.bindings[a[0]]=a[1]}};De.prototype.concat=function(e){return new De(this,e)},De.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},De.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)};var Be={kind:"null"},Fe={kind:"number"},Oe={kind:"string"},Ne={kind:"boolean"},Ue={kind:"color"},qe={kind:"object"},Ve={kind:"value"},je={kind:"collator"},Ge={kind:"formatted"},Ke={kind:"resolvedImage"};function Ze(e,t){return{kind:"array",itemType:e,N:t}}function He(e){if("array"===e.kind){var t=He(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}var Qe=[Be,Fe,Oe,Ne,Ue,Ge,qe,Ze(Ve),Ke];function We(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!We(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var i=0,r=Qe;i<r.length;i+=1)if(!We(r[i],t))return null}return"Expected "+He(e)+" but found "+He(t)+" instead."}function Je(e,t){return t.some((function(t){return t.kind===e.kind}))}function Xe(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Ye=t((function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function a(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function n(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in i)return i[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),p=s.substr(l+1,u-(l+1)).split(","),h=1;switch(c){case"rgba":if(4!==p.length)return null;h=n(p.pop());case"rgb":return 3!==p.length?null:[a(p[0]),a(p[1]),a(p[2]),h];case"hsla":if(4!==p.length)return null;h=n(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,f=n(p[1]),_=n(p[2]),m=_<=.5?_*(f+1):_+f-_*f,g=2*_-m;return[r(255*o(g,m,d+1/3)),r(255*o(g,m,d)),r(255*o(g,m,d-1/3)),h];default:return null}}return null}}catch(e){}})).parseCSSColor,$e=function(e,t,i,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=i,this.a=r};$e.parse=function(e){if(e){if(e instanceof $e)return e;if("string"==typeof e){var t=Ye(e);if(t)return new $e(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},$e.prototype.toString=function(){var e=this.toArray(),t=e[1],i=e[2],r=e[3];return"rgba("+Math.round(e[0])+","+Math.round(t)+","+Math.round(i)+","+r+")"},$e.prototype.toArray=function(){var e=this.a;return 0===e?[0,0,0,0]:[255*this.r/e,255*this.g/e,255*this.b/e,e]},$e.black=new $e(0,0,0,1),$e.white=new $e(1,1,1,1),$e.transparent=new $e(0,0,0,0),$e.red=new $e(1,0,0,1);var et=function(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};et.prototype.compare=function(e,t){return this.collator.compare(e,t)},et.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tt=function(e,t,i,r,a){this.text=e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=a},it=function(e){this.sections=e};it.fromString=function(e){return new it([new tt(e,null,null,null,null)])},it.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))},it.factory=function(e){return e instanceof it?e:it.fromString(e)},it.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")},it.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var r=i[t];if(r.image)e.push(["image",r.image.name]);else{e.push(r.text);var a={};r.fontStack&&(a["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(a["font-scale"]=r.scale),r.textColor&&(a["text-color"]=["rgba"].concat(r.textColor.toArray())),e.push(a)}}return e};var rt=function(e){this.name=e.name,this.available=e.available};function at(e,t,i,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function nt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof $e)return!0;if(e instanceof et)return!0;if(e instanceof it)return!0;if(e instanceof rt)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!nt(i[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!nt(e[r]))return!1;return!0}return!1}function ot(e){if(null===e)return Be;if("string"==typeof e)return Oe;if("boolean"==typeof e)return Ne;if("number"==typeof e)return Fe;if(e instanceof $e)return Ue;if(e instanceof et)return je;if(e instanceof it)return Ge;if(e instanceof rt)return Ke;if(Array.isArray(e)){for(var t,i=e.length,r=0,a=e;r<a.length;r+=1){var n=ot(a[r]);if(t){if(t===n)continue;t=Ve;break}t=n}return Ze(t||Ve,i)}return qe}function st(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof $e||e instanceof it||e instanceof rt?e.toString():JSON.stringify(e)}rt.prototype.toString=function(){return this.name},rt.fromString=function(e){return e?new rt({name:e,available:!1}):null},rt.prototype.serialize=function(){return["image",this.name]};var lt=function(e,t){this.type=e,this.value=t};lt.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!nt(e[1]))return t.error("invalid value");var i=e[1],r=ot(i),a=t.expectedType;return"array"!==r.kind||0!==r.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(r=a),new lt(r,i)},lt.prototype.evaluate=function(){return this.value},lt.prototype.eachChild=function(){},lt.prototype.outputDefined=function(){return!0},lt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof $e?["rgba"].concat(this.value.toArray()):this.value instanceof it?this.value.serialize():this.value};var ut=function(e){this.name="ExpressionEvaluationError",this.message=e};ut.prototype.toJSON=function(){return this.message};var ct={string:Oe,number:Fe,boolean:Ne,object:qe},pt=function(e,t){this.type=e,this.args=t};pt.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i,r=1,a=e[0];if("array"===a){var n,o;if(e.length>2){var s=e[1];if("string"!=typeof s||!(s in ct)||"object"===s)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=ct[s],r++}else n=Ve;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}i=Ze(n,o)}else i=ct[a];for(var l=[];r<e.length;r++){var u=t.parse(e[r],r,Ve);if(!u)return null;l.push(u)}return new pt(i,l)},pt.prototype.evaluate=function(e){for(var t=0;t<this.args.length;t++){var i=this.args[t].evaluate(e);if(!We(this.type,ot(i)))return i;if(t===this.args.length-1)throw new ut("Expected value to be of type "+He(this.type)+", but found "+He(ot(i))+" instead.")}return null},pt.prototype.eachChild=function(e){this.args.forEach(e)},pt.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},pt.prototype.serialize=function(){var e=this.type,t=[e.kind];if("array"===e.kind){var i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))};var ht=function(e){this.type=Ge,this.sections=e};ht.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");for(var r=[],a=!1,n=1;n<=e.length-1;++n){var o=e[n];if(a&&"object"==typeof o&&!Array.isArray(o)){a=!1;var s=null;if(o["font-scale"]&&!(s=t.parse(o["font-scale"],1,Fe)))return null;var l=null;if(o["text-font"]&&!(l=t.parse(o["text-font"],1,Ze(Oe))))return null;var u=null;if(o["text-color"]&&!(u=t.parse(o["text-color"],1,Ue)))return null;var c=r[r.length-1];c.scale=s,c.font=l,c.textColor=u}else{var p=t.parse(e[n],1,Ve);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new ht(r)},ht.prototype.evaluate=function(e){return new it(this.sections.map((function(t){var i=t.content.evaluate(e);return ot(i)===Ke?new tt("",i,null,null,null):new tt(st(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))},ht.prototype.eachChild=function(e){for(var t=0,i=this.sections;t<i.length;t+=1){var r=i[t];e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}},ht.prototype.outputDefined=function(){return!1},ht.prototype.serialize=function(){for(var e=["format"],t=0,i=this.sections;t<i.length;t+=1){var r=i[t];e.push(r.content.serialize());var a={};r.scale&&(a["font-scale"]=r.scale.serialize()),r.font&&(a["text-font"]=r.font.serialize()),r.textColor&&(a["text-color"]=r.textColor.serialize()),e.push(a)}return e};var dt=function(e){this.type=Ke,this.input=e};dt.parse=function(e,t){if(2!==e.length)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Oe);return i?new dt(i):t.error("No image name provided.")},dt.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=rt.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i},dt.prototype.eachChild=function(e){e(this.input)},dt.prototype.outputDefined=function(){return!1},dt.prototype.serialize=function(){return["image",this.input.serialize()]};var ft={"to-boolean":Ne,"to-color":Ue,"to-number":Fe,"to-string":Oe},_t=function(e,t){this.type=e,this.args=t};_t.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");var i=e[0];if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");for(var r=ft[i],a=[],n=1;n<e.length;n++){var o=t.parse(e[n],n,Ve);if(!o)return null;a.push(o)}return new _t(r,a)},_t.prototype.evaluate=function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){for(var t,i,r=0,a=this.args;r<a.length;r+=1){if(i=null,(t=a[r].evaluate(e))instanceof $e)return t;if("string"==typeof t){var n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&!(i=t.length<3||t.length>4?"Invalid rbga value "+JSON.stringify(t)+": expected an array containing either three or four numeric values.":at(t[0],t[1],t[2],t[3])))return new $e(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ut(i||"Could not parse color from value '"+("string"==typeof t?t:String(JSON.stringify(t)))+"'")}if("number"===this.type.kind){for(var o=null,s=0,l=this.args;s<l.length;s+=1){if(null===(o=l[s].evaluate(e)))return 0;var u=Number(o);if(!isNaN(u))return u}throw new ut("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?it.fromString(st(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?rt.fromString(st(this.args[0].evaluate(e))):st(this.args[0].evaluate(e))},_t.prototype.eachChild=function(e){this.args.forEach(e)},_t.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},_t.prototype.serialize=function(){if("formatted"===this.type.kind)return new ht([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new dt(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild((function(t){e.push(t.serialize())})),e};var mt=["Unknown","Point","LineString","Polygon"],gt=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};gt.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},gt.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?mt[this.feature.type]:this.feature.type:null},gt.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},gt.prototype.canonicalID=function(){return this.canonical},gt.prototype.properties=function(){return this.feature&&this.feature.properties||{}},gt.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=$e.parse(e)),t};var yt=function(e,t,i,r){this.name=e,this.type=t,this._evaluate=i,this.args=r};yt.prototype.evaluate=function(e){return this._evaluate(e,this.args)},yt.prototype.eachChild=function(e){this.args.forEach(e)},yt.prototype.outputDefined=function(){return!1},yt.prototype.serialize=function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))},yt.parse=function(e,t){var i,r=e[0],a=yt.definitions[r];if(!a)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var n=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,s=o.filter((function(t){var i=t[0];return!Array.isArray(i)||i.length===e.length-1})),l=null,u=0,c=s;u<c.length;u+=1){var p=c[u],h=p[0],d=p[1];l=new Ut(t.registry,t.path,null,t.scope);for(var f=[],_=!1,m=1;m<e.length;m++){var g=e[m],y=Array.isArray(h)?h[m-1]:h.type,v=l.parse(g,1+f.length,y);if(!v){_=!0;break}f.push(v)}if(!_)if(Array.isArray(h)&&h.length!==f.length)l.error("Expected "+h.length+" arguments, but found "+f.length+" instead.");else{for(var b=0;b<f.length;b++){var x=Array.isArray(h)?h[b]:h.type,w=f[b];l.concat(b+1).checkSubtype(x,w.type)}if(0===l.errors.length)return new yt(r,n,d,f)}}if(1===s.length)(i=t.errors).push.apply(i,l.errors);else{for(var S=(s.length?s:o).map((function(e){var t;return t=e[0],Array.isArray(t)?"("+t.map(He).join(", ")+")":"("+He(t.type)+"...)"})).join(" | "),A=[],k=1;k<e.length;k++){var E=t.parse(e[k],1+A.length);if(!E)return null;A.push(He(E.type))}t.error("Expected arguments of type "+S+", but found ("+A.join(", ")+") instead.")}return null},yt.register=function(e,t){for(var i in yt.definitions=t,t)e[i]=yt};var vt=function(e,t,i){this.type=je,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t};function bt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function xt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function wt(e,t){var i=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,a=Math.pow(2,t.z);return[Math.round(i*a*8192),Math.round(r*a*8192)]}function St(e,t,i){return t[1]>e[1]!=i[1]>e[1]&&e[0]<(i[0]-t[0])*(e[1]-t[1])/(i[1]-t[1])+t[0]}function At(e,t){for(var i,r,a,n,o,s,l,u=!1,c=0,p=t.length;c<p;c++)for(var h=t[c],d=0,f=h.length;d<f-1;d++){if((n=(i=e)[0]-(r=h[d])[0])*(l=i[1]-(a=h[d+1])[1])-(s=i[0]-a[0])*(o=i[1]-r[1])==0&&n*s<=0&&o*l<=0)return!1;St(e,h[d],h[d+1])&&(u=!u)}return u}function kt(e,t){for(var i=0;i<t.length;i++)if(At(e,t[i]))return!0;return!1}function Et(e,t,i,r){var a=r[0]-i[0],n=r[1]-i[1],o=(e[0]-i[0])*n-a*(e[1]-i[1]),s=(t[0]-i[0])*n-a*(t[1]-i[1]);return o>0&&s<0||o<0&&s>0}function It(e,t,i){for(var r=0,a=i;r<a.length;r+=1)for(var n=a[r],o=0;o<n.length-1;++o)if(0!=(p=[(c=n[o+1])[0]-(u=n[o])[0],c[1]-u[1]])[0]*(h=[(l=t)[0]-(s=e)[0],l[1]-s[1]])[1]-p[1]*h[0]&&Et(s,l,u,c)&&Et(u,c,s,l))return!0;var s,l,u,c,p,h;return!1}function Tt(e,t){for(var i=0;i<e.length;++i)if(!At(e[i],t))return!1;for(var r=0;r<e.length-1;++r)if(It(e[r],e[r+1],t))return!1;return!0}function Ct(e,t){for(var i=0;i<t.length;i++)if(Tt(e,t[i]))return!0;return!1}function Pt(e,t,i){for(var r=[],a=0;a<e.length;a++){for(var n=[],o=0;o<e[a].length;o++){var s=wt(e[a][o],i);bt(t,s),n.push(s)}r.push(n)}return r}function Lt(e,t,i){for(var r=[],a=0;a<e.length;a++){var n=Pt(e[a],t,i);r.push(n)}return r}function Rt(e,t,i,r){if(e[0]<i[0]||e[0]>i[2]){var a=.5*r,n=e[0]-i[0]>a?-r:i[0]-e[0]>a?r:0;0===n&&(n=e[0]-i[2]>a?-r:i[2]-e[0]>a?r:0),e[0]+=n}bt(t,e)}function Mt(e,t,i,r){for(var a=8192*Math.pow(2,r.z),n=[8192*r.x,8192*r.y],o=[],s=0,l=e;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var p=c[u],h=[p.x+n[0],p.y+n[1]];Rt(h,t,i,a),o.push(h)}return o}function zt(e,t,i,r){for(var a,n=8192*Math.pow(2,r.z),o=[8192*r.x,8192*r.y],s=[],l=0,u=e;l<u.length;l+=1){for(var c=[],p=0,h=u[l];p<h.length;p+=1){var d=h[p],f=[d.x+o[0],d.y+o[1]];bt(t,f),c.push(f)}s.push(c)}if(t[2]-t[0]<=n/2){(a=t)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var _=0,m=s;_<m.length;_+=1)for(var g=0,y=m[_];g<y.length;g+=1)Rt(y[g],t,i,n)}return s}vt.parse=function(e,t){if(2!==e.length)return t.error("Expected one argument.");var i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");var r=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Ne);if(!r)return null;var a=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Ne);if(!a)return null;var n=null;return i.locale&&!(n=t.parse(i.locale,1,Oe))?null:new vt(r,a,n)},vt.prototype.evaluate=function(e){return new et(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)},vt.prototype.eachChild=function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)},vt.prototype.outputDefined=function(){return!1},vt.prototype.serialize=function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]};var Dt=function(e,t){this.type=Ne,this.geojson=e,this.geometries=t};function Bt(e){if(e instanceof yt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Dt)return!1;var t=!0;return e.eachChild((function(e){t&&!Bt(e)&&(t=!1)})),t}function Ft(e){if(e instanceof yt&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!Ft(e)&&(t=!1)})),t}function Ot(e,t){if(e instanceof yt&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild((function(e){i&&!Ot(e,t)&&(i=!1)})),i}Dt.parse=function(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(nt(e[1])){var i=e[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var a=i.features[r].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new Dt(i,i.features[r].geometry)}else if("Feature"===i.type){var n=i.geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new Dt(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new Dt(i,i)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Dt.prototype.evaluate=function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){var n=Pt(t.coordinates,r,a),o=Mt(e.geometry(),i,r,a);if(!xt(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!At(l[s],n))return!1}if("MultiPolygon"===t.type){var u=Lt(t.coordinates,r,a),c=Mt(e.geometry(),i,r,a);if(!xt(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!kt(h[p],u))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if("Polygon"===t.type){var n=Pt(t.coordinates,r,a),o=zt(e.geometry(),i,r,a);if(!xt(i,r))return!1;for(var s=0,l=o;s<l.length;s+=1)if(!Tt(l[s],n))return!1}if("MultiPolygon"===t.type){var u=Lt(t.coordinates,r,a),c=zt(e.geometry(),i,r,a);if(!xt(i,r))return!1;for(var p=0,h=c;p<h.length;p+=1)if(!Ct(h[p],u))return!1}return!0}(e,this.geometries)}return!1},Dt.prototype.eachChild=function(){},Dt.prototype.outputDefined=function(){return!0},Dt.prototype.serialize=function(){return["within",this.geojson]};var Nt=function(e,t){this.type=t.type,this.name=e,this.boundExpression=t};Nt.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new Nt(i,t.scope.get(i)):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},Nt.prototype.evaluate=function(e){return this.boundExpression.evaluate(e)},Nt.prototype.eachChild=function(){},Nt.prototype.outputDefined=function(){return!1},Nt.prototype.serialize=function(){return["var",this.name]};var Ut=function(e,t,i,r,a){void 0===t&&(t=[]),void 0===r&&(r=new De),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map((function(e){return"["+e+"]"})).join(""),this.scope=r,this.errors=a,this.expectedType=i};function qt(e,t){for(var i,r=e.length-1,a=0,n=r,o=0;a<=n;)if((i=e[o=Math.floor((a+n)/2)])<=t){if(o===r||t<e[o+1])return o;a=o+1}else{if(!(i>t))throw new ut("Input is not a number.");n=o-1}return 0}Ut.prototype.parse=function(e,t,i,r,a){return void 0===a&&(a={}),t?this.concat(t,i,r)._parse(e,a):this._parse(e,a)},Ut.prototype._parse=function(e,t){function i(e,t,i){return"assert"===i?new pt(t,[e]):"coerce"===i?new _t(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var a=this.registry[r];if(a){var n=a.parse(e,this);if(!n)return null;if(this.expectedType){var o=this.expectedType,s=n.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else n=i(n,o,t.typeAnnotation||"coerce");else n=i(n,o,t.typeAnnotation||"assert")}if(!(n instanceof lt)&&"resolvedImage"!==n.type.kind&&function e(t){if(t instanceof Nt)return e(t.boundExpression);if(t instanceof yt&&"error"===t.name)return!1;if(t instanceof vt)return!1;if(t instanceof Dt)return!1;var i=t instanceof _t||t instanceof pt,r=!0;return t.eachChild((function(t){r=i?r&&e(t):r&&t instanceof lt})),!!r&&Bt(t)&&Ot(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(n)){var l=new gt;try{n=new lt(n.type,n.evaluate(l))}catch(e){return this.error(e.message),null}}return n}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof e+" instead.")},Ut.prototype.concat=function(e,t,i){var r="number"==typeof e?this.path.concat(e):this.path,a=i?this.scope.concat(i):this.scope;return new Ut(this.registry,r,t||null,a,this.errors)},Ut.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var r=""+this.key+t.map((function(e){return"["+e+"]"})).join("");this.errors.push(new ze(r,e))},Ut.prototype.checkSubtype=function(e,t){var i=We(e,t);return i&&this.error(i),i};var Vt=function(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var r=0,a=i;r<a.length;r+=1){var n=a[r],o=n[1];this.labels.push(n[0]),this.outputs.push(o)}};function jt(e,t,i){return e*(1-i)+t*i}Vt.parse=function(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");var i=t.parse(e[1],1,Fe);if(!i)return null;var r=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);for(var n=1;n<e.length;n+=2){var o=1===n?-1/0:e[n],s=e[n+1],l=n,u=n+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=t.parse(s,u,a);if(!c)return null;a=a||c.type,r.push([o,c])}return new Vt(a,i,r)},Vt.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);var a=t.length;return r>=t[a-1]?i[a-1].evaluate(e):i[qt(t,r)].evaluate(e)},Vt.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},Vt.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},Vt.prototype.serialize=function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e};var Gt=Object.freeze({__proto__:null,number:jt,color:function(e,t,i){return new $e(jt(e.r,t.r,i),jt(e.g,t.g,i),jt(e.b,t.b,i),jt(e.a,t.a,i))},array:function(e,t,i){return e.map((function(e,r){return jt(e,t[r],i)}))}}),Kt=6/29*3*(6/29),Zt=Math.PI/180,Ht=180/Math.PI;function Qt(e){return e>.008856451679035631?Math.pow(e,1/3):e/Kt+4/29}function Wt(e){return e>6/29?e*e*e:Kt*(e-4/29)}function Jt(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Xt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Yt(e){var t=Xt(e.r),i=Xt(e.g),r=Xt(e.b),a=Qt((.4124564*t+.3575761*i+.1804375*r)/.95047),n=Qt((.2126729*t+.7151522*i+.072175*r)/1);return{l:116*n-16,a:500*(a-n),b:200*(n-Qt((.0193339*t+.119192*i+.9503041*r)/1.08883)),alpha:e.a}}function $t(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Wt(t),i=.95047*Wt(i),r=1.08883*Wt(r),new $e(Jt(3.2404542*i-1.5371385*t-.4985314*r),Jt(-.969266*i+1.8760108*t+.041556*r),Jt(.0556434*i-.2040259*t+1.0572252*r),e.alpha)}function ei(e,t,i){var r=t-e;return e+i*(r>180||r<-180?r-360*Math.round(r/360):r)}var ti={forward:Yt,reverse:$t,interpolate:function(e,t,i){return{l:jt(e.l,t.l,i),a:jt(e.a,t.a,i),b:jt(e.b,t.b,i),alpha:jt(e.alpha,t.alpha,i)}}},ii={forward:function(e){var t=Yt(e),i=t.l,r=t.a,a=t.b,n=Math.atan2(a,r)*Ht;return{h:n<0?n+360:n,c:Math.sqrt(r*r+a*a),l:i,alpha:e.a}},reverse:function(e){var t=e.h*Zt,i=e.c;return $t({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:ei(e.h,t.h,i),c:jt(e.c,t.c,i),l:jt(e.l,t.l,i),alpha:jt(e.alpha,t.alpha,i)}}},ri=Object.freeze({__proto__:null,lab:ti,hcl:ii}),ai=function(e,t,i,r,a){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var n=0,o=a;n<o.length;n+=1){var s=o[n],l=s[1];this.labels.push(s[0]),this.outputs.push(l)}};function ni(e,t,i,r){var a=r-i,n=e-i;return 0===a?0:1===t?n/a:(Math.pow(t,n)-1)/(Math.pow(t,a)-1)}ai.interpolationFactor=function(e,t,r,a){var n=0;if("exponential"===e.name)n=ni(t,e.base,r,a);else if("linear"===e.name)n=ni(t,1,r,a);else if("cubic-bezier"===e.name){var o=e.controlPoints;n=new i(o[0],o[1],o[2],o[3]).solve(ni(t,1,r,a))}return n},ai.parse=function(e,t){var i=e[0],r=e[1],a=e[2],n=e.slice(3);if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var o=r[1];if("number"!=typeof o)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:o}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(e){return"number"!=typeof e||e<0||e>1})))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(a=t.parse(a,2,Fe)))return null;var l=[],u=null;"interpolate-hcl"===i||"interpolate-lab"===i?u=Ue:t.expectedType&&"value"!==t.expectedType.kind&&(u=t.expectedType);for(var c=0;c<n.length;c+=2){var p=n[c],h=n[c+1],d=c+3,f=c+4;if("number"!=typeof p)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=p)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var _=t.parse(h,f,u);if(!_)return null;u=u||_.type,l.push([p,_])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new ai(u,i,r,a,l):t.error("Type "+He(u)+" is not interpolatable.")},ai.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);var a=t.length;if(r>=t[a-1])return i[a-1].evaluate(e);var n=qt(t,r),o=ai.interpolationFactor(this.interpolation,r,t[n],t[n+1]),s=i[n].evaluate(e),l=i[n+1].evaluate(e);return"interpolate"===this.operator?Gt[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?ii.reverse(ii.interpolate(ii.forward(s),ii.forward(l),o)):ti.reverse(ti.interpolate(ti.forward(s),ti.forward(l),o))},ai.prototype.eachChild=function(e){e(this.input);for(var t=0,i=this.outputs;t<i.length;t+=1)e(i[t])},ai.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))},ai.prototype.serialize=function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t};var oi=function(e,t){this.type=e,this.args=t};oi.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null,r=t.expectedType;r&&"value"!==r.kind&&(i=r);for(var a=[],n=0,o=e.slice(1);n<o.length;n+=1){var s=t.parse(o[n],1+a.length,i,void 0,{typeAnnotation:"omit"});if(!s)return null;i=i||s.type,a.push(s)}var l=r&&a.some((function(e){return We(r,e.type)}));return new oi(l?Ve:i,a)},oi.prototype.evaluate=function(e){for(var t,i=null,r=0,a=0,n=this.args;a<n.length&&(r++,(i=n[a].evaluate(e))&&i instanceof rt&&!i.available&&(t||(t=i.name),i=null,r===this.args.length&&(i=t)),null===i);a+=1);return i},oi.prototype.eachChild=function(e){this.args.forEach(e)},oi.prototype.outputDefined=function(){return this.args.every((function(e){return e.outputDefined()}))},oi.prototype.serialize=function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e};var si=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};si.prototype.evaluate=function(e){return this.result.evaluate(e)},si.prototype.eachChild=function(e){for(var t=0,i=this.bindings;t<i.length;t+=1)e(i[t][1]);e(this.result)},si.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],r=1;r<e.length-1;r+=2){var a=e[r];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",r);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",r);var n=t.parse(e[r+1],r+1);if(!n)return null;i.push([a,n])}var o=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return o?new si(i,o):null},si.prototype.outputDefined=function(){return this.result.outputDefined()},si.prototype.serialize=function(){for(var e=["let"],t=0,i=this.bindings;t<i.length;t+=1){var r=i[t];e.push(r[0],r[1].serialize())}return e.push(this.result.serialize()),e};var li=function(e,t,i){this.type=e,this.index=t,this.input=i};li.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Fe),r=t.parse(e[2],2,Ze(t.expectedType||Ve));return i&&r?new li(r.type.itemType,i,r):null},li.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ut("Array index out of bounds: "+t+" < 0.");if(t>=i.length)throw new ut("Array index out of bounds: "+t+" > "+(i.length-1)+".");if(t!==Math.floor(t))throw new ut("Array index must be an integer, but found "+t+" instead.");return i[t]},li.prototype.eachChild=function(e){e(this.index),e(this.input)},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ui=function(e,t){this.type=Ne,this.needle=e,this.haystack=t};ui.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Ve);return i&&r?Je(i.type,[Ne,Oe,Fe,Be,Ve])?new ui(i,r):t.error("Expected first argument to be of type boolean, string, number or null, but found "+He(i.type)+" instead"):null},ui.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!Xe(t,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+He(ot(t))+" instead.");if(!Xe(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+He(ot(i))+" instead.");return i.indexOf(t)>=0},ui.prototype.eachChild=function(e){e(this.needle),e(this.haystack)},ui.prototype.outputDefined=function(){return!0},ui.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ci=function(e,t,i){this.type=Fe,this.needle=e,this.haystack=t,this.fromIndex=i};ci.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Ve);if(!i||!r)return null;if(!Je(i.type,[Ne,Oe,Fe,Be,Ve]))return t.error("Expected first argument to be of type boolean, string, number or null, but found "+He(i.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,Fe);return a?new ci(i,r,a):null}return new ci(i,r)},ci.prototype.evaluate=function(e){var t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Xe(t,["boolean","string","number","null"]))throw new ut("Expected first argument to be of type boolean, string, number or null, but found "+He(ot(t))+" instead.");if(!Xe(i,["string","array"]))throw new ut("Expected second argument to be of type array or string, but found "+He(ot(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(e);return i.indexOf(t,r)}return i.indexOf(t)},ci.prototype.eachChild=function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pi=function(e,t,i,r,a,n){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=a,this.otherwise=n};pi.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var a={},n=[],o=2;o<e.length-1;o+=2){var s=e[o],l=e[o+1];Array.isArray(s)||(s=[s]);var u=t.concat(o);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,ot(h)))return null}else i=ot(h);if(void 0!==a[String(h)])return u.error("Branch labels must be unique.");a[String(h)]=n.length}var d=t.parse(l,o,r);if(!d)return null;r=r||d.type,n.push(d)}var f=t.parse(e[1],1,Ve);if(!f)return null;var _=t.parse(e[e.length-1],e.length-1,r);return _?"value"!==f.type.kind&&t.concat(1).checkSubtype(i,f.type)?null:new pi(i,r,f,a,n,_):null},pi.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(ot(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},pi.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},pi.prototype.outputDefined=function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()},pi.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],i=[],r={},a=0,n=Object.keys(this.cases).sort();a<n.length;a+=1){var o=n[a];void 0===(p=r[this.cases[o]])?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[p][1].push(o)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=i;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];t.push(1===h.length?s(h[0]):h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};var hi=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};hi.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var r=[],a=1;a<e.length-1;a+=2){var n=t.parse(e[a],a,Ne);if(!n)return null;var o=t.parse(e[a+1],a+1,i);if(!o)return null;r.push([n,o]),i=i||o.type}var s=t.parse(e[e.length-1],e.length-1,i);return s?new hi(i,r,s):null},hi.prototype.evaluate=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var r=i[t],a=r[1];if(r[0].evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},hi.prototype.eachChild=function(e){for(var t=0,i=this.branches;t<i.length;t+=1){var r=i[t],a=r[1];e(r[0]),e(a)}e(this.otherwise)},hi.prototype.outputDefined=function(){return this.branches.every((function(e){return e[1].outputDefined()}))&&this.otherwise.outputDefined()},hi.prototype.serialize=function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e};var di=function(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r};function fi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function _i(e,t,i,r){return 0===r.compare(t,i)}function mi(e,t,i){var r="=="!==e&&"!="!==e;return function(){function a(e,t,i){this.type=Ne,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return a.parse=function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var i=e[0],n=t.parse(e[1],1,Ve);if(!n)return null;if(!fi(i,n.type))return t.concat(1).error('"'+i+"\" comparisons are not supported for type '"+He(n.type)+"'.");var o=t.parse(e[2],2,Ve);if(!o)return null;if(!fi(i,o.type))return t.concat(2).error('"'+i+"\" comparisons are not supported for type '"+He(o.type)+"'.");if(n.type.kind!==o.type.kind&&"value"!==n.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '"+He(n.type)+"' and '"+He(o.type)+"'.");r&&("value"===n.type.kind&&"value"!==o.type.kind?n=new pt(o.type,[n]):"value"!==n.type.kind&&"value"===o.type.kind&&(o=new pt(n.type,[o])));var s=null;if(4===e.length){if("string"!==n.type.kind&&"string"!==o.type.kind&&"value"!==n.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,je)))return null}return new a(n,o,s)},a.prototype.evaluate=function(a){var n=this.lhs.evaluate(a),o=this.rhs.evaluate(a);if(r&&this.hasUntypedArgument){var s=ot(n),l=ot(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new ut('Expected arguments for "'+e+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var u=ot(n),c=ot(o);if("string"!==u.kind||"string"!==c.kind)return t(a,n,o)}return this.collator?i(a,n,o,this.collator.evaluate(a)):t(a,n,o)},a.prototype.eachChild=function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t},a}()}di.parse=function(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,Ve),r=t.parse(e[2],2,Fe);if(!i||!r)return null;if(!Je(i.type,[Ze(Ve),Oe,Ve]))return t.error("Expected first argument to be of type array or string, but found "+He(i.type)+" instead");if(4===e.length){var a=t.parse(e[3],3,Fe);return a?new di(i.type,i,r,a):null}return new di(i.type,i,r)},di.prototype.evaluate=function(e){var t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Xe(t,["string","array"]))throw new ut("Expected first argument to be of type array or string, but found "+He(ot(t))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(i,r)}return t.slice(i)},di.prototype.eachChild=function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)},di.prototype.outputDefined=function(){return!1},di.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var gi=mi("==",(function(e,t,i){return t===i}),_i),yi=mi("!=",(function(e,t,i){return t!==i}),(function(e,t,i,r){return!_i(0,t,i,r)})),vi=mi("<",(function(e,t,i){return t<i}),(function(e,t,i,r){return r.compare(t,i)<0})),bi=mi(">",(function(e,t,i){return t>i}),(function(e,t,i,r){return r.compare(t,i)>0})),xi=mi("<=",(function(e,t,i){return t<=i}),(function(e,t,i,r){return r.compare(t,i)<=0})),wi=mi(">=",(function(e,t,i){return t>=i}),(function(e,t,i,r){return r.compare(t,i)>=0})),Si=function(e,t,i,r,a){this.type=Oe,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=a};Si.parse=function(e,t){if(3!==e.length)return t.error("Expected two arguments.");var i=t.parse(e[1],1,Fe);if(!i)return null;var r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");var a=null;if(r.locale&&!(a=t.parse(r.locale,1,Oe)))return null;var n=null;if(r.currency&&!(n=t.parse(r.currency,1,Oe)))return null;var o=null;if(r["min-fraction-digits"]&&!(o=t.parse(r["min-fraction-digits"],1,Fe)))return null;var s=null;return r["max-fraction-digits"]&&!(s=t.parse(r["max-fraction-digits"],1,Fe))?null:new Si(i,a,n,o,s)},Si.prototype.evaluate=function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))},Si.prototype.eachChild=function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]};var Ai=function(e){this.type=Fe,this.input=e};Ai.parse=function(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error("Expected argument of type string or array, but found "+He(i.type)+" instead."):new Ai(i):null},Ai.prototype.evaluate=function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ut("Expected value to be of type string or array, but found "+He(ot(t))+" instead.")},Ai.prototype.eachChild=function(e){e(this.input)},Ai.prototype.outputDefined=function(){return!1},Ai.prototype.serialize=function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e};var ki={"==":gi,"!=":yi,">":bi,"<":vi,">=":wi,"<=":xi,array:pt,at:li,boolean:pt,case:hi,coalesce:oi,collator:vt,format:ht,image:dt,in:ui,"index-of":ci,interpolate:ai,"interpolate-hcl":ai,"interpolate-lab":ai,length:Ai,let:si,literal:lt,match:pi,number:pt,"number-format":Si,object:pt,slice:di,step:Vt,string:pt,"to-boolean":_t,"to-color":_t,"to-number":_t,"to-string":_t,var:Nt,within:Dt};function Ei(e,t){var i=t[0],r=t[1],a=t[2],n=t[3];i=i.evaluate(e),r=r.evaluate(e),a=a.evaluate(e);var o=n?n.evaluate(e):1,s=at(i,r,a,o);if(s)throw new ut(s);return new $e(i/255*o,r/255*o,a/255*o,o)}function Ii(e,t){return e in t}function Ti(e,t){var i=t[e];return void 0===i?null:i}function Ci(e){return{type:e}}function Pi(e){return{result:"success",value:e}}function Li(e){return{result:"error",value:e}}function Ri(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Mi(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zi(e){return!!e.expression&&e.expression.interpolated}function Di(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Bi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Fi(e){return e}function Oi(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Ni(e,t,i,r,a){return Oi(typeof i===a?r[i]:void 0,e.default,t.default)}function Ui(e,t,i){if("number"!==Di(i))return Oi(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];var a=qt(e.stops.map((function(e){return e[0]})),i);return e.stops[a][1]}function qi(e,t,i){var r=void 0!==e.base?e.base:1;if("number"!==Di(i))return Oi(e.default,t.default);var a=e.stops.length;if(1===a)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[a-1][0])return e.stops[a-1][1];var n=qt(e.stops.map((function(e){return e[0]})),i),o=function(e,t,i,r){var a=r-i,n=e-i;return 0===a?0:1===t?n/a:(Math.pow(t,n)-1)/(Math.pow(t,a)-1)}(i,r,e.stops[n][0],e.stops[n+1][0]),s=e.stops[n][1],l=e.stops[n+1][1],u=Gt[t.type]||Fi;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=ri[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=s.evaluate.apply(void 0,e),r=l.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==r)return u(i,r,o)}}:u(s,l,o)}function Vi(e,t,i){return"color"===t.type?i=$e.parse(i):"formatted"===t.type?i=it.fromString(i.toString()):"resolvedImage"===t.type?i=rt.fromString(i.toString()):Di(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),Oi(i,e.default,t.default)}yt.register(ki,{error:[{kind:"error"},[Oe],function(e,t){throw new ut(t[0].evaluate(e))}],typeof:[Oe,[Ve],function(e,t){return He(ot(t[0].evaluate(e)))}],"to-rgba":[Ze(Fe,4),[Ue],function(e,t){return t[0].evaluate(e).toArray()}],rgb:[Ue,[Fe,Fe,Fe],Ei],rgba:[Ue,[Fe,Fe,Fe,Fe],Ei],has:{type:Ne,overloads:[[[Oe],function(e,t){return Ii(t[0].evaluate(e),e.properties())}],[[Oe,qe],function(e,t){var i=t[1];return Ii(t[0].evaluate(e),i.evaluate(e))}]]},get:{type:Ve,overloads:[[[Oe],function(e,t){return Ti(t[0].evaluate(e),e.properties())}],[[Oe,qe],function(e,t){var i=t[1];return Ti(t[0].evaluate(e),i.evaluate(e))}]]},"feature-state":[Ve,[Oe],function(e,t){return Ti(t[0].evaluate(e),e.featureState||{})}],properties:[qe,[],function(e){return e.properties()}],"geometry-type":[Oe,[],function(e){return e.geometryType()}],id:[Ve,[],function(e){return e.id()}],zoom:[Fe,[],function(e){return e.globals.zoom}],"heatmap-density":[Fe,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[Fe,[],function(e){return e.globals.lineProgress||0}],accumulated:[Ve,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[Fe,Ci(Fe),function(e,t){for(var i=0,r=0,a=t;r<a.length;r+=1)i+=a[r].evaluate(e);return i}],"*":[Fe,Ci(Fe),function(e,t){for(var i=1,r=0,a=t;r<a.length;r+=1)i*=a[r].evaluate(e);return i}],"-":{type:Fe,overloads:[[[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)-i.evaluate(e)}],[[Fe],function(e,t){return-t[0].evaluate(e)}]]},"/":[Fe,[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)/i.evaluate(e)}],"%":[Fe,[Fe,Fe],function(e,t){var i=t[1];return t[0].evaluate(e)%i.evaluate(e)}],ln2:[Fe,[],function(){return Math.LN2}],pi:[Fe,[],function(){return Math.PI}],e:[Fe,[],function(){return Math.E}],"^":[Fe,[Fe,Fe],function(e,t){var i=t[1];return Math.pow(t[0].evaluate(e),i.evaluate(e))}],sqrt:[Fe,[Fe],function(e,t){return Math.sqrt(t[0].evaluate(e))}],log10:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN10}],ln:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))}],log2:[Fe,[Fe],function(e,t){return Math.log(t[0].evaluate(e))/Math.LN2}],sin:[Fe,[Fe],function(e,t){return Math.sin(t[0].evaluate(e))}],cos:[Fe,[Fe],function(e,t){return Math.cos(t[0].evaluate(e))}],tan:[Fe,[Fe],function(e,t){return Math.tan(t[0].evaluate(e))}],asin:[Fe,[Fe],function(e,t){return Math.asin(t[0].evaluate(e))}],acos:[Fe,[Fe],function(e,t){return Math.acos(t[0].evaluate(e))}],atan:[Fe,[Fe],function(e,t){return Math.atan(t[0].evaluate(e))}],min:[Fe,Ci(Fe),function(e,t){return Math.min.apply(Math,t.map((function(t){return t.evaluate(e)})))}],max:[Fe,Ci(Fe),function(e,t){return Math.max.apply(Math,t.map((function(t){return t.evaluate(e)})))}],abs:[Fe,[Fe],function(e,t){return Math.abs(t[0].evaluate(e))}],round:[Fe,[Fe],function(e,t){var i=t[0].evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[Fe,[Fe],function(e,t){return Math.floor(t[0].evaluate(e))}],ceil:[Fe,[Fe],function(e,t){return Math.ceil(t[0].evaluate(e))}],"filter-==":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1];return e.properties()[i.value]===r.value}],"filter-id-==":[Ne,[Ve],function(e,t){var i=t[0];return e.id()===i.value}],"filter-type-==":[Ne,[Oe],function(e,t){var i=t[0];return e.geometryType()===i.value}],"filter-<":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],a=e.properties()[i.value],n=r.value;return typeof a==typeof n&&a<n}],"filter-id-<":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),a=i.value;return typeof r==typeof a&&r<a}],"filter->":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],a=e.properties()[i.value],n=r.value;return typeof a==typeof n&&a>n}],"filter-id->":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),a=i.value;return typeof r==typeof a&&r>a}],"filter-<=":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],a=e.properties()[i.value],n=r.value;return typeof a==typeof n&&a<=n}],"filter-id-<=":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),a=i.value;return typeof r==typeof a&&r<=a}],"filter->=":[Ne,[Oe,Ve],function(e,t){var i=t[0],r=t[1],a=e.properties()[i.value],n=r.value;return typeof a==typeof n&&a>=n}],"filter-id->=":[Ne,[Ve],function(e,t){var i=t[0],r=e.id(),a=i.value;return typeof r==typeof a&&r>=a}],"filter-has":[Ne,[Ve],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[Ne,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[Ne,[Ze(Oe)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[Ne,[Ze(Ve)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[Ne,[Oe,Ze(Ve)],function(e,t){var i=t[0];return t[1].value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[Ne,[Oe,Ze(Ve)],function(e,t){var i=t[0],r=t[1];return function(e,t,i,r){for(;i<=r;){var a=i+r>>1;if(t[a]===e)return!0;t[a]>e?r=a-1:i=a+1}return!1}(e.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:Ne,overloads:[[[Ne,Ne],function(e,t){var i=t[1];return t[0].evaluate(e)&&i.evaluate(e)}],[Ci(Ne),function(e,t){for(var i=0,r=t;i<r.length;i+=1)if(!r[i].evaluate(e))return!1;return!0}]]},any:{type:Ne,overloads:[[[Ne,Ne],function(e,t){var i=t[1];return t[0].evaluate(e)||i.evaluate(e)}],[Ci(Ne),function(e,t){for(var i=0,r=t;i<r.length;i+=1)if(r[i].evaluate(e))return!0;return!1}]]},"!":[Ne,[Ne],function(e,t){return!t[0].evaluate(e)}],"is-supported-script":[Ne,[Oe],function(e,t){var i=e.globals&&e.globals.isSupportedScript;return!i||i(t[0].evaluate(e))}],upcase:[Oe,[Oe],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[Oe,[Oe],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[Oe,Ci(Ve),function(e,t){return t.map((function(t){return st(t.evaluate(e))})).join("")}],"resolved-locale":[Oe,[je],function(e,t){return t[0].evaluate(e).resolvedLocale()}]});var ji=function(e,t){this.expression=e,this._warningHistory={},this._evaluator=new gt,this._defaultValue=t?function(e){return"color"===e.type&&Bi(e.default)?new $e(0,0,0,0):"color"===e.type?$e.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null};function Gi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ki}function Ki(e,t){var i=new Ut(ki,[],t?function(e){var t={color:Ue,string:Oe,number:Fe,enum:Oe,boolean:Ne,formatted:Ge,resolvedImage:Ke};return"array"===e.type?Ze(t[e.value]||Ve,e.length):t[e.type]}(t):void 0),r=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Pi(new ji(r,t)):Li(i.errors)}ji.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,a,n){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=n,this.expression.evaluate(this._evaluator)},ji.prototype.evaluate=function(e,t,i,r,a,n){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r,this._evaluator.availableImages=a||null,this._evaluator.formattedSection=n||null;try{var o=this.expression.evaluate(this._evaluator);if(null==o||"number"==typeof o&&o!=o)return this._defaultValue;if(this._enumValues&&!(o in this._enumValues))throw new ut("Expected value to be one of "+Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", ")+", but found "+JSON.stringify(o)+" instead.");return o}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}};var Zi=function(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ft(t.expression)};Zi.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,a,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,n)},Zi.prototype.evaluate=function(e,t,i,r,a,n){return this._styleExpression.evaluate(e,t,i,r,a,n)};var Hi=function(e,t,i,r){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ft(t.expression),this.interpolationType=r};function Qi(e,t){if("error"===(e=Ki(e,t)).result)return e;var i=e.value.expression,r=Bt(i);if(!r&&!Ri(t))return Li([new ze("","data expressions not supported")]);var a=Ot(i,["zoom"]);if(!a&&!Mi(t))return Li([new ze("","zoom expressions not supported")]);var n=function e(t){var i=null;if(t instanceof si)i=e(t.result);else if(t instanceof oi)for(var r=0,a=t.args;r<a.length&&!(i=e(a[r]));r+=1);else(t instanceof Vt||t instanceof ai)&&t.input instanceof yt&&"zoom"===t.input.name&&(i=t);return i instanceof ze||t.eachChild((function(t){var r=e(t);r instanceof ze?i=r:!i&&r?i=new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new ze("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}(i);return n||a?n instanceof ze?Li([n]):n instanceof ai&&!zi(t)?Li([new ze("",'"interpolate" expressions cannot be used with this property')]):Pi(n?new Hi(r?"camera":"composite",e.value,n.labels,n instanceof ai?n.interpolation:void 0):new Zi(r?"constant":"source",e.value)):Li([new ze("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Hi.prototype.evaluateWithoutErrorHandling=function(e,t,i,r,a,n){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,a,n)},Hi.prototype.evaluate=function(e,t,i,r,a,n){return this._styleExpression.evaluate(e,t,i,r,a,n)},Hi.prototype.interpolationFactor=function(e,t,i){return this.interpolationType?ai.interpolationFactor(this.interpolationType,e,t,i):0};var Wi=function(e,t){this._parameters=e,this._specification=t,Le(this,function e(t,i){var r,a,n,o="color"===i.type,s=t.stops&&"object"==typeof t.stops[0][0],l=s||!(s||void 0!==t.property),u=t.type||(zi(i)?"exponential":"interval");if(o&&((t=Le({},t)).stops&&(t.stops=t.stops.map((function(e){return[e[0],$e.parse(e[1])]}))),t.default=$e.parse(t.default?t.default:i.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!ri[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);if("exponential"===u)r=qi;else if("interval"===u)r=Ui;else if("categorical"===u){r=Ni,a=Object.create(null);for(var c=0,p=t.stops;c<p.length;c+=1){var h=p[c];a[h[0]]=h[1]}n=typeof t.stops[0][0]}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');r=Vi}if(s){for(var d={},f=[],_=0;_<t.stops.length;_++){var m=t.stops[_],g=m[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:t.type,property:t.property,default:t.default,stops:[]},f.push(g)),d[g].stops.push([m[0].value,m[1]])}for(var y=[],v=0,b=f;v<b.length;v+=1){var x=b[v];y.push([d[x].zoom,e(d[x],i)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:ai.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(e,r){var a=e.zoom;return qi({stops:y,base:t.base},i,a).evaluate(a,r)}}}if(l){var S="exponential"===u?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:S,interpolationFactor:ai.interpolationFactor.bind(void 0,S),zoomStops:t.stops.map((function(e){return e[0]})),evaluate:function(e){return r(t,i,e.zoom,a,n)}}}return{kind:"source",evaluate:function(e,o){var s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Oi(t.default,i.default):r(t,i,s,a,n)}}}(this._parameters,this._specification))};function Ji(e){var t=e.key,i=e.value,r=e.valueSpec||{},a=e.objectElementValidators||{},n=e.style,o=e.styleSpec,s=[],l=Di(i);if("object"!==l)return[new Ce(t,i,"object expected, "+l+" found")];for(var u in i){var c=u.split(".")[0],p=r[c]||r["*"],h=void 0;if(a[c])h=a[c];else if(r[c])h=xr;else if(a["*"])h=a["*"];else{if(!r["*"]){s.push(new Ce(t,i[u],'unknown property "'+u+'"'));continue}h=xr}s=s.concat(h({key:(t?t+".":t)+u,value:i[u],valueSpec:p,style:n,styleSpec:o,object:i,objectKey:u},i))}for(var d in r)a[d]||r[d].required&&void 0===r[d].default&&void 0===i[d]&&s.push(new Ce(t,i,'missing required property "'+d+'"'));return s}function Xi(e){var t=e.value,i=e.valueSpec,r=e.style,a=e.styleSpec,n=e.key,o=e.arrayElementValidator||xr;if("array"!==Di(t))return[new Ce(n,t,"array expected, "+Di(t)+" found")];if(i.length&&t.length!==i.length)return[new Ce(n,t,"array length "+i.length+" expected, length "+t.length+" found")];if(i["min-length"]&&t.length<i["min-length"])return[new Ce(n,t,"array length at least "+i["min-length"]+" expected, length "+t.length+" found")];var s={type:i.value,values:i.values};a.$version<7&&(s.function=i.function),"object"===Di(i.value)&&(s=i.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:a,key:n+"["+u+"]"}));return l}function Yi(e){var t=e.key,i=e.value,r=e.valueSpec,a=Di(i);return"number"===a&&i!=i&&(a="NaN"),"number"!==a?[new Ce(t,i,"number expected, "+a+" found")]:"minimum"in r&&i<r.minimum?[new Ce(t,i,i+" is less than the minimum value "+r.minimum)]:"maximum"in r&&i>r.maximum?[new Ce(t,i,i+" is greater than the maximum value "+r.maximum)]:[]}function $i(e){var t,i,r,a=e.valueSpec,n=Re(e.value.type),o={},s="categorical"!==n&&void 0===e.value.property,l=!s,u="array"===Di(e.value.stops)&&"array"===Di(e.value.stops[0])&&"object"===Di(e.value.stops[0][0]),c=Ji({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Ce(e.key,e.value,'identity function may not have a "stops" property')];var t=[],i=e.value;return t=t.concat(Xi({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:p})),"array"===Di(i)&&0===i.length&&t.push(new Ce(e.key,i,"array must have at least one stop")),t},default:function(e){return xr({key:e.key,value:e.value,valueSpec:a,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&c.push(new Ce(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||c.push(new Ce(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!zi(e.valueSpec)&&c.push(new Ce(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ri(e.valueSpec)?c.push(new Ce(e.key,e.value,"property functions not supported")):s&&!Mi(e.valueSpec)&&c.push(new Ce(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==e.value.property||c.push(new Ce(e.key,e.value,'"property" property is required')),c;function p(e){var t=[],n=e.value,s=e.key;if("array"!==Di(n))return[new Ce(s,n,"array expected, "+Di(n)+" found")];if(2!==n.length)return[new Ce(s,n,"array length 2 expected, length "+n.length+" found")];if(u){if("object"!==Di(n[0]))return[new Ce(s,n,"object expected, "+Di(n[0])+" found")];if(void 0===n[0].zoom)return[new Ce(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new Ce(s,n,"object stop key must have value")];if(r&&r>Re(n[0].zoom))return[new Ce(s,n[0].zoom,"stop zoom values must appear in ascending order")];Re(n[0].zoom)!==r&&(r=Re(n[0].zoom),i=void 0,o={}),t=t.concat(Ji({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Yi,value:h}}))}else t=t.concat(h({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return Gi(Me(n[1]))?t.concat([new Ce(s+"[1]",n[1],"expressions are not allowed in function stops.")]):t.concat(xr({key:s+"[1]",value:n[1],valueSpec:a,style:e.style,styleSpec:e.styleSpec}))}function h(e,r){var s=Di(e.value),l=Re(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new Ce(e.key,u,s+" stop domain type must match previous stop domain type "+t)]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Ce(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){var c="number expected, "+s+" found";return Ri(a)&&void 0===n&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ce(e.key,u,c)]}return"categorical"!==n||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&void 0!==i&&l<i?[new Ce(e.key,u,"stop domain values must appear in ascending order")]:(i=l,"categorical"===n&&l in o?[new Ce(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new Ce(e.key,u,"integer expected, found "+l)]}}function er(e){var t=("property"===e.expressionContext?Qi:Ki)(Me(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new Ce(""+e.key+t.key,e.value,t.message)}));var i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new Ce(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ft(i))return[new Ce(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ft(i))return[new Ce(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Ot(i,["zoom","feature-state"]))return[new Ce(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Bt(i))return[new Ce(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tr(e){var t=e.key,i=e.value,r=e.valueSpec,a=[];return Array.isArray(r.values)?-1===r.values.indexOf(Re(i))&&a.push(new Ce(t,i,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(i)+" found")):-1===Object.keys(r.values).indexOf(Re(i))&&a.push(new Ce(t,i,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(i)+" found")),a}function ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var r=i[t];if(!ir(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Wi.deserialize=function(e){return new Wi(e._parameters,e._specification)},Wi.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}};var rr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ar(e){if(null==e)return{filter:function(){return!0},needGeometry:!1};ir(e)||(e=or(e));var t=Ki(e,rr);if("error"===t.result)throw new Error(t.value.map((function(e){return e.key+": "+e.message})).join(", "));return{filter:function(e,i,r){return t.value.evaluate(e,i,{},r)},needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var i=1;i<t.length;i++)if(e(t[i]))return!0;return!1}(e)}}function nr(e,t){return e<t?-1:e>t?1:0}function or(e){if(!e)return!0;var t,i=e[0];return e.length<=1?"any"!==i:"=="===i?sr(e[1],e[2],"=="):"!="===i?cr(sr(e[1],e[2],"==")):"<"===i||">"===i||"<="===i||">="===i?sr(e[1],e[2],i):"any"===i?(t=e.slice(1),["any"].concat(t.map(or))):"all"===i?["all"].concat(e.slice(1).map(or)):"none"===i?["all"].concat(e.slice(1).map(or).map(cr)):"in"===i?lr(e[1],e.slice(2)):"!in"===i?cr(lr(e[1],e.slice(2))):"has"===i?ur(e[1]):"!has"===i?cr(ur(e[1])):"within"!==i||e}function sr(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function lr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(nr)]]:["filter-in-small",e,["literal",t]]}}function ur(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function cr(e){return["!",e]}function pr(e){return ir(Me(e.value))?er(Le({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){var i=t.value,r=t.key;if("array"!==Di(i))return[new Ce(r,i,"array expected, "+Di(i)+" found")];var a,n=t.styleSpec,o=[];if(i.length<1)return[new Ce(r,i,"filter array must have at least 1 element")];switch(o=o.concat(tr({key:r+"[0]",value:i[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),Re(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===Re(i[1])&&o.push(new Ce(r,i,'"$type" cannot be use with operator "'+i[0]+'"'));case"==":case"!=":3!==i.length&&o.push(new Ce(r,i,'filter array for operator "'+i[0]+'" must have 3 elements'));case"in":case"!in":i.length>=2&&"string"!==(a=Di(i[1]))&&o.push(new Ce(r+"[1]",i[1],"string expected, "+a+" found"));for(var s=2;s<i.length;s++)a=Di(i[s]),"$type"===Re(i[1])?o=o.concat(tr({key:r+"["+s+"]",value:i[s],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new Ce(r+"["+s+"]",i[s],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var l=1;l<i.length;l++)o=o.concat(e({key:r+"["+l+"]",value:i[l],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Di(i[1]),2!==i.length?o.push(new Ce(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"string"!==a&&o.push(new Ce(r+"[1]",i[1],"string expected, "+a+" found"));break;case"within":a=Di(i[1]),2!==i.length?o.push(new Ce(r,i,'filter array for "'+i[0]+'" operator must have 2 elements')):"object"!==a&&o.push(new Ce(r+"[1]",i[1],"object expected, "+a+" found"))}return o}(e)}function hr(e,t){var i=e.key,r=e.style,a=e.styleSpec,n=e.value,o=e.objectKey,s=a[t+"_"+e.layerType];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return xr({key:i,value:n,valueSpec:a.transition,style:r,styleSpec:a});var u,c=e.valueSpec||s[o];if(!c)return[new Ce(i,n,'unknown property "'+o+'"')];if("string"===Di(n)&&Ri(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(n)))return[new Ce(i,n,'"'+o+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&p.push(new Ce(i,n,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Bi(Me(n))&&"identity"===Re(n.type)&&p.push(new Ce(i,n,'"text-font" does not support identity functions'))),p.concat(xr({key:e.key,value:n,valueSpec:c,style:r,styleSpec:a,expressionContext:"property",propertyType:t,propertyKey:o}))}function dr(e){return hr(e,"paint")}function fr(e){return hr(e,"layout")}function _r(e){var t=[],i=e.value,r=e.key,a=e.style,n=e.styleSpec;i.type||i.ref||t.push(new Ce(r,i,'either "type" or "ref" is required'));var o,s=Re(i.type),l=Re(i.ref);if(i.id)for(var u=Re(i.id),c=0;c<e.arrayIndex;c++){var p=a.layers[c];Re(p.id)===u&&t.push(new Ce(r,i.id,'duplicate layer id "'+i.id+'", previously used at line '+p.id.__line__))}if("ref"in i)["type","source","source-layer","filter","layout"].forEach((function(e){e in i&&t.push(new Ce(r,i[e],'"'+e+'" is prohibited for ref layers'))})),a.layers.forEach((function(e){Re(e.id)===l&&(o=e)})),o?o.ref?t.push(new Ce(r,i.ref,"ref cannot reference another ref layer")):s=Re(o.type):t.push(new Ce(r,i.ref,'ref layer "'+l+'" not found'));else if("background"!==s)if(i.source){var h=a.sources&&a.sources[i.source],d=h&&Re(h.type);h?"vector"===d&&"raster"===s?t.push(new Ce(r,i.source,'layer "'+i.id+'" requires a raster source')):"raster"===d&&"raster"!==s?t.push(new Ce(r,i.source,'layer "'+i.id+'" requires a vector source')):"vector"!==d||i["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new Ce(r,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!i.paint||!i.paint["line-gradient"]||"geojson"===d&&h.lineMetrics||t.push(new Ce(r,i,'layer "'+i.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):t.push(new Ce(r,i,'layer "'+i.id+'" must specify a "source-layer"')):t.push(new Ce(r,i.source,'source "'+i.source+'" not found'))}else t.push(new Ce(r,i,'missing required property "source"'));return t=t.concat(Ji({key:r,value:i,valueSpec:n.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xr({key:r+".type",value:i.type,valueSpec:n.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"})},filter:pr,layout:function(e){return Ji({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return fr(Le({layerType:s},e))}}})},paint:function(e){return Ji({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return dr(Le({layerType:s},e))}}})}}}))}function mr(e){var t=e.value,i=e.key,r=Di(t);return"string"!==r?[new Ce(i,t,"string expected, "+r+" found")]:[]}var gr={promoteId:function(e){var t=e.key,i=e.value;if("string"===Di(i))return mr({key:t,value:i});var r=[];for(var a in i)r.push.apply(r,mr({key:t+"."+a,value:i[a]}));return r}};function yr(e){var t=e.value,i=e.key,r=e.styleSpec,a=e.style;if(!t.type)return[new Ce(i,t,'"type" is required')];var n,o=Re(t.type);switch(o){case"vector":case"raster":case"raster-dem":return Ji({key:i,value:t,valueSpec:r["source_"+o.replace("-","_")],style:e.style,styleSpec:r,objectElementValidators:gr});case"geojson":if(n=Ji({key:i,value:t,valueSpec:r.source_geojson,style:a,styleSpec:r,objectElementValidators:gr}),t.cluster)for(var s in t.clusterProperties){var l=t.clusterProperties[s],u=l[0],c="string"==typeof u?[u,["accumulated"],["get",s]]:u;n.push.apply(n,er({key:i+"."+s+".map",value:l[1],expressionContext:"cluster-map"})),n.push.apply(n,er({key:i+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return n;case"video":return Ji({key:i,value:t,valueSpec:r.source_video,style:a,styleSpec:r});case"image":return Ji({key:i,value:t,valueSpec:r.source_image,style:a,styleSpec:r});case"canvas":return[new Ce(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return tr({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,styleSpec:r})}}function vr(e){var t=e.value,i=e.styleSpec,r=i.light,a=e.style,n=[],o=Di(t);if(void 0===t)return n;if("object"!==o)return n.concat([new Ce("light",t,"object expected, "+o+" found")]);for(var s in t){var l=s.match(/^(.*)-transition$/);n=n.concat(l&&r[l[1]]&&r[l[1]].transition?xr({key:s,value:t[s],valueSpec:i.transition,style:a,styleSpec:i}):r[s]?xr({key:s,value:t[s],valueSpec:r[s],style:a,styleSpec:i}):[new Ce(s,t[s],'unknown property "'+s+'"')])}return n}var br={"*":function(){return[]},array:Xi,boolean:function(e){var t=e.value,i=e.key,r=Di(t);return"boolean"!==r?[new Ce(i,t,"boolean expected, "+r+" found")]:[]},number:Yi,color:function(e){var t=e.key,i=e.value,r=Di(i);return"string"!==r?[new Ce(t,i,"color expected, "+r+" found")]:null===Ye(i)?[new Ce(t,i,'color expected, "'+i+'" found')]:[]},constants:Pe,enum:tr,filter:pr,function:$i,layer:_r,object:Ji,source:yr,light:vr,string:mr,formatted:function(e){return 0===mr(e).length?[]:er(e)},resolvedImage:function(e){return 0===mr(e).length?[]:er(e)}};function xr(e){var t=e.value,i=e.valueSpec,r=e.styleSpec;return i.expression&&Bi(Re(t))?$i(e):i.expression&&Gi(Me(t))?er(e):i.type&&br[i.type]?br[i.type](e):Ji(Le({},e,{valueSpec:i.type?r[i.type]:i}))}function wr(e){var t=e.value,i=e.key,r=mr(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Ce(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Ce(i,t,'"glyphs" url must include a "{range}" token'))),r}function Sr(e,t){void 0===t&&(t=Te);var i=[];return i=i.concat(xr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:wr,"*":function(){return[]}}})),e.constants&&(i=i.concat(Pe({key:"constants",value:e.constants,style:e,styleSpec:t}))),Ar(i)}function Ar(e){return[].concat(e).sort((function(e,t){return e.line-t.line}))}function kr(e){return function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return Ar(e.apply(this,t))}}Sr.source=kr(yr),Sr.light=kr(vr),Sr.layer=kr(_r),Sr.filter=kr(pr),Sr.paintProperty=kr(dr),Sr.layoutProperty=kr(fr);var Er=Sr,Ir=Er.light,Tr=Er.paintProperty,Cr=Er.layoutProperty;function Pr(e,t){var i=!1;if(t&&t.length)for(var r=0,a=t;r<a.length;r+=1)e.fire(new Ee(new Error(a[r].message))),i=!0;return i}var Lr=Rr;function Rr(e,t,i){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],this.d=(t=a[1])+2*(i=a[2]);for(var n=0;n<this.d*this.d;n++){var o=a[3+n],s=a[3+n+1];r.push(o===s?null:a.subarray(o,s))}var l=a[3+r.length+1];this.keys=a.subarray(a[3+r.length],l),this.bboxes=a.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var c=i/t*e;this.min=-c,this.max=e+c}Rr.prototype.insert=function(e,t,i,r,a){this._forEachCell(t,i,r,a,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(a)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,i,r,a,n){this.cells[a].push(n)},Rr.prototype.query=function(e,t,i,r,a){var n=this.min,o=this.max;if(e<=n&&t<=n&&o<=i&&o<=r&&!a)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,i,r,this._queryCell,s,{},a),s},Rr.prototype._queryCell=function(e,t,i,r,a,n,o,s){var l=this.cells[a];if(null!==l)for(var u=this.keys,c=this.bboxes,p=0;p<l.length;p++){var h=l[p];if(void 0===o[h]){var d=4*h;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&i>=c[d+0]&&r>=c[d+1])?(o[h]=!0,n.push(u[h])):o[h]=!1}}},Rr.prototype._forEachCell=function(e,t,i,r,a,n,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(i),p=this._convertToCellCoord(r),h=l;h<=c;h++)for(var d=u;d<=p;d++){var f=this.d*d+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(d),this._convertFromCellCoord(h+1),this._convertFromCellCoord(d+1)))&&a.call(this,e,t,i,r,f,n,o,s))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,r=0;r<this.cells.length;r++)i+=this.cells[r].length;var a=new Int32Array(t+i+this.keys.length+this.bboxes.length);a[0]=this.extent,a[1]=this.n,a[2]=this.padding;for(var n=t,o=0;o<e.length;o++){var s=e[o];a[3+o]=n,a.set(s,n),n+=s.length}return a[3+e.length]=n,a.set(this.keys,n),a[3+e.length+1]=n+=this.keys.length,a.set(this.bboxes,n),n+=this.bboxes.length,a.buffer};var Mr=o.ImageData,zr=o.ImageBitmap,Dr={};function Br(e,t,i){void 0===i&&(i={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Dr[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}for(var Fr in Br("Object",Object),Lr.serialize=function(e,t){var i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Lr.deserialize=function(e){return new Lr(e.buffer)},Br("Grid",Lr),Br("Color",$e),Br("Error",Error),Br("ResolvedImage",rt),Br("StylePropertyFunction",Wi),Br("StyleExpression",ji,{omit:["_evaluator"]}),Br("ZoomDependentExpression",Hi),Br("ZoomConstantExpression",Zi),Br("CompoundExpression",yt,{omit:["_evaluate"]}),ki)ki[Fr]._classRegistryKey||Br("Expression_"+Fr,ki[Fr]);function Or(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Nr(e){return zr&&e instanceof zr}function Ur(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Or(e)||Nr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var i=e;return t&&t.push(i.buffer),i}if(e instanceof Mr)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],a=0,n=e;a<n.length;a+=1)r.push(Ur(n[a],t));return r}if("object"==typeof e){var o=e.constructor,s=o._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var l=o.serialize?o.serialize(e,t):{};if(!o.serialize){for(var u in e)if(e.hasOwnProperty(u)&&!(Dr[s].omit.indexOf(u)>=0)){var c=e[u];l[u]=Dr[s].shallow.indexOf(u)>=0?c:Ur(c,t)}e instanceof Error&&(l.message=e.message)}if(l.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(l.$name=s),l}throw new Error("can't serialize object of type "+typeof e)}function qr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Or(e)||Nr(e)||ArrayBuffer.isView(e)||e instanceof Mr)return e;if(Array.isArray(e))return e.map(qr);if("object"==typeof e){var t=e.$name||"Object",i=Dr[t].klass;if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);for(var r=Object.create(i.prototype),a=0,n=Object.keys(e);a<n.length;a+=1){var o=n[a];if("$name"!==o){var s=e[o];r[o]=Dr[t].shallow.indexOf(o)>=0?s:qr(s)}}return r}throw new Error("can't deserialize object of type "+typeof e)}var Vr=function(){this.first=!0};Vr.prototype.update=function(e,t){var i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))};var jr={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function Gr(e){for(var t=0,i=e;t<i.length;t+=1)if(Kr(i[t].charCodeAt(0)))return!0;return!1}function Kr(e){return!(746!==e&&747!==e&&(e<4352||!(jr["Bopomofo Extended"](e)||jr.Bopomofo(e)||jr["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||jr["CJK Compatibility Ideographs"](e)||jr["CJK Compatibility"](e)||jr["CJK Radicals Supplement"](e)||jr["CJK Strokes"](e)||!(!jr["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||jr["CJK Unified Ideographs Extension A"](e)||jr["CJK Unified Ideographs"](e)||jr["Enclosed CJK Letters and Months"](e)||jr["Hangul Compatibility Jamo"](e)||jr["Hangul Jamo Extended-A"](e)||jr["Hangul Jamo Extended-B"](e)||jr["Hangul Jamo"](e)||jr["Hangul Syllables"](e)||jr.Hiragana(e)||jr["Ideographic Description Characters"](e)||jr.Kanbun(e)||jr["Kangxi Radicals"](e)||jr["Katakana Phonetic Extensions"](e)||jr.Katakana(e)&&12540!==e||!(!jr["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!jr["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||jr["Unified Canadian Aboriginal Syllabics"](e)||jr["Unified Canadian Aboriginal Syllabics Extended"](e)||jr["Vertical Forms"](e)||jr["Yijing Hexagram Symbols"](e)||jr["Yi Syllables"](e)||jr["Yi Radicals"](e))))}function Zr(e){return!(Kr(e)||function(e){return!!(jr["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||jr["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||jr["Letterlike Symbols"](e)||jr["Number Forms"](e)||jr["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||jr["Control Pictures"](e)&&9251!==e||jr["Optical Character Recognition"](e)||jr["Enclosed Alphanumerics"](e)||jr["Geometric Shapes"](e)||jr["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||jr["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||jr["CJK Symbols and Punctuation"](e)||jr.Katakana(e)||jr["Private Use Area"](e)||jr["CJK Compatibility Forms"](e)||jr["Small Form Variants"](e)||jr["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Hr(e){return e>=1424&&e<=2303||jr["Arabic Presentation Forms-A"](e)||jr["Arabic Presentation Forms-B"](e)}function Qr(e,t){return!(!t&&Hr(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||jr.Khmer(e))}function Wr(e){for(var t=0,i=e;t<i.length;t+=1)if(Hr(i[t].charCodeAt(0)))return!0;return!1}var Jr=null,Xr="unavailable",Yr=null,$r=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Xr="error"),Jr&&Jr(e)};function ea(){ta.fire(new ke("pluginStateChange",{pluginStatus:Xr,pluginURL:Yr}))}var ta=new Ie,ia=function(){return Xr},ra=function(){if("deferred"!==Xr||!Yr)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xr="loading",ea(),Yr&&be({url:Yr},(function(e){e?$r(e):(Xr="loaded",ea())}))},aa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===Xr||null!=aa.applyArabicShaping},isLoading:function(){return"loading"===Xr},setState:function(e){Xr=e.pluginStatus,Yr=e.pluginURL},isParsed:function(){return null!=aa.applyArabicShaping&&null!=aa.processBidirectionalText&&null!=aa.processStyledBidirectionalText},getPluginURL:function(){return Yr}},na=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Vr,this.transition={})};na.prototype.isSupportedScript=function(e){return function(e,t){for(var i=0,r=e;i<r.length;i+=1)if(!Qr(r[i].charCodeAt(0),t))return!1;return!0}(e,aa.isLoaded())},na.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},na.prototype.getCrossfadeParameters=function(){var e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}};var oa=function(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Bi(e))return new Wi(e,t);if(Gi(e)){var i=Qi(e,t);if("error"===i.result)throw new Error(i.value.map((function(e){return e.key+": "+e.message})).join(", "));return i.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=$e.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===t?e.specification.default:t,e.specification)};oa.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},oa.prototype.possiblyEvaluate=function(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)};var sa=function(e){this.property=e,this.value=new oa(e,void 0)};sa.prototype.transitioned=function(e,t){return new ua(this.property,this.value,t,h({},e.transition,this.transition),e.now)},sa.prototype.untransitioned=function(){return new ua(this.property,this.value,null,{},0)};var la=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};la.prototype.getValue=function(e){return x(this._values[e].value.value)},la.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new sa(this._values[e].property)),this._values[e].value=new oa(this._values[e].property,null===t?void 0:x(t))},la.prototype.getTransition=function(e){return x(this._values[e].transition)},la.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new sa(this._values[e].property)),this._values[e].transition=x(t)||void 0},la.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t],a=this.getValue(r);void 0!==a&&(e[r]=a);var n=this.getTransition(r);void 0!==n&&(e[r+"-transition"]=n)}return e},la.prototype.transitioned=function(e,t){for(var i=new ca(this._properties),r=0,a=Object.keys(this._values);r<a.length;r+=1){var n=a[r];i._values[n]=this._values[n].transitioned(e,t._values[n])}return i},la.prototype.untransitioned=function(){for(var e=new ca(this._properties),t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t];e._values[r]=this._values[r].untransitioned()}return e};var ua=function(e,t,i,r,a){this.property=e,this.value=t,this.begin=a+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=i)};ua.prototype.possiblyEvaluate=function(e,t,i){var r=e.now||0,a=this.value.possiblyEvaluate(e,t,i),n=this.prior;if(n){if(r>this.end)return this.prior=null,a;if(this.value.isDataDriven())return this.prior=null,a;if(r<this.begin)return n.possiblyEvaluate(e,t,i);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(e,t,i),a,function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}(o))}return a};var ca=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};ca.prototype.possiblyEvaluate=function(e,t,i){for(var r=new da(this._properties),a=0,n=Object.keys(this._values);a<n.length;a+=1){var o=n[a];r._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return r},ca.prototype.hasTransition=function(){for(var e=0,t=Object.keys(this._values);e<t.length;e+=1)if(this._values[t[e]].prior)return!0;return!1};var pa=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};pa.prototype.getValue=function(e){return x(this._values[e].value)},pa.prototype.setValue=function(e,t){this._values[e]=new oa(this._values[e].property,null===t?void 0:x(t))},pa.prototype.serialize=function(){for(var e={},t=0,i=Object.keys(this._values);t<i.length;t+=1){var r=i[t],a=this.getValue(r);void 0!==a&&(e[r]=a)}return e},pa.prototype.possiblyEvaluate=function(e,t,i){for(var r=new da(this._properties),a=0,n=Object.keys(this._values);a<n.length;a+=1){var o=n[a];r._values[o]=this._values[o].possiblyEvaluate(e,t,i)}return r};var ha=function(e,t,i){this.property=e,this.value=t,this.parameters=i};ha.prototype.isConstant=function(){return"constant"===this.value.kind},ha.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},ha.prototype.evaluate=function(e,t,i,r){return this.property.evaluate(this.value,this.parameters,e,t,i,r)};var da=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};da.prototype.get=function(e){return this._values[e]};var fa=function(e){this.specification=e};fa.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},fa.prototype.interpolate=function(e,t,i){var r=Gt[this.specification.type];return r?r(e,t,i):e};var _a=function(e,t){this.specification=e,this.overrides=t};_a.prototype.possiblyEvaluate=function(e,t,i,r){return new ha(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,r)}:e.expression,t)},_a.prototype.interpolate=function(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ha(this,{kind:"constant",value:void 0},e.parameters);var r=Gt[this.specification.type];return r?new ha(this,{kind:"constant",value:r(e.value.value,t.value.value,i)},e.parameters):e},_a.prototype.evaluate=function(e,t,i,r,a,n){return"constant"===e.kind?e.value:e.evaluate(t,i,r,a,n)};var ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(e,t,i,r){if(void 0===e.value)return new ha(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var a=e.expression.evaluate(t,null,{},i,r),n="resolvedImage"===e.property.specification.type&&"string"!=typeof a?a.name:a,o=this._calculate(n,n,n,t);return new ha(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ha(this,{kind:"constant",value:s},t)}return new ha(this,e.expression,t)},t.prototype.evaluate=function(e,t,i,r,a,n){if("source"===e.kind){var o=e.evaluate(t,i,r,a,n);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,r),e.evaluate({zoom:Math.floor(t.zoom)},i,r),e.evaluate({zoom:Math.floor(t.zoom)+1},i,r),t):e.value},t.prototype._calculate=function(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},t.prototype.interpolate=function(e){return e},t}(_a),ga=function(e){this.specification=e};ga.prototype.possiblyEvaluate=function(e,t,i,r){if(void 0!==e.value){if("constant"===e.expression.kind){var a=e.expression.evaluate(t,null,{},i,r);return this._calculate(a,a,a,t)}return this._calculate(e.expression.evaluate(new na(Math.floor(t.zoom-1),t)),e.expression.evaluate(new na(Math.floor(t.zoom),t)),e.expression.evaluate(new na(Math.floor(t.zoom+1),t)),t)}},ga.prototype._calculate=function(e,t,i,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}},ga.prototype.interpolate=function(e){return e};var ya=function(e){this.specification=e};ya.prototype.possiblyEvaluate=function(e,t,i,r){return!!e.expression.evaluate(t,null,{},i,r)},ya.prototype.interpolate=function(){return!1};var va=function(e){for(var t in this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],e){var i=e[t];i.specification.overridable&&this.overridableProperties.push(t);var r=this.defaultPropertyValues[t]=new oa(i,void 0),a=this.defaultTransitionablePropertyValues[t]=new sa(i);this.defaultTransitioningPropertyValues[t]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=r.possiblyEvaluate({})}};Br("DataDrivenProperty",_a),Br("DataConstantProperty",fa),Br("CrossFadedDataDrivenProperty",ma),Br("CrossFadedProperty",ga),Br("ColorRampProperty",ya);var ba=function(e){function t(t,i){if(e.call(this),this.id=t.id,this.type=t.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==t.type&&(this.metadata=(t=t).metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,"background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),i.layout&&(this._unevaluatedLayout=new pa(i.layout)),i.paint)){for(var r in this._transitionablePaint=new la(i.paint),t.paint)this.setPaintProperty(r,t.paint[r],{validate:!1});for(var a in t.layout)this.setLayoutProperty(a,t.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new da(i.paint)}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,i){void 0===i&&(i={}),null!=t&&this._validate(Cr,"layers."+this.id+".layout."+e,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)},t.prototype.getPaintProperty=function(e){return y(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,i){if(void 0===i&&(i={}),null!=t&&this._validate(Tr,"layers."+this.id+".paint."+e,e,t,i))return!1;if(y(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;var r=this._transitionablePaint._values[e],a="cross-faded-data-driven"===r.property.specification["property-type"],n=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||n||a||this._handleOverridablePaintPropertyUpdate(e,o,s)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){},t.prototype._handleOverridablePaintPropertyUpdate=function(e,t,i){return!1},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),b(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))},t.prototype._validate=function(e,t,i,r,a){return void 0===a&&(a={}),(!a||!1!==a.validate)&&Pr(this,e.call(Er,{key:t,layerType:this.type,objectKey:i,value:r,styleSpec:Te,style:{glyphs:!0,sprite:!0}}))},t.prototype.is3D=function(){return!1},t.prototype.isTileClipped=function(){return!1},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t.prototype.isStateDependent=function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof ha&&Ri(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1},t}(Ie),xa={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},wa=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Sa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Aa(e,t){void 0===t&&(t=1);var i=0,r=0;return{members:e.map((function(e){var a=xa[e.type].BYTES_PER_ELEMENT,n=i=ka(i,Math.max(t,a)),o=e.components||1;return r=Math.max(r,a),i+=a*o,{name:e.name,type:e.type,components:o,offset:n}})),size:ka(i,Math.max(r,t)),alignment:t}}function ka(e,t){return Math.ceil(e/t)*t}Sa.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},Sa.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},Sa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Sa.prototype.clear=function(){this.length=0},Sa.prototype.resize=function(e){this.reserve(e),this.length=e},Sa.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},Sa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ea=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=i,e},t}(Sa);Ea.prototype.bytesPerElement=4,Br("StructArrayLayout2i4",Ea);var Ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,a){var n=4*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=r,this.int16[n+3]=a,e},t}(Sa);Ia.prototype.bytesPerElement=8,Br("StructArrayLayout4i8",Ia);var Ta=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,a,n)},t.prototype.emplace=function(e,t,i,r,a,n,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=a,this.int16[s+4]=n,this.int16[s+5]=o,e},t}(Sa);Ta.prototype.bytesPerElement=12,Br("StructArrayLayout2i4i12",Ta);var Ca=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,a,n)},t.prototype.emplace=function(e,t,i,r,a,n,o){var s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.uint8[l+4]=r,this.uint8[l+5]=a,this.uint8[l+6]=n,this.uint8[l+7]=o,e},t}(Sa);Ca.prototype.bytesPerElement=8,Br("StructArrayLayout2i4ub8",Ca);var Pa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=i,e},t}(Sa);Pa.prototype.bytesPerElement=8,Br("StructArrayLayout2f8",Pa);var La=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,r,a,n,o,s,l,u)},t.prototype.emplace=function(e,t,i,r,a,n,o,s,l,u,c){var p=10*e;return this.uint16[p+0]=t,this.uint16[p+1]=i,this.uint16[p+2]=r,this.uint16[p+3]=a,this.uint16[p+4]=n,this.uint16[p+5]=o,this.uint16[p+6]=s,this.uint16[p+7]=l,this.uint16[p+8]=u,this.uint16[p+9]=c,e},t}(Sa);La.prototype.bytesPerElement=20,Br("StructArrayLayout10ui20",La);var Ra=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n,o,s,l,u,c,p){var h=this.length;return this.resize(h+1),this.emplace(h,e,t,i,r,a,n,o,s,l,u,c,p)},t.prototype.emplace=function(e,t,i,r,a,n,o,s,l,u,c,p,h){var d=12*e;return this.int16[d+0]=t,this.int16[d+1]=i,this.int16[d+2]=r,this.int16[d+3]=a,this.uint16[d+4]=n,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=p,this.int16[d+11]=h,e},t}(Sa);Ra.prototype.bytesPerElement=24,Br("StructArrayLayout4i4ui4i24",Ra);var Ma=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var a=3*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=r,e},t}(Sa);Ma.prototype.bytesPerElement=12,Br("StructArrayLayout3f12",Ma);var za=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint32[1*e+0]=t,e},t}(Sa);za.prototype.bytesPerElement=4,Br("StructArrayLayout1ul4",za);var Da=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n,o,s,l){var u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,r,a,n,o,s,l)},t.prototype.emplace=function(e,t,i,r,a,n,o,s,l,u){var c=10*e,p=5*e;return this.int16[c+0]=t,this.int16[c+1]=i,this.int16[c+2]=r,this.int16[c+3]=a,this.int16[c+4]=n,this.int16[c+5]=o,this.uint32[p+3]=s,this.uint16[c+8]=l,this.uint16[c+9]=u,e},t}(Sa);Da.prototype.bytesPerElement=20,Br("StructArrayLayout6i1ul2ui20",Da);var Ba=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,a,n)},t.prototype.emplace=function(e,t,i,r,a,n,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=a,this.int16[s+4]=n,this.int16[s+5]=o,e},t}(Sa);Ba.prototype.bytesPerElement=12,Br("StructArrayLayout2i2i2i12",Ba);var Fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a){var n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r,a)},t.prototype.emplace=function(e,t,i,r,a,n){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=r,this.int16[s+6]=a,this.int16[s+7]=n,e},t}(Sa);Fa.prototype.bytesPerElement=16,Br("StructArrayLayout2f1f2i16",Fa);var Oa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,a){var n=12*e,o=3*e;return this.uint8[n+0]=t,this.uint8[n+1]=i,this.float32[o+1]=r,this.float32[o+2]=a,e},t}(Sa);Oa.prototype.bytesPerElement=12,Br("StructArrayLayout2ub2f12",Oa);var Na=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var a=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=i,this.uint16[a+2]=r,e},t}(Sa);Na.prototype.bytesPerElement=6,Br("StructArrayLayout3ui6",Na);var Ua=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m){var g=this.length;return this.resize(g+1),this.emplace(g,e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m)},t.prototype.emplace=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m,g){var y=24*e,v=12*e,b=48*e;return this.int16[y+0]=t,this.int16[y+1]=i,this.uint16[y+2]=r,this.uint16[y+3]=a,this.uint32[v+2]=n,this.uint32[v+3]=o,this.uint32[v+4]=s,this.uint16[y+10]=l,this.uint16[y+11]=u,this.uint16[y+12]=c,this.float32[v+7]=p,this.float32[v+8]=h,this.uint8[b+36]=d,this.uint8[b+37]=f,this.uint8[b+38]=_,this.uint32[v+10]=m,this.int16[y+22]=g,e},t}(Sa);Ua.prototype.bytesPerElement=48,Br("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ua);var qa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m,g,y,v,b,x,w,S,A,k,E,I){var T=this.length;return this.resize(T+1),this.emplace(T,e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m,g,y,v,b,x,w,S,A,k,E,I)},t.prototype.emplace=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m,g,y,v,b,x,w,S,A,k,E,I,T){var C=34*e,P=17*e;return this.int16[C+0]=t,this.int16[C+1]=i,this.int16[C+2]=r,this.int16[C+3]=a,this.int16[C+4]=n,this.int16[C+5]=o,this.int16[C+6]=s,this.int16[C+7]=l,this.uint16[C+8]=u,this.uint16[C+9]=c,this.uint16[C+10]=p,this.uint16[C+11]=h,this.uint16[C+12]=d,this.uint16[C+13]=f,this.uint16[C+14]=_,this.uint16[C+15]=m,this.uint16[C+16]=g,this.uint16[C+17]=y,this.uint16[C+18]=v,this.uint16[C+19]=b,this.uint16[C+20]=x,this.uint16[C+21]=w,this.uint16[C+22]=S,this.uint32[P+12]=A,this.float32[P+13]=k,this.float32[P+14]=E,this.float32[P+15]=I,this.float32[P+16]=T,e},t}(Sa);qa.prototype.bytesPerElement=68,Br("StructArrayLayout8i15ui1ul4f68",qa);var Va=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.float32[1*e+0]=t,e},t}(Sa);Va.prototype.bytesPerElement=4,Br("StructArrayLayout1f4",Va);var ja=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var a=3*e;return this.int16[a+0]=t,this.int16[a+1]=i,this.int16[a+2]=r,e},t}(Sa);ja.prototype.bytesPerElement=6,Br("StructArrayLayout3i6",ja);var Ga=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)},t.prototype.emplace=function(e,t,i,r){var a=4*e;return this.uint32[2*e+0]=t,this.uint16[a+2]=i,this.uint16[a+3]=r,e},t}(Sa);Ga.prototype.bytesPerElement=8,Br("StructArrayLayout1ul2ui8",Ga);var Ka=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var i=this.length;return this.resize(i+1),this.emplace(i,e,t)},t.prototype.emplace=function(e,t,i){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=i,e},t}(Sa);Ka.prototype.bytesPerElement=4,Br("StructArrayLayout2ui4",Ka);var Za=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)},t.prototype.emplace=function(e,t){return this.uint16[1*e+0]=t,e},t}(Sa);Za.prototype.bytesPerElement=2,Br("StructArrayLayout1ui2",Za);var Ha=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,i,r){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r)},t.prototype.emplace=function(e,t,i,r,a){var n=4*e;return this.float32[n+0]=t,this.float32[n+1]=i,this.float32[n+2]=r,this.float32[n+3]=a,e},t}(Sa);Ha.prototype.bytesPerElement=16,Br("StructArrayLayout4f16",Ha);var Qa=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return i.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},i.x1.get=function(){return this._structArray.int16[this._pos2+2]},i.y1.get=function(){return this._structArray.int16[this._pos2+3]},i.x2.get=function(){return this._structArray.int16[this._pos2+4]},i.y2.get=function(){return this._structArray.int16[this._pos2+5]},i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.anchorPoint.get=function(){return new a(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,i),t}(wa);Qa.prototype.size=20;var Wa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Qa(this,e)},t}(Da);Br("CollisionBoxArray",Wa);var Ja=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},i.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},i.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},i.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},i.segment.get=function(){return this._structArray.uint16[this._pos2+10]},i.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},i.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},i.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},i.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},i.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},i.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},i.placedOrientation.set=function(e){this._structArray.uint8[this._pos1+37]=e},i.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},i.hidden.set=function(e){this._structArray.uint8[this._pos1+38]=e},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},i.crossTileID.set=function(e){this._structArray.uint32[this._pos4+10]=e},i.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(t.prototype,i),t}(wa);Ja.prototype.size=48;var Xa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Ja(this,e)},t}(Ua);Br("PlacedSymbolArray",Xa);var Ya=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return i.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},i.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},i.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},i.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},i.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},i.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},i.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},i.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},i.key.get=function(){return this._structArray.uint16[this._pos2+8]},i.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},i.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},i.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},i.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},i.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},i.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},i.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},i.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},i.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},i.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},i.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},i.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},i.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},i.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},i.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},i.crossTileID.set=function(e){this._structArray.uint32[this._pos4+12]=e},i.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},i.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},i.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},i.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(t.prototype,i),t}(wa);Ya.prototype.size=68;var $a=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new Ya(this,e)},t}(qa);Br("SymbolInstanceArray",$a);var en=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t}(Va);Br("GlyphOffsetArray",en);var tn=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t}(ja);Br("SymbolLineVertexArray",tn);var rn=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return i.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},i.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},i.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(t.prototype,i),t}(wa);rn.prototype.size=8;var an=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.get=function(e){return new rn(this,e)},t}(Ga);Br("FeatureIndexArray",an);var nn=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,on=function(e){void 0===e&&(e=[]),this.segments=e};function sn(e,t){return 256*(e=c(Math.floor(e),0,255))+c(Math.floor(t),0,255)}on.prototype.prepareSegment=function(e,t,i,r){var a=this.segments[this.segments.length-1];return e>on.MAX_VERTEX_ARRAY_LENGTH&&S("Max vertices per segment is "+on.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+e),(!a||a.vertexLength+e>on.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==r)&&(a={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==r&&(a.sortKey=r),this.segments.push(a)),a},on.prototype.get=function(){return this.segments},on.prototype.destroy=function(){for(var e=0,t=this.segments;e<t.length;e+=1){var i=t[e];for(var r in i.vaos)i.vaos[r].destroy()}},on.simpleSegment=function(e,t,i,r){return new on([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])},on.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Br("SegmentVector",on);var ln=Aa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),un=t((function(e){e.exports=function(e,t){var i,r,a,n,o,s,l,u;for(r=e.length-(i=3&e.length),a=t,o=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,a=27492+(65535&(n=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(n>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}})),cn=t((function(e){e.exports=function(e,t){for(var i,r=e.length,a=t^r,n=0;r>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+((1540483477*(i>>>16)&65535)<<16),a=1540483477*(65535&a)+((1540483477*(a>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++n;switch(r){case 3:a^=(255&e.charCodeAt(n+2))<<16;case 2:a^=(255&e.charCodeAt(n+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(n)))+((1540483477*(a>>>16)&65535)<<16)}return a=1540483477*(65535&(a^=a>>>13))+((1540483477*(a>>>16)&65535)<<16),(a^=a>>>15)>>>0}})),pn=un,hn=cn;pn.murmur3=un,pn.murmur2=hn;var dn=function(){this.ids=[],this.positions=[],this.indexed=!1};dn.prototype.add=function(e,t,i,r){this.ids.push(_n(e)),this.positions.push(t,i,r)},dn.prototype.getPositions=function(e){for(var t=_n(e),i=0,r=this.ids.length-1;i<r;){var a=i+r>>1;this.ids[a]>=t?r=a:i=a+1}for(var n=[];this.ids[i]===t;)n.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return n},dn.serialize=function(e,t){var i=new Float64Array(e.ids),r=new Uint32Array(e.positions);return function e(t,i,r,a){for(;r<a;){for(var n=t[r+a>>1],o=r-1,s=a+1;;){do{o++}while(t[o]<n);do{s--}while(t[s]>n);if(o>=s)break;mn(t,o,s),mn(i,3*o,3*s),mn(i,3*o+1,3*s+1),mn(i,3*o+2,3*s+2)}s-r<a-s?(e(t,i,r,s),r=s+1):(e(t,i,s+1,a),a=s)}}(i,r,0,i.length-1),t&&t.push(i.buffer,r.buffer),{ids:i,positions:r}},dn.deserialize=function(e){var t=new dn;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t};var fn=Math.pow(2,53)-1;function _n(e){var t=+e;return!isNaN(t)&&t<=fn?t:pn(String(e))}function mn(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}Br("FeaturePositionMap",dn);var gn=function(e,t){this.gl=e.gl,this.location=t},yn=function(e){function t(t,i){e.call(this,t,i),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))},t}(gn),vn=function(e){function t(t,i){e.call(this,t,i),this.current=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))},t}(gn),bn=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))},t}(gn),xn=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))},t}(gn),wn=function(e){function t(t,i){e.call(this,t,i),this.current=[0,0,0,0]}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))},t}(gn),Sn=function(e){function t(t,i){e.call(this,t,i),this.current=$e.transparent}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))},t}(gn),An=new Float32Array(16),kn=function(e){function t(t,i){e.call(this,t,i),this.current=An}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(var t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}},t}(gn);function En(e){return[sn(255*e.r,255*e.g),sn(255*e.b,255*e.a)]}var In=function(e,t,i){this.value=e,this.uniformNames=t.map((function(e){return"u_"+e})),this.type=i};In.prototype.setUniform=function(e,t,i){e.set(i.constantOr(this.value))},In.prototype.getBinding=function(e,t,i){return"color"===this.type?new Sn(e,t):new vn(e,t)};var Tn=function(e,t){this.uniformNames=t.map((function(e){return"u_"+e})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Tn.prototype.setConstantPatternPositions=function(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr},Tn.prototype.setUniform=function(e,t,i,r){var a="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;a&&e.set(a)},Tn.prototype.getBinding=function(e,t,i){return"u_pattern"===i.substr(0,9)?new wn(e,t):new vn(e,t)};var Cn=function(e,t,i,r){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0}})),this.paintVertexArray=new r};Cn.prototype.populatePaintArray=function(e,t,i,r,a){var n=this.paintVertexArray.length,o=this.expression.evaluate(new na(0),t,{},r,[],a);this.paintVertexArray.resize(e),this._setPaintValue(n,e,o)},Cn.prototype.updatePaintArray=function(e,t,i,r){var a=this.expression.evaluate({zoom:0},i,r);this._setPaintValue(e,t,a)},Cn.prototype._setPaintValue=function(e,t,i){if("color"===this.type)for(var r=En(i),a=e;a<t;a++)this.paintVertexArray.emplace(a,r[0],r[1]);else{for(var n=e;n<t;n++)this.paintVertexArray.emplace(n,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}},Cn.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Cn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Pn=function(e,t,i,r,a,n){this.expression=e,this.uniformNames=t.map((function(e){return"u_"+e+"_t"})),this.type=i,this.useIntegerZoom=r,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=t.map((function(e){return{name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0}})),this.paintVertexArray=new n};Pn.prototype.populatePaintArray=function(e,t,i,r,a){var n=this.expression.evaluate(new na(this.zoom),t,{},r,[],a),o=this.expression.evaluate(new na(this.zoom+1),t,{},r,[],a),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,n,o)},Pn.prototype.updatePaintArray=function(e,t,i,r){var a=this.expression.evaluate({zoom:this.zoom},i,r),n=this.expression.evaluate({zoom:this.zoom+1},i,r);this._setPaintValue(e,t,a,n)},Pn.prototype._setPaintValue=function(e,t,i,r){if("color"===this.type)for(var a=En(i),n=En(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,a[0],a[1],n[0],n[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}},Pn.prototype.upload=function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Pn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Pn.prototype.setUniform=function(e,t){var i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,r=c(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(r)},Pn.prototype.getBinding=function(e,t,i){return new vn(e,t)};var Ln=function(e,t,i,r,a,n){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=r,this.layerId=n,this.zoomInPaintVertexArray=new a,this.zoomOutPaintVertexArray=new a};Ln.prototype.populatePaintArray=function(e,t,i){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],i)},Ln.prototype.updatePaintArray=function(e,t,i,r,a){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],a)},Ln.prototype._setPaintValues=function(e,t,i,r){if(r&&i){var a=r[i.min],n=r[i.mid],o=r[i.max];if(a&&n&&o)for(var s=e;s<t;s++)this.zoomInPaintVertexArray.emplace(s,n.tl[0],n.tl[1],n.br[0],n.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],n.pixelRatio,a.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,n.tl[0],n.tl[1],n.br[0],n.br[1],o.tl[0],o.tl[1],o.br[0],o.br[1],n.pixelRatio,o.pixelRatio)}},Ln.prototype.upload=function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ln.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ln.members,this.expression.isStateDependent))},Ln.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Rn=function(e,t,i){this.binders={},this._buffers=[];var r=[];for(var a in e.paint._values)if(i(a)){var n=e.paint.get(a);if(n instanceof ha&&Ri(n.property.specification)){var o=zn(a,e.type),s=n.value,l=n.property.specification.type,u=n.property.useIntegerZoom,c=n.property.specification["property-type"],p="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===s.kind)this.binders[a]=p?new Tn(s.value,o):new In(s.value,o,l),r.push("/u_"+a);else if("source"===s.kind||p){var h=Dn(a,l,"source");this.binders[a]=p?new Ln(s,l,u,t,h,e.id):new Cn(s,o,l,h),r.push("/a_"+a)}else{var d=Dn(a,l,"composite");this.binders[a]=new Pn(s,o,l,u,t,d),r.push("/z_"+a)}}}this.cacheKey=r.sort().join("")};Rn.prototype.getMaxValue=function(e){var t=this.binders[e];return t instanceof Cn||t instanceof Pn?t.maxValue:0},Rn.prototype.populatePaintArrays=function(e,t,i,r,a){for(var n in this.binders){var o=this.binders[n];(o instanceof Cn||o instanceof Pn||o instanceof Ln)&&o.populatePaintArray(e,t,i,r,a)}},Rn.prototype.setConstantPatternPositions=function(e,t){for(var i in this.binders){var r=this.binders[i];r instanceof Tn&&r.setConstantPatternPositions(e,t)}},Rn.prototype.updatePaintArrays=function(e,t,i,r,a){var n=!1;for(var o in e)for(var s=0,l=t.getPositions(o);s<l.length;s+=1){var u=l[s],c=i.feature(u.index);for(var p in this.binders){var h=this.binders[p];if((h instanceof Cn||h instanceof Pn||h instanceof Ln)&&!0===h.expression.isStateDependent){var d=r.paint.get(p);h.expression=d.value,h.updatePaintArray(u.start,u.end,c,e[o],a),n=!0}}}return n},Rn.prototype.defines=function(){var e=[];for(var t in this.binders){var i=this.binders[t];(i instanceof In||i instanceof Tn)&&e.push.apply(e,i.uniformNames.map((function(e){return"#define HAS_UNIFORM_"+e})))}return e},Rn.prototype.getBinderAttributes=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof Cn||i instanceof Pn)for(var r=0;r<i.paintVertexAttributes.length;r++)e.push(i.paintVertexAttributes[r].name);else if(i instanceof Ln)for(var a=0;a<ln.members.length;a++)e.push(ln.members[a].name)}return e},Rn.prototype.getBinderUniforms=function(){var e=[];for(var t in this.binders){var i=this.binders[t];if(i instanceof In||i instanceof Tn||i instanceof Pn)for(var r=0,a=i.uniformNames;r<a.length;r+=1)e.push(a[r])}return e},Rn.prototype.getPaintVertexBuffers=function(){return this._buffers},Rn.prototype.getUniforms=function(e,t){var i=[];for(var r in this.binders){var a=this.binders[r];if(a instanceof In||a instanceof Tn||a instanceof Pn)for(var n=0,o=a.uniformNames;n<o.length;n+=1){var s=o[n];if(t[s]){var l=a.getBinding(e,t[s],s);i.push({name:s,property:r,binding:l})}}}return i},Rn.prototype.setUniforms=function(e,t,i,r){for(var a=0,n=t;a<n.length;a+=1){var o=n[a],s=o.name,l=o.property;this.binders[l].setUniform(o.binding,r,i.get(l),s)}},Rn.prototype.updatePaintBuffers=function(e){for(var t in this._buffers=[],this.binders){var i=this.binders[t];if(e&&i instanceof Ln){var r=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(i instanceof Cn||i instanceof Pn)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}},Rn.prototype.upload=function(e){for(var t in this.binders){var i=this.binders[t];(i instanceof Cn||i instanceof Pn||i instanceof Ln)&&i.upload(e)}this.updatePaintBuffers()},Rn.prototype.destroy=function(){for(var e in this.binders){var t=this.binders[e];(t instanceof Cn||t instanceof Pn||t instanceof Ln)&&t.destroy()}};var Mn=function(e,t,i){void 0===i&&(i=function(){return!0}),this.programConfigurations={};for(var r=0,a=e;r<a.length;r+=1){var n=a[r];this.programConfigurations[n.id]=new Rn(n,t,i)}this.needsUpload=!1,this._featureMap=new dn,this._bufferOffset=0};function zn(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Dn(e,t,i){var r={color:{source:Pa,composite:Ha},number:{source:Va,composite:Pa}},a=function(e){return{"line-pattern":{source:La,composite:La},"fill-pattern":{source:La,composite:La},"fill-extrusion-pattern":{source:La,composite:La}}[e]}(e);return a&&a[i]||r[t][i]}Mn.prototype.populatePaintArrays=function(e,t,i,r,a,n){for(var o in this.programConfigurations)this.programConfigurations[o].populatePaintArrays(e,t,r,a,n);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0},Mn.prototype.updatePaintArrays=function(e,t,i,r){for(var a=0,n=i;a<n.length;a+=1){var o=n[a];this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r)||this.needsUpload}},Mn.prototype.get=function(e){return this.programConfigurations[e]},Mn.prototype.upload=function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}},Mn.prototype.destroy=function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()},Br("ConstantBinder",In),Br("CrossFadedConstantBinder",Tn),Br("SourceExpressionBinder",Cn),Br("CrossFadedCompositeBinder",Ln),Br("CompositeExpressionBinder",Pn),Br("ProgramConfiguration",Rn,{omit:["_buffers"]}),Br("ProgramConfigurationSet",Mn);var Bn=Math.pow(2,14)-1,Fn=-Bn-1;function On(e){for(var t=8192/e.extent,i=e.loadGeometry(),r=0;r<i.length;r++)for(var a=i[r],n=0;n<a.length;n++){var o=a[n],s=Math.round(o.x*t),l=Math.round(o.y*t);o.x=c(s,Fn,Bn),o.y=c(l,Fn,Bn),(s<o.x||s>o.x+1||l<o.y||l>o.y+1)&&S("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}function Nn(e,t,i,r,a){e.emplaceBack(2*t+(r+1)/2,2*i+(a+1)/2)}var Un=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ea,this.indexArray=new Na,this.segments=new on,this.programConfigurations=new Mn(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function qn(e,t){for(var i=0;i<e.length;i++)if(Jn(t,e[i]))return!0;for(var r=0;r<t.length;r++)if(Jn(e,t[r]))return!0;return!!Kn(e,t)}function Vn(e,t,i){return!!Jn(e,t)||!!Hn(t,e,i)}function jn(e,t){if(1===e.length)return Wn(t,e[0]);for(var i=0;i<t.length;i++)for(var r=t[i],a=0;a<r.length;a++)if(Jn(e,r[a]))return!0;for(var n=0;n<e.length;n++)if(Wn(t,e[n]))return!0;for(var o=0;o<t.length;o++)if(Kn(e,t[o]))return!0;return!1}function Gn(e,t,i){if(e.length>1){if(Kn(e,t))return!0;for(var r=0;r<t.length;r++)if(Hn(t[r],e,i))return!0}for(var a=0;a<e.length;a++)if(Hn(e[a],t,i))return!0;return!1}function Kn(e,t){if(0===e.length||0===t.length)return!1;for(var i=0;i<e.length-1;i++)for(var r=e[i],a=e[i+1],n=0;n<t.length-1;n++)if(Zn(r,a,t[n],t[n+1]))return!0;return!1}function Zn(e,t,i,r){return A(e,i,r)!==A(t,i,r)&&A(e,t,i)!==A(e,t,r)}function Hn(e,t,i){var r=i*i;if(1===t.length)return e.distSqr(t[0])<r;for(var a=1;a<t.length;a++)if(Qn(e,t[a-1],t[a])<r)return!0;return!1}function Qn(e,t,i){var r=t.distSqr(i);if(0===r)return e.distSqr(t);var a=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/r;return e.distSqr(a<0?t:a>1?i:i.sub(t)._mult(a)._add(t))}function Wn(e,t){for(var i,r,a,n=!1,o=0;o<e.length;o++)for(var s=0,l=(i=e[o]).length-1;s<i.length;l=s++)(r=i[s]).y>t.y!=(a=i[l]).y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(n=!n);return n}function Jn(e,t){for(var i=!1,r=0,a=e.length-1;r<e.length;a=r++){var n=e[r],o=e[a];n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(i=!i)}return i}function Xn(e,t,i){var r=i[0],a=i[2];if(e.x<r.x&&t.x<r.x||e.x>a.x&&t.x>a.x||e.y<r.y&&t.y<r.y||e.y>a.y&&t.y>a.y)return!1;var n=A(e,t,i[0]);return n!==A(e,t,i[1])||n!==A(e,t,i[2])||n!==A(e,t,i[3])}function Yn(e,t,i){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:i.programConfigurations.get(t.id).getMaxValue(e)}function $n(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function eo(e,t,i,r,n){if(!t[0]&&!t[1])return e;var o=a.convert(t)._mult(n);"viewport"===i&&o._rotate(-r);for(var s=[],l=0;l<e.length;l++)s.push(e[l].sub(o));return s}Un.prototype.populate=function(e,t,i){var r=this.layers[0],a=[],n=null;"circle"===r.type&&(n=r.layout.get("circle-sort-key"));for(var o=0,s=e;o<s.length;o+=1){var l=s[o],u=l.feature,c=l.id,p=l.index,h=l.sourceLayerIndex,d=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:c,properties:u.properties,geometry:d?On(u):[]};if(this.layers[0]._featureFilter.filter(new na(this.zoom),f,i)){d||(f.geometry=On(u));var _=n?n.evaluate(f,{},i):void 0;a.push({id:c,properties:u.properties,type:u.type,sourceLayerIndex:h,index:p,geometry:f.geometry,patterns:{},sortKey:_})}}n&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var m=0,g=a;m<g.length;m+=1){var y=g[m],v=y.geometry,b=y.index,x=y.sourceLayerIndex,w=e[b].feature;this.addFeature(y,v,b,i),t.featureIndex.insert(w,v,b,x,this.index)}},Un.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Un.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Un.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Un.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Un.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Un.prototype.addFeature=function(e,t,i,r){for(var a=0,n=t;a<n.length;a+=1)for(var o=0,s=n[a];o<s.length;o+=1){var l=s[o],u=l.x,c=l.y;if(!(u<0||u>=8192||c<0||c>=8192)){var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),h=p.vertexLength;Nn(this.layoutVertexArray,u,c,-1,-1),Nn(this.layoutVertexArray,u,c,1,-1),Nn(this.layoutVertexArray,u,c,1,1),Nn(this.layoutVertexArray,u,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),p.vertexLength+=4,p.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},r)},Br("CircleBucket",Un,{omit:["layers"]});var to=new va({"circle-sort-key":new _a(Te.layout_circle["circle-sort-key"])}),io={paint:new va({"circle-radius":new _a(Te.paint_circle["circle-radius"]),"circle-color":new _a(Te.paint_circle["circle-color"]),"circle-blur":new _a(Te.paint_circle["circle-blur"]),"circle-opacity":new _a(Te.paint_circle["circle-opacity"]),"circle-translate":new fa(Te.paint_circle["circle-translate"]),"circle-translate-anchor":new fa(Te.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fa(Te.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fa(Te.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new _a(Te.paint_circle["circle-stroke-width"]),"circle-stroke-color":new _a(Te.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new _a(Te.paint_circle["circle-stroke-opacity"])}),layout:to},ro="undefined"!=typeof Float32Array?Float32Array:Array;function ao(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function no(e,t,i){var r=t[0],a=t[1],n=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],_=t[12],m=t[13],g=t[14],y=t[15],v=i[0],b=i[1],x=i[2],w=i[3];return e[0]=v*r+b*s+x*p+w*_,e[1]=v*a+b*l+x*h+w*m,e[2]=v*n+b*u+x*d+w*g,e[3]=v*o+b*c+x*f+w*y,e[4]=(v=i[4])*r+(b=i[5])*s+(x=i[6])*p+(w=i[7])*_,e[5]=v*a+b*l+x*h+w*m,e[6]=v*n+b*u+x*d+w*g,e[7]=v*o+b*c+x*f+w*y,e[8]=(v=i[8])*r+(b=i[9])*s+(x=i[10])*p+(w=i[11])*_,e[9]=v*a+b*l+x*h+w*m,e[10]=v*n+b*u+x*d+w*g,e[11]=v*o+b*c+x*f+w*y,e[12]=(v=i[12])*r+(b=i[13])*s+(x=i[14])*p+(w=i[15])*_,e[13]=v*a+b*l+x*h+w*m,e[14]=v*n+b*u+x*d+w*g,e[15]=v*o+b*c+x*f+w*y,e}Math.hypot||(Math.hypot=function(){for(var e=arguments,t=0,i=arguments.length;i--;)t+=e[i]*e[i];return Math.sqrt(t)});var oo,so=no;function lo(e,t,i){var r=t[0],a=t[1],n=t[2],o=t[3];return e[0]=i[0]*r+i[4]*a+i[8]*n+i[12]*o,e[1]=i[1]*r+i[5]*a+i[9]*n+i[13]*o,e[2]=i[2]*r+i[6]*a+i[10]*n+i[14]*o,e[3]=i[3]*r+i[7]*a+i[11]*n+i[15]*o,e}oo=new ro(3),ro!=Float32Array&&(oo[0]=0,oo[1]=0,oo[2]=0),function(){var e=new ro(4);ro!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0)}();var uo=(function(){var e=new ro(2);ro!=Float32Array&&(e[0]=0,e[1]=0)}(),function(e){function t(t){e.call(this,t,io)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new Un(e)},t.prototype.queryRadius=function(e){var t=e;return Yn("circle-radius",this,t)+Yn("circle-stroke-width",this,t)+$n(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,a,n,o,s){for(var l=eo(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),n.angle,o),u=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),c="map"===this.paint.get("circle-pitch-alignment"),p=c?l:function(e,t){return e.map((function(e){return co(e,t)}))}(l,s),h=c?u*o:u,d=0,f=r;d<f.length;d+=1)for(var _=0,m=f[d];_<m.length;_+=1){var g=m[_],y=c?g:co(g,s),v=h,b=lo([],[g.x,g.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?v*=b[3]/n.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(v*=n.cameraToCenterDistance/b[3]),Vn(p,y,v))return!0}return!1},t}(ba));function co(e,t){var i=lo([],[e.x,e.y,0,1],t);return new a(i[0]/i[3],i[1]/i[3])}var po=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(Un);function ho(e,t,i,r){var a=t.width,n=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==a*n*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(a*n*i);return e.width=a,e.height=n,e.data=r,e}function fo(e,t,i){var r=t.width,a=t.height;if(r!==e.width||a!==e.height){var n=ho({},{width:r,height:a},i);_o(e,n,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,a)},i),e.width=r,e.height=a,e.data=n.data}}function _o(e,t,i,r,a,n){if(0===a.width||0===a.height)return t;if(a.width>e.width||a.height>e.height||i.x>e.width-a.width||i.y>e.height-a.height)throw new RangeError("out of range source coordinates for image copy");if(a.width>t.width||a.height>t.height||r.x>t.width-a.width||r.y>t.height-a.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<a.height;l++)for(var u=((i.y+l)*e.width+i.x)*n,c=((r.y+l)*t.width+r.x)*n,p=0;p<a.width*n;p++)s[c+p]=o[u+p];return t}Br("HeatmapBucket",po,{omit:["layers"]});var mo=function(e,t){ho(this,e,1,t)};mo.prototype.resize=function(e){fo(this,e,1)},mo.prototype.clone=function(){return new mo({width:this.width,height:this.height},new Uint8Array(this.data))},mo.copy=function(e,t,i,r,a){_o(e,t,i,r,a,1)};var go=function(e,t){ho(this,e,4,t)};go.prototype.resize=function(e){fo(this,e,4)},go.prototype.replace=function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e},go.prototype.clone=function(){return new go({width:this.width,height:this.height},new Uint8Array(this.data))},go.copy=function(e,t,i,r,a){_o(e,t,i,r,a,4)},Br("AlphaImage",mo),Br("RGBAImage",go);var yo={paint:new va({"heatmap-radius":new _a(Te.paint_heatmap["heatmap-radius"]),"heatmap-weight":new _a(Te.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fa(Te.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ya(Te.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fa(Te.paint_heatmap["heatmap-opacity"])})};function vo(e){var t={},i=e.resolution||256,r=e.clips?e.clips.length:1,a=e.image||new go({width:i,height:r}),n=function(i,r,n){t[e.evaluationKey]=n;var o=e.expression.evaluate(t);a.data[i+r+0]=Math.floor(255*o.r/o.a),a.data[i+r+1]=Math.floor(255*o.g/o.a),a.data[i+r+2]=Math.floor(255*o.b/o.a),a.data[i+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*i)for(var l=0,u=0;l<i;l++,u+=4){var c=l/(i-1),p=e.clips[o];n(s,u,p.start*(1-c)+p.end*c)}else for(var h=0,d=0;h<i;h++,d+=4)n(0,d,h/(i-1));return a}var bo=function(e){function t(t){e.call(this,t,yo),this._updateColorRamp()}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new po(e)},t.prototype._handleSpecialPaintPropertyUpdate=function(e){"heatmap-color"===e&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){this.colorRamp=vo({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(ba),xo={paint:new va({"hillshade-illumination-direction":new fa(Te.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fa(Te.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fa(Te.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fa(Te.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fa(Te.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fa(Te.paint_hillshade["hillshade-accent-color"])})},wo=function(e){function t(t){e.call(this,t,xo)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(ba),So=Aa([{name:"a_pos",components:2,type:"Int16"}],4).members,Ao=Eo,ko=Eo;function Eo(e,t,i){i=i||2;var r,a,n,o,s,l,u,c=t&&t.length,p=c?t[0]*i:e.length,h=Io(e,0,p,i,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(e,t,i,r){var a,n,o,s=[];for(a=0,n=t.length;a<n;a++)(o=Io(e,t[a]*r,a<n-1?t[a+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Oo(o));for(s.sort(zo),a=0;a<s.length;a++)Do(s[a],i),i=To(i,i.next);return i}(e,t,h,i)),e.length>80*i){r=n=e[0],a=o=e[1];for(var f=i;f<p;f+=i)(s=e[f])<r&&(r=s),(l=e[f+1])<a&&(a=l),s>n&&(n=s),l>o&&(o=l);u=0!==(u=Math.max(n-r,o-a))?1/u:0}return Co(h,d,i,r,a,u),d}function Io(e,t,i,r,a){var n,o;if(a===Xo(e,t,i,r)>0)for(n=t;n<i;n+=r)o=Qo(n,e[n],e[n+1],o);else for(n=i-r;n>=t;n-=r)o=Qo(n,e[n],e[n+1],o);return o&&Vo(o,o.next)&&(Wo(o),o=o.next),o}function To(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!Vo(r,r.next)&&0!==qo(r.prev,r,r.next))r=r.next;else{if(Wo(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Co(e,t,i,r,a,n,o){if(e){!o&&n&&function(e,t,i,r){var a=e;do{null===a.z&&(a.z=Fo(a.x,a.y,t,i,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,function(e){var t,i,r,a,n,o,s,l,u=1;do{for(i=e,e=null,n=null,o=0;i;){for(o++,r=i,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(a=i,i=i.nextZ,s--):(a=r,r=r.nextZ,l--),n?n.nextZ=a:e=a,a.prevZ=n,n=a;i=r}n.nextZ=null,u*=2}while(o>1)}(a)}(e,r,a,n);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,n?Lo(e,r,a,n):Po(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),Wo(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Co(e=Ro(To(e),t,i),t,i,r,a,n,2):2===o&&Mo(e,t,i,r,a,n):Co(To(e),t,i,r,a,n,1);break}}}function Po(e){var t=e.prev,i=e,r=e.next;if(qo(t,i,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(No(t.x,t.y,i.x,i.y,r.x,r.y,a.x,a.y)&&qo(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Lo(e,t,i,r){var a=e.prev,n=e,o=e.next;if(qo(a,n,o)>=0)return!1;for(var s=a.x>n.x?a.x>o.x?a.x:o.x:n.x>o.x?n.x:o.x,l=a.y>n.y?a.y>o.y?a.y:o.y:n.y>o.y?n.y:o.y,u=Fo(a.x<n.x?a.x<o.x?a.x:o.x:n.x<o.x?n.x:o.x,a.y<n.y?a.y<o.y?a.y:o.y:n.y<o.y?n.y:o.y,t,i,r),c=Fo(s,l,t,i,r),p=e.prevZ,h=e.nextZ;p&&p.z>=u&&h&&h.z<=c;){if(p!==e.prev&&p!==e.next&&No(a.x,a.y,n.x,n.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,h!==e.prev&&h!==e.next&&No(a.x,a.y,n.x,n.y,o.x,o.y,h.x,h.y)&&qo(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;p&&p.z>=u;){if(p!==e.prev&&p!==e.next&&No(a.x,a.y,n.x,n.y,o.x,o.y,p.x,p.y)&&qo(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&No(a.x,a.y,n.x,n.y,o.x,o.y,h.x,h.y)&&qo(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Ro(e,t,i){var r=e;do{var a=r.prev,n=r.next.next;!Vo(a,n)&&jo(a,r,r.next,n)&&Zo(a,n)&&Zo(n,a)&&(t.push(a.i/i),t.push(r.i/i),t.push(n.i/i),Wo(r),Wo(r.next),r=e=n),r=r.next}while(r!==e);return To(r)}function Mo(e,t,i,r,a,n){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Uo(o,s)){var l=Ho(o,s);return o=To(o,o.next),l=To(l,l.next),Co(o,t,i,r,a,n),void Co(l,t,i,r,a,n)}s=s.next}o=o.next}while(o!==e)}function zo(e,t){return e.x-t.x}function Do(e,t){if(t=function(e,t){var i,r=t,a=e.x,n=e.y,o=-1/0;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){var s=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=a&&s>o){if(o=s,s===a){if(n===r.y)return r;if(n===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(a===o)return i;var l,u=i,c=i.x,p=i.y,h=1/0;r=i;do{a>=r.x&&r.x>=c&&a!==r.x&&No(n<p?a:o,n,c,p,n<p?o:a,n,r.x,r.y)&&(l=Math.abs(n-r.y)/(a-r.x),Zo(r,e)&&(l<h||l===h&&(r.x>i.x||r.x===i.x&&Bo(i,r)))&&(i=r,h=l)),r=r.next}while(r!==u);return i}(e,t)){var i=Ho(t,e);To(t,t.next),To(i,i.next)}}function Bo(e,t){return qo(e.prev,e,t.prev)<0&&qo(t.next,e,e.next)<0}function Fo(e,t,i,r,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Oo(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function No(e,t,i,r,a,n,o,s){return(a-o)*(t-s)-(e-o)*(n-s)>=0&&(e-o)*(r-s)-(i-o)*(t-s)>=0&&(i-o)*(n-s)-(a-o)*(r-s)>=0}function Uo(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&jo(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Zo(e,t)&&Zo(t,e)&&function(e,t){var i=e,r=!1,a=(e.x+t.x)/2,n=(e.y+t.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&a<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(qo(e.prev,e,t.prev)||qo(e,t.prev,t))||Vo(e,t)&&qo(e.prev,e,e.next)>0&&qo(t.prev,t,t.next)>0)}function qo(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Vo(e,t){return e.x===t.x&&e.y===t.y}function jo(e,t,i,r){var a=Ko(qo(e,t,i)),n=Ko(qo(e,t,r)),o=Ko(qo(i,r,e)),s=Ko(qo(i,r,t));return a!==n&&o!==s||!(0!==a||!Go(e,i,t))||!(0!==n||!Go(e,r,t))||!(0!==o||!Go(i,e,r))||!(0!==s||!Go(i,t,r))}function Go(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Ko(e){return e>0?1:e<0?-1:0}function Zo(e,t){return qo(e.prev,e,e.next)<0?qo(e,t,e.next)>=0&&qo(e,e.prev,t)>=0:qo(e,t,e.prev)<0||qo(e,e.next,t)<0}function Ho(e,t){var i=new Jo(e.i,e.x,e.y),r=new Jo(t.i,t.x,t.y),a=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=a,a.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function Qo(e,t,i,r){var a=new Jo(e,t,i);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function Wo(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Jo(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Xo(e,t,i,r){for(var a=0,n=t,o=i-r;n<i;n+=r)a+=(e[o]-e[n])*(e[n+1]+e[o+1]),o=n;return a}function Yo(e,t,i,r,a){!function e(t,i,r,a,n){for(;a>r;){if(a-r>600){var o=a-r+1,s=i-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);e(t,i,Math.max(r,Math.floor(i-s*u/o+c)),Math.min(a,Math.floor(i+(o-s)*u/o+c)),n)}var p=t[i],h=r,d=a;for($o(t,r,i),n(t[a],p)>0&&$o(t,r,a);h<d;){for($o(t,h,d),h++,d--;n(t[h],p)<0;)h++;for(;n(t[d],p)>0;)d--}0===n(t[r],p)?$o(t,r,d):$o(t,++d,a),d<=i&&(r=d+1),i<=d&&(a=d-1)}}(e,t,i||0,r||e.length-1,a||es)}function $o(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function es(e,t){return e<t?-1:e>t?1:0}function ts(e,t){var i=e.length;if(i<=1)return[e];for(var r,a,n=[],o=0;o<i;o++){var s=k(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===a&&(a=s<0),a===s<0?(r&&n.push(r),r=[e[o]]):r.push(e[o]))}if(r&&n.push(r),t>1)for(var l=0;l<n.length;l++)n[l].length<=t||(Yo(n[l],t,1,n[l].length-1,is),n[l]=n[l].slice(0,t));return n}function is(e,t){return t.area-e.area}function rs(e,t,i){for(var r=i.patternDependencies,a=!1,n=0,o=t;n<o.length;n+=1){var s=o[n].paint.get(e+"-pattern");s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,r[l.to]=!0,r[l.from]=!0)}return a}function as(e,t,i,r,a){for(var n=a.patternDependencies,o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.paint.get(e+"-pattern").value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},i,{},a.availableImages),p=u.evaluate({zoom:r},i,{},a.availableImages),h=u.evaluate({zoom:r+1},i,{},a.availableImages);p=p&&p.name?p.name:p,h=h&&h.name?h.name:h,n[c=c&&c.name?c.name:c]=!0,n[p]=!0,n[h]=!0,i.patterns[l.id]={min:c,mid:p,max:h}}}return i}Eo.deviation=function(e,t,i,r){var a=t&&t.length,n=Math.abs(Xo(e,0,a?t[0]*i:e.length,i));if(a)for(var o=0,s=t.length;o<s;o++)n-=Math.abs(Xo(e,t[o]*i,o<s-1?t[o+1]*i:e.length,i));var l=0;for(o=0;o<r.length;o+=3){var u=r[o]*i,c=r[o+1]*i,p=r[o+2]*i;l+=Math.abs((e[u]-e[p])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[p+1]-e[u+1]))}return 0===n&&0===l?0:Math.abs((l-n)/n)},Eo.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var n=0;n<e[a].length;n++)for(var o=0;o<t;o++)i.vertices.push(e[a][n][o]);a>0&&i.holes.push(r+=e[a-1].length)}return i},Ao.default=ko;var ns=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ea,this.indexArray=new Na,this.indexArray2=new Ka,this.programConfigurations=new Mn(e.layers,e.zoom),this.segments=new on,this.segments2=new on,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};ns.prototype.populate=function(e,t,i){this.hasPattern=rs("fill",this.layers,t);for(var r=this.layers[0].layout.get("fill-sort-key"),a=[],n=0,o=e;n<o.length;n+=1){var s=o[n],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:h?On(l):[]};if(this.layers[0]._featureFilter.filter(new na(this.zoom),d,i)){h||(d.geometry=On(l));var f=r?r.evaluate(d,{},i,t.availableImages):void 0;a.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _=0,m=a;_<m.length;_+=1){var g=m[_],y=g.geometry,v=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var x=as("fill",this.layers,g,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(g,y,v,i,{});t.featureIndex.insert(e[v].feature,y,v,b,this.index)}},ns.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ns.prototype.addFeatures=function(e,t,i){for(var r=0,a=this.patternFeatures;r<a.length;r+=1){var n=a[r];this.addFeature(n,n.geometry,n.index,t,i)}},ns.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ns.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ns.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,So),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0},ns.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ns.prototype.addFeature=function(e,t,i,r,a){for(var n=0,o=ts(t,500);n<o.length;n+=1){for(var s=o[n],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray),h=p.vertexLength,d=[],f=[],_=0,m=s;_<m.length;_+=1){var g=m[_];if(0!==g.length){g!==s[0]&&f.push(d.length/2);var y=this.segments2.prepareSegment(g.length,this.layoutVertexArray,this.indexArray2),v=y.vertexLength;this.layoutVertexArray.emplaceBack(g[0].x,g[0].y),this.indexArray2.emplaceBack(v+g.length-1,v),d.push(g[0].x),d.push(g[0].y);for(var b=1;b<g.length;b++)this.layoutVertexArray.emplaceBack(g[b].x,g[b].y),this.indexArray2.emplaceBack(v+b-1,v+b),d.push(g[b].x),d.push(g[b].y);y.vertexLength+=g.length,y.primitiveLength+=g.length}}for(var x=Ao(d,f),w=0;w<x.length;w+=3)this.indexArray.emplaceBack(h+x[w],h+x[w+1],h+x[w+2]);p.vertexLength+=l,p.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,a,r)},Br("FillBucket",ns,{omit:["layers","patternFeatures"]});var os=new va({"fill-sort-key":new _a(Te.layout_fill["fill-sort-key"])}),ss={paint:new va({"fill-antialias":new fa(Te.paint_fill["fill-antialias"]),"fill-opacity":new _a(Te.paint_fill["fill-opacity"]),"fill-color":new _a(Te.paint_fill["fill-color"]),"fill-outline-color":new _a(Te.paint_fill["fill-outline-color"]),"fill-translate":new fa(Te.paint_fill["fill-translate"]),"fill-translate-anchor":new fa(Te.paint_fill["fill-translate-anchor"]),"fill-pattern":new ma(Te.paint_fill["fill-pattern"])}),layout:os},ls=function(e){function t(t){e.call(this,t,ss)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,i){e.prototype.recalculate.call(this,t,i);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new ns(e)},t.prototype.queryRadius=function(){return $n(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,a,n,o){return jn(eo(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),n.angle,o),r)},t.prototype.isTileClipped=function(){return!0},t}(ba),us=Aa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,cs=ps;function ps(e,t,i,r,a){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(hs,this,t)}function hs(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function ds(e){for(var t,i,r=0,a=0,n=e.length,o=n-1;a<n;o=a++)r+=((i=e[o]).x-(t=e[a]).x)*(t.y+i.y);return r}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,r=1,n=0,o=0,s=0,l=[];e.pos<i;){if(n<=0){var u=e.readVarint();r=7&u,n=u>>3}if(n--,1===r||2===r)o+=e.readSVarint(),s+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new a(o,s));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&l.push(t),l},ps.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,r=0,a=0,n=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();i=7&c,r=c>>3}if(r--,1===i||2===i)(a+=e.readSVarint())<o&&(o=a),a>s&&(s=a),(n+=e.readSVarint())<l&&(l=n),n>u&&(u=n);else if(7!==i)throw new Error("unknown command "+i)}return[o,l,s,u]},ps.prototype.toGeoJSON=function(e,t,i){var r,a,n=this.extent*Math.pow(2,i),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=ps.types[this.type];function c(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+o)/n-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+s)/n)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<l.length;r++)p[r]=l[r][0];c(l=p);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,r,a=[],n=0;n<t;n++){var o=ds(e[n]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(i&&a.push(i),i=[e[n]]):i.push(e[n]))}return i&&a.push(i),a}(l),r=0;r<l.length;r++)for(a=0;a<l[r].length;a++)c(l[r][a])}1===l.length?l=l[0]:u="Multi"+u;var h={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var fs=_s;function _s(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(ms,this,t),this.length=this._features.length}function ms(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(i))}function gs(e,t,i){if(3===e){var r=new fs(i,i.readVarint()+i.pos);r.length&&(t[r.name]=r)}}_s.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new cs(this._pbf,t,this.extent,this._keys,this._values)};var ys={VectorTile:function(e,t){this.layers=e.readFields(gs,{},t)},VectorTileFeature:cs,VectorTileLayer:fs},vs=ys.VectorTileFeature.types,bs=Math.pow(2,13);function xs(e,t,i,r,a,n,o,s){e.emplaceBack(t,i,2*Math.floor(r*bs)+o,a*bs*2,n*bs*2,Math.round(s))}var ws=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ta,this.indexArray=new Na,this.programConfigurations=new Mn(e.layers,e.zoom),this.segments=new on,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};function Ss(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}ws.prototype.populate=function(e,t,i){this.features=[],this.hasPattern=rs("fill-extrusion",this.layers,t);for(var r=0,a=e;r<a.length;r+=1){var n=a[r],o=n.feature,s=n.id,l=n.index,u=n.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,p={type:o.type,id:s,properties:o.properties,geometry:c?On(o):[]};if(this.layers[0]._featureFilter.filter(new na(this.zoom),p,i)){var h={id:s,sourceLayerIndex:u,index:l,geometry:c?p.geometry:On(o),properties:o.properties,type:o.type,patterns:{}};this.hasPattern?this.features.push(as("fill-extrusion",this.layers,h,this.zoom,t)):this.addFeature(h,h.geometry,l,i,{}),t.featureIndex.insert(o,h.geometry,l,u,this.index,!0)}}},ws.prototype.addFeatures=function(e,t,i){for(var r=0,a=this.features;r<a.length;r+=1){var n=a[r];this.addFeature(n,n.geometry,n.index,t,i)}},ws.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},ws.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ws.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ws.prototype.upload=function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,us),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},ws.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ws.prototype.addFeature=function(e,t,i,r,a){for(var n=0,o=ts(t,500);n<o.length;n+=1){for(var s=o[n],l=0,u=0,c=s;u<c.length;u+=1)l+=c[u].length;for(var p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,d=s;h<d.length;h+=1){var f=d[h];if(0!==f.length&&!((R=f).every((function(e){return e.x<0}))||R.every((function(e){return e.x>8192}))||R.every((function(e){return e.y<0}))||R.every((function(e){return e.y>8192}))))for(var _=0,m=0;m<f.length;m++){var g=f[m];if(m>=1){var y=f[m-1];if(!Ss(g,y)){p.vertexLength+4>on.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var v=g.sub(y)._perp()._unit(),b=y.dist(g);_+b>32768&&(_=0),xs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,0,_),xs(this.layoutVertexArray,g.x,g.y,v.x,v.y,0,1,_),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,0,_+=b),xs(this.layoutVertexArray,y.x,y.y,v.x,v.y,0,1,_);var x=p.vertexLength;this.indexArray.emplaceBack(x,x+2,x+1),this.indexArray.emplaceBack(x+1,x+2,x+3),p.vertexLength+=4,p.primitiveLength+=2}}}}if(p.vertexLength+l>on.MAX_VERTEX_ARRAY_LENGTH&&(p=this.segments.prepareSegment(l,this.layoutVertexArray,this.indexArray)),"Polygon"===vs[e.type]){for(var w=[],S=[],A=p.vertexLength,k=0,E=s;k<E.length;k+=1){var I=E[k];if(0!==I.length){I!==s[0]&&S.push(w.length/2);for(var T=0;T<I.length;T++){var C=I[T];xs(this.layoutVertexArray,C.x,C.y,0,0,1,1,0),w.push(C.x),w.push(C.y)}}}for(var P=Ao(w,S),L=0;L<P.length;L+=3)this.indexArray.emplaceBack(A+P[L],A+P[L+2],A+P[L+1]);p.primitiveLength+=P.length/3,p.vertexLength+=l}}var R;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,a,r)},Br("FillExtrusionBucket",ws,{omit:["layers","features"]});var As={paint:new va({"fill-extrusion-opacity":new fa(Te["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new _a(Te["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fa(Te["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fa(Te["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ma(Te["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new _a(Te["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new _a(Te["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fa(Te["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},ks=function(e){function t(t){e.call(this,t,As)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.createBucket=function(e){return new ws(e)},t.prototype.queryRadius=function(){return $n(this.paint.get("fill-extrusion-translate"))},t.prototype.is3D=function(){return!0},t.prototype.queryIntersectsFeature=function(e,t,i,r,n,o,s,l){var u=eo(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(t,i),p=this.paint.get("fill-extrusion-base").evaluate(t,i),h=function(e,t,i,r){for(var n=[],o=0,s=e;o<s.length;o+=1){var l=s[o],u=[l.x,l.y,0,1];lo(u,u,t),n.push(new a(u[0]/u[3],u[1]/u[3]))}return n}(u,l),d=function(e,t,i,r){for(var n=[],o=[],s=r[8]*t,l=r[9]*t,u=r[10]*t,c=r[11]*t,p=r[8]*i,h=r[9]*i,d=r[10]*i,f=r[11]*i,_=0,m=e;_<m.length;_+=1){for(var g=[],y=[],v=0,b=m[_];v<b.length;v+=1){var x=b[v],w=x.x,S=x.y,A=r[0]*w+r[4]*S+r[12],k=r[1]*w+r[5]*S+r[13],E=r[2]*w+r[6]*S+r[14],I=r[3]*w+r[7]*S+r[15],T=E+u,C=I+c,P=A+p,L=k+h,R=E+d,M=I+f,z=new a((A+s)/C,(k+l)/C);z.z=T/C,g.push(z);var D=new a(P/M,L/M);D.z=R/M,y.push(D)}n.push(g),o.push(y)}return[n,o]}(r,p,c,l);return function(e,t,i){var r=1/0;jn(i,t)&&(r=Is(i,t[0]));for(var a=0;a<t.length;a++)for(var n=t[a],o=e[a],s=0;s<n.length-1;s++){var l=n[s],u=[l,n[s+1],o[s+1],o[s],l];qn(i,u)&&(r=Math.min(r,Is(i,u)))}return r!==1/0&&r}(d[0],d[1],h)},t}(ba);function Es(e,t){return e.x*t.x+e.y*t.y}function Is(e,t){if(1===e.length){for(var i,r=0,a=t[r++];!i||a.equals(i);)if(!(i=t[r++]))return 1/0;for(;r<t.length;r++){var n=t[r],o=e[0],s=i.sub(a),l=n.sub(a),u=o.sub(a),c=Es(s,s),p=Es(s,l),h=Es(l,l),d=Es(u,s),f=Es(u,l),_=c*h-p*p,m=(h*d-p*f)/_,g=(c*f-p*d)/_,y=a.z*(1-m-g)+i.z*m+n.z*g;if(isFinite(y))return y}return 1/0}for(var v=1/0,b=0,x=t;b<x.length;b+=1)v=Math.min(v,x[b].z);return v}var Ts=Aa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Cs=Aa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Ps=ys.VectorTileFeature.types,Ls=Math.cos(Math.PI/180*37.5),Rs=Math.pow(2,14)/.5,Ms=function(e){var t=this;this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){t.gradients[e.id]={}})),this.layoutVertexArray=new Ca,this.layoutVertexArray2=new Pa,this.indexArray=new Na,this.programConfigurations=new Mn(e.layers,e.zoom),this.segments=new on,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))};Ms.prototype.populate=function(e,t,i){this.hasPattern=rs("line",this.layers,t);for(var r=this.layers[0].layout.get("line-sort-key"),a=[],n=0,o=e;n<o.length;n+=1){var s=o[n],l=s.feature,u=s.id,c=s.index,p=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d={type:l.type,id:u,properties:l.properties,geometry:h?On(l):[]};if(this.layers[0]._featureFilter.filter(new na(this.zoom),d,i)){h||(d.geometry=On(l));var f=r?r.evaluate(d,{},i):void 0;a.push({id:u,properties:l.properties,type:l.type,sourceLayerIndex:p,index:c,geometry:d.geometry,patterns:{},sortKey:f})}}r&&a.sort((function(e,t){return e.sortKey-t.sortKey}));for(var _=0,m=a;_<m.length;_+=1){var g=m[_],y=g.geometry,v=g.index,b=g.sourceLayerIndex;if(this.hasPattern){var x=as("line",this.layers,g,this.zoom,t);this.patternFeatures.push(x)}else this.addFeature(g,y,v,i,{});t.featureIndex.insert(e[v].feature,y,v,b,this.index)}},Ms.prototype.update=function(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)},Ms.prototype.addFeatures=function(e,t,i){for(var r=0,a=this.patternFeatures;r<a.length;r+=1){var n=a[r];this.addFeature(n,n.geometry,n.index,t,i)}},Ms.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ms.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ms.prototype.upload=function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Cs)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ts),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0},Ms.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ms.prototype.lineFeatureClips=function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}},Ms.prototype.addFeature=function(e,t,i,r,a){var n=this.layers[0].layout,o=n.get("line-join").evaluate(e,{}),s=n.get("line-cap"),l=n.get("line-miter-limit"),u=n.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(var c=0,p=t;c<p.length;c+=1)this.addLine(p[c],e,o,s,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,a,r)},Ms.prototype.addLine=function(e,t,i,r,a,n){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Ps[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(a=1.05);var c,p=this.overscaling<=16?122880/(512*this.overscaling):0,h=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray),d=void 0,f=void 0,_=void 0,m=void 0;this.e1=this.e2=-1,s&&(m=e[u].sub(c=e[l-2])._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?s?e[u+1]:void 0:e[g+1])||!e[g].equals(f)){m&&(_=m),c&&(d=c),c=e[g],m=f?f.sub(c)._unit()._perp():_;var y=(_=_||m).add(m);0===y.x&&0===y.y||y._unit();var v=_.x*m.x+_.y*m.y,b=y.x*m.x+y.y*m.y,x=0!==b?1/b:1/0,w=2*Math.sqrt(2-2*b),S=b<Ls&&d&&f,A=_.x*m.y-_.y*m.x>0;if(S&&g>u){var k=c.dist(d);if(k>2*p){var E=c.sub(c.sub(d)._mult(p/k)._round());this.updateDistance(d,E),this.addCurrentVertex(E,_,0,0,h),d=E}}var I=d&&f,T=I?i:s?"butt":r;if(I&&"round"===T&&(x<n?T="miter":x<=2&&(T="fakeround")),"miter"===T&&x>a&&(T="bevel"),"bevel"===T&&(x>2&&(T="flipbevel"),x<a&&(T="miter")),d&&this.updateDistance(d,c),"miter"===T)y._mult(x),this.addCurrentVertex(c,y,0,0,h);else if("flipbevel"===T){if(x>100)y=m.mult(-1);else{var C=x*_.add(m).mag()/_.sub(m).mag();y._perp()._mult(C*(A?-1:1))}this.addCurrentVertex(c,y,0,0,h),this.addCurrentVertex(c,y.mult(-1),0,0,h)}else if("bevel"===T||"fakeround"===T){var P=-Math.sqrt(x*x-1),L=A?P:0,R=A?0:P;if(d&&this.addCurrentVertex(c,_,L,R,h),"fakeround"===T)for(var M=Math.round(180*w/Math.PI/20),z=1;z<M;z++){var D=z/M;if(.5!==D){var B=D-.5;D+=D*B*(D-1)*((1.0904+v*(v*(3.55645-1.43519*v)-3.2452))*B*B+(.848013+v*(.215638*v-1.06021)))}var F=m.sub(_)._mult(D)._add(_)._unit()._mult(A?-1:1);this.addHalfVertex(c,F.x,F.y,!1,A,0,h)}f&&this.addCurrentVertex(c,m,-L,-R,h)}else if("butt"===T)this.addCurrentVertex(c,y,0,0,h);else if("square"===T){var O=d?1:-1;this.addCurrentVertex(c,y,O,O,h)}else"round"===T&&(d&&(this.addCurrentVertex(c,_,0,0,h),this.addCurrentVertex(c,_,1,1,h,!0)),f&&(this.addCurrentVertex(c,m,-1,-1,h,!0),this.addCurrentVertex(c,m,0,0,h)));if(S&&g<l-1){var N=c.dist(f);if(N>2*p){var U=c.add(f.sub(c)._mult(p/N)._round());this.updateDistance(c,U),this.addCurrentVertex(U,m,0,0,h),c=U}}}}},Ms.prototype.addCurrentVertex=function(e,t,i,r,a,n){void 0===n&&(n=!1);var o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,n,!1,i,a),this.addHalfVertex(e,o,s,n,!0,-r,a),this.distance>Rs/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(e,t,i,r,a,n))},Ms.prototype.addHalfVertex=function(e,t,i,r,a,n,o){var s=.5*(this.lineClips?this.scaledDistance*(Rs-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e.x<<1)+(r?1:0),(e.y<<1)+(a?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(0===n?0:n<0?-1:1)|(63&s)<<2,s>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var l=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),o.primitiveLength++),a?this.e2=l:this.e1=l},Ms.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ms.prototype.updateDistance=function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()},Br("LineBucket",Ms,{omit:["layers","patternFeatures"]});var zs=new va({"line-cap":new fa(Te.layout_line["line-cap"]),"line-join":new _a(Te.layout_line["line-join"]),"line-miter-limit":new fa(Te.layout_line["line-miter-limit"]),"line-round-limit":new fa(Te.layout_line["line-round-limit"]),"line-sort-key":new _a(Te.layout_line["line-sort-key"])}),Ds={paint:new va({"line-opacity":new _a(Te.paint_line["line-opacity"]),"line-color":new _a(Te.paint_line["line-color"]),"line-translate":new fa(Te.paint_line["line-translate"]),"line-translate-anchor":new fa(Te.paint_line["line-translate-anchor"]),"line-width":new _a(Te.paint_line["line-width"]),"line-gap-width":new _a(Te.paint_line["line-gap-width"]),"line-offset":new _a(Te.paint_line["line-offset"]),"line-blur":new _a(Te.paint_line["line-blur"]),"line-dasharray":new ga(Te.paint_line["line-dasharray"]),"line-pattern":new ma(Te.paint_line["line-pattern"]),"line-gradient":new ya(Te.paint_line["line-gradient"])}),layout:zs},Bs=new(function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.possiblyEvaluate=function(t,i){return i=new na(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),e.prototype.possiblyEvaluate.call(this,t,i)},t.prototype.evaluate=function(t,i,r,a){return i=h({},i,{zoom:Math.floor(i.zoom)}),e.prototype.evaluate.call(this,t,i,r,a)},t}(_a))(Ds.paint.properties["line-width"].specification);Bs.useIntegerZoom=!0;var Fs=function(e){function t(t){e.call(this,t,Ds),this.gradientVersion=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._handleSpecialPaintPropertyUpdate=function(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Vt,this.gradientVersion=(this.gradientVersion+1)%s)},t.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},t.prototype.recalculate=function(t,i){e.prototype.recalculate.call(this,t,i),this.paint._values["line-floorwidth"]=Bs.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new Ms(e)},t.prototype.queryRadius=function(e){var t=e,i=Os(Yn("line-width",this,t),Yn("line-gap-width",this,t)),r=Yn("line-offset",this,t);return i/2+Math.abs(r)+$n(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,n,o,s){var l=eo(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,s),u=s/2*Os(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),c=this.paint.get("line-offset").evaluate(t,i);return c&&(r=function(e,t){for(var i=[],r=new a(0,0),n=0;n<e.length;n++){for(var o=e[n],s=[],l=0;l<o.length;l++){var u=o[l],c=o[l+1],p=0===l?r:u.sub(o[l-1])._unit()._perp(),h=l===o.length-1?r:c.sub(u)._unit()._perp(),d=p._add(h)._unit();d._mult(1/(d.x*h.x+d.y*h.y)),s.push(d._mult(t)._add(u))}i.push(s)}return i}(r,c*s)),function(e,t,i){for(var r=0;r<t.length;r++){var a=t[r];if(e.length>=3)for(var n=0;n<a.length;n++)if(Jn(e,a[n]))return!0;if(Gn(e,a,i))return!0}return!1}(l,r,u)},t.prototype.isTileClipped=function(){return!0},t}(ba);function Os(e,t){return t>0?t+2*e:e}var Ns=Aa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Us=Aa([{name:"a_projected_pos",components:3,type:"Float32"}],4),qs=(Aa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Aa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Vs=(Aa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Aa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),js=Aa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Gs(e,t,i){return e.sections.forEach((function(e){e.text=function(e,t,i){var r=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),aa.applyArabicShaping&&(e=aa.applyArabicShaping(e)),e}(e.text,t,i)})),e}Aa([{name:"triangle",components:3,type:"Uint16"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Aa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Aa([{type:"Float32",name:"offsetX"}]),Aa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ks={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Zs=function(e,t,i,r,a){var n,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=i?a-1:0,h=i?-1:1,d=e[t+p];for(p+=h,n=d&(1<<-c)-1,d>>=-c,c+=s;c>0;n=256*n+e[t+p],p+=h,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=r;c>0;o=256*o+e[t+p],p+=h,c-=8);if(0===n)n=1-u;else{if(n===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),n-=u}return(d?-1:1)*o*Math.pow(2,n-r)},Hs=function(e,t,i,r,a,n){var o,s,l,u=8*n-a-1,c=(1<<u)-1,p=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:n-1,f=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+p>=1?h/l:h*Math.pow(2,1-p))*l>=2&&(o++,l/=2),o+p>=c?(s=0,o=c):o+p>=1?(s=(t*l-1)*Math.pow(2,a),o+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,a),o=0));a>=8;e[i+d]=255&s,d+=f,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[i+d]=255&o,d+=f,o/=256,u-=8);e[i+d-f]|=128*_},Qs=Ws;function Ws(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ws.Varint=0,Ws.Fixed64=1,Ws.Bytes=2,Ws.Fixed32=5;var Js="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Xs(e){return e.type===Ws.Bytes?e.readVarint()+e.pos:e.pos+1}function Ys(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function $s(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var a=i.pos-1;a>=e;a--)i.buf[a+r]=i.buf[a]}function el(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function tl(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function il(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function rl(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function al(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function nl(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function ol(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function sl(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function ll(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function ul(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function cl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function pl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function hl(e,t,i){1===e&&i.readMessage(dl,t)}function dl(e,t,i){if(3===e){var r=i.readMessage(fl,{}),a=r.width,n=r.height,o=r.left,s=r.top,l=r.advance;t.push({id:r.id,bitmap:new mo({width:a+6,height:n+6},r.bitmap),metrics:{width:a,height:n,left:o,top:s,advance:l}})}}function fl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function _l(e){for(var t=0,i=0,r=0,a=e;r<a.length;r+=1){var n=a[r];t+=n.w*n.h,i=Math.max(i,n.w)}e.sort((function(e,t){return t.h-e.h}));for(var o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}],s=0,l=0,u=0,c=e;u<c.length;u+=1)for(var p=c[u],h=o.length-1;h>=0;h--){var d=o[h];if(!(p.w>d.w||p.h>d.h)){if(p.x=d.x,p.y=d.y,l=Math.max(l,p.y+p.h),s=Math.max(s,p.x+p.w),p.w===d.w&&p.h===d.h){var f=o.pop();h<o.length&&(o[h]=f)}else p.h===d.h?(d.x+=p.w,d.w-=p.w):p.w===d.w?(d.y+=p.h,d.h-=p.h):(o.push({x:d.x+p.w,y:d.y,w:d.w-p.w,h:p.h}),d.y+=p.h,d.h-=p.h);break}}return{w:s,h:l,fill:t/(s*l)||0}}Ws.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),a=r>>3,n=this.pos;this.type=7&r,e(a,t,this),this.pos===n&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=ul(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=pl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=ul(this.buf,this.pos)+4294967296*ul(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=ul(this.buf,this.pos)+4294967296*pl(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,a,n=i.buf;if(r=(112&(a=n[i.pos++]))>>4,a<128)return Ys(e,r,t);if(r|=(127&(a=n[i.pos++]))<<3,a<128)return Ys(e,r,t);if(r|=(127&(a=n[i.pos++]))<<10,a<128)return Ys(e,r,t);if(r|=(127&(a=n[i.pos++]))<<17,a<128)return Ys(e,r,t);if(r|=(127&(a=n[i.pos++]))<<24,a<128)return Ys(e,r,t);if(r|=(1&(a=n[i.pos++]))<<31,a<128)return Ys(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Js?function(e,t,i){return Js.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var r="",a=t;a<i;){var n,o,s,l=e[a],u=null,c=l>239?4:l>223?3:l>191?2:1;if(a+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(n=e[a+1]))&&(u=(31&l)<<6|63&n)<=127&&(u=null):3===c?(o=e[a+2],128==(192&(n=e[a+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&n)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[a+2],s=e[a+3],128==(192&(n=e[a+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&n)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),a+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ws.Bytes)return e.push(this.readVarint(t));var i=Xs(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSVarint());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ws.Bytes)return e.push(this.readBoolean());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFloat());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ws.Bytes)return e.push(this.readDouble());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSFixed32());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ws.Bytes)return e.push(this.readFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ws.Bytes)return e.push(this.readSFixed64());var t=Xs(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ws.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ws.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ws.Fixed32)this.pos+=4;else{if(t!==Ws.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),cl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),cl(this.buf,-1&e,this.pos),cl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;if(e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,a,n=0;n<t.length;n++){if((r=t.charCodeAt(n))>55295&&r<57344){if(!a){r>56319||n+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):a=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,a=r;continue}r=a-55296<<10|r-56320|65536,a=null}else a&&(e[i++]=239,e[i++]=191,e[i++]=189,a=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&$s(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Hs(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Hs(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&$s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,i){this.writeTag(e,Ws.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,el,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,tl,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,al,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,il,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,rl,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,nl,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,ol,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,sl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,ll,t)},writeBytesField:function(e,t){this.writeTag(e,Ws.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ws.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ws.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ws.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ws.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ws.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ml=function(e,t){var i=t.pixelRatio,r=t.version,a=t.stretchX,n=t.stretchY,o=t.content;this.paddedRect=e,this.pixelRatio=i,this.stretchX=a,this.stretchY=n,this.content=o,this.version=r},gl={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gl.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},gl.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},gl.tlbr.get=function(){return this.tl.concat(this.br)},gl.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(ml.prototype,gl);var yl=function(e,t){var i={},r={};this.haveRenderCallbacks=[];var a=[];this.addImages(e,i,a),this.addImages(t,r,a);var n=_l(a),o=new go({width:n.w||1,height:n.h||1});for(var s in e){var l=e[s],u=i[s].paddedRect;go.copy(l.data,o,{x:0,y:0},{x:u.x+1,y:u.y+1},l.data)}for(var c in t){var p=t[c],h=r[c].paddedRect,d=h.x+1,f=h.y+1,_=p.data.width,m=p.data.height;go.copy(p.data,o,{x:0,y:0},{x:d,y:f},p.data),go.copy(p.data,o,{x:0,y:m-1},{x:d,y:f-1},{width:_,height:1}),go.copy(p.data,o,{x:0,y:0},{x:d,y:f+m},{width:_,height:1}),go.copy(p.data,o,{x:_-1,y:0},{x:d-1,y:f},{width:1,height:m}),go.copy(p.data,o,{x:0,y:0},{x:d+_,y:f},{width:1,height:m})}this.image=o,this.iconPositions=i,this.patternPositions=r};yl.prototype.addImages=function(e,t,i){for(var r in e){var a=e[r],n={x:0,y:0,w:a.data.width+2,h:a.data.height+2};i.push(n),t[r]=new ml(n,a),a.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},yl.prototype.patchUpdatedImages=function(e,t){for(var i in e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)},yl.prototype.patchUpdatedImage=function(e,t,i){if(e&&t&&e.version!==t.version){e.version=t.version;var r=e.tl;i.update(t.data,void 0,{x:r[0],y:r[1]})}},Br("ImagePosition",ml),Br("ImageAtlas",yl);var vl={horizontal:1,vertical:2,horizontalOnly:3},bl=function(){this.scale=1,this.fontStack="",this.imageName=null};bl.forText=function(e,t){var i=new bl;return i.scale=e||1,i.fontStack=t,i},bl.forImage=function(e){var t=new bl;return t.imageName=e,t};var xl=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function wl(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_){var m,g=xl.fromFeature(e,a);p===vl.vertical&&g.verticalizePunctuation();var y=aa.processBidirectionalText,v=aa.processStyledBidirectionalText;if(y&&1===g.sections.length){m=[];for(var b=0,x=y(g.toString(),Cl(g,u,n,t,r,d,f));b<x.length;b+=1){var w=x[b],S=new xl;S.text=w,S.sections=g.sections;for(var A=0;A<w.length;A++)S.sectionIndex.push(0);m.push(S)}}else if(v){m=[];for(var k=0,E=v(g.text,g.sectionIndex,Cl(g,u,n,t,r,d,f));k<E.length;k+=1){var I=E[k],T=new xl;T.text=I[0],T.sectionIndex=I[1],T.sections=g.sections,m.push(T)}}else m=function(e,t){for(var i=[],r=e.text,a=0,n=0,o=t;n<o.length;n+=1){var s=o[n];i.push(e.substring(a,s)),a=s}return a<r.length&&i.push(e.substring(a,r.length)),i}(g,Cl(g,u,n,t,r,d,f));var C=[],P={positionedLines:C,text:g.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:p,iconsInText:!1,verticalizable:!1};return function(e,t,i,r,a,n,o,s,l,u,c,p){for(var h=0,d=-17,f=0,_=0,m="right"===s?1:"left"===s?0:.5,g=0,y=0,v=a;y<v.length;y+=1){var b=v[y];b.trim();var x=b.getMaxScale(),w=24*(x-1),S={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=S;var A=S.positionedGlyphs,k=0;if(b.length()){for(var E=0;E<b.length();E++){var I=b.getSection(E),T=b.getSectionIndex(E),C=b.getCharCode(E),P=0,L=null,R=null,M=null,z=24,D=!(l===vl.horizontal||!c&&!Kr(C)||c&&(Sl[C]||(G=C,jr.Arabic(G)||jr["Arabic Supplement"](G)||jr["Arabic Extended-A"](G)||jr["Arabic Presentation Forms-A"](G)||jr["Arabic Presentation Forms-B"](G))));if(I.imageName){var B=r[I.imageName];if(!B)continue;M=I.imageName,e.iconsInText=e.iconsInText||!0,R=B.paddedRect;var F=B.displaySize;I.scale=24*I.scale/p,P=w+(24-F[1]*I.scale),z=(L={width:F[0],height:F[1],left:1,top:-3,advance:D?F[1]:F[0]}).advance;var O=D?F[0]*I.scale-24*x:F[1]*I.scale-24*x;O>0&&O>k&&(k=O)}else{var N=i[I.fontStack],U=N&&N[C];if(U&&U.rect)R=U.rect,L=U.metrics;else{var q=t[I.fontStack],V=q&&q[C];if(!V)continue;L=V.metrics}P=24*(x-I.scale)}D?(e.verticalizable=!0,A.push({glyph:C,imageName:M,x:h,y:d+P,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:R}),h+=z*I.scale+u):(A.push({glyph:C,imageName:M,x:h,y:d+P,vertical:D,scale:I.scale,fontStack:I.fontStack,sectionIndex:T,metrics:L,rect:R}),h+=L.advance*I.scale+u)}0!==A.length&&(f=Math.max(h-u,f),Ll(A,0,A.length-1,m,k)),h=0;var j=n*x+k;S.lineOffset=Math.max(k,w),d+=j,_=Math.max(j,_),++g}else d+=n,++g}var G,K=d- -17,Z=Pl(o),H=Z.horizontalAlign,Q=Z.verticalAlign;(function(e,t,i,r,a,n,o,s,l){var u,c=(t-i)*a;u=n!==o?-s*r- -17:(-r*l+.5)*o;for(var p=0,h=e;p<h.length;p+=1)for(var d=0,f=h[p].positionedGlyphs;d<f.length;d+=1){var _=f[d];_.x+=c,_.y+=u}})(e.positionedLines,m,H,Q,f,_,n,K,a.length),e.top+=-Q*K,e.bottom=e.top+K,e.left+=-H*f,e.right=e.left+f}(P,t,i,r,m,o,s,l,p,u,h,_),!function(e){for(var t=0,i=e;t<i.length;t+=1)if(0!==i[t].positionedGlyphs.length)return!1;return!0}(C)&&P}xl.fromFeature=function(e,t){for(var i=new xl,r=0;r<e.sections.length;r++){var a=e.sections[r];a.image?i.addImageSection(a):i.addTextSection(a,t)}return i},xl.prototype.length=function(){return this.text.length},xl.prototype.getSection=function(e){return this.sections[this.sectionIndex[e]]},xl.prototype.getSectionIndex=function(e){return this.sectionIndex[e]},xl.prototype.getCharCode=function(e){return this.text.charCodeAt(e)},xl.prototype.verticalizePunctuation=function(){this.text=function(e){for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;t+=r&&Zr(r)&&!Ks[e[i+1]]||a&&Zr(a)&&!Ks[e[i-1]]||!Ks[e[i]]?e[i]:Ks[e[i]]}return t}(this.text)},xl.prototype.trim=function(){for(var e=0,t=0;t<this.text.length&&Sl[this.text.charCodeAt(t)];t++)e++;for(var i=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Sl[this.text.charCodeAt(r)];r--)i--;this.text=this.text.substring(e,i),this.sectionIndex=this.sectionIndex.slice(e,i)},xl.prototype.substring=function(e,t){var i=new xl;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i},xl.prototype.toString=function(){return this.text},xl.prototype.getMaxScale=function(){var e=this;return this.sectionIndex.reduce((function(t,i){return Math.max(t,e.sections[i].scale)}),0)},xl.prototype.addTextSection=function(e,t){this.text+=e.text,this.sections.push(bl.forText(e.scale,e.fontStack||t));for(var i=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(i)},xl.prototype.addImageSection=function(e){var t=e.image?e.image.name:"";if(0!==t.length){var i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(bl.forImage(t)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}else S("Can't add FormattedSection with an empty image.")},xl.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Sl={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Al={};function kl(e,t,i,r,a,n){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*24/n+a:0}var s=i[t.fontStack],l=s&&s[e];return l?l.metrics.advance*t.scale+a:0}function El(e,t,i,r){var a=Math.pow(e-t,2);return r?e<t?a/2:2*a:a+Math.abs(i)*i}function Il(e,t,i){var r=0;return 10===e&&(r-=1e4),i&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Tl(e,t,i,r,a,n){for(var o=null,s=El(t,i,a,n),l=0,u=r;l<u.length;l+=1){var c=u[l],p=El(t-c.x,i,a,n)+c.badness;p<=s&&(o=c,s=p)}return{index:e,x:t,priorBreak:o,badness:s}}function Cl(e,t,i,r,a,n,o){if("point"!==n)return[];if(!e)return[];for(var s,l=[],u=function(e,t,i,r,a,n){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=kl(e.getCharCode(s),l,r,a,t,n)}return o/Math.max(1,Math.ceil(o/i))}(e,t,i,r,a,o),c=e.text.indexOf("")>=0,p=0,h=0;h<e.length();h++){var d=e.getSection(h),f=e.getCharCode(h);if(Sl[f]||(p+=kl(f,d,r,a,t,o)),h<e.length()-1){var _=!((s=f)<11904||!(jr["Bopomofo Extended"](s)||jr.Bopomofo(s)||jr["CJK Compatibility Forms"](s)||jr["CJK Compatibility Ideographs"](s)||jr["CJK Compatibility"](s)||jr["CJK Radicals Supplement"](s)||jr["CJK Strokes"](s)||jr["CJK Symbols and Punctuation"](s)||jr["CJK Unified Ideographs Extension A"](s)||jr["CJK Unified Ideographs"](s)||jr["Enclosed CJK Letters and Months"](s)||jr["Halfwidth and Fullwidth Forms"](s)||jr.Hiragana(s)||jr["Ideographic Description Characters"](s)||jr["Kangxi Radicals"](s)||jr["Katakana Phonetic Extensions"](s)||jr.Katakana(s)||jr["Vertical Forms"](s)||jr["Yi Radicals"](s)||jr["Yi Syllables"](s)));(Al[f]||_||d.imageName)&&l.push(Tl(h+1,p,u,l,Il(f,e.getCharCode(h+1),_&&c),!1))}}return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(Tl(e.length(),p,u,l,0,!0))}function Pl(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Ll(e,t,i,r,a){if(r||a)for(var n=e[i],o=(e[i].x+n.metrics.advance*n.scale)*r,s=t;s<=i;s++)e[s].x-=o,e[s].y+=a}function Rl(e,t,i,r,a,n){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,p,h,d,f=t.left*n,_=t.right*n;"width"===i||"both"===i?(d=a[0]+f-r[3],p=a[0]+_+r[1]):p=(d=a[0]+(f+_-s.displaySize[0])/2)+s.displaySize[0];var m=t.top*n,g=t.bottom*n;return"height"===i||"both"===i?(c=a[1]+m-r[0],h=a[1]+g+r[2]):h=(c=a[1]+(m+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:p,bottom:h,left:d,collisionPadding:o}}Al[10]=!0,Al[32]=!0,Al[38]=!0,Al[40]=!0,Al[41]=!0,Al[43]=!0,Al[45]=!0,Al[47]=!0,Al[173]=!0,Al[183]=!0,Al[8203]=!0,Al[8208]=!0,Al[8211]=!0,Al[8231]=!0;var Ml=function(e){function t(t,i,r,a){e.call(this,t,i),this.angle=r,void 0!==a&&(this.segment=a)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(a);function zl(e,t){var i=t.expression;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new na(e+1))};if("source"===i.kind)return{kind:"source"};for(var r=i.zoomStops,a=i.interpolationType,n=0;n<r.length&&r[n]<=e;)n++;for(var o=n=Math.max(0,n-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[n],l=r[o];return"composite"===i.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:a}:{kind:"camera",minZoom:s,maxZoom:l,minSize:i.evaluate(new na(s)),maxSize:i.evaluate(new na(l)),interpolationType:a}}function Dl(e,t,i){var r=t.uSize,a=i.lowerSize;return"source"===e.kind?a/128:"composite"===e.kind?jt(a/128,i.upperSize/128,t.uSizeT):r}function Bl(e,t){var i=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var a=e.interpolationType,n=a?c(ai.interpolationFactor(a,t,e.minZoom,e.maxZoom),0,1):0;"camera"===e.kind?r=jt(e.minSize,e.maxSize,n):i=n}return{uSizeT:i,uSize:r}}Br("Anchor",Ml);var Fl=Object.freeze({__proto__:null,getSizeData:zl,evaluateSizeForFeature:Dl,evaluateSizeForZoom:Bl,SIZE_PACK_FACTOR:128});function Ol(e,t,i,r,a){if(void 0===t.segment)return!0;for(var n=t,o=t.segment+1,s=0;s>-i/2;){if(--o<0)return!1;s-=e[o].dist(n),n=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<i/2;){var c=e[o],p=e[o+1];if(!p)return!1;var h=e[o-1].angleTo(c)-c.angleTo(p);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:h}),u+=h;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>a)return!1;o++,s+=c.dist(p)}return!0}function Nl(e){for(var t=0,i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Ul(e,t,i){return e?.6*t*i:0}function ql(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Vl(e,t,i,r,a,n){for(var o=Ul(i,a,n),s=ql(i,r)*n,l=0,u=Nl(e)/2,c=0;c<e.length-1;c++){var p=e[c],h=e[c+1],d=p.dist(h);if(l+d>u){var f=(u-l)/d,_=jt(p.x,h.x,f),m=jt(p.y,h.y,f),g=new Ml(_,m,h.angleTo(p),c);return g._round(),!o||Ol(e,g,s,o,t)?g:void 0}l+=d}}function jl(e,t,i,r,a,n,o,s,l){var u=Ul(r,n,o),c=ql(r,a),p=c*o,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-p<t/4&&(t=p+t/4),function e(t,i,r,a,n,o,s,l,u){for(var c=o/2,p=Nl(t),h=0,d=i-r,f=[],_=0;_<t.length-1;_++){for(var m=t[_],g=t[_+1],y=m.dist(g),v=g.angleTo(m);d+r<h+y;){var b=((d+=r)-h)/y,x=jt(m.x,g.x,b),w=jt(m.y,g.y,b);if(x>=0&&x<u&&w>=0&&w<u&&d-c>=0&&d+c<=p){var S=new Ml(x,w,v,_);S._round(),a&&!Ol(t,S,o,a,n)||f.push(S)}}h+=y}return l||f.length||s||(f=e(t,h/2,r,a,n,o,s,!0,u)),f}(e,h?t/2*s%t:(c/2+2*n)*o*s%t,t,u,i,p,h,!1,l)}function Gl(e,t,i,r,n){for(var o=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],h=l[c+1];p.x<t&&h.x<t||(p.x<t?p=new a(t,p.y+(t-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x<t&&(h=new a(t,p.y+(t-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y<i&&h.y<i||(p.y<i?p=new a(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round():h.y<i&&(h=new a(p.x+(i-p.y)/(h.y-p.y)*(h.x-p.x),i)._round()),p.x>=r&&h.x>=r||(p.x>=r?p=new a(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round():h.x>=r&&(h=new a(r,p.y+(r-p.x)/(h.x-p.x)*(h.y-p.y))._round()),p.y>=n&&h.y>=n||(p.y>=n?p=new a(p.x+(n-p.y)/(h.y-p.y)*(h.x-p.x),n)._round():h.y>=n&&(h=new a(p.x+(n-p.y)/(h.y-p.y)*(h.x-p.x),n)._round()),u&&p.equals(u[u.length-1])||o.push(u=[p]),u.push(h)))))}return o}function Kl(e,t,i,r){var n=[],o=e.image,s=o.pixelRatio,l=o.paddedRect.w-2,u=o.paddedRect.h-2,c=e.right-e.left,p=e.bottom-e.top,h=o.stretchX||[[0,l]],d=o.stretchY||[[0,u]],f=function(e,t){return e+t[1]-t[0]},_=h.reduce(f,0),m=d.reduce(f,0),g=l-_,y=u-m,v=0,b=_,x=0,w=m,S=0,A=g,k=0,E=y;if(o.content&&r){var I=o.content;v=Zl(h,0,I[0]),x=Zl(d,0,I[1]),b=Zl(h,I[0],I[2]),w=Zl(d,I[1],I[3]),S=I[0]-v,k=I[1]-x,A=I[2]-I[0]-b,E=I[3]-I[1]-w}var T=function(r,n,l,u){var h=Ql(r.stretch-v,b,c,e.left),d=Wl(r.fixed-S,A,r.stretch,_),f=Ql(n.stretch-x,w,p,e.top),g=Wl(n.fixed-k,E,n.stretch,m),y=Ql(l.stretch-v,b,c,e.left),I=Wl(l.fixed-S,A,l.stretch,_),T=Ql(u.stretch-x,w,p,e.top),C=Wl(u.fixed-k,E,u.stretch,m),P=new a(h,f),L=new a(y,f),R=new a(y,T),M=new a(h,T),z=new a(d/s,g/s),D=new a(I/s,C/s),B=t*Math.PI/180;if(B){var F=Math.sin(B),O=Math.cos(B),N=[O,-F,F,O];P._matMult(N),L._matMult(N),M._matMult(N),R._matMult(N)}var U=r.stretch+r.fixed,q=n.stretch+n.fixed;return{tl:P,tr:L,bl:M,br:R,tex:{x:o.paddedRect.x+1+U,y:o.paddedRect.y+1+q,w:l.stretch+l.fixed-U,h:u.stretch+u.fixed-q},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:D,minFontScaleX:A/s/c,minFontScaleY:E/s/p,isSDF:i}};if(r&&(o.stretchX||o.stretchY))for(var C=Hl(h,g,_),P=Hl(d,y,m),L=0;L<C.length-1;L++)for(var R=C[L],M=C[L+1],z=0;z<P.length-1;z++)n.push(T(R,P[z],M,P[z+1]));else n.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return n}function Zl(e,t,i){for(var r=0,a=0,n=e;a<n.length;a+=1){var o=n[a];r+=Math.max(t,Math.min(i,o[1]))-Math.max(t,Math.min(i,o[0]))}return r}function Hl(e,t,i){for(var r=[{fixed:-1,stretch:0}],a=0,n=e;a<n.length;a+=1){var o=n[a],s=o[0],l=o[1],u=r[r.length-1];r.push({fixed:s-u.stretch,stretch:u.stretch}),r.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}return r.push({fixed:t+1,stretch:i}),r}function Ql(e,t,i,r){return e/t*i+r}function Wl(e,t,i,r){return e-t*i/r}var Jl=function(e,t,i,r,n,o,s,l,u,c){if(this.boxStartIndex=e.length,u){var p=o.top,h=o.bottom,d=o.collisionPadding;d&&(p-=d[1],h+=d[3]);var f=h-p;f>0&&(f=Math.max(10,f),this.circleDiameter=f)}else{var _=o.top*s-l,m=o.bottom*s+l,g=o.left*s-l,y=o.right*s+l,v=o.collisionPadding;if(v&&(g-=v[0]*s,_-=v[1]*s,y+=v[2]*s,m+=v[3]*s),c){var b=new a(g,_),x=new a(y,_),w=new a(g,m),S=new a(y,m),A=c*Math.PI/180;b._rotate(A),x._rotate(A),w._rotate(A),S._rotate(A),g=Math.min(b.x,x.x,w.x,S.x),y=Math.max(b.x,x.x,w.x,S.x),_=Math.min(b.y,x.y,w.y,S.y),m=Math.max(b.y,x.y,w.y,S.y)}e.emplaceBack(t.x,t.y,g,_,y,m,i,r,n)}this.boxEndIndex=e.length},Xl=function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=Yl),this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};function Yl(e,t){return e<t?-1:e>t?1:0}function $l(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!1);for(var r=1/0,n=1/0,o=-1/0,s=-1/0,l=e[0],u=0;u<l.length;u++){var c=l[u];(!u||c.x<r)&&(r=c.x),(!u||c.y<n)&&(n=c.y),(!u||c.x>o)&&(o=c.x),(!u||c.y>s)&&(s=c.y)}var p=Math.min(o-r,s-n),h=p/2,d=new Xl([],eu);if(0===p)return new a(r,n);for(var f=r;f<o;f+=p)for(var _=n;_<s;_+=p)d.push(new tu(f+h,_+h,h,e));for(var m=function(e){for(var t=0,i=0,r=0,a=e[0],n=0,o=a.length,s=o-1;n<o;s=n++){var l=a[n],u=a[s],c=l.x*u.y-u.x*l.y;i+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new tu(i/t,r/t,0,e)}(e),g=d.length;d.length;){var y=d.pop();(y.d>m.d||!m.d)&&(m=y,i&&console.log("found best %d after %d probes",Math.round(1e4*y.d)/1e4,g)),y.max-m.d<=t||(d.push(new tu(y.p.x-(h=y.h/2),y.p.y-h,h,e)),d.push(new tu(y.p.x+h,y.p.y-h,h,e)),d.push(new tu(y.p.x-h,y.p.y+h,h,e)),d.push(new tu(y.p.x+h,y.p.y+h,h,e)),g+=4)}return i&&(console.log("num probes: "+g),console.log("best distance: "+m.d)),m.p}function eu(e,t){return t.max-e.max}function tu(e,t,i,r){this.p=new a(e,t),this.h=i,this.d=function(e,t){for(var i=!1,r=1/0,a=0;a<t.length;a++)for(var n=t[a],o=0,s=n.length,l=s-1;o<s;l=o++){var u=n[o],c=n[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(i=!i),r=Math.min(r,Qn(e,u,c))}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}Xl.prototype.push=function(e){this.data.push(e),this.length++,this._up(this.length-1)},Xl.prototype.pop=function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}},Xl.prototype.peek=function(){return this.data[0]},Xl.prototype._up=function(e){for(var t=this.data,i=this.compare,r=t[e];e>0;){var a=e-1>>1,n=t[a];if(i(r,n)>=0)break;t[e]=n,e=a}t[e]=r},Xl.prototype._down=function(e){for(var t=this.data,i=this.compare,r=this.length>>1,a=t[e];e<r;){var n=1+(e<<1),o=t[n],s=n+1;if(s<this.length&&i(t[s],o)<0&&(n=s,o=t[s]),i(o,a)>=0)break;t[e]=o,e=n}t[e]=a};var iu=Number.POSITIVE_INFINITY;function ru(e,t){return t[1]!==iu?function(e,t,i){var r=0,a=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":a=i-7;break;case"bottom-right":case"bottom-left":case"bottom":a=7-i}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,a]}(e,t[0],t[1]):function(e,t){var i=0,r=0;t<0&&(t=0);var a=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":r=a-7;break;case"bottom-right":case"bottom-left":r=7-a;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":i=-a;break;case"top-left":case"bottom-left":i=a;break;case"left":i=t;break;case"right":i=-t}return[i,r]}(e,t[0])}function au(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nu(e,t,i,r,n,o,s,l,u,c,p,h,d,f,_){var m=function(e,t,i,r,n,o,s,l){for(var u=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,c=[],p=0,h=t.positionedLines;p<h.length;p+=1)for(var d=h[p],f=0,_=d.positionedGlyphs;f<_.length;f+=1){var m=_[f];if(m.rect){var g=m.rect||{},y=4,v=!0,b=1,x=0,w=(n||l)&&m.vertical,S=m.metrics.advance*m.scale/2;if(l&&t.verticalizable&&(x=d.lineOffset/2-(m.imageName?-(24-m.metrics.width*m.scale)/2:24*(m.scale-1))),m.imageName){var A=s[m.imageName];v=A.sdf,y=1/(b=A.pixelRatio)}var k=n?[m.x+S,m.y]:[0,0],E=n?[0,0]:[m.x+S+i[0],m.y+i[1]-x],I=[0,0];w&&(I=E,E=[0,0]);var T=(m.metrics.left-y)*m.scale-S+E[0],C=(-m.metrics.top-y)*m.scale+E[1],P=T+g.w*m.scale/b,L=C+g.h*m.scale/b,R=new a(T,C),M=new a(P,C),z=new a(T,L),D=new a(P,L);if(w){var B=new a(-S,S- -17),F=-Math.PI/2,O=12-S,N=new a(22-O,-(m.imageName?O:0)),U=new(Function.prototype.bind.apply(a,[null].concat(I)));R._rotateAround(F,B)._add(N)._add(U),M._rotateAround(F,B)._add(N)._add(U),z._rotateAround(F,B)._add(N)._add(U),D._rotateAround(F,B)._add(N)._add(U)}if(u){var q=Math.sin(u),V=Math.cos(u),j=[V,-q,q,V];R._matMult(j),M._matMult(j),z._matMult(j),D._matMult(j)}var G=new a(0,0),K=new a(0,0);c.push({tl:R,tr:M,bl:z,br:D,tex:g,writingMode:t.writingMode,glyphOffset:k,sectionIndex:m.sectionIndex,isSDF:v,pixelOffsetTL:G,pixelOffsetBR:K,minFontScaleX:0,minFontScaleY:0})}}return c}(0,i,l,n,o,s,r,e.allowVerticalPlacement),g=e.textSizeData,y=null;"source"===g.kind?(y=[128*n.layout.get("text-size").evaluate(s,{})])[0]>32640&&S(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===g.kind&&((y=[128*f.compositeTextSizes[0].evaluate(s,{},_),128*f.compositeTextSizes[1].evaluate(s,{},_)])[0]>32640||y[1]>32640)&&S(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),e.addSymbols(e.text,m,y,l,o,s,c,t,u.lineStartIndex,u.lineLength,d,_);for(var v=0,b=p;v<b.length;v+=1)h[b[v]]=e.text.placedSymbolArray.length-1;return 4*m.length}function ou(e){for(var t in e)return e[t];return null}function su(e,t,i,r){var a=e.compareText;if(t in a){for(var n=a[t],o=n.length-1;o>=0;o--)if(r.dist(n[o])<i)return!0}else a[t]=[];return a[t].push(r),!1}var lu=ys.VectorTileFeature.types,uu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cu(e,t,i,r,a,n,o,s,l,u,c,p,h){var d=s?Math.min(32640,Math.round(s[0])):0,f=s?Math.min(32640,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*r),Math.round(32*a),n,o,(d<<1)+(l?1:0),f,16*u,16*c,256*p,256*h)}function pu(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function hu(e){for(var t=0,i=e.sections;t<i.length;t+=1)if(Wr(i[t].text))return!0;return!1}var du=function(e){this.layoutVertexArray=new Ra,this.indexArray=new Na,this.programConfigurations=e,this.segments=new on,this.dynamicLayoutVertexArray=new Ma,this.opacityVertexArray=new za,this.placedSymbolArray=new Xa};du.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},du.prototype.upload=function(e,t,i,r){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ns.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Us.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,uu,!0),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(e))},du.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Br("SymbolBuffers",du);var fu=function(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new on,this.collisionVertexArray=new Oa};fu.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,qs.members,!0)},fu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Br("CollisionBuffers",fu);var _u=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ao([]),this.placementViewportMatrix=ao([]);var t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zl(this.zoom,t["text-size"]),this.iconSizeData=zl(this.zoom,t["icon-size"]);var i=this.layers[0].layout,r=i.get("symbol-sort-key"),a=i.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==a&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&(i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement")),"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((function(e){return vl[e]}))),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=e.sourceID};_u.prototype.createArrays=function(){this.text=new du(new Mn(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new du(new Mn(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new en,this.lineVertexArray=new tn,this.symbolInstances=new $a},_u.prototype.calculateGlyphDependencies=function(e,t,i,r,a){for(var n=0;n<e.length;n++)if(t[e.charCodeAt(n)]=!0,(i||r)&&a){var o=Ks[e.charAt(n)];o&&(t[o.charCodeAt(0)]=!0)}},_u.prototype.populate=function(e,t,i){var r=this.layers[0],a=r.layout,n=a.get("text-font"),o=a.get("text-field"),s=a.get("icon-image"),l=("constant"!==o.value.kind||o.value.value instanceof it&&!o.value.value.isEmpty()||o.value.value.toString().length>0)&&("constant"!==n.value.kind||n.value.value.length>0),u="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=a.get("symbol-sort-key");if(this.features=[],l||u){for(var p=t.iconDependencies,h=t.glyphDependencies,d=t.availableImages,f=new na(this.zoom),_=0,m=e;_<m.length;_+=1){var g=m[_],y=g.feature,v=g.id,b=g.index,x=g.sourceLayerIndex,w=r._featureFilter.needGeometry,S={type:y.type,id:v,properties:y.properties,geometry:w?On(y):[]};if(r._featureFilter.filter(f,S,i)){w||(S.geometry=On(y));var A=void 0;if(l){var k=r.getValueAndResolveTokens("text-field",S,i,d),E=it.factory(k);hu(E)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ia()||this.hasRTLText&&aa.isParsed())&&(A=Gs(E,r,S))}var I=void 0;if(u){var T=r.getValueAndResolveTokens("icon-image",S,i,d);I=T instanceof rt?T:rt.fromString(T)}if(A||I){var C=this.sortFeaturesByKey?c.evaluate(S,{},i):void 0,P={id:v,text:A,icon:I,index:b,sourceLayerIndex:x,geometry:On(y),properties:y.properties,type:lu[y.type],sortKey:C};if(this.features.push(P),I&&(p[I.name]=!0),A){var L=n.evaluate(S,{},i).join(","),R="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(vl.vertical)>=0;for(var M=0,z=A.sections;M<z.length;M+=1){var D=z[M];if(D.image)p[D.image.name]=!0;else{var B=Gr(A.toString()),F=D.fontStack||L,O=h[F]=h[F]||{};this.calculateGlyphDependencies(D.text,O,R,this.allowVerticalPlacement,B)}}}}}}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},i={},r=[],a=0;function n(t){r.push(e[t]),a++}function o(e,t,a){var n=i[e];return delete i[e],i[t]=n,r[n].geometry[0].pop(),r[n].geometry[0]=r[n].geometry[0].concat(a[0]),n}function s(e,i,a){var n=t[i];return delete t[i],t[e]=n,r[n].geometry[0].shift(),r[n].geometry[0]=a[0].concat(r[n].geometry[0]),n}function l(e,t,i){var r=i?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.text?c.text.toString():null;if(h){var d=l(h,p),f=l(h,p,!0);if(d in i&&f in t&&i[d]!==t[f]){var _=s(d,f,p),m=o(d,f,r[_].geometry);delete t[d],delete i[f],i[l(h,r[m].geometry,!0)]=m,r[_].geometry=null}else d in i?o(d,f,p):f in t?s(d,f,p):(n(u),t[d]=a-1,i[f]=a-1)}else n(u)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}},_u.prototype.update=function(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))},_u.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},_u.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},_u.prototype.upload=function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},_u.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},_u.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},_u.prototype.addToLineVertexArray=function(e,t){var i=this.lineVertexArray.length;if(void 0!==e.segment){for(var r=e.dist(t[e.segment+1]),a=e.dist(t[e.segment]),n={},o=e.segment+1;o<t.length;o++)n[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(var s=e.segment||0;s>=0;s--)n[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:a},s>0&&(a+=t[s-1].dist(t[s]));for(var l=0;l<t.length;l++){var u=n[l];this.lineVertexArray.emplaceBack(u.x,u.y,u.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}},_u.prototype.addSymbols=function(e,t,i,r,a,n,o,s,l,u,c,p){for(var h=e.indexArray,d=e.layoutVertexArray,f=e.segments.prepareSegment(4*t.length,d,h,n.sortKey),_=this.glyphOffsetArray.length,m=f.vertexLength,g=this.allowVerticalPlacement&&o===vl.vertical?Math.PI/2:0,y=n.text&&n.text.sections,v=0;v<t.length;v++){var b=t[v],x=b.tl,w=b.tr,S=b.bl,A=b.br,k=b.tex,E=b.pixelOffsetTL,I=b.pixelOffsetBR,T=b.minFontScaleX,C=b.minFontScaleY,P=b.glyphOffset,L=b.isSDF,R=b.sectionIndex,M=f.vertexLength,z=P[1];cu(d,s.x,s.y,x.x,z+x.y,k.x,k.y,i,L,E.x,E.y,T,C),cu(d,s.x,s.y,w.x,z+w.y,k.x+k.w,k.y,i,L,I.x,E.y,T,C),cu(d,s.x,s.y,S.x,z+S.y,k.x,k.y+k.h,i,L,E.x,I.y,T,C),cu(d,s.x,s.y,A.x,z+A.y,k.x+k.w,k.y+k.h,i,L,I.x,I.y,T,C),pu(e.dynamicLayoutVertexArray,s,g),h.emplaceBack(M,M+1,M+2),h.emplaceBack(M+1,M+2,M+3),f.vertexLength+=4,f.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(P[0]),v!==t.length-1&&R===t[v+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,n,n.index,{},p,y&&y[R])}e.placedSymbolArray.emplaceBack(s.x,s.y,_,this.glyphOffsetArray.length-_,m,l,u,s.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],o,0,!1,0,c)},_u.prototype._addCollisionDebugVertex=function(e,t,i,r,a,n){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,r,a,Math.round(n.x),Math.round(n.y))},_u.prototype.addCollisionDebugVertices=function(e,t,i,r,n,o,s){var l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=l.vertexLength,c=n.layoutVertexArray,p=n.collisionVertexArray,h=s.anchorX,d=s.anchorY;this._addCollisionDebugVertex(c,p,o,h,d,new a(e,t)),this._addCollisionDebugVertex(c,p,o,h,d,new a(i,t)),this._addCollisionDebugVertex(c,p,o,h,d,new a(i,r)),this._addCollisionDebugVertex(c,p,o,h,d,new a(e,r)),l.vertexLength+=4;var f=n.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),l.primitiveLength+=4},_u.prototype.addDebugCollisionBoxes=function(e,t,i,r){for(var a=e;a<t;a++){var n=this.collisionBoxArray.get(a);this.addCollisionDebugVertices(n.x1,n.y1,n.x2,n.y2,r?this.textCollisionBox:this.iconCollisionBox,n.anchorPoint,i)}},_u.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fu(Ba,Vs.members,Ka),this.iconCollisionBox=new fu(Ba,Vs.members,Ka);for(var e=0;e<this.symbolInstances.length;e++){var t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}},_u.prototype._deserializeCollisionBoxesForSymbol=function(e,t,i,r,a,n,o,s,l){for(var u={},c=t;c<i;c++){var p=e.get(c);u.textBox={x1:p.x1,y1:p.y1,x2:p.x2,y2:p.y2,anchorPointX:p.anchorPointX,anchorPointY:p.anchorPointY},u.textFeatureIndex=p.featureIndex;break}for(var h=r;h<a;h++){var d=e.get(h);u.verticalTextBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},u.verticalTextFeatureIndex=d.featureIndex;break}for(var f=n;f<o;f++){var _=e.get(f);u.iconBox={x1:_.x1,y1:_.y1,x2:_.x2,y2:_.y2,anchorPointX:_.anchorPointX,anchorPointY:_.anchorPointY},u.iconFeatureIndex=_.featureIndex;break}for(var m=s;m<l;m++){var g=e.get(m);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,anchorPointX:g.anchorPointX,anchorPointY:g.anchorPointY},u.verticalIconFeatureIndex=g.featureIndex;break}return u},_u.prototype.deserializeCollisionBoxes=function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}},_u.prototype.hasTextData=function(){return this.text.segments.get().length>0},_u.prototype.hasIconData=function(){return this.icon.segments.get().length>0},_u.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},_u.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},_u.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},_u.prototype.addIndicesForPlacedSymbol=function(e,t){for(var i=e.placedSymbolArray.get(t),r=i.vertexStartIndex+4*i.numGlyphs,a=i.vertexStartIndex;a<r;a+=4)e.indexArray.emplaceBack(a,a+1,a+2),e.indexArray.emplaceBack(a+1,a+2,a+3)},_u.prototype.getSortedSymbolIndexes=function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),i=Math.cos(e),r=[],a=[],n=[],o=0;o<this.symbolInstances.length;++o){n.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.anchorX+i*s.anchorY)),a.push(s.featureIndex)}return n.sort((function(e,t){return r[e]-r[t]||a[t]-a[e]})),n},_u.prototype.addToSortKeyRanges=function(e,t){var i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})},_u.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var i=0,r=this.symbolInstanceIndexes;i<r.length;i+=1){var a=this.symbolInstances.get(r[i]);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,i,r){e>=0&&r.indexOf(e)===i&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Br("SymbolBucket",_u,{omit:["layers","collisionBoxArray","features","compareText"]}),_u.MAX_GLYPHS=65535,_u.addDynamicAttributes=pu;var mu=new va({"symbol-placement":new fa(Te.layout_symbol["symbol-placement"]),"symbol-spacing":new fa(Te.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fa(Te.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new _a(Te.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fa(Te.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fa(Te.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fa(Te.layout_symbol["icon-ignore-placement"]),"icon-optional":new fa(Te.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fa(Te.layout_symbol["icon-rotation-alignment"]),"icon-size":new _a(Te.layout_symbol["icon-size"]),"icon-text-fit":new fa(Te.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fa(Te.layout_symbol["icon-text-fit-padding"]),"icon-image":new _a(Te.layout_symbol["icon-image"]),"icon-rotate":new _a(Te.layout_symbol["icon-rotate"]),"icon-padding":new fa(Te.layout_symbol["icon-padding"]),"icon-keep-upright":new fa(Te.layout_symbol["icon-keep-upright"]),"icon-offset":new _a(Te.layout_symbol["icon-offset"]),"icon-anchor":new _a(Te.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fa(Te.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fa(Te.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fa(Te.layout_symbol["text-rotation-alignment"]),"text-field":new _a(Te.layout_symbol["text-field"]),"text-font":new _a(Te.layout_symbol["text-font"]),"text-size":new _a(Te.layout_symbol["text-size"]),"text-max-width":new _a(Te.layout_symbol["text-max-width"]),"text-line-height":new fa(Te.layout_symbol["text-line-height"]),"text-letter-spacing":new _a(Te.layout_symbol["text-letter-spacing"]),"text-justify":new _a(Te.layout_symbol["text-justify"]),"text-radial-offset":new _a(Te.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fa(Te.layout_symbol["text-variable-anchor"]),"text-anchor":new _a(Te.layout_symbol["text-anchor"]),"text-max-angle":new fa(Te.layout_symbol["text-max-angle"]),"text-writing-mode":new fa(Te.layout_symbol["text-writing-mode"]),"text-rotate":new _a(Te.layout_symbol["text-rotate"]),"text-padding":new fa(Te.layout_symbol["text-padding"]),"text-keep-upright":new fa(Te.layout_symbol["text-keep-upright"]),"text-transform":new _a(Te.layout_symbol["text-transform"]),"text-offset":new _a(Te.layout_symbol["text-offset"]),"text-allow-overlap":new fa(Te.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fa(Te.layout_symbol["text-ignore-placement"]),"text-optional":new fa(Te.layout_symbol["text-optional"])}),gu={paint:new va({"icon-opacity":new _a(Te.paint_symbol["icon-opacity"]),"icon-color":new _a(Te.paint_symbol["icon-color"]),"icon-halo-color":new _a(Te.paint_symbol["icon-halo-color"]),"icon-halo-width":new _a(Te.paint_symbol["icon-halo-width"]),"icon-halo-blur":new _a(Te.paint_symbol["icon-halo-blur"]),"icon-translate":new fa(Te.paint_symbol["icon-translate"]),"icon-translate-anchor":new fa(Te.paint_symbol["icon-translate-anchor"]),"text-opacity":new _a(Te.paint_symbol["text-opacity"]),"text-color":new _a(Te.paint_symbol["text-color"],{runtimeType:Ue,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new _a(Te.paint_symbol["text-halo-color"]),"text-halo-width":new _a(Te.paint_symbol["text-halo-width"]),"text-halo-blur":new _a(Te.paint_symbol["text-halo-blur"]),"text-translate":new fa(Te.paint_symbol["text-translate"]),"text-translate-anchor":new fa(Te.paint_symbol["text-translate-anchor"])}),layout:mu},yu=function(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Be,this.defaultValue=e};yu.prototype.evaluate=function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default},yu.prototype.eachChild=function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)},yu.prototype.outputDefined=function(){return!1},yu.prototype.serialize=function(){return null},Br("FormatSectionOverride",yu,{omit:["defaultValue"]});var vu=function(e){function t(t){e.call(this,t,gu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.recalculate=function(t,i){if(e.prototype.recalculate.call(this,t,i),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var a=[],n=0,o=r;n<o.length;n+=1){var s=o[n];a.indexOf(s)<0&&a.push(s)}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},t.prototype.getValueAndResolveTokens=function(e,t,i,r){var a=this.layout.get(e).evaluate(t,{},i,r),n=this._unevaluatedLayout._values[e];return n.isDataDriven()||Gi(n.value)||!a?a:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,i){return i in e?String(e[i]):""}))}(t.properties,a)},t.prototype.createBucket=function(e){return new _u(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype._setPaintOverrides=function(){for(var e=0,i=gu.paint.overridableProperties;e<i.length;e+=1){var r=i[e];if(t.hasPaintOverride(this.layout,r)){var a,n=this.paint.get(r),o=new yu(n),s=new ji(o,n.property.specification);a="constant"===n.value.kind||"source"===n.value.kind?new Zi("source",s):new Hi("composite",s,n.value.zoomStops,n.value._interpolationType),this.paint._values[r]=new ha(n.property,a,n.parameters)}}},t.prototype._handleOverridablePaintPropertyUpdate=function(e,i,r){return!(!this.layout||i.isDataDriven()||r.isDataDriven())&&t.hasPaintOverride(this.layout,e)},t.hasPaintOverride=function(e,t){var i=e.get("text-field"),r=gu.paint.properties[t],a=!1,n=function(e){for(var t=0,i=e;t<i.length;t+=1)if(r.overrides&&r.overrides.hasOverride(i[t]))return void(a=!0)};if("constant"===i.value.kind&&i.value.value instanceof it)n(i.value.value.sections);else if("source"===i.value.kind){var o=function(e){a||(e instanceof lt&&ot(e.value)===Ge?n(e.value.sections):e instanceof ht?n(e.sections):e.eachChild(o))},s=i.value;s._styleExpression&&o(s._styleExpression.expression)}return a},t}(ba),bu={paint:new va({"background-color":new fa(Te.paint_background["background-color"]),"background-pattern":new ga(Te.paint_background["background-pattern"]),"background-opacity":new fa(Te.paint_background["background-opacity"])})},xu=function(e){function t(t){e.call(this,t,bu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ba),wu={paint:new va({"raster-opacity":new fa(Te.paint_raster["raster-opacity"]),"raster-hue-rotate":new fa(Te.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fa(Te.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fa(Te.paint_raster["raster-brightness-max"]),"raster-saturation":new fa(Te.paint_raster["raster-saturation"]),"raster-contrast":new fa(Te.paint_raster["raster-contrast"]),"raster-resampling":new fa(Te.paint_raster["raster-resampling"]),"raster-fade-duration":new fa(Te.paint_raster["raster-fade-duration"])})},Su=function(e){function t(t){e.call(this,t,wu)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(ba),Au=function(e){function t(t){e.call(this,t,{}),this.implementation=t}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},t.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},t.prototype.recalculate=function(){},t.prototype.updateTransitions=function(){},t.prototype.hasTransition=function(){},t.prototype.serialize=function(){},t.prototype.onAdd=function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},t.prototype.onRemove=function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},t}(ba),ku={circle:uo,heatmap:bo,hillshade:wo,fill:ls,"fill-extrusion":ks,line:Fs,symbol:vu,background:xu,raster:Su},Eu=o.HTMLImageElement,Iu=o.HTMLCanvasElement,Tu=o.HTMLVideoElement,Cu=o.ImageData,Pu=o.ImageBitmap,Lu=function(e,t,i,r){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,r)};Lu.prototype.update=function(e,t,i){var r=e.width,a=e.height,n=!(this.size&&this.size[0]===r&&this.size[1]===a||i),o=this.context,s=o.gl;if(this.useMipmap=Boolean(t&&t.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),n)this.size=[r,a],e instanceof Eu||e instanceof Iu||e instanceof Tu||e instanceof Cu||Pu&&e instanceof Pu?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,a,0,this.format,s.UNSIGNED_BYTE,e.data);else{var l=i||{x:0,y:0},u=l.x,c=l.y;e instanceof Eu||e instanceof Iu||e instanceof Tu||e instanceof Cu||Pu&&e instanceof Pu?s.texSubImage2D(s.TEXTURE_2D,0,u,c,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,u,c,r,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Lu.prototype.bind=function(e,t,i){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),i!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=r.LINEAR),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)},Lu.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Lu.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Ru=function(e){var t=this;this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){t._triggered=!1,t._callback()})};Ru.prototype.trigger=function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))},Ru.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Mu=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},g(["receive","process"],this),this.invoker=new Ru(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=E()?e:o};function zu(e,t,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Mu.prototype.send=function(e,t,i,r,a){var n=this;void 0===a&&(a=!1);var o=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(this.callbacks[o]=i);var s=C(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!i,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:Ur(t,s)},s),{cancel:function(){i&&delete n.callbacks[o],n.target.postMessage({id:o,type:"<cancel>",targetMapId:r,sourceMapId:n.mapId})}}},Mu.prototype.receive=function(e){var t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){delete this.tasks[i];var r=this.cancelCallbacks[i];delete this.cancelCallbacks[i],r&&r()}else E()||t.mustQueue?(this.tasks[i]=t,this.taskQueue.push(i),this.invoker.trigger()):this.processTask(i,t)},Mu.prototype.process=function(){if(this.taskQueue.length){var e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),t&&this.processTask(e,t)}},Mu.prototype.processTask=function(e,t){var i=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(qr(t.error)):r(null,qr(t.data)))}else{var a=!1,n=C(this.globalScope)?void 0:[],o=t.hasCallback?function(t,r){a=!0,delete i.cancelCallbacks[e],i.target.postMessage({id:e,type:"<response>",sourceMapId:i.mapId,error:t?Ur(t):null,data:Ur(r,n)},n)}:function(e){a=!0},s=null,l=qr(t.data);if(this.parent[t.type])s=this.parent[t.type](t.sourceMapId,l,o);else if(this.parent.getWorkerSource){var u=t.type.split(".");s=this.parent.getWorkerSource(t.sourceMapId,u[0],l.source)[u[1]](l,o)}else o(new Error("Could not find function "+t.type));!a&&s&&s.cancel&&(this.cancelCallbacks[e]=s.cancel)}},Mu.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Du=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};Du.prototype.setNorthEast=function(e){return this._ne=e instanceof Bu?new Bu(e.lng,e.lat):Bu.convert(e),this},Du.prototype.setSouthWest=function(e){return this._sw=e instanceof Bu?new Bu(e.lng,e.lat):Bu.convert(e),this},Du.prototype.extend=function(e){var t,i,r=this._sw,a=this._ne;if(e instanceof Bu)t=e,i=e;else{if(!(e instanceof Du))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Du.convert(e)):this.extend(Bu.convert(e)):this;if(i=e._ne,!(t=e._sw)||!i)return this}return r||a?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new Bu(t.lng,t.lat),this._ne=new Bu(i.lng,i.lat)),this},Du.prototype.getCenter=function(){return new Bu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Du.prototype.getSouthWest=function(){return this._sw},Du.prototype.getNorthEast=function(){return this._ne},Du.prototype.getNorthWest=function(){return new Bu(this.getWest(),this.getNorth())},Du.prototype.getSouthEast=function(){return new Bu(this.getEast(),this.getSouth())},Du.prototype.getWest=function(){return this._sw.lng},Du.prototype.getSouth=function(){return this._sw.lat},Du.prototype.getEast=function(){return this._ne.lng},Du.prototype.getNorth=function(){return this._ne.lat},Du.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Du.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Du.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Du.prototype.contains=function(e){var t=Bu.convert(e),i=t.lng,r=t.lat,a=this._sw.lng<=i&&i<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=i&&i>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&a},Du.convert=function(e){return!e||e instanceof Du?e:new Du(e)};var Bu=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Bu.prototype.wrap=function(){return new Bu(p(this.lng,-180,180),this.lat)},Bu.prototype.toArray=function(){return[this.lng,this.lat]},Bu.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Bu.prototype.distanceTo=function(e){var t=Math.PI/180,i=this.lat*t,r=e.lat*t,a=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(a,1))},Bu.prototype.toBounds=function(e){void 0===e&&(e=0);var t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new Du(new Bu(this.lng-i,this.lat-t),new Bu(this.lng+i,this.lat+t))},Bu.convert=function(e){if(e instanceof Bu)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Bu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Bu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Fu=2*Math.PI*6371008.8;function Ou(e){return Fu*Math.cos(e*Math.PI/180)}function Nu(e){return(180+e)/360}function Uu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qu(e,t){return e/Ou(t)}function Vu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}var ju=function(e,t,i){void 0===i&&(i=0),this.x=+e,this.y=+t,this.z=+i};ju.fromLngLat=function(e,t){void 0===t&&(t=0);var i=Bu.convert(e);return new ju(Nu(i.lng),Uu(i.lat),qu(t,i.lat))},ju.prototype.toLngLat=function(){return new Bu(360*this.x-180,Vu(this.y))},ju.prototype.toAltitude=function(){return this.z*Ou(Vu(this.y))},ju.prototype.meterInMercatorCoordinateUnits=function(){return 1/Fu*(e=Vu(this.y),1/Math.cos(e*Math.PI/180));var e};var Gu=function(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Hu(0,e,e,t,i)};Gu.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},Gu.prototype.url=function(e,t){var i,r,a,n,o,s=(r=this.y,a=this.z,n=zu(256*(i=this.x),256*(r=Math.pow(2,a)-r-1),a),o=zu(256*(i+1),256*(r+1),a),n[0]+","+n[1]+","+o[0]+","+o[1]),l=function(e,t,i){for(var r,a="",n=e;n>0;n--)a+=(t&(r=1<<n-1)?1:0)+(i&r?2:0);return a}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",s)},Gu.prototype.getTilePoint=function(e){var t=Math.pow(2,this.z);return new a(8192*(e.x*t-this.x),8192*(e.y*t-this.y))},Gu.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Ku=function(e,t){this.wrap=e,this.canonical=t,this.key=Hu(e,t.z,t.z,t.x,t.y)},Zu=function(e,t,i,r,a){this.overscaledZ=e,this.wrap=t,this.canonical=new Gu(i,+r,+a),this.key=Hu(t,e,i,r,a)};function Hu(e,t,i,r,a){(e*=2)<0&&(e=-1*e-1);var n=1<<i;return(n*n*e+n*a+r).toString(36)+i.toString(36)+t.toString(36)}Zu.prototype.equals=function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)},Zu.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new Zu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},Zu.prototype.calculateScaledKey=function(e,t){var i=this.canonical.z-e;return e>this.canonical.z?Hu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Hu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)},Zu.prototype.isChildOf=function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},Zu.prototype.children=function(e){if(this.overscaledZ>=e)return[new Zu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new Zu(t,this.wrap,t,i,r),new Zu(t,this.wrap,t,i+1,r),new Zu(t,this.wrap,t,i,r+1),new Zu(t,this.wrap,t,i+1,r+1)]},Zu.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},Zu.prototype.wrapped=function(){return new Zu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Zu.prototype.unwrapTo=function(e){return new Zu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)},Zu.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Zu.prototype.toUnwrapped=function(){return new Ku(this.wrap,this.canonical)},Zu.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Zu.prototype.getTilePoint=function(e){return this.canonical.getTilePoint(new ju(e.x-this.wrap,e.y))},Br("CanonicalTileID",Gu),Br("OverscaledTileID",Zu,{omit:["posMatrix"]});var Qu=function(e,t,i){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return S('"'+i+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=t.height;var r=this.dim=t.height-2;this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox";for(var a=0;a<r;a++)this.data[this._idx(-1,a)]=this.data[this._idx(0,a)],this.data[this._idx(r,a)]=this.data[this._idx(r-1,a)],this.data[this._idx(a,-1)]=this.data[this._idx(a,0)],this.data[this._idx(a,r)]=this.data[this._idx(a,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Qu.prototype.get=function(e,t){var i=new Uint8Array(this.data.buffer),r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[r],i[r+1],i[r+2])},Qu.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Qu.prototype._idx=function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)},Qu.prototype._unpackMapbox=function(e,t,i){return(256*e*256+256*t+i)/10-1e4},Qu.prototype._unpackTerrarium=function(e,t,i){return 256*e+t+i/256-32768},Qu.prototype.getPixels=function(){return new go({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Qu.prototype.backfillBorder=function(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,a=t*this.dim+this.dim,n=i*this.dim,o=i*this.dim+this.dim;switch(t){case-1:r=a-1;break;case 1:a=r+1}switch(i){case-1:n=o-1;break;case 1:o=n+1}for(var s=-t*this.dim,l=-i*this.dim,u=n;u<o;u++)for(var c=r;c<a;c++)this.data[this._idx(c,u)]=e.data[this._idx(c+s,u+l)]},Br("DEMData",Qu);var Wu=function(e){this._stringToNumber={},this._numberToString=[];for(var t=0;t<e.length;t++){var i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}};Wu.prototype.encode=function(e){return this._stringToNumber[e]},Wu.prototype.decode=function(e){return this._numberToString[e]};var Ju=function(e,t,i,r,a){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=r,this.properties=e.properties,this.id=a},Xu={geometry:{configurable:!0}};Xu.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Xu.geometry.set=function(e){this._geometry=e},Ju.prototype.toJSON=function(){var e={geometry:this.geometry};for(var t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e},Object.defineProperties(Ju.prototype,Xu);var Yu=function(){this.state={},this.stateChanges={},this.deletedStates={}};Yu.prototype.updateState=function(e,t,i){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},h(this.stateChanges[e][r],i),null===this.deletedStates[e])for(var a in this.deletedStates[e]={},this.state[e])a!==r&&(this.deletedStates[e][a]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var n in this.deletedStates[e][r]={},this.state[e][r])i[n]||(this.deletedStates[e][r][n]=null);else for(var o in i)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]},Yu.prototype.removeFeatureState=function(e,t,i){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(i in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][i]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}},Yu.prototype.getState=function(e,t){var i=String(t),r=h({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var a=this.deletedStates[e][t];if(null===a)return{};for(var n in a)delete r[n]}return r},Yu.prototype.initializeTileState=function(e,t){e.setFeatureState(this.state,t)},Yu.prototype.coalesceChanges=function(e,t){var i={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var a={};for(var n in this.stateChanges[r])this.state[r][n]||(this.state[r][n]={}),h(this.state[r][n],this.stateChanges[r][n]),a[n]=this.state[r][n];i[r]=a}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,p=Object.keys(this.deletedStates[o][u]);c<p.length;c+=1)delete this.state[o][u][p[c]];s[u]=this.state[o][u]}i[o]=i[o]||{},h(i[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(var d in e)e[d].setFeatureState(i,t)};var $u=function(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Lr(8192,16,0),this.grid3D=new Lr(8192,16,0),this.featureIndexArray=new an,this.promoteId=t};function ec(e,t,i,r,a){return v(e,(function(e,n){var o=t instanceof da?t.get(n):null;return o&&o.evaluate?o.evaluate(i,r,a):o}))}function tc(e){for(var t=1/0,i=1/0,r=-1/0,a=-1/0,n=0,o=e;n<o.length;n+=1){var s=o[n];t=Math.min(t,s.x),i=Math.min(i,s.y),r=Math.max(r,s.x),a=Math.max(a,s.y)}return{minX:t,minY:i,maxX:r,maxY:a}}function ic(e,t){return t-e}$u.prototype.insert=function(e,t,i,r,a,n){var o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,a);for(var s=n?this.grid3D:this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],p=0;p<u.length;p++){var h=u[p];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<8192&&c[1]<8192&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}},$u.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ys.VectorTile(new Qs(this.rawTileData)).layers,this.sourceLayerCoder=new Wu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},$u.prototype.query=function(e,t,i,r){var n=this;this.loadVTLayers();for(var o=e.params||{},s=8192/e.tileSize/e.scale,l=ar(o.filter),u=e.queryGeometry,c=e.queryPadding*s,p=tc(u),h=this.grid.query(p.minX-c,p.minY-c,p.maxX+c,p.maxY+c),d=tc(e.cameraQueryGeometry),f=0,_=this.grid3D.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c,(function(t,i,r,n){return function(e,t,i,r,n){for(var o=0,s=e;o<s.length;o+=1){var l=s[o];if(t<=l.x&&i<=l.y&&r>=l.x&&n>=l.y)return!0}var u=[new a(t,i),new a(t,n),new a(r,n),new a(r,i)];if(e.length>2)for(var c=0,p=u;c<p.length;c+=1)if(Jn(e,p[c]))return!0;for(var h=0;h<e.length-1;h++)if(Xn(e[h],e[h+1],u))return!0;return!1}(e.cameraQueryGeometry,t-c,i-c,r+c,n+c)}));f<_.length;f+=1)h.push(_[f]);h.sort(ic);for(var m,g={},y=function(a){var c=h[a];if(c!==m){m=c;var p=n.featureIndexArray.get(c),d=null;n.loadMatchingFeature(g,p.bucketIndex,p.sourceLayerIndex,p.featureIndex,l,o.layers,o.availableImages,t,i,r,(function(t,i,r){return d||(d=On(t)),i.queryIntersectsFeature(u,t,r,d,n.z,e.transform,s,e.pixelPosMatrix)}))}},v=0;v<h.length;v++)y(v);return g},$u.prototype.loadMatchingFeature=function(e,t,i,r,a,n,o,s,l,u,c){var p=this.bucketLayerIDs[t];if(!n||function(e,t){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(n,p)){var h=this.sourceLayerCoder.decode(i),d=this.vtLayers[h].feature(r);if(a.filter(new na(this.tileID.overscaledZ),d))for(var f=this.getId(d,h),_=0;_<p.length;_++){var m=p[_];if(!(n&&n.indexOf(m)<0)){var g=s[m];if(g){var y={};void 0!==f&&u&&(y=u.getState(g.sourceLayer||"_geojsonTileLayer",f));var v=l[m];v.paint=ec(v.paint,g.paint,d,y,o),v.layout=ec(v.layout,g.layout,d,y,o);var b=!c||c(d,g,y);if(b){var x=new Ju(d,this.z,this.x,this.y,f);x.layer=v;var w=e[m];void 0===w&&(w=e[m]=[]),w.push({featureIndex:r,feature:x,intersectionZ:b})}}}}}},$u.prototype.lookupSymbolFeatures=function(e,t,i,r,a,n,o,s){var l={};this.loadVTLayers();for(var u=ar(a),c=0,p=e;c<p.length;c+=1)this.loadMatchingFeature(l,i,r,p[c],u,n,o,s,t);return l},$u.prototype.hasLayer=function(e){for(var t=0,i=this.bucketLayerIDs;t<i.length;t+=1)for(var r=0,a=i[t];r<a.length;r+=1)if(e===a[r])return!0;return!1},$u.prototype.getId=function(e,t){var i=e.id;return this.promoteId&&"boolean"==typeof(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(i=Number(i)),i},Br("FeatureIndex",$u,{omit:["rawTileData","sourceLayerCoder"]});var rc=function(e,t){this.tileID=e,this.uid=f(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};rc.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<O.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},rc.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},rc.prototype.loadVectorData=function(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var i={};if(!t)return i;for(var r=function(){var e=n[a],r=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==r.length){e.layers=r,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return r.filter((function(t){return t.id===e}))[0]})));for(var o=0,s=r;o<s.length;o+=1)i[s[o].id]=e}},a=0,n=e;a<n.length;a+=1)r();return i}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var a=this.buckets[r];if(a instanceof _u){if(this.hasSymbolBuckets=!0,!i)break;a.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var n in this.buckets){var o=this.buckets[n];if(o instanceof _u&&o.hasRTLText){this.hasRTLText=!0,aa.isLoading()||aa.isLoaded()||"deferred"!==ia()||ra();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new Wa},rc.prototype.unloadVectorData=function(){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},rc.prototype.getBucket=function(e){return this.buckets[e.id]},rc.prototype.upload=function(e){for(var t in this.buckets){var i=this.buckets[t];i.uploadPending()&&i.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Lu(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Lu(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},rc.prototype.prepare=function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)},rc.prototype.queryRenderedFeatures=function(e,t,i,r,a,n,o,s,l,u){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:a,scale:n,tileSize:this.tileSize,pixelPosMatrix:u,transform:s,params:o,queryPadding:this.queryPadding*l},e,t,i):{}},rc.prototype.querySourceFeatures=function(e,t){var i=this.latestFeatureIndex;if(i&&i.rawTileData){var r=i.loadVTLayers(),a=t?t.sourceLayer:"",n=r._geojsonTileLayer||r[a];if(n)for(var o=ar(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,p={z:l,x:u,y:c},h=0;h<n.length;h++){var d=n.feature(h);if(o.filter(new na(this.tileID.overscaledZ),d)){var f=i.getId(d,a),_=new Ju(d,l,u,c,f);_.tile=p,e.push(_)}}}},rc.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},rc.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},rc.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=I(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),a=!1;if(this.expirationTime>r)a=!1;else if(t)if(this.expirationTime<t)a=!0;else{var n=this.expirationTime-t;n?this.expirationTime=r+Math.max(n,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},rc.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},rc.prototype.setFeatureState=function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length){var i=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(t.style.hasLayer(r)){var a=this.buckets[r],n=a.layers[0].sourceLayer||"_geojsonTileLayer",o=i[n],s=e[n];if(o&&s&&0!==Object.keys(s).length){a.update(s,o,this.imageAtlas&&this.imageAtlas.patternPositions||{});var l=t&&t.style&&t.style.getLayer(r);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(a)))}}}},rc.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},rc.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()},rc.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},rc.prototype.setHoldDuration=function(e){this.symbolFadeHoldUntil=O.now()+e},rc.prototype.setDependencies=function(e,t){for(var i={},r=0,a=t;r<a.length;r+=1)i[a[r]]=!0;this.dependencies[e]=i},rc.prototype.hasDependency=function(e,t){for(var i=0,r=e;i<r.length;i+=1){var a=this.dependencies[r[i]];if(a)for(var n=0,o=t;n<o.length;n+=1)if(a[o[n]])return!0}return!1};var ac=o.performance,nc=function(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},ac.mark(this._marks.start)};nc.prototype.finish=function(){ac.mark(this._marks.end);var e=ac.getEntriesByName(this._marks.measure);return 0===e.length&&(ac.measure(this._marks.measure,this._marks.start,this._marks.end),e=ac.getEntriesByName(this._marks.measure),ac.clearMarks(this._marks.start),ac.clearMarks(this._marks.end),ac.clearMeasures(this._marks.measure)),e},e.Actor=Mu,e.AlphaImage=mo,e.CanonicalTileID=Gu,e.CollisionBoxArray=Wa,e.Color=$e,e.DEMData=Qu,e.DataConstantProperty=fa,e.DictionaryCoder=Wu,e.EXTENT=8192,e.ErrorEvent=Ee,e.EvaluationParameters=na,e.Event=ke,e.Evented=Ie,e.FeatureIndex=$u,e.FillBucket=ns,e.FillExtrusionBucket=ws,e.ImageAtlas=yl,e.ImagePosition=ml,e.LineBucket=Ms,e.LngLat=Bu,e.LngLatBounds=Du,e.MercatorCoordinate=ju,e.ONE_EM=24,e.OverscaledTileID=Zu,e.Point=a,e.Point$1=a,e.Properties=va,e.Protobuf=Qs,e.RGBAImage=go,e.RequestManager=K,e.RequestPerformance=nc,e.ResourceType=fe,e.SegmentVector=on,e.SourceFeatureState=Yu,e.StructArrayLayout1ui2=Za,e.StructArrayLayout2f1f2i16=Fa,e.StructArrayLayout2i4=Ea,e.StructArrayLayout3ui6=Na,e.StructArrayLayout4i8=Ia,e.SymbolBucket=_u,e.Texture=Lu,e.Tile=rc,e.Transitionable=la,e.Uniform1f=vn,e.Uniform1i=yn,e.Uniform2f=bn,e.Uniform3f=xn,e.Uniform4f=wn,e.UniformColor=Sn,e.UniformMatrix4f=kn,e.UnwrappedTileID=Ku,e.ValidationError=Ce,e.WritingMode=vl,e.ZoomHistory=Vr,e.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e},e.addDynamicAttributes=pu,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var r=e.length,a=new Array(e.length),n=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(n=e),a[o]=t,0==--r&&i(n,a)}))}))},e.bezier=l,e.bindAll=g,e.browser=O,e.cacheEntryPossiblyAdded=function(e){++he>le&&(e.getActor().send("enforceCacheSizeLimit",se),he=0)},e.clamp=c,e.clearTileCache=function(e){var t=o.caches.delete("mapbox-tiles");e&&t.catch(e).then((function(){return e()}))},e.clipLine=Gl,e.clone=function(e){var t=new ro(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=x,e.clone$2=function(e){var t=new ro(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.collisionCircleLayout=js,e.config=N,e.create=function(){var e=new ro(16);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=function(){var e=new ro(9);return ro!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e},e.create$2=function(){var e=new ro(4);return ro!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=Ki,e.createLayout=Aa,e.createStyleLayer=function(e){return"custom"===e.type?new Au(e):new ku[e.type](e)},e.cross=function(e,t,i){var r=t[0],a=t[1],n=t[2],o=i[0],s=i[1],l=i[2];return e[0]=a*l-n*s,e[1]=n*o-r*l,e[2]=r*s-a*o,e},e.deepEqual=function e(t,i){if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var r=0;r<t.length;r++)if(!e(t[r],i[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==i){if("object"!=typeof i)return!1;if(Object.keys(t).length!==Object.keys(i).length)return!1;for(var a in t)if(!e(t[a],i[a]))return!1;return!0}return t===i},e.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},e.dot$1=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.ease=u,e.emitValidationErrors=Pr,e.endsWith=y,e.enforceCacheSizeLimit=function(e){ue(),ee&&ee.then((function(t){t.keys().then((function(i){for(var r=0;r<i.length-e;r++)t.delete(i[r])}))}))},e.evaluateSizeForFeature=Dl,e.evaluateSizeForZoom=Bl,e.evaluateVariableOffset=ru,e.evented=ta,e.extend=h,e.featureFilter=ar,e.filterObject=b,e.fromRotation=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=Pl,e.getAnchorJustification=au,e.getArrayBuffer=be,e.getImage=we,e.getJSON=function(e,t){return ve(h(e,{type:"json"}),t)},e.getRTLTextPluginStatus=ia,e.getReferrer=ye,e.getVideo=function(e,t){var i,r,a=o.document.createElement("video");a.muted=!0,a.onloadstart=function(){t(null,a)};for(var n=0;n<e.length;n++){var s=o.document.createElement("source");i=e[n],r=void 0,(r=o.document.createElement("a")).href=i,(r.protocol!==o.document.location.protocol||r.host!==o.document.location.host)&&(a.crossOrigin="Anonymous"),s.src=e[n],a.appendChild(s)}return{cancel:function(){}}},e.identity=ao,e.invert=function(e,t){var i=t[0],r=t[1],a=t[2],n=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],h=t[10],d=t[11],f=t[12],_=t[13],m=t[14],g=t[15],y=i*s-r*o,v=i*l-a*o,b=i*u-n*o,x=r*l-a*s,w=r*u-n*s,S=a*u-n*l,A=c*_-p*f,k=c*m-h*f,E=c*g-d*f,I=p*m-h*_,T=p*g-d*_,C=h*g-d*m,P=y*C-v*T+b*I+x*E-w*k+S*A;return P?(e[0]=(s*C-l*T+u*I)*(P=1/P),e[1]=(a*T-r*C-n*I)*P,e[2]=(_*S-m*w+g*x)*P,e[3]=(h*w-p*S-d*x)*P,e[4]=(l*E-o*C-u*k)*P,e[5]=(i*C-a*E+n*k)*P,e[6]=(m*b-f*S-g*v)*P,e[7]=(c*S-h*b+d*v)*P,e[8]=(o*T-s*E+u*A)*P,e[9]=(r*E-i*T-n*A)*P,e[10]=(f*w-_*b+g*y)*P,e[11]=(p*b-c*w-d*y)*P,e[12]=(s*k-o*I-l*A)*P,e[13]=(i*I-r*k+a*A)*P,e[14]=(_*v-f*x-m*y)*P,e[15]=(c*x-p*v+h*y)*P,e):null},e.isChar=jr,e.isMapboxURL=Z,e.keysDifference=function(e,t){var i=[];for(var r in e)r in t||i.push(r);return i},e.makeRequest=ve,e.mapObject=v,e.mercatorXfromLng=Nu,e.mercatorYfromLat=Uu,e.mercatorZfromAltitude=qu,e.mul=so,e.multiply=no,e.mvt=ys,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=function(e,t){var i=t[0],r=t[1],a=t[2],n=i*i+r*r+a*a;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},e.number=jt,e.offscreenCanvasSupported=de,e.ortho=function(e,t,i,r,a,n,o){var s=1/(t-i),l=1/(r-a),u=1/(n-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*s,e[13]=(a+r)*l,e[14]=(o+n)*u,e[15]=1,e},e.parseGlyphPBF=function(e){return new Qs(e).readFields(hl,[])},e.pbf=Qs,e.performSymbolLayout=function(e,t,i,r,a,n,o){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var s=e.layers[0].layout,l=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.kind){var c=e.textSizeData,p=c.maxZoom;u.compositeTextSizes=[l["text-size"].possiblyEvaluate(new na(c.minZoom),o),l["text-size"].possiblyEvaluate(new na(p),o)]}if("composite"===e.iconSizeData.kind){var h=e.iconSizeData,d=h.maxZoom;u.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new na(h.minZoom),o),l["icon-size"].possiblyEvaluate(new na(d),o)]}u.layoutTextSize=l["text-size"].possiblyEvaluate(new na(e.zoom+1),o),u.layoutIconSize=l["icon-size"].possiblyEvaluate(new na(e.zoom+1),o),u.textMaxSize=l["text-size"].possiblyEvaluate(new na(18));for(var f=24*s.get("text-line-height"),_="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement"),m=s.get("text-keep-upright"),g=s.get("text-size"),y=function(){var n=b[v],l=s.get("text-font").evaluate(n,{},o).join(","),c=g.evaluate(n,{},o),p=u.layoutTextSize.evaluate(n,{},o),h=u.layoutIconSize.evaluate(n,{},o),d={horizontal:{},vertical:void 0},y=n.text,x=[0,0];if(y){var w=y.toString(),A=24*s.get("text-letter-spacing").evaluate(n,{},o),k=function(e){for(var t=0,i=e;t<i.length;t+=1)if(r=i[t].charCodeAt(0),jr.Arabic(r)||jr["Arabic Supplement"](r)||jr["Arabic Extended-A"](r)||jr["Arabic Presentation Forms-A"](r)||jr["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(w)?A:0,E=s.get("text-anchor").evaluate(n,{},o),I=s.get("text-variable-anchor");if(!I){var T=s.get("text-radial-offset").evaluate(n,{},o);x=T?ru(E,[24*T,iu]):s.get("text-offset").evaluate(n,{},o).map((function(e){return 24*e}))}var C=_?"center":s.get("text-justify").evaluate(n,{},o),P=s.get("symbol-placement"),L="point"===P?24*s.get("text-max-width").evaluate(n,{},o):0,R=function(){e.allowVerticalPlacement&&Gr(w)&&(d.vertical=wl(y,t,i,a,l,L,f,E,"left",k,x,vl.vertical,!0,P,p,c))};if(!_&&I){for(var M="auto"===C?I.map((function(e){return au(e)})):[C],z=!1,D=0;D<M.length;D++){var B=M[D];if(!d.horizontal[B])if(z)d.horizontal[B]=d.horizontal[0];else{var F=wl(y,t,i,a,l,L,f,"center",B,k,x,vl.horizontal,!1,P,p,c);F&&(d.horizontal[B]=F,z=1===F.positionedLines.length)}}R()}else{"auto"===C&&(C=au(E));var O=wl(y,t,i,a,l,L,f,E,C,k,x,vl.horizontal,!1,P,p,c);O&&(d.horizontal[C]=O),R(),Gr(w)&&_&&m&&(d.vertical=wl(y,t,i,a,l,L,f,E,C,k,x,vl.vertical,!1,P,p,c))}}var N=void 0,U=!1;if(n.icon&&n.icon.name){var q=r[n.icon.name];q&&(N=function(e,t,i){var r=Pl(i),a=t[0]-e.displaySize[0]*r.horizontalAlign,n=t[1]-e.displaySize[1]*r.verticalAlign;return{image:e,top:n,bottom:n+e.displaySize[1],left:a,right:a+e.displaySize[0]}}(a[n.icon.name],s.get("icon-offset").evaluate(n,{},o),s.get("icon-anchor").evaluate(n,{},o)),U=q.sdf,void 0===e.sdfIcons?e.sdfIcons=q.sdf:e.sdfIcons!==q.sdf&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(q.pixelRatio!==e.pixelRatio||0!==s.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var V=ou(d.horizontal)||d.vertical;e.iconsInText=!!V&&V.iconsInText,(V||N)&&function(e,t,i,r,a,n,o,s,l,u,c){var p=n.textMaxSize.evaluate(t,{});void 0===p&&(p=o);var h,d=e.layers[0].layout,f=d.get("icon-offset").evaluate(t,{},c),_=ou(i.horizontal),m=o/24,g=e.tilePixelRatio*m,y=e.tilePixelRatio*p/24,v=e.tilePixelRatio*s,b=e.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*e.tilePixelRatio,w=d.get("icon-padding")*e.tilePixelRatio,A=d.get("text-max-angle")/180*Math.PI,k="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),E="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),I=d.get("symbol-placement"),T=b/2,C=d.get("icon-text-fit");r&&"none"!==C&&(e.allowVerticalPlacement&&i.vertical&&(h=Rl(r,i.vertical,C,d.get("icon-text-fit-padding"),f,m)),_&&(r=Rl(r,_,C,d.get("icon-text-fit-padding"),f,m)));var P=function(s,p){p.x<0||p.x>=8192||p.y<0||p.y>=8192||function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_,m,g,y,v,b,x,w,A,k){var E,I,T,C,P,L=e.addToLineVertexArray(t,i),R=0,M=0,z=0,D=0,B=-1,F=-1,O={},N=pn(""),U=0,q=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(U=(E=s.layout.get("text-offset").evaluate(b,{},A).map((function(e){return 24*e})))[0],q=E[1]):(U=24*s.layout.get("text-radial-offset").evaluate(b,{},A),q=iu),e.allowVerticalPlacement&&r.vertical){var V=s.layout.get("text-rotate").evaluate(b,{},A)+90;C=new Jl(l,t,u,c,p,r.vertical,h,d,f,V),o&&(P=new Jl(l,t,u,c,p,o,m,g,f,V))}if(a){var j=s.layout.get("icon-rotate").evaluate(b,{}),G="none"!==s.layout.get("icon-text-fit"),K=Kl(a,j,w,G),Z=o?Kl(o,j,w,G):void 0;T=new Jl(l,t,u,c,p,a,m,g,!1,j),R=4*K.length;var H=e.iconSizeData,Q=null;"source"===H.kind?(Q=[128*s.layout.get("icon-size").evaluate(b,{})])[0]>32640&&S(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===H.kind&&((Q=[128*x.compositeIconSizes[0].evaluate(b,{},A),128*x.compositeIconSizes[1].evaluate(b,{},A)])[0]>32640||Q[1]>32640)&&S(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),e.addSymbols(e.icon,K,Q,v,y,b,!1,t,L.lineStartIndex,L.lineLength,-1,A),B=e.icon.placedSymbolArray.length-1,Z&&(M=4*Z.length,e.addSymbols(e.icon,Z,Q,v,y,b,vl.vertical,t,L.lineStartIndex,L.lineLength,-1,A),F=e.icon.placedSymbolArray.length-1)}for(var W in r.horizontal){var J=r.horizontal[W];if(!I){N=pn(J.text);var X=s.layout.get("text-rotate").evaluate(b,{},A);I=new Jl(l,t,u,c,p,J,h,d,f,X)}var Y=1===J.positionedLines.length;if(z+=nu(e,t,J,n,s,f,b,_,L,r.vertical?vl.horizontal:vl.horizontalOnly,Y?Object.keys(r.horizontal):[W],O,B,x,A),Y)break}r.vertical&&(D+=nu(e,t,r.vertical,n,s,f,b,_,L,vl.vertical,["vertical"],O,F,x,A));var $=I?I.boxStartIndex:e.collisionBoxArray.length,ee=I?I.boxEndIndex:e.collisionBoxArray.length,te=C?C.boxStartIndex:e.collisionBoxArray.length,ie=C?C.boxEndIndex:e.collisionBoxArray.length,re=T?T.boxStartIndex:e.collisionBoxArray.length,ae=T?T.boxEndIndex:e.collisionBoxArray.length,ne=P?P.boxStartIndex:e.collisionBoxArray.length,oe=P?P.boxEndIndex:e.collisionBoxArray.length,se=-1,le=function(e,t){return e&&e.circleDiameter?Math.max(e.circleDiameter,t):t};se=le(I,se),se=le(C,se),se=le(T,se);var ue=(se=le(P,se))>-1?1:0;ue&&(se*=k/24),e.glyphOffsetArray.length>=_u.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,B,F,N,$,ee,te,ie,re,ae,ne,oe,u,z,D,R,M,ue,0,h,U,q,se)}(e,p,s,i,r,a,h,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,x,k,l,v,w,E,f,t,n,u,c,o)};if("line"===I)for(var L=0,R=Gl(t.geometry,0,0,8192,8192);L<R.length;L+=1)for(var M=R[L],z=0,D=jl(M,b,A,i.vertical||_,r,24,y,e.overscaling,8192);z<D.length;z+=1){var B=D[z];_&&su(e,_.text,T,B)||P(M,B)}else if("line-center"===I)for(var F=0,O=t.geometry;F<O.length;F+=1){var N=O[F];if(N.length>1){var U=Vl(N,A,i.vertical||_,r,24,y);U&&P(N,U)}}else if("Polygon"===t.type)for(var q=0,V=ts(t.geometry,0);q<V.length;q+=1){var j=V[q],G=$l(j,16);P(j[0],new Ml(G.x,G.y,0))}else if("LineString"===t.type)for(var K=0,Z=t.geometry;K<Z.length;K+=1){var H=Z[K];P(H,new Ml(H[0].x,H[0].y,0))}else if("Point"===t.type)for(var Q=0,W=t.geometry;Q<W.length;Q+=1)for(var J=0,X=W[Q];J<X.length;J+=1){var Y=X[J];P([Y],new Ml(Y.x,Y.y,0))}}(e,n,d,N,r,u,p,h,x,U,o)},v=0,b=e.features;v<b.length;v+=1)y();n&&e.generateCollisionDebugBuffers()},e.perspective=function(e,t,i,r,a){var n,o=1/Math.tan(t/2);return e[0]=o/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(e[10]=(a+r)*(n=1/(r-a)),e[14]=2*a*r*n):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var i={},r=0;r<t.length;r++){var a=t[r];a in e&&(i[a]=e[a])}return i},e.plugin=aa,e.polygonIntersectsPolygon=qn,e.postMapLoadEvent=oe,e.postTurnstileEvent=ae,e.potpack=_l,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=Br,e.registerForPluginStateChange=function(e){return e({pluginStatus:Xr,pluginURL:Yr}),ta.on("pluginStateChange",e),e},e.renderColorRamp=vo,e.rotate=function(e,t,i){var r=t[0],a=t[1],n=t[2],o=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*s,e[1]=a*l+o*s,e[2]=r*-s+n*l,e[3]=a*-s+o*l,e},e.rotateX=function(e,t,i){var r=Math.sin(i),a=Math.cos(i),n=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*a+u*r,e[5]=o*a+c*r,e[6]=s*a+p*r,e[7]=l*a+h*r,e[8]=u*a-n*r,e[9]=c*a-o*r,e[10]=p*a-s*r,e[11]=h*a-l*r,e},e.rotateZ=function(e,t,i){var r=Math.sin(i),a=Math.cos(i),n=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*a+u*r,e[1]=o*a+c*r,e[2]=s*a+p*r,e[3]=l*a+h*r,e[4]=u*a-n*r,e[5]=c*a-o*r,e[6]=p*a-s*r,e[7]=h*a-l*r,e},e.scale=function(e,t,i){var r=i[0],a=i[1],n=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},e.scale$2=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e},e.setCacheLimits=function(e,t){se=e,le=t},e.setRTLTextPlugin=function(e,t,i){if(void 0===i&&(i=!1),"deferred"===Xr||"loading"===Xr||"loaded"===Xr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Yr=O.resolveURL(e),Xr="deferred",Jr=t,ea(),i||ra()},e.sphericalToCartesian=function(e){var t=e[0],i=e[1],r=e[2];return i+=90,i*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(r),y:t*Math.sin(i)*Math.sin(r),z:t*Math.cos(r)}},e.sqrLen=function(e){var t=e[0],i=e[1];return t*t+i*i},e.styleSpec=Te,e.sub=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e},e.symbolSize=Fl,e.transformMat3=function(e,t,i){var r=t[0],a=t[1],n=t[2];return e[0]=r*i[0]+a*i[3]+n*i[6],e[1]=r*i[1]+a*i[4]+n*i[7],e[2]=r*i[2]+a*i[5]+n*i[8],e},e.transformMat4=lo,e.translate=function(e,t,i){var r,a,n,o,s,l,u,c,p,h,d,f,_=i[0],m=i[1],g=i[2];return t===e?(e[12]=t[0]*_+t[4]*m+t[8]*g+t[12],e[13]=t[1]*_+t[5]*m+t[9]*g+t[13],e[14]=t[2]*_+t[6]*m+t[10]*g+t[14],e[15]=t[3]*_+t[7]*m+t[11]*g+t[15]):(a=t[1],n=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],h=t[9],d=t[10],f=t[11],e[0]=r=t[0],e[1]=a,e[2]=n,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=h,e[10]=d,e[11]=f,e[12]=r*_+s*m+p*g+t[12],e[13]=a*_+l*m+h*g+t[13],e[14]=n*_+u*m+d*g+t[14],e[15]=o*_+c*m+f*g+t[15]),e},e.triggerPluginCompletionEvent=$r,e.uniqueId=f,e.validateCustomStyleLayer=function(e){var t=[],i=e.id;return void 0===i&&t.push({message:"layers."+i+': missing required property "id"'}),void 0===e.render&&t.push({message:"layers."+i+': missing required method "render"'}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers."+i+': property "renderingMode" must be either "2d" or "3d"'}),t},e.validateLight=Ir,e.validateStyle=Er,e.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},e.vectorTile=ys,e.version="1.12.0",e.warnOnce=S,e.webpSupported=U,e.window=o,e.wrap=p})),r(["./shared"],(function(e){function t(e){var i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){for(var r="[",a=0,n=e;a<n.length;a+=1)r+=t(n[a])+",";return r+"]"}for(var o=Object.keys(e).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+t(e[o[l]])+",";return s+"}"}function i(i){for(var r="",a=0,n=e.refProperties;a<n.length;a+=1)r+="/"+t(i[n[a]]);return r}var r=function(e){this.keyCache={},e&&this.replace(e)};r.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},r.prototype.update=function(t,r){for(var a=this,n=0,o=t;n<o.length;n+=1){var s=o[n];this._layerConfigs[s.id]=s;var l=this._layers[s.id]=e.createStyleLayer(s);l._featureFilter=e.featureFilter(l.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var u=0,c=r;u<c.length;u+=1){var p=c[u];delete this.keyCache[p],delete this._layerConfigs[p],delete this._layers[p]}this.familiesBySource={};for(var h=0,d=function(e,t){for(var r={},a=0;a<e.length;a++){var n=t&&t[e[a].id]||i(e[a]);t&&(t[e[a].id]=n);var o=r[n];o||(o=r[n]=[]),o.push(e[a])}var s=[];for(var l in r)s.push(r[l]);return s}(e.values(this._layerConfigs),this.keyCache);h<d.length;h+=1){var f=d[h].map((function(e){return a._layers[e.id]})),_=f[0];if("none"!==_.visibility){var m=_.source||"",g=this.familiesBySource[m];g||(g=this.familiesBySource[m]={});var y=_.sourceLayer||"_geojsonTileLayer",v=g[y];v||(v=g[y]=[]),v.push(f)}}};var a=function(t){var i={},r=[];for(var a in t){var n=t[a],o=i[a]={};for(var s in n){var l=n[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u={x:0,y:0,w:l.bitmap.width+2,h:l.bitmap.height+2};r.push(u),o[s]={rect:u,metrics:l.metrics}}}}var c=e.potpack(r),p=new e.AlphaImage({width:c.w||1,height:c.h||1});for(var h in t){var d=t[h];for(var f in d){var _=d[+f];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var m=i[h][f].rect;e.AlphaImage.copy(_.bitmap,p,{x:0,y:0},{x:m.x+1,y:m.y+1},_.bitmap)}}}this.image=p,this.positions=i};e.register("GlyphAtlas",a);var n=function(t){this.tileID=new e.OverscaledTileID(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId};function o(t,i,r){for(var a=new e.EvaluationParameters(i),n=0,o=t;n<o.length;n+=1)o[n].recalculate(a,r)}function s(t,i){var r=e.getArrayBuffer(t.request,(function(t,r,a,n){t?i(t):r&&i(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(r)),rawData:r,cacheControl:a,expires:n})}));return function(){r.cancel(),i()}}n.prototype.parse=function(t,i,r,n,s){var l=this;this.status="parsing",this.data=t,this.collisionBoxArray=new e.CollisionBoxArray;var u=new e.DictionaryCoder(Object.keys(t.layers).sort()),c=new e.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var p,h,d,f,_={},m={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},g=i.familiesBySource[this.source];for(var y in g){var v=t.layers[y];if(v){1===v.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+y+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var b=u.encode(y),x=[],w=0;w<v.length;w++){var S=v.feature(w),A=c.getId(S,y);x.push({feature:S,id:A,index:w,sourceLayerIndex:b})}for(var k=0,E=g[y];k<E.length;k+=1){var I=E[k],T=I[0];T.minzoom&&this.zoom<Math.floor(T.minzoom)||T.maxzoom&&this.zoom>=T.maxzoom||"none"!==T.visibility&&(o(I,this.zoom,r),(_[T.id]=T.createBucket({index:c.bucketLayerIDs.length,layers:I,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:b,sourceID:this.source})).populate(x,m,this.tileID.canonical),c.bucketLayerIDs.push(I.map((function(e){return e.id}))))}}}var C=e.mapObject(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(C).length?n.send("getGlyphs",{uid:this.uid,stacks:C},(function(e,t){p||(p=e,h=t,R.call(l))})):h={};var P=Object.keys(m.iconDependencies);P.length?n.send("getImages",{icons:P,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){p||(p=e,d=t,R.call(l))})):d={};var L=Object.keys(m.patternDependencies);function R(){if(p)return s(p);if(h&&d&&f){var t=new a(h),i=new e.ImageAtlas(d,f);for(var n in _){var l=_[n];l instanceof e.SymbolBucket?(o(l.layers,this.zoom,r),e.performSymbolLayout(l,h,t.positions,d,i.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):l.hasPattern&&(l instanceof e.LineBucket||l instanceof e.FillBucket||l instanceof e.FillExtrusionBucket)&&(o(l.layers,this.zoom,r),l.addFeatures(m,this.tileID.canonical,i.patternPositions))}this.status="done",s(null,{buckets:e.values(_).filter((function(e){return!e.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,imageAtlas:i,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?t.positions:null})}}L.length?n.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){p||(p=e,f=t,R.call(l))})):f={},R.call(this)};var l=function(e,t,i,r){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=r||s,this.loading={},this.loaded={}};l.prototype.loadTile=function(t,i){var r=this,a=t.uid;this.loading||(this.loading={});var o=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.RequestPerformance(t.request),s=this.loading[a]=new n(t);s.abort=this.loadVectorData(t,(function(t,n){if(delete r.loading[a],t||!n)return s.status="done",r.loaded[a]=s,i(t);var l=n.rawData,u={};n.expires&&(u.expires=n.expires),n.cacheControl&&(u.cacheControl=n.cacheControl);var c={};if(o){var p=o.finish();p&&(c.resourceTiming=JSON.parse(JSON.stringify(p)))}s.vectorTile=n.vectorTile,s.parse(n.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(t,r){if(t||!r)return i(t);i(null,e.extend({rawTileData:l.slice(0)},r,u,c))})),r.loaded=r.loaded||{},r.loaded[a]=s}))},l.prototype.reloadTile=function(e,t){var i=this,r=this.loaded,a=e.uid,n=this;if(r&&r[a]){var o=r[a];o.showCollisionBoxes=e.showCollisionBoxes;var s=function(e,r){var a=o.reloadCallback;a&&(delete o.reloadCallback,o.parse(o.vectorTile,n.layerIndex,i.availableImages,n.actor,a)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},l.prototype.abortTile=function(e,t){var i=this.loading,r=e.uid;i&&i[r]&&i[r].abort&&(i[r].abort(),delete i[r]),t()},l.prototype.removeTile=function(e,t){var i=this.loaded,r=e.uid;i&&i[r]&&delete i[r],t()};var u=e.window.ImageBitmap,c=function(){this.loaded={}};function p(e,t){if(0!==e.length){h(e[0],t);for(var i=1;i<e.length;i++)h(e[i],!t)}}function h(e,t){for(var i=0,r=0,a=e.length,n=a-1;r<a;n=r++)i+=(e[r][0]-e[n][0])*(e[n][1]+e[r][1]);i>=0!=!!t&&e.reverse()}c.prototype.loadTile=function(t,i){var r=t.uid,a=t.encoding,n=t.rawImageData,o=u&&n instanceof u?this.getImageData(n):n,s=new e.DEMData(r,o,a);this.loaded=this.loaded||{},this.loaded[r]=s,i(null,s)},c.prototype.getImageData=function(t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);var i=this.offscreenCanvasContext.getImageData(-1,-1,t.width+2,t.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:i.width,height:i.height},i.data)},c.prototype.removeTile=function(e){var t=this.loaded,i=e.uid;t&&t[i]&&delete t[i]};var d=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))};f.prototype.loadGeometry=function(){if(1===this._feature.type){for(var t=[],i=0,r=this._feature.geometry;i<r.length;i+=1){var a=r[i];t.push([new e.Point$1(a[0],a[1])])}return t}for(var n=[],o=0,s=this._feature.geometry;o<s.length;o+=1){for(var l=[],u=0,c=s[o];u<c.length;u+=1){var p=c[u];l.push(new e.Point$1(p[0],p[1]))}n.push(l)}return n},f.prototype.toGeoJSON=function(e,t,i){return d.call(this,e,t,i)};var _=function(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t};_.prototype.feature=function(e){return new f(this._features[e])};var m=e.vectorTile.VectorTileFeature,g=y;function y(e,t){this.options=t||{},this.features=e,this.length=e.length}function v(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}y.prototype.feature=function(e){return new v(this.features[e],this.options.extent)},v.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var i=0;i<t.length;i++){for(var r=t[i],a=[],n=0;n<r.length;n++)a.push(new e.Point$1(r[n][0],r[n][1]));this.geometry.push(a)}return this.geometry},v.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,r=1/0,a=-1/0,n=0;n<e.length;n++)for(var o=e[n],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.y)}return[t,r,i,a]},v.prototype.toGeoJSON=m.prototype.toGeoJSON;var b=w,x=g;function w(t){var i=new e.pbf;return function(e,t){for(var i in e.layers)t.writeMessage(3,S,e.layers[i])}(t,i),i.finish()}function S(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)r.feature=e.feature(i),t.writeMessage(2,A,r);var a=r.keys;for(i=0;i<a.length;i++)t.writeStringField(3,a[i]);var n=r.values;for(i=0;i<n.length;i++)t.writeMessage(4,C,n[i])}function A(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,k,e),t.writeVarintField(3,i.type),t.writeMessage(4,T,i)}function k(e,t){var i=e.feature,r=e.keys,a=e.values,n=e.keycache,o=e.valuecache;for(var s in i.properties){var l=n[s];void 0===l&&(r.push(s),n[s]=l=r.length-1),t.writeVarint(l);var u=i.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var p=c+":"+u,h=o[p];void 0===h&&(a.push(u),o[p]=h=a.length-1),t.writeVarint(h)}}function E(e,t){return(t<<3)+(7&e)}function I(e){return e<<1^e>>31}function T(e,t){for(var i=e.loadGeometry(),r=e.type,a=0,n=0,o=i.length,s=0;s<o;s++){var l=i[s],u=1;1===r&&(u=l.length),t.writeVarint(E(1,u));for(var c=3===r?l.length-1:l.length,p=0;p<c;p++){1===p&&1!==r&&t.writeVarint(E(2,c-1));var h=l[p].x-a,d=l[p].y-n;t.writeVarint(I(h)),t.writeVarint(I(d)),a+=h,n+=d}3===r&&t.writeVarint(E(7,1))}}function C(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function P(e,t,i,r){L(e,i,r),L(t,2*i,2*r),L(t,2*i+1,2*r+1)}function L(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function R(e,t,i,r){var a=e-i,n=t-r;return a*a+n*n}b.fromVectorTileJs=w,b.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var r in e)i[r]=new g(e[r].features,t),i[r].name=r,i[r].version=t.version,i[r].extent=t.extent;return w({layers:i})},b.GeoJSONWrapper=x;var M=function(e){return e[0]},z=function(e){return e[1]},D=function(e,t,i,r,a){void 0===t&&(t=M),void 0===i&&(i=z),void 0===r&&(r=64),void 0===a&&(a=Float64Array),this.nodeSize=r,this.points=e;for(var n=e.length<65536?Uint16Array:Uint32Array,o=this.ids=new n(e.length),s=this.coords=new a(2*e.length),l=0;l<e.length;l++)o[l]=l,s[2*l]=t(e[l]),s[2*l+1]=i(e[l]);!function e(t,i,r,a,n,o){if(!(n-a<=r)){var s=a+n>>1;!function e(t,i,r,a,n,o){for(;n>a;){if(n-a>600){var s=n-a+1,l=r-a+1,u=Math.log(s),c=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(t,i,r,Math.max(a,Math.floor(r-l*c/s+p)),Math.min(n,Math.floor(r+(s-l)*c/s+p)),o)}var h=i[2*r+o],d=a,f=n;for(P(t,i,a,r),i[2*n+o]>h&&P(t,i,a,n);d<f;){for(P(t,i,d,f),d++,f--;i[2*d+o]<h;)d++;for(;i[2*f+o]>h;)f--}i[2*a+o]===h?P(t,i,a,f):P(t,i,++f,n),f<=r&&(a=f+1),r<=f&&(n=f-1)}}(t,i,s,a,n,o%2),e(t,i,r,a,s-1,o+1),e(t,i,r,s+1,n,o+1)}}(o,s,r,0,o.length-1,0)};D.prototype.range=function(e,t,i,r){return function(e,t,i,r,a,n,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),h=u.pop(),d=u.pop();if(h-d<=o)for(var f=d;f<=h;f++)l=t[2*f+1],(s=t[2*f])>=i&&s<=a&&l>=r&&l<=n&&c.push(e[f]);else{var _=Math.floor((d+h)/2);l=t[2*_+1],(s=t[2*_])>=i&&s<=a&&l>=r&&l<=n&&c.push(e[_]);var m=(p+1)%2;(0===p?i<=s:r<=l)&&(u.push(d),u.push(_-1),u.push(m)),(0===p?a>=s:n>=l)&&(u.push(_+1),u.push(h),u.push(m))}}return c}(this.ids,this.coords,e,t,i,r,this.nodeSize)},D.prototype.within=function(e,t,i){return function(e,t,i,r,a,n){for(var o=[0,e.length-1,0],s=[],l=a*a;o.length;){var u=o.pop(),c=o.pop(),p=o.pop();if(c-p<=n)for(var h=p;h<=c;h++)R(t[2*h],t[2*h+1],i,r)<=l&&s.push(e[h]);else{var d=Math.floor((p+c)/2),f=t[2*d],_=t[2*d+1];R(f,_,i,r)<=l&&s.push(e[d]);var m=(u+1)%2;(0===u?i-a<=f:r-a<=_)&&(o.push(p),o.push(d-1),o.push(m)),(0===u?i+a>=f:r+a>=_)&&(o.push(d+1),o.push(c),o.push(m))}}return s}(this.ids,this.coords,e,t,i,this.nodeSize)};var B={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},F=function(e){this.options=G(Object.create(B),e),this.trees=new Array(this.options.maxZoom+1)};function O(e,t,i,r,a){return{x:e,y:t,zoom:1/0,id:i,parentId:-1,numPoints:r,properties:a}}function N(e,t){var i=e.geometry.coordinates,r=i[1];return{x:V(i[0]),y:j(r),zoom:1/0,index:t,parentId:-1}}function U(e){return{type:"Feature",id:e.id,properties:q(e),geometry:{type:"Point",coordinates:[(r=e.x,360*(r-.5)),(t=e.y,i=(180-360*t)*Math.PI/180,360*Math.atan(Math.exp(i))/Math.PI-90)]}};var t,i,r}function q(e){var t=e.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return G(G({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function V(e){return e/360+.5}function j(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function G(e,t){for(var i in t)e[i]=t[i];return e}function K(e){return e.x}function Z(e){return e.y}function H(e,t,i,r,a,n){var o=a-i,s=n-r;if(0!==o||0!==s){var l=((e-i)*o+(t-r)*s)/(o*o+s*s);l>1?(i=a,r=n):l>0&&(i+=o*l,r+=s*l)}return(o=e-i)*o+(s=t-r)*s}function Q(e,t,i,r){var a={id:void 0===e?null:e,type:t,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)W(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var r=0;r<t.length;r++)W(e,t[r]);else if("MultiPolygon"===i)for(r=0;r<t.length;r++)for(var a=0;a<t[r].length;a++)W(e,t[r][a])}(a),a}function W(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function J(e,t,i,r){if(t.geometry){var a=t.geometry.coordinates,n=t.geometry.type,o=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===n)X(a,s);else if("MultiPoint"===n)for(var u=0;u<a.length;u++)X(a[u],s);else if("LineString"===n)Y(a,s,o,!1);else if("MultiLineString"===n){if(i.lineMetrics){for(u=0;u<a.length;u++)Y(a[u],s=[],o,!1),e.push(Q(l,"LineString",s,t.properties));return}$(a,s,o,!1)}else if("Polygon"===n)$(a,s,o,!0);else{if("MultiPolygon"!==n){if("GeometryCollection"===n){for(u=0;u<t.geometry.geometries.length;u++)J(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<a.length;u++){var c=[];$(a[u],c,o,!0),s.push(c)}}e.push(Q(l,n,s,t.properties))}}function X(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function Y(e,t,i,r){for(var a,n,o=0,s=0;s<e.length;s++){var l=ee(e[s][0]),u=te(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=r?(a*u-l*n)/2:Math.sqrt(Math.pow(l-a,2)+Math.pow(u-n,2))),a=l,n=u}var c=t.length-3;t[2]=1,function e(t,i,r,a){for(var n,o=a,s=r-i>>1,l=r-i,u=t[i],c=t[i+1],p=t[r],h=t[r+1],d=i+3;d<r;d+=3){var f=H(t[d],t[d+1],u,c,p,h);if(f>o)n=d,o=f;else if(f===o){var _=Math.abs(d-s);_<l&&(n=d,l=_)}}o>a&&(n-i>3&&e(t,i,n,a),t[n+2]=o,r-n>3&&e(t,n,r,a))}(t,0,c,i),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function $(e,t,i,r){for(var a=0;a<e.length;a++){var n=[];Y(e[a],n,i,r),t.push(n)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function ie(e,t,i,r,a,n,o,s){if(r/=t,n>=(i/=t)&&o<r)return e;if(o<i||n>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],p=c.geometry,h=c.type,d=0===a?c.minX:c.minY,f=0===a?c.maxX:c.maxY;if(d>=i&&f<r)l.push(c);else if(!(f<i||d>=r)){var _=[];if("Point"===h||"MultiPoint"===h)re(p,_,i,r,a);else if("LineString"===h)ae(p,_,i,r,a,!1,s.lineMetrics);else if("MultiLineString"===h)oe(p,_,i,r,a,!1);else if("Polygon"===h)oe(p,_,i,r,a,!0);else if("MultiPolygon"===h)for(var m=0;m<p.length;m++){var g=[];oe(p[m],g,i,r,a,!0),g.length&&_.push(g)}if(_.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<_.length;m++)l.push(Q(c.id,h,_[m],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===_.length?(h="LineString",_=_[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===_.length?"Point":"MultiPoint"),l.push(Q(c.id,h,_,c.tags))}}}return l.length?l:null}function re(e,t,i,r,a){for(var n=0;n<e.length;n+=3){var o=e[n+a];o>=i&&o<=r&&(t.push(e[n]),t.push(e[n+1]),t.push(e[n+2]))}}function ae(e,t,i,r,a,n,o){for(var s,l,u=ne(e),c=0===a?le:ue,p=e.start,h=0;h<e.length-3;h+=3){var d=e[h],f=e[h+1],_=e[h+2],m=e[h+3],g=e[h+4],y=0===a?d:f,v=0===a?m:g,b=!1;o&&(s=Math.sqrt(Math.pow(d-m,2)+Math.pow(f-g,2))),y<i?v>i&&(l=c(u,d,f,m,g,i),o&&(u.start=p+s*l)):y>r?v<r&&(l=c(u,d,f,m,g,r),o&&(u.start=p+s*l)):se(u,d,f,_),v<i&&y>=i&&(l=c(u,d,f,m,g,i),b=!0),v>r&&y<=r&&(l=c(u,d,f,m,g,r),b=!0),!n&&b&&(o&&(u.end=p+s*l),t.push(u),u=ne(e)),o&&(p+=s)}var x=e.length-3;d=e[x],f=e[x+1],_=e[x+2],(y=0===a?d:f)>=i&&y<=r&&se(u,d,f,_),x=u.length-3,n&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&se(u,u[0],u[1],u[2]),u.length&&t.push(u)}function ne(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function oe(e,t,i,r,a,n){for(var o=0;o<e.length;o++)ae(e[o],t,i,r,a,n,!1)}function se(e,t,i,r){e.push(t),e.push(i),e.push(r)}function le(e,t,i,r,a,n){var o=(n-t)/(r-t);return e.push(n),e.push(i+(a-i)*o),e.push(1),o}function ue(e,t,i,r,a,n){var o=(n-i)/(a-i);return e.push(t+(r-t)*o),e.push(n),e.push(1),o}function ce(e,t){for(var i=[],r=0;r<e.length;r++){var a,n=e[r],o=n.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=pe(n.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(var s=0;s<n.geometry.length;s++)a.push(pe(n.geometry[s],t))}else if("MultiPolygon"===o)for(a=[],s=0;s<n.geometry.length;s++){for(var l=[],u=0;u<n.geometry[s].length;u++)l.push(pe(n.geometry[s][u],t));a.push(l)}i.push(Q(n.id,o,a,n.tags))}return i}function pe(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var r=0;r<e.length;r+=3)i.push(e[r]+t,e[r+1],e[r+2]);return i}function he(e,t){if(e.transformed)return e;var i,r,a,n=1<<e.z,o=e.x,s=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(de(u[r],u[r+1],t,n,o,s));else for(r=0;r<u.length;r++){var p=[];for(a=0;a<u[r].length;a+=2)p.push(de(u[r][a],u[r][a+1],t,n,o,s));l.geometry.push(p)}}return e.transformed=!0,e}function de(e,t,i,r,a,n){return[Math.round(i*(e*r-a)),Math.round(i*(t*r-n))]}function fe(e,t,i,r,a){for(var n=t===a.maxZoom?0:a.tolerance/((1<<t)*a.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,_e(o,e[s],n,a);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,p=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),p>o.maxY&&(o.maxY=p)}return o}function _e(e,t,i,r){var a=t.geometry,n=t.type,o=[];if("Point"===n||"MultiPoint"===n)for(var s=0;s<a.length;s+=3)o.push(a[s]),o.push(a[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===n)me(o,a,e,i,!1,!1);else if("MultiLineString"===n||"Polygon"===n)for(s=0;s<a.length;s++)me(o,a[s],e,i,"Polygon"===n,0===s);else if("MultiPolygon"===n)for(var l=0;l<a.length;l++){var u=a[l];for(s=0;s<u.length;s++)me(o,u[s],e,i,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===n&&r.lineMetrics){for(var p in c={},t.tags)c[p]=t.tags[p];c.mapbox_clip_start=a.start/a.size,c.mapbox_clip_end=a.end/a.size}var h={geometry:o,type:"Polygon"===n||"MultiPolygon"===n?3:"LineString"===n||"MultiLineString"===n?2:1,tags:c};null!==t.id&&(h.id=t.id),e.features.push(h)}}function me(e,t,i,r,a,n){var o=r*r;if(r>0&&t.size<(a?o:r))i.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(i.numSimplified++,s.push(t[l]),s.push(t[l+1])),i.numPoints++;a&&function(e,t){for(var i=0,r=0,a=e.length,n=a-2;r<a;n=r,r+=2)i+=(e[r]-e[n])*(e[r+1]+e[n+1]);if(i>0===t)for(r=0,a=e.length;r<a/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[a-2-r],e[r+1]=e[a-1-r],e[a-2-r]=o,e[a-1-r]=s}}(s,n),e.push(s)}}function ge(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)J(i,e.features[r],t,r);else J(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var i=t.buffer/t.extent,r=e,a=ie(e,1,-1-i,i,0,-1,2,t),n=ie(e,1,1-i,2+i,0,-1,2,t);return(a||n)&&(r=ie(e,1,-i,1+i,0,-1,2,t)||[],a&&(r=ce(a,1).concat(r)),n&&(r=r.concat(ce(n,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,i){return 32*((1<<e)*i+t)+e}function ve(e,t){var i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return t(null,null);var a=new _(r.features),n=b(a);0===n.byteOffset&&n.byteLength===n.buffer.byteLength||(n=new Uint8Array(n)),t(null,{vectorTile:a,rawData:n.buffer})}F.prototype.load=function(e){var t=this.options,i=t.log,r=t.minZoom,a=t.maxZoom,n=t.nodeSize;i&&console.time("total time");var o="prepare "+e.length+" points";i&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(N(e[l],l));this.trees[a+1]=new D(s,K,Z,n,Float32Array),i&&console.timeEnd(o);for(var u=a;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new D(s,K,Z,n,Float32Array),i&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return i&&console.timeEnd("total time"),this},F.prototype.getClusters=function(e,t){var i=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,a=180;else if(i>a){var o=this.getClusters([i,r,180,n],t),s=this.getClusters([-180,r,a,n],t);return o.concat(s)}for(var l=this.trees[this._limitZoom(t)],u=[],c=0,p=l.range(V(i),j(n),V(a),j(r));c<p.length;c+=1){var h=l.points[p[c]];u.push(h.numPoints?U(h):this.points[h.index])}return u},F.prototype.getChildren=function(e){var t=this._getOriginId(e),i=this._getOriginZoom(e),r="No cluster with the specified id.",a=this.trees[i];if(!a)throw new Error(r);var n=a.points[t];if(!n)throw new Error(r);for(var o=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=[],l=0,u=a.within(n.x,n.y,o);l<u.length;l+=1){var c=a.points[u[l]];c.parentId===e&&s.push(c.numPoints?U(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},F.prototype.getLeaves=function(e,t,i){var r=[];return this._appendLeaves(r,e,t=t||10,i=i||0,0),r},F.prototype.getTile=function(e,t,i){var r=this.trees[this._limitZoom(e)],a=Math.pow(2,e),n=this.options,o=n.radius/n.extent,s=(i-o)/a,l=(i+1+o)/a,u={features:[]};return this._addTileFeatures(r.range((t-o)/a,s,(t+1+o)/a,l),r.points,t,i,a,u),0===t&&this._addTileFeatures(r.range(1-o/a,s,1,l),r.points,a,i,a,u),t===a-1&&this._addTileFeatures(r.range(0,s,o/a,l),r.points,-1,i,a,u),u.features.length?u:null},F.prototype.getClusterExpansionZoom=function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t},F.prototype._appendLeaves=function(e,t,i,r,a){for(var n=0,o=this.getChildren(t);n<o.length;n+=1){var s=o[n],l=s.properties;if(l&&l.cluster?a+l.point_count<=r?a+=l.point_count:a=this._appendLeaves(e,l.cluster_id,i,r,a):a<r?a++:e.push(s),e.length===i)break}return a},F.prototype._addTileFeatures=function(e,t,i,r,a,n){for(var o=0,s=e;o<s.length;o+=1){var l=t[s[o]],u=l.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(l.x*a-i)),Math.round(this.options.extent*(l.y*a-r))]],tags:u?q(l):this.points[l.index].properties},p=void 0;u?p=l.id:this.options.generateId?p=l.index:this.points[l.index].id&&(p=this.points[l.index].id),void 0!==p&&(c.id=p),n.features.push(c)}},F.prototype._limitZoom=function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))},F.prototype._cluster=function(e,t){for(var i=[],r=this.options,a=r.reduce,n=r.minPoints,o=r.radius/(r.extent*Math.pow(2,t)),s=0;s<e.length;s++){var l=e[s];if(!(l.zoom<=t)){l.zoom=t;for(var u=this.trees[t+1],c=u.within(l.x,l.y,o),p=l.numPoints||1,h=p,d=0,f=c;d<f.length;d+=1){var _=u.points[f[d]];_.zoom>t&&(h+=_.numPoints||1)}if(h>=n){for(var m=l.x*p,g=l.y*p,y=a&&p>1?this._map(l,!0):null,v=(s<<5)+(t+1)+this.points.length,b=0,x=c;b<x.length;b+=1){var w=u.points[x[b]];if(!(w.zoom<=t)){w.zoom=t;var S=w.numPoints||1;m+=w.x*S,g+=w.y*S,w.parentId=v,a&&(y||(y=this._map(l,!0)),a(y,this._map(w)))}}l.parentId=v,i.push(O(m/h,g/h,v,h,y))}else if(i.push(l),h>1)for(var A=0,k=c;A<k.length;A+=1){var E=u.points[k[A]];E.zoom<=t||(E.zoom=t,i.push(E))}}}return i},F.prototype._getOriginId=function(e){return e-this.points.length>>5},F.prototype._getOriginZoom=function(e){return(e-this.points.length)%32},F.prototype._map=function(e,t){if(e.numPoints)return t?G({},e.properties):e.properties;var i=this.points[e.index].properties,r=this.options.map(i);return t&&r===i?G({},r):r},ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ge.prototype.splitTile=function(e,t,i,r,a,n,o){for(var s=[e,t,i,r],l=this.options,u=l.debug;s.length;){r=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,p=ye(t,i,r),h=this.tiles[p];if(!h&&(u>1&&console.time("creation"),h=this.tiles[p]=fe(e,t,i,r,l),this.tileCoords.push({z:t,x:i,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=e,a){if(t===l.maxZoom||t===a)continue;var f=1<<a-t;if(i!==Math.floor(n/f)||r!==Math.floor(o/f))continue}else if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,0!==e.length){u>1&&console.time("clipping");var _,m,g,y,v,b,x=.5*l.buffer/l.extent,w=.5-x,S=.5+x,A=1+x;_=m=g=y=null,v=ie(e,c,i-x,i+S,0,h.minX,h.maxX,l),b=ie(e,c,i+w,i+A,0,h.minX,h.maxX,l),e=null,v&&(_=ie(v,c,r-x,r+S,1,h.minY,h.maxY,l),m=ie(v,c,r+w,r+A,1,h.minY,h.maxY,l),v=null),b&&(g=ie(b,c,r-x,r+S,1,h.minY,h.maxY,l),y=ie(b,c,r+w,r+A,1,h.minY,h.maxY,l),b=null),u>1&&console.timeEnd("clipping"),s.push(_||[],t+1,2*i,2*r),s.push(m||[],t+1,2*i,2*r+1),s.push(g||[],t+1,2*i+1,2*r),s.push(y||[],t+1,2*i+1,2*r+1)}}},ge.prototype.getTile=function(e,t,i){var r=this.options,a=r.extent,n=r.debug;if(e<0||e>24)return null;var o=1<<e,s=ye(e,t=(t%o+o)%o,i);if(this.tiles[s])return he(this.tiles[s],a);n>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,u=e,c=t,p=i;!l&&u>0;)u--,c=Math.floor(c/2),p=Math.floor(p/2),l=this.tiles[ye(u,c,p)];return l&&l.source?(n>1&&console.log("found parent tile z%d-%d-%d",u,c,p),n>1&&console.time("drilling down"),this.splitTile(l.source,u,c,p,e,t,i),n>1&&console.timeEnd("drilling down"),this.tiles[s]?he(this.tiles[s],a):null):null};var be=function(t){function i(e,i,r,a){t.call(this,e,i,r,ve),a&&(this.loadGeoJSON=a)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.loadData=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},i.prototype._loadData=function(){var t=this;if(this._pendingCallback&&this._pendingLoadDataParams){var i=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var a=!!(r&&r.request&&r.request.collectResourceTiming)&&new e.RequestPerformance(r.request);this.loadGeoJSON(r,(function(n,o){if(n||!o)return i(n);if("object"!=typeof o)return i(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function e(t,i){var r,a=t&&t.type;if("FeatureCollection"===a)for(r=0;r<t.features.length;r++)e(t.features[r],i);else if("GeometryCollection"===a)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],i);else if("Feature"===a)e(t.geometry,i);else if("Polygon"===a)p(t.coordinates,i);else if("MultiPolygon"===a)for(r=0;r<t.coordinates.length;r++)p(t.coordinates[r],i);return t}(o,!0);try{if(r.filter){var s=e.createExpression(r.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===s.result)throw new Error(s.value.map((function(e){return e.key+": "+e.message})).join(", "));var l=o.features.filter((function(e){return s.value.evaluate({zoom:0},e)}));o={type:"FeatureCollection",features:l}}t._geoJSONIndex=r.cluster?new F(function(t){var i=t.superclusterOptions,r=t.clusterProperties;if(!r||!i)return i;for(var a={},n={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u+=1){var p=c[u],h=r[p],d=h[0],f=e.createExpression(h[1]),_=e.createExpression("string"==typeof d?[d,["accumulated"],["get",p]]:d);a[p]=f.value,n[p]=_.value}return i.map=function(e){s.properties=e;for(var t={},i=0,r=l;i<r.length;i+=1){var n=r[i];t[n]=a[n].evaluate(o,s)}return t},i.reduce=function(e,t){s.properties=t;for(var i=0,r=l;i<r.length;i+=1){var a=r[i];o.accumulated=e[a],e[a]=n[a].evaluate(o,s)}},i}(r)).load(o.features):function(e,t){return new ge(e,t)}(o,r.geojsonVtOptions)}catch(n){return i(n)}t.loaded={};var u={};if(a){var c=a.finish();c&&(u.resourceTiming={},u.resourceTiming[r.source]=JSON.parse(JSON.stringify(c)))}i(null,u)}))}},i.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},i.prototype.reloadTile=function(e,i){var r=this.loaded;return r&&r[e.uid]?t.prototype.reloadTile.call(this,e,i):this.loadTile(e,i)},i.prototype.loadGeoJSON=function(t,i){if(t.request)e.getJSON(t.request,i);else{if("string"!=typeof t.data)return i(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error("Input data given to '"+t.source+"' is not a valid GeoJSON object."))}}},i.prototype.removeSource=function(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()},i.prototype.getClusterExpansionZoom=function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}},i.prototype.getClusterChildren=function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}},i.prototype.getClusterLeaves=function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}},i}(l),xe=function(t){var i=this;this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:l,geojson:be},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(i.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');i.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}};return xe.prototype.setReferrer=function(e,t){this.referrer=t},xe.prototype.setImages=function(e,t,i){for(var r in this.availableImages[e]=t,this.workerSources[e]){var a=this.workerSources[e][r];for(var n in a)a[n].availableImages=t}i()},xe.prototype.setLayers=function(e,t,i){this.getLayerIndex(e).replace(t),i()},xe.prototype.updateLayers=function(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()},xe.prototype.loadTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).loadTile(t,i)},xe.prototype.loadDEMTile=function(e,t,i){this.getDEMWorkerSource(e,t.source).loadTile(t,i)},xe.prototype.reloadTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).reloadTile(t,i)},xe.prototype.abortTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)},xe.prototype.removeTile=function(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)},xe.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e,t.source).removeTile(t)},xe.prototype.removeSource=function(e,t,i){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,i):i()}},xe.prototype.loadWorkerSource=function(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}},xe.prototype.syncRTLPluginState=function(t,i,r){try{e.plugin.setState(i);var a=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=a){this.self.importScripts(a);var n=e.plugin.isParsed();r(n?void 0:new Error("RTL Text Plugin failed to import scripts from "+a),n)}}catch(e){r(e.toString())}},xe.prototype.getAvailableImages=function(e){var t=this.availableImages[e];return t||(t=[]),t},xe.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t},xe.prototype.getWorkerSource=function(e,t,i){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][i]||(this.workerSources[e][t][i]=new this.workerSourceTypes[t]({send:function(t,i,a){r.actor.send(t,i,a,e)}},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][i]},xe.prototype.getDEMWorkerSource=function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new c),this.demWorkerSources[e][t]},xe.prototype.enforceCacheSizeLimit=function(t,i){e.enforceCacheSizeLimit(i)},"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new xe(self)),xe})),r(["./shared"],(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!i(e)}function i(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===r[i=e&&e.failIfMajorPerformanceCaveat]&&(r[i]=function(e){var i=function(e){var i=document.createElement("canvas"),r=Object.create(t.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=e,i.probablySupportsContext?i.probablySupportsContext("webgl",r)||i.probablySupportsContext("experimental-webgl",r):i.supportsContext?i.supportsContext("webgl",r)||i.supportsContext("experimental-webgl",r):i.getContext("webgl",r)||i.getContext("experimental-webgl",r)}(e);if(!i)return!1;var r=i.createShader(i.VERTEX_SHADER);return!(!r||i.isContextLost())&&(i.shaderSource(r,"void main() {}"),i.compileShader(r),!0===i.getShaderParameter(r,i.COMPILE_STATUS))}(i)),r[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=i);var r={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),i={create:function(t,i,r){var a=e.window.document.createElement(t);return void 0!==i&&(a.className=i),r&&r.appendChild(a),a},createNS:function(t,i){return e.window.document.createElementNS(t,i)}},r=e.window.document&&e.window.document.documentElement.style;function a(e){if(!r)return e[0];for(var t=0;t<e.length;t++)if(e[t]in r)return e[t];return e[0]}var n,o=a(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){r&&o&&(n=r[o],r[o]="none")},i.enableDrag=function(){r&&o&&(r[o]=n)};var s=a(["transform","WebkitTransform"]);i.setTransform=function(e,t){e.style[s]=t};var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});e.window.addEventListener("test",u,u),e.window.removeEventListener("test",u,u)}catch(e){l=!1}i.addEventListener=function(e,t,i,r){void 0===r&&(r={}),e.addEventListener(t,i,"passive"in r&&l?r:r.capture)},i.removeEventListener=function(e,t,i,r){void 0===r&&(r={}),e.removeEventListener(t,i,"passive"in r&&l?r:r.capture)};var c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};function p(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",c,!0)}),0)},i.mousePos=function(t,i){var r=t.getBoundingClientRect();return new e.Point(i.clientX-r.left-t.clientLeft,i.clientY-r.top-t.clientTop)},i.touchPos=function(t,i){for(var r=t.getBoundingClientRect(),a=[],n=0;n<i.length;n++)a.push(new e.Point(i[n].clientX-r.left-t.clientLeft,i[n].clientY-r.top-t.clientTop));return a},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};var h=function(t){function i(){t.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.isLoaded=function(){return this.loaded},i.prototype.setLoaded=function(e){if(this.loaded!==e&&(this.loaded=e,e)){for(var t=0,i=this.requestors;t<i.length;t+=1){var r=i[t];this._notify(r.ids,r.callback)}this.requestors=[]}},i.prototype.getImage=function(e){return this.images[e]},i.prototype.addImage=function(e,t){this._validate(e,t)&&(this.images[e]=t)},i.prototype._validate=function(t,i){var r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "stretchY" value'))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error('Image "'+t+'" has invalid "content" value'))),r=!1),r},i.prototype._validateStretch=function(e,t){if(!e)return!0;for(var i=0,r=0,a=e;r<a.length;r+=1){var n=a[r];if(n[0]<i||n[1]<n[0]||t<n[1])return!1;i=n[1]}return!0},i.prototype._validateContent=function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))},i.prototype.updateImage=function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0},i.prototype.removeImage=function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()},i.prototype.listImages=function(){return Object.keys(this.images)},i.prototype.getImages=function(e,t){var i=!0;if(!this.isLoaded())for(var r=0,a=e;r<a.length;r+=1)this.images[a[r]]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})},i.prototype._notify=function(t,i){for(var r={},a=0,n=t;a<n.length;a+=1){var o=n[a];this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'+o+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}i(null,r)},i.prototype.getPixelSize=function(){var e=this.atlasImage;return{width:e.width,height:e.height}},i.prototype.getPattern=function(t){var i=this.patterns[t],r=this.getImage(t);if(!r)return null;if(i&&i.position.version===r.version)return i.position;if(i)i.position.version=r.version;else{var a={w:r.data.width+2,h:r.data.height+2,x:0,y:0},n=new e.ImagePosition(a,r);this.patterns[t]={bin:a,position:n}}return this._updatePatternAtlas(),this.patterns[t].position},i.prototype.bind=function(t){var i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)},i.prototype._updatePatternAtlas=function(){var t=[];for(var i in this.patterns)t.push(this.patterns[i].bin);var r=e.potpack(t),a=r.w,n=r.h,o=this.atlasImage;for(var s in o.resize({width:a||1,height:n||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,p=this.images[s].data,h=p.width,d=p.height;e.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c},{width:h,height:d}),e.RGBAImage.copy(p,o,{x:0,y:d-1},{x:u,y:c-1},{width:h,height:1}),e.RGBAImage.copy(p,o,{x:0,y:0},{x:u,y:c+d},{width:h,height:1}),e.RGBAImage.copy(p,o,{x:h-1,y:0},{x:u-1,y:c},{width:1,height:d}),e.RGBAImage.copy(p,o,{x:0,y:0},{x:u+h,y:c},{width:1,height:d})}this.dirty=!0},i.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},i.prototype.dispatchRenderCallbacks=function(e){for(var t=0,i=e;t<i.length;t+=1){var r=i[t];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var a=this.images[r];p(a)&&this.updateImage(r,a)}}},i}(e.Evented),d=m,f=m,_=1e20;function m(e,t,i,r,a,n){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=a||"sans-serif",this.fontWeight=n||"normal",this.radius=i||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function g(e,t,i,r,a,n,o){for(var s=0;s<t;s++){for(var l=0;l<i;l++)r[l]=e[l*t+s];for(y(r,a,n,o,i),l=0;l<i;l++)e[l*t+s]=a[l]}for(l=0;l<i;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for(y(r,a,n,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(a[s])}}function y(e,t,i,r,a){i[0]=0,r[0]=-_,r[1]=+_;for(var n=1,o=0;n<a;n++){for(var s=(e[n]+n*n-(e[i[o]]+i[o]*i[o]))/(2*n-2*i[o]);s<=r[o];)o--,s=(e[n]+n*n-(e[i[o]]+i[o]*i[o]))/(2*n-2*i[o]);i[++o]=n,r[o]=s,r[o+1]=+_}for(n=0,o=0;n<a;n++){for(;r[o+1]<n;)o++;t[n]=(n-i[o])*(n-i[o])+e[i[o]]}}m.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var a=t.data[4*r+3]/255;this.gridOuter[r]=1===a?0:0===a?_:Math.pow(Math.max(0,.5-a),2),this.gridInner[r]=1===a?_:0===a?0:Math.pow(Math.max(0,a-.5),2)}for(g(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),g(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)i[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return i},d.default=f;var v=function(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}};v.prototype.setURL=function(e){this.url=e},v.prototype.getGlyphs=function(t,i){var r=this,a=[];for(var n in t)for(var o=0,s=t[n];o<s.length;o+=1)a.push({stack:n,id:s[o]});e.asyncAll(a,(function(e,t){var i=e.stack,a=e.id,n=r.entries[i];n||(n=r.entries[i]={glyphs:{},requests:{},ranges:{}});var o=n.glyphs[a];if(void 0===o){if(o=r._tinySDF(n,i,a))return n.glyphs[a]=o,void t(null,{stack:i,id:a,glyph:o});var s=Math.floor(a/256);if(256*s>65535)t(new Error("glyphs > 65535 not supported"));else if(n.ranges[s])t(null,{stack:i,id:a,glyph:o});else{var l=n.requests[s];l||(l=n.requests[s]=[],v.loadGlyphRange(i,s,r.url,r.requestManager,(function(e,t){if(t){for(var i in t)r._doesCharSupportLocalGlyph(+i)||(n.glyphs[+i]=t[+i]);n.ranges[s]=!0}for(var a=0,o=l;a<o.length;a+=1)(0,o[a])(e,t);delete n.requests[s]}))),l.push((function(e,r){e?t(e):r&&t(null,{stack:i,id:a,glyph:r[a]||null})}))}}else t(null,{stack:i,id:a,glyph:o})}),(function(e,t){if(e)i(e);else if(t){for(var r={},a=0,n=t;a<n.length;a+=1){var o=n[a],s=o.stack,l=o.id,u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}i(null,r)}}))},v.prototype._doesCharSupportLocalGlyph=function(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))},v.prototype._tinySDF=function(t,i,r){var a=this.localIdeographFontFamily;if(a&&this._doesCharSupportLocalGlyph(r)){var n=t.tinySDF;if(!n){var o="400";/bold/i.test(i)?o="900":/medium/i.test(i)?o="500":/light/i.test(i)&&(o="200"),n=t.tinySDF=new v.TinySDF(24,3,8,.25,a,o)}return{id:r,bitmap:new e.AlphaImage({width:30,height:30},n.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},v.loadGlyphRange=function(t,i,r,a,n){var o=256*i,s=o+255,l=a.transformRequest(a.normalizeGlyphsURL(r).replace("{fontstack}",t).replace("{range}",o+"-"+s),e.ResourceType.Glyphs);e.getArrayBuffer(l,(function(t,i){if(t)n(t);else if(i){for(var r={},a=0,o=e.parseGlyphPBF(i);a<o.length;a+=1){var s=o[a];r[s.id]=s}n(null,r)}}))},v.TinySDF=d;var b=function(){this.specification=e.styleSpec.light.position};b.prototype.possiblyEvaluate=function(t,i){return e.sphericalToCartesian(t.expression.evaluate(i))},b.prototype.interpolate=function(t,i,r){return{x:e.number(t.x,i.x,r),y:e.number(t.y,i.y,r),z:e.number(t.z,i.z,r)}};var x=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new b,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),w=function(t){function i(i){t.call(this),this._transitionable=new e.Transitionable(x),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getLight=function(){return this._transitionable.serialize()},i.prototype.setLight=function(t,i){if(void 0===i&&(i={}),!this._validate(e.validateLight,t,i))for(var r in t){var a=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),a):this._transitionable.setValue(r,a)}},i.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},i.prototype.hasTransition=function(){return this._transitioning.hasTransition()},i.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},i.prototype._validate=function(t,i,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},i}(e.Evented),S=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};S.prototype.getDash=function(e,t){var i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]},S.prototype.getDashRanges=function(e,t,i){var r=[],a=e.length%2==1?-e[e.length-1]*i:0,n=e[0]*i,o=!0;r.push({left:a,right:n,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){var u=e[l];r.push({left:a=s*i,right:n=(s+=u)*i,isDash:o=!o,zeroLength:0===u})}return r},S.prototype.addRoundDash=function(e,t,i){for(var r=t/2,a=-i;a<=i;a++)for(var n=this.width*(this.nextRow+i+a),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),p=Math.min(u,c),h=void 0,d=a/i*(r+1);if(s.isDash){var f=r-Math.abs(d);h=Math.sqrt(p*p+f*f)}else h=r-Math.sqrt(p*p+d*d);this.data[n+l]=Math.max(0,Math.min(255,h+128))}},S.prototype.addRegularDash=function(e){for(var t=e.length-1;t>=0;--t){var i=e[t],r=e[t+1];i.zeroLength?e.splice(t,1):r&&r.isDash===i.isDash&&(r.left=i.left,e.splice(t,1))}var a=e[0],n=e[e.length-1];a.isDash===n.isDash&&(a.left=n.left-this.width,n.right=a.right+this.width);for(var o=this.width*this.nextRow,s=0,l=e[s],u=0;u<this.width;u++){u/l.right>1&&(l=e[++s]);var c=Math.abs(u-l.left),p=Math.abs(u-l.right),h=Math.min(c,p);this.data[o+u]=Math.max(0,Math.min(255,(l.isDash?h:-h)+128))}},S.prototype.addDash=function(t,i){var r=i?7:0,a=2*r+1;if(this.nextRow+a>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var n=0,o=0;o<t.length;o++)n+=t[o];if(0!==n){var s=this.width/n,l=this.getDashRanges(t,this.width,s);i?this.addRoundDash(l,s,r):this.addRegularDash(l)}var u={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:n};return this.nextRow+=a,this.dirty=!0,u},S.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))};var A=function t(i,r){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),n=0;n<a.length;n++){var o=new t.Actor(a[n],r,this.id);o.name="Worker "+n,this.actors.push(o)}};function k(t,i,r){var a=function(a,n){if(a)return r(a);if(n){var o=e.pick(e.extend(n,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);n.vector_layers&&(o.vectorLayers=n.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=i.canonicalizeTileset(o,t.url),r(null,o)}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url),e.ResourceType.Source),a):e.browser.frame((function(){return a(null,t)}))}A.prototype.broadcast=function(t,i,r){e.asyncAll(this.actors,(function(e,r){e.send(t,i,r)}),r=r||function(){})},A.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},A.prototype.remove=function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)},A.Actor=e.Actor;var E=function(t,i,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=r||24};E.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},E.prototype.contains=function(t){var i=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),a=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),n=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=r&&t.x<n&&t.y>=a&&t.y<o};var I=function(t){function i(i,r,a,n){if(t.call(this),this.id=i,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(r,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(i,r){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles,t.map._requestManager._customAccessToken),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken,t.map._requestManager._customAccessToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setSourceProperty=function(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},i.prototype.setTiles=function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this},i.prototype.setUrl=function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return e.extend({},this._options)},i.prototype.loadTile=function(t,i){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function n(r,a){return delete t.request,t.aborted?i(null):r&&404!==r.status?i(r):(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),this.map._refreshExpiredTiles&&a&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",a,n.bind(this)):(t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",a,n.bind(this)))},i.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)},i.prototype.unloadTile=function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)},i.prototype.hasTransition=function(){return!1},i}(e.Evented),T=function(t){function i(i,r,a,n){t.call(this),this.id=i,this.dispatcher=a,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},r),e.extend(this,e.pick(r,["url","scheme","tileSize"]))}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(i,r){t._tileJSONRequest=null,t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new E(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),e.postMapLoadEvent(r.tiles,t.map._getMapId(),t.map._requestManager._skuToken),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},i.prototype.serialize=function(){return e.extend({},this._options)},i.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},i.prototype.loadTile=function(t,i){var r=this,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(a,n){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(a)t.state="errored",i(a);else if(n){r.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=r.map.painter.context,s=o.gl;t.texture=r.map.painter.getTileTexture(n.width),t.texture?t.texture.update(n,{useMipmap:!0}):(t.texture=new e.Texture(o,n,s.RGBA,{useMipmap:!0}),t.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),i(null)}}))},i.prototype.abortTile=function(e,t){e.request&&(e.request.cancel(),delete e.request),t()},i.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},i.prototype.hasTransition=function(){return!1},i}(e.Evented),C=function(t){function i(i,r,a,n){t.call(this,i,r,a,n),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},i.prototype.loadTile=function(t,i){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function a(e,r){e&&(t.state="errored",i(e)),r&&(t.dem=r,t.needsHillshadePrepare=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,n){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(n){this.map._refreshExpiredTiles&&t.setExpiryData(n),delete n.cacheControl,delete n.expires;var o=e.window.ImageBitmap&&n instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?n:e.browser.getImageData(n,1),s={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:o,encoding:this.encoding};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",s,a.bind(this)))}}.bind(this)),t.neighboringTiles=this._getNeighboringTiles(t.tileID)},i.prototype._getNeighboringTiles=function(t){var i=t.canonical,r=Math.pow(2,i.z),a=(i.x-1+r)%r,n=0===i.x?t.wrap-1:t.wrap,o=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,n,i.z,a,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,a,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,n,i.z,a,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,i.z,o,i.y+1).key]={backfilled:!1}),l},i.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&e.actor.send("removeDEMTile",{uid:e.uid,source:this.id})},i}(T),P=function(t){function i(i,r,a,n){t.call(this),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=a.getActor(),this.setEventedParent(n),this._data=r.data,this._options=e.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:e.EXTENT,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(i){if(i)t.fire(new e.ErrorEvent(i));else{var r={dataType:"source",sourceDataType:"metadata"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(r.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire(new e.Event("data",r))}}))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setData=function(t){var i=this;return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(t){if(t)i.fire(new e.ErrorEvent(t));else{var r={dataType:"source",sourceDataType:"content"};i._collectResourceTiming&&i._resourceTiming&&i._resourceTiming.length>0&&(r.resourceTiming=i._resourceTiming,i._resourceTiming=[]),i.fire(new e.Event("data",r))}})),this},i.prototype.getClusterExpansionZoom=function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this},i.prototype.getClusterChildren=function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this},i.prototype.getClusterLeaves=function(e,t,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},r),this},i.prototype._updateWorkerData=function(t){var i=this;this._loaded=!1;var r=e.extend({},this.workerOptions),a=this._data;"string"==typeof a?(r.request=this.map._requestManager.transformRequest(e.browser.resolveURL(a),e.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(a),this.actor.send(this.type+".loadData",r,(function(e,a){i._removed||a&&a.abandoned||(i._loaded=!0,a&&a.resourceTiming&&a.resourceTiming[i.id]&&(i._resourceTiming=a.resourceTiming[i.id].slice(0)),i.actor.send(i.type+".coalesce",{source:r.source},null),t(e))}))},i.prototype.loaded=function(){return this._loaded},i.prototype.loadTile=function(t,i){var r=this,a=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(a,{type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,n){return delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(n,r.map.painter,"reloadTile"===a),i(null))}))},i.prototype.abortTile=function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0},i.prototype.unloadTile=function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})},i.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},i.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},i.prototype.hasTransition=function(){return!1},i}(e.Evented),L=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),R=function(t){function i(e,i,r,a){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=i}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(t,i){var r=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(a,n){r._loaded=!0,a?r.fire(new e.ErrorEvent(a)):n&&(r.image=n,t&&(r.coordinates=t),i&&i(),r._finishLoading())}))},i.prototype.loaded=function(){return this._loaded},i.prototype.updateImage=function(e){var t=this;return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,(function(){t.texture=null})),this):this},i.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},i.prototype.onAdd=function(e){this.map=e,this.load()},i.prototype.setCoordinates=function(t){var i=this;this.coordinates=t;var r=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){for(var i=1/0,r=1/0,a=-1/0,n=-1/0,o=0,s=t;o<s.length;o+=1){var l=s[o];i=Math.min(i,l.x),r=Math.min(r,l.y),a=Math.max(a,l.x),n=Math.max(n,l.y)}var u=Math.max(a-i,n-r),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),p=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((i+a)/2*p),Math.floor((r+n)/2*p))}(r),this.minzoom=this.maxzoom=this.tileID.z;var a=r.map((function(e){return i.tileID.getTilePoint(e)._round()}));return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},i.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,i=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},i.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return!1},i}(e.Evented),M=function(t){function i(e,i,r,a){t.call(this,e,i,r,a),this.roundZoom=!0,this.type="video",this.options=i}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){var t=this;this._loaded=!1;var i=this.options;this.urls=[];for(var r=0,a=i.urls;r<a.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(a[r],e.ResourceType.Source).url);e.getVideo(this.urls,(function(i,r){t._loaded=!0,i?t.fire(new e.ErrorEvent(i)):r&&(t.video=r,t.video.loop=!0,t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))},i.prototype.pause=function(){this.video&&this.video.pause()},i.prototype.play=function(){this.video&&this.video.play()},i.prototype.seek=function(t){if(this.video){var i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+i.start(0)+" and "+i.end(0)+"-second mark."))):this.video.currentTime=t}},i.prototype.getVideo=function(){return this.video},i.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},i.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,i=t.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this.tiles){var a=this.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this.video&&!this.video.paused},i}(R),z=function(t){function i(i,r,a,n){t.call(this,i,r,a,n),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+i,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},i.prototype.getCanvas=function(){return this.canvas},i.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},i.prototype.onRemove=function(){this.pause()},i.prototype.prepare=function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var i=this.map.painter.context,r=i.gl;for(var a in this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,L.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var n=this.tiles[a];"loaded"!==n.state&&(n.state="loaded",n.texture=this.texture)}}},i.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},i.prototype.hasTransition=function(){return this._playing},i.prototype._hasInvalidDimensions=function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e+=1){var i=t[e];if(isNaN(i)||i<=0)return!0}return!1},i}(R),D={vector:I,raster:T,"raster-dem":C,geojson:P,video:M,image:R,canvas:z};function B(t,i){var r=e.identity([]);return e.translate(r,r,[1,1,0]),e.scale(r,r,[.5*t.width,.5*t.height,1]),e.multiply(r,r,t.calculatePosMatrix(i.toUnwrapped()))}function F(e,t,i,r,a,n){var o=function(e,t,i){if(e)for(var r=0,a=e;r<a.length;r+=1){var n=t[a[r]];if(n&&n.source===i&&"fill-extrusion"===n.type)return!0}else for(var o in t){var s=t[o];if(s.source===i&&"fill-extrusion"===s.type)return!0}return!1}(a&&a.layers,t,e.id),s=n.maxPitchScaleFactor(),l=e.tilesIn(r,s,o);l.sort(O);for(var u=[],c=0,p=l;c<p.length;c+=1){var h=p[c];u.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,i,e._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,a,n,s,B(e.transform,h.tileID))})}var d=function(e){for(var t={},i={},r=0,a=e;r<a.length;r+=1){var n=a[r],o=n.queryResults,s=n.wrappedTileID,l=i[s]=i[s]||{};for(var u in o)for(var c=o[u],p=l[u]=l[u]||{},h=t[u]=t[u]||[],d=0,f=c;d<f.length;d+=1){var _=f[d];p[_.featureIndex]||(p[_.featureIndex]=!0,h.push(_))}}return t}(u);for(var f in d)d[f].forEach((function(t){var i=t.feature,r=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=r}));return d}function O(e,t){var i=e.tileID,r=t.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}var N=function(e,t){this.max=e,this.onRemove=t,this.reset()};N.prototype.reset=function(){for(var e in this.data)for(var t=0,i=this.data[e];t<i.length;t+=1){var r=i[t];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},N.prototype.add=function(e,t,i){var r=this,a=e.wrapped().key;void 0===this.data[a]&&(this.data[a]=[]);var n={value:t,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout((function(){r.remove(e,n)}),i)),this.data[a].push(n),this.order.push(a),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this},N.prototype.has=function(e){return e.wrapped().key in this.data},N.prototype.getAndRemove=function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null},N.prototype._getAndRemoveByKey=function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value},N.prototype.getByKey=function(e){var t=this.data[e];return t?t[0].value:null},N.prototype.get=function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null},N.prototype.remove=function(e,t){if(!this.has(e))return this;var i=e.wrapped().key,r=void 0===t?0:this.data[i].indexOf(t),a=this.data[i][r];return this.data[i].splice(r,1),a.timeout&&clearTimeout(a.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(a.value),this.order.splice(this.order.indexOf(i),1),this},N.prototype.setMaxSize=function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this},N.prototype.filter=function(e){var t=[];for(var i in this.data)for(var r=0,a=this.data[i];r<a.length;r+=1){var n=a[r];e(n.value)||t.push(n)}for(var o=0,s=t;o<s.length;o+=1){var l=s[o];this.remove(l.value.tileID,l)}};var U=function(e,t,i){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};U.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},U.prototype.updateData=function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var q={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},V=function(e,t,i,r){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};V.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},V.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},V.prototype.enableAttributes=function(e,t){for(var i=0;i<this.attributes.length;i++){var r=t.attributes[this.attributes[i].name];void 0!==r&&e.enableVertexAttribArray(r)}},V.prototype.setVertexAttribPointers=function(e,t,i){for(var r=0;r<this.attributes.length;r++){var a=this.attributes[r],n=t.attributes[a.name];void 0!==n&&e.vertexAttribPointer(n,a.components,e[q[a.type]],!1,this.itemSize,a.offset+this.itemSize*(i||0))}},V.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var j=function(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};j.prototype.get=function(){return this.current},j.prototype.set=function(e){},j.prototype.getDefault=function(){return this.default},j.prototype.setDefault=function(){this.set(this.default)};var G=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getDefault=function(){return e.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(j),K=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 1},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)},t}(j),Z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)},t}(j),H=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[!0,!0,!0,!0]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(j),Q=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)},t}(j),W=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 255},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)},t}(j),J=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},t.prototype.set=function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)},t}(j),X=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)},t}(j),Y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}},t}(j),$=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return[0,1]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)},t}(j),ee=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}},t}(j),te=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.LESS},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)},t}(j),ie=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}},t}(j),re=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[e.ONE,e.ZERO]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)},t}(j),ae=function(t){function i(){t.apply(this,arguments)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getDefault=function(){return e.Color.transparent},i.prototype.set=function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)},i}(j),ne=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.FUNC_ADD},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)},t}(j),oe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}},t}(j),se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.BACK},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)},t}(j),le=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.CCW},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)},t}(j),ue=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)},t}(j),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return this.gl.TEXTURE0},t.prototype.set=function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)},t}(j),pe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]},t.prototype.set=function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)},t}(j),he=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}},t}(j),de=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(j),fe=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}},t}(j),_e=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}},t}(j),me=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1},t}(j),ge=function(e){function t(t){e.call(this,t),this.vao=t.extVertexArrayObject}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t.prototype.set=function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)},t}(j),ye=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return 4},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}},t}(j),ve=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}},t}(j),be=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return!1},t.prototype.set=function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}},t}(j),xe=function(e){function t(t,i){e.call(this,t),this.context=t,this.parent=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.getDefault=function(){return null},t}(j),we=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.setDirty=function(){this.dirty=!0},t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t}(xe),Se=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.set=function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}},t}(xe),Ae=function(e,t,i,r){this.context=e,this.width=t,this.height=i;var a=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new we(e,a),r&&(this.depthAttachment=new Se(e,a))};Ae.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var i=this.depthAttachment.get();i&&e.deleteRenderbuffer(i)}e.deleteFramebuffer(this.framebuffer)};var ke=function(e,t,i){this.func=e,this.mask=t,this.range=i};ke.ReadOnly=!1,ke.ReadWrite=!0,ke.disabled=new ke(519,ke.ReadOnly,[0,1]);var Ee=function(e,t,i,r,a,n){this.test=e,this.ref=t,this.mask=i,this.fail=r,this.depthFail=a,this.pass=n};Ee.disabled=new Ee({func:519,mask:0},0,0,7680,7680,7680);var Ie=function(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i};Ie.disabled=new Ie(Ie.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Ie.unblended=new Ie(Ie.Replace,e.Color.transparent,[!0,!0,!0,!0]),Ie.alphaBlended=new Ie([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Te=function(e,t,i){this.enable=e,this.mode=t,this.frontFace=i};Te.disabled=new Te(!1,1029,2305),Te.backCCW=new Te(!0,1029,2305);var Ce=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new G(this),this.clearDepth=new K(this),this.clearStencil=new Z(this),this.colorMask=new H(this),this.depthMask=new Q(this),this.stencilMask=new W(this),this.stencilFunc=new J(this),this.stencilOp=new X(this),this.stencilTest=new Y(this),this.depthRange=new $(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ie(this),this.blendFunc=new re(this),this.blendColor=new ae(this),this.blendEquation=new ne(this),this.cullFace=new oe(this),this.cullFaceSide=new se(this),this.frontFace=new le(this),this.program=new ue(this),this.activeTexture=new ce(this),this.viewport=new pe(this),this.bindFramebuffer=new he(this),this.bindRenderbuffer=new de(this),this.bindTexture=new fe(this),this.bindVertexBuffer=new _e(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ye(this),this.pixelStoreUnpackPremultiplyAlpha=new ve(this),this.pixelStoreUnpackFlipY=new be(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)};Ce.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ce.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ce.prototype.createIndexBuffer=function(e,t){return new U(this,e,t)},Ce.prototype.createVertexBuffer=function(e,t,i){return new V(this,e,t,i)},Ce.prototype.createRenderbuffer=function(e,t,i){var r=this.gl,a=r.createRenderbuffer();return this.bindRenderbuffer.set(a),r.renderbufferStorage(r.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),a},Ce.prototype.createFramebuffer=function(e,t,i){return new Ae(this,e,t,i)},Ce.prototype.clear=function(e){var t=e.color,i=e.depth,r=this.gl,a=0;t&&(a|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==i&&(a|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),r.clear(a)},Ce.prototype.setCullFace=function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))},Ce.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},Ce.prototype.setStencilMode=function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},Ce.prototype.setColorMode=function(t){e.deepEqual(t.blendFunction,Ie.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)},Ce.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(t){function i(i,r,a){var n=this;t.call(this),this.id=i,this.dispatcher=a,this.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(n._sourceLoaded=!0),n._sourceLoaded&&!n._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(n.reload(),n.transform&&n.update(n.transform))})),this.on("error",(function(){n._sourceErrored=!0})),this._source=function(t,i,r,a){var n=new D[i.type](t,i,r,a);if(n.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+n.id);return e.bindAll(["load","abort","unload","serialize","prepare"],n),n}(i,r,a,this),this._tiles={},this._cache=new N(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},i.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},i.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0},i.prototype.getSource=function(){return this._source},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},i.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},i.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))},i.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))},i.prototype.serialize=function(){return this._source.serialize()},i.prototype.prepare=function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}},i.prototype.getIds=function(){return e.values(this._tiles).map((function(e){return e.tileID})).sort(Le).map((function(e){return e.key}))},i.prototype.getRenderableIds=function(t){var i=this,r=[];for(var a in this._tiles)this._isIdRenderable(a,t)&&r.push(this._tiles[a]);return t?r.sort((function(t,r){var a=t.tileID,n=r.tileID,o=new e.Point(a.canonical.x,a.canonical.y)._rotate(i.transform.angle),s=new e.Point(n.canonical.x,n.canonical.y)._rotate(i.transform.angle);return a.overscaledZ-n.overscaledZ||s.y-o.y||s.x-o.x})).map((function(e){return e.tileID.key})):r.map((function(e){return e.tileID})).sort(Le).map((function(e){return e.key}))},i.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)},i.prototype._isIdRenderable=function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())},i.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")},i.prototype._reloadTile=function(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))},i.prototype._tileLoaded=function(t,i,r,a){if(a)return t.state="errored",void(404!==a.status?this._source.fire(new e.ErrorEvent(a,{tile:t})):this.update(this.transform));t.timeAdded=e.browser.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this.getSource().type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:t,coord:t.tileID}))},i.prototype._backfillDEM=function(e){for(var t=this.getRenderableIds(),i=0;i<t.length;i++){var r=t[i];if(e.neighboringTiles&&e.neighboringTiles[r]){var a=this.getTileByID(r);n(e,a),n(a,e)}}function n(e,t){e.needsHillshadePrepare=!0;var i=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,a=Math.pow(2,e.tileID.canonical.z),n=t.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+a)?i+=a:1===Math.abs(i-a)&&(i-=a)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,r),e.neighboringTiles&&e.neighboringTiles[n]&&(e.neighboringTiles[n].backfilled=!0)))}},i.prototype.getTile=function(e){return this.getTileByID(e.key)},i.prototype.getTileByID=function(e){return this._tiles[e]},i.prototype._retainLoadedChildren=function(e,t,i,r){for(var a in this._tiles){var n=this._tiles[a];if(!(r[a]||!n.hasData()||n.tileID.overscaledZ<=t||n.tileID.overscaledZ>i)){for(var o=n.tileID;n&&n.tileID.overscaledZ>t+1;){var s=n.tileID.scaledTo(n.tileID.overscaledZ-1);(n=this._tiles[s.key])&&n.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[o.key]=o;break}}}},i.prototype.findLoadedParent=function(e,t){if(e.key in this._loadedParentTiles){var i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(var r=e.overscaledZ-1;r>=t;r--){var a=e.scaledTo(r),n=this._getLoadedTile(a);if(n)return n}},i.prototype._getLoadedTile=function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)},i.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,r=Math.floor(t*i*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(a)},i.prototype.handleWrapJump=function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var i={};for(var r in this._tiles){var a=this._tiles[r];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),i[a.tileID.key]=a}for(var n in this._tiles=i,this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(var o in this._tiles)this._setTileReloadTimer(o,this._tiles[o])}},i.prototype.update=function(t){var r=this;if(this.transform=t,this._sourceLoaded&&!this._paused){var a;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?a=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(t){return new e.OverscaledTileID(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y)})):(a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(a=a.filter((function(e){return r._source.hasTile(e)})))):a=[];var n=t.coveringZoomLevel(this._source),o=Math.max(n-i.maxOverzooming,this._source.minzoom),s=Math.max(n+i.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(a,n);if(Re(this._source.type)){for(var u={},c={},p=0,h=Object.keys(l);p<h.length;p+=1){var d=h[p],f=l[d],_=this._tiles[d];if(_&&!(_.fadeEndTime&&_.fadeEndTime<=e.browser.now())){var m=this.findLoadedParent(f,o);m&&(this._addTile(m.tileID),u[m.tileID.key]=m.tileID),c[d]=f}}for(var g in this._retainLoadedChildren(c,n,s,l),u)l[g]||(this._coveredTiles[g]=!0,l[g]=u[g])}for(var y in l)this._tiles[y].clearFadeHold();for(var v=0,b=e.keysDifference(this._tiles,l);v<b.length;v+=1){var x=b[v],w=this._tiles[x];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(x)}this._updateLoadedParentTileCache()}},i.prototype.releaseSymbolFadeTiles=function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)},i.prototype._updateRetainedTiles=function(e,t){for(var r={},a={},n=Math.max(t-i.maxOverzooming,this._source.minzoom),o=Math.max(t+i.maxUnderzooming,this._source.minzoom),s={},l=0,u=e;l<u.length;l+=1){var c=u[l],p=this._addTile(c);r[c.key]=c,p.hasData()||t<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,t,o,r);for(var h=0,d=e;h<d.length;h+=1){var f=d[h],_=this._tiles[f.key];if(!_.hasData()){if(t+1>this._source.maxzoom){var m=f.children(this._source.maxzoom)[0],g=this.getTile(m);if(g&&g.hasData()){r[m.key]=m;continue}}else{var y=f.children(this._source.maxzoom);if(r[y[0].key]&&r[y[1].key]&&r[y[2].key]&&r[y[3].key])continue}for(var v=_.wasRequested(),b=f.overscaledZ-1;b>=n;--b){var x=f.scaledTo(b);if(a[x.key])break;if(a[x.key]=!0,!(_=this.getTile(x))&&v&&(_=this._addTile(x)),_&&(r[x.key]=x,v=_.wasRequested(),_.hasData()))break}}}return r},i.prototype._updateLoadedParentTileCache=function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],i=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}t.push(r.key);var a=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(a))break;r=a}for(var n=0,o=t;n<o.length;n+=1)this._loadedParentTiles[o[n]]=i}},i.prototype._addTile=function(t){var i=this._tiles[t.key];if(i)return i;(i=this._cache.getAndRemove(t))&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));var r=Boolean(i);return r||(i=new e.Tile(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))),i?(i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.Event("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i):null},i.prototype._setTileReloadTimer=function(e,t){var i=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){i._reloadTile(e,"expired"),delete i._timers[e]}),r))},i.prototype._removeTile=function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))},i.prototype.clearTiles=function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(e);this._cache.reset()},i.prototype.tilesIn=function(t,i,r){var a=this,n=[],o=this.transform;if(!o)return n;for(var s=r?o.getCameraQueryGeometry(t):t,l=t.map((function(e){return o.pointCoordinate(e)})),u=s.map((function(e){return o.pointCoordinate(e)})),c=this.getIds(),p=1/0,h=1/0,d=-1/0,f=-1/0,_=0,m=u;_<m.length;_+=1){var g=m[_];p=Math.min(p,g.x),h=Math.min(h,g.y),d=Math.max(d,g.x),f=Math.max(f,g.y)}for(var y=function(t){var r=a._tiles[c[t]];if(!r.holdingForFade()){var s=r.tileID,_=Math.pow(2,o.zoom-r.tileID.overscaledZ),m=i*r.queryPadding*e.EXTENT/r.tileSize/_,g=[s.getTilePoint(new e.MercatorCoordinate(p,h)),s.getTilePoint(new e.MercatorCoordinate(d,f))];if(g[0].x-m<e.EXTENT&&g[0].y-m<e.EXTENT&&g[1].x+m>=0&&g[1].y+m>=0){var y=l.map((function(e){return s.getTilePoint(e)})),v=u.map((function(e){return s.getTilePoint(e)}));n.push({tile:r,tileID:s,queryGeometry:y,cameraQueryGeometry:v,scale:_})}}},v=0;v<c.length;v++)y(v);return n},i.prototype.getVisibleCoordinates=function(e){for(var t=this,i=this.getRenderableIds(e).map((function(e){return t._tiles[e].tileID})),r=0,a=i;r<a.length;r+=1){var n=a[r];n.posMatrix=this.transform.calculatePosMatrix(n.toUnwrapped())}return i},i.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Re(this._source.type))for(var t in this._tiles){var i=this._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=e.browser.now())return!0}return!1},i.prototype.setFeatureState=function(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)},i.prototype.removeFeatureState=function(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)},i.prototype.getFeatureState=function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)},i.prototype.setDependencies=function(e,t,i){var r=this._tiles[e];r&&r.setDependencies(t,i)},i.prototype.reloadTilesForDependencies=function(e,t){for(var i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(i,"reloading");this._cache.filter((function(i){return!i.hasDependency(e,t)}))},i}(e.Evented);function Le(e,t){var i=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Re(e){return"raster"===e||"image"===e||"video"===e}function Me(){return new e.window.Worker(Ha.workerUrl)}Pe.maxOverzooming=10,Pe.maxUnderzooming=3;var ze="mapboxgl_preloaded_worker_pool",De=function(){this.active={}};De.prototype.acquire=function(e){if(!this.workers)for(this.workers=[];this.workers.length<De.workerCount;)this.workers.push(new Me);return this.active[e]=!0,this.workers.slice()},De.prototype.release=function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)},De.prototype.isPreloaded=function(){return!!this.active[ze]},De.prototype.numActive=function(){return Object.keys(this.active).length};var Be,Fe=Math.floor(e.browser.hardwareConcurrency/2);function Oe(){return Be||(Be=new De),Be}function Ne(t,i){var r={};for(var a in t)"ref"!==a&&(r[a]=t[a]);return e.refProperties.forEach((function(e){e in i&&(r[e]=i[e])})),r}function Ue(e){e=e.slice();for(var t=Object.create(null),i=0;i<e.length;i++)t[e[i].id]=e[i];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Ne(e[r],t[e[r].ref]));return e}De.workerCount=Math.max(Math.min(Fe,6),1);var qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ve(e,t,i){i.push({command:qe.addSource,args:[e,t[e]]})}function je(e,t,i){t.push({command:qe.removeSource,args:[e]}),i[e]=!0}function Ge(e,t,i,r){je(e,i,r),Ve(e,t,i)}function Ke(t,i,r){var a;for(a in t[r])if(t[r].hasOwnProperty(a)&&"data"!==a&&!e.deepEqual(t[r][a],i[r][a]))return!1;for(a in i[r])if(i[r].hasOwnProperty(a)&&"data"!==a&&!e.deepEqual(t[r][a],i[r][a]))return!1;return!0}function Ze(t,i,r,a,n,o){var s;for(s in i=i||{},t=t||{})t.hasOwnProperty(s)&&(e.deepEqual(t[s],i[s])||r.push({command:o,args:[a,s,i[s],n]}));for(s in i)i.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.deepEqual(t[s],i[s])||r.push({command:o,args:[a,s,i[s],n]}))}function He(e){return e.id}function Qe(e,t){return e[t.id]=t,e}var We=function(e,t){this.reset(e,t)};We.prototype.reset=function(e,t){this.points=e||[],this._distances=[0];for(var i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding},We.prototype.lerp=function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var i=1,r=this._distances[i],a=t*this.paddedLength+this.padding;r<a&&i<this._distances.length;)r=this._distances[++i];var n=i-1,o=this._distances[n],s=r-o,l=s>0?(a-o)/s:0;return this.points[n].mult(1-l).add(this.points[i].mult(l))};var Je=function(e,t,i){var r=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(var n=0;n<this.xCellCount*this.yCellCount;n++)r.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};function Xe(t,i,r,a,n){var o=e.create();return i?(e.scale(o,o,[1/n,1/n,1]),r||e.rotateZ(o,o,a.angle)):e.multiply(o,a.labelPlaneMatrix,t),o}function Ye(t,i,r,a,n){if(i){var o=e.clone(t);return e.scale(o,o,[n,n,1]),r||e.rotateZ(o,o,-a.angle),o}return a.glCoordMatrix}function $e(t,i){var r=[t.x,t.y,0,1];ct(r,r,i);var a=r[3];return{point:new e.Point(r[0]/a,r[1]/a),signedDistanceFromCamera:a}}function et(e,t){return.5+e/t*.5}function tt(e,t){var i=e[0]/e[3],r=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&r>=-t[1]&&r<=t[1]}function it(t,i,r,a,n,o,s,l){var u=a?t.textSizeData:t.iconSizeData,c=e.evaluateSizeForZoom(u,r.transform.zoom),p=[256/r.width*2+1,256/r.height*2+1],h=a?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;h.clear();for(var d=t.lineVertexArray,f=a?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=r.transform.width/r.transform.height,m=!1,g=0;g<f.length;g++){var y=f.get(g);if(y.hidden||y.writingMode===e.WritingMode.vertical&&!m)ut(y.numGlyphs,h);else{m=!1;var v=[y.anchorX,y.anchorY,0,1];if(e.transformMat4(v,v,i),tt(v,p)){var b=et(r.transform.cameraToCenterDistance,v[3]),x=e.evaluateSizeForFeature(u,c,y),w=s?x/b:x*b,S=new e.Point(y.anchorX,y.anchorY),A=$e(S,n).point,k={},E=nt(y,w,!1,l,i,n,o,t.glyphOffsetArray,d,h,A,S,k,_);m=E.useVertical,(E.notEnoughRoom||m||E.needsFlipping&&nt(y,w,!0,l,i,n,o,t.glyphOffsetArray,d,h,A,S,k,_).notEnoughRoom)&&ut(y.numGlyphs,h)}else ut(y.numGlyphs,h)}}a?t.text.dynamicLayoutVertexBuffer.updateData(h):t.icon.dynamicLayoutVertexBuffer.updateData(h)}function rt(e,t,i,r,a,n,o,s,l,u,c){var p=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,d=s.lineStartIndex+s.lineLength,f=t.getoffsetX(s.glyphStartIndex),_=t.getoffsetX(p-1),m=st(e*f,i,r,a,n,o,s.segment,h,d,l,u,c);if(!m)return null;var g=st(e*_,i,r,a,n,o,s.segment,h,d,l,u,c);return g?{first:m,last:g}:null}function at(t,i,r,a){return t===e.WritingMode.horizontal&&Math.abs(r.y-i.y)>Math.abs(r.x-i.x)*a?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<r.y:i.x>r.x)?{needsFlipping:!0}:null}function nt(t,i,r,a,n,o,s,l,u,c,p,h,d,f){var _,m=i/24,g=t.lineOffsetX*m,y=t.lineOffsetY*m;if(t.numGlyphs>1){var v=t.glyphStartIndex+t.numGlyphs,b=t.lineStartIndex,x=t.lineStartIndex+t.lineLength,w=rt(m,l,g,y,r,p,h,t,u,o,d);if(!w)return{notEnoughRoom:!0};var S=$e(w.first.point,s).point,A=$e(w.last.point,s).point;if(a&&!r){var k=at(t.writingMode,S,A,f);if(k)return k}_=[w.first];for(var E=t.glyphStartIndex+1;E<v-1;E++)_.push(st(m*l.getoffsetX(E),g,y,r,p,h,t.segment,b,x,u,o,d));_.push(w.last)}else{if(a&&!r){var I=$e(h,n).point,T=t.lineStartIndex+t.segment+1,C=new e.Point(u.getx(T),u.gety(T)),P=$e(C,n),L=P.signedDistanceFromCamera>0?P.point:ot(h,C,I,1,n),R=at(t.writingMode,I,L,f);if(R)return R}var M=st(m*l.getoffsetX(t.glyphStartIndex),g,y,r,p,h,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,d);if(!M)return{notEnoughRoom:!0};_=[M]}for(var z=0,D=_;z<D.length;z+=1){var B=D[z];e.addDynamicAttributes(c,B.point,B.angle)}return{}}function ot(e,t,i,r,a){var n=$e(e.add(e.sub(t)._unit()),a).point,o=i.sub(n);return i.add(o._mult(r/o.mag()))}function st(t,i,r,a,n,o,s,l,u,c,p,h){var d=a?t-i:t+i,f=d>0?1:-1,_=0;a&&(f*=-1,_=Math.PI),f<0&&(_+=Math.PI);for(var m=f>0?l+s:l+s+1,g=n,y=n,v=0,b=0,x=Math.abs(d),w=[];v+b<=x;){if((m+=f)<l||m>=u)return null;if(y=g,w.push(g),void 0===(g=h[m])){var S=new e.Point(c.getx(m),c.gety(m)),A=$e(S,p);if(A.signedDistanceFromCamera>0)g=h[m]=A.point;else{var k=m-f;g=ot(0===v?o:new e.Point(c.getx(k),c.gety(k)),S,y,x-v+1,p)}}v+=b,b=y.dist(g)}var E=(x-v)/b,I=g.sub(y),T=I.mult(E)._add(y);T._add(I._unit()._perp()._mult(r*f));var C=_+Math.atan2(g.y-y.y,g.x-y.x);return w.push(T),{point:T,angle:C,path:w}}Je.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Je.prototype.insert=function(e,t,i,r,a){this._forEachCell(t,i,r,a,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(a)},Je.prototype.insertCircle=function(e,t,i,r){this._forEachCell(t-r,i-r,t+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(r)},Je.prototype._insertBoxCell=function(e,t,i,r,a,n){this.boxCells[a].push(n)},Je.prototype._insertCircleCell=function(e,t,i,r,a,n){this.circleCells[a].push(n)},Je.prototype._query=function(e,t,i,r,a,n){if(i<0||e>this.width||r<0||t>this.height)return!a&&[];var o=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=r){if(a)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],p=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-p,y1:c-p,x2:u+p,y2:c+p})}return n?o.filter(n):o}return this._forEachCell(e,t,i,r,this._queryCell,o,{hitTest:a,seenUids:{box:{},circle:{}}},n),a?o.length>0:o},Je.prototype._queryCircle=function(e,t,i,r,a){var n=e-i,o=e+i,s=t-i,l=t+i;if(o<0||n>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(n,s,o,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},a),r?u.length>0:u},Je.prototype.query=function(e,t,i,r,a){return this._query(e,t,i,r,!1,a)},Je.prototype.hitTest=function(e,t,i,r,a){return this._query(e,t,i,r,!0,a)},Je.prototype.hitTestCircle=function(e,t,i,r){return this._queryCircle(e,t,i,!0,r)},Je.prototype._queryCell=function(e,t,i,r,a,n,o,s){var l=o.seenUids,u=this.boxCells[a];if(null!==u)for(var c=this.bboxes,p=0,h=u;p<h.length;p+=1){var d=h[p];if(!l.box[d]){l.box[d]=!0;var f=4*d;if(e<=c[f+2]&&t<=c[f+3]&&i>=c[f+0]&&r>=c[f+1]&&(!s||s(this.boxKeys[d]))){if(o.hitTest)return n.push(!0),!0;n.push({key:this.boxKeys[d],x1:c[f],y1:c[f+1],x2:c[f+2],y2:c[f+3]})}}}var _=this.circleCells[a];if(null!==_)for(var m=this.circles,g=0,y=_;g<y.length;g+=1){var v=y[g];if(!l.circle[v]){l.circle[v]=!0;var b=3*v;if(this._circleAndRectCollide(m[b],m[b+1],m[b+2],e,t,i,r)&&(!s||s(this.circleKeys[v]))){if(o.hitTest)return n.push(!0),!0;var x=m[b],w=m[b+1],S=m[b+2];n.push({key:this.circleKeys[v],x1:x-S,y1:w-S,x2:x+S,y2:w+S})}}}},Je.prototype._queryCellCircle=function(e,t,i,r,a,n,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[a];if(null!==c)for(var p=this.bboxes,h=0,d=c;h<d.length;h+=1){var f=d[h];if(!u.box[f]){u.box[f]=!0;var _=4*f;if(this._circleAndRectCollide(l.x,l.y,l.radius,p[_+0],p[_+1],p[_+2],p[_+3])&&(!s||s(this.boxKeys[f])))return n.push(!0),!0}}var m=this.circleCells[a];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var b=v[y];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(this._circlesCollide(g[x],g[x+1],g[x+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return n.push(!0),!0}}},Je.prototype._forEachCell=function(e,t,i,r,a,n,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(r),h=l;h<=c;h++)for(var d=u;d<=p;d++)if(a.call(this,e,t,i,r,this.xCellCount*d+h,n,o,s))return},Je.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},Je.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},Je.prototype._circlesCollide=function(e,t,i,r,a,n){var o=r-e,s=a-t,l=i+n;return l*l>o*o+s*s},Je.prototype._circleAndRectCollide=function(e,t,i,r,a,n,o){var s=(n-r)/2,l=Math.abs(e-(r+s));if(l>s+i)return!1;var u=(o-a)/2,c=Math.abs(t-(a+u));if(c>u+i)return!1;if(l<=s||c<=u)return!0;var p=l-s,h=c-u;return p*p+h*h<=i*i};var lt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ut(e,t){for(var i=0;i<e;i++){var r=t.length;t.resize(r+4),t.float32.set(lt,3*r)}}function ct(e,t,i){var r=t[0],a=t[1];return e[0]=i[0]*r+i[4]*a+i[12],e[1]=i[1]*r+i[5]*a+i[13],e[3]=i[3]*r+i[7]*a+i[15],e}var pt=function(e,t,i){void 0===t&&(t=new Je(e.width+200,e.height+200,25)),void 0===i&&(i=new Je(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200};function ht(t,i,r){return i*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}pt.prototype.placeCollisionBox=function(e,t,i,r,a){var n=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),o=i*n.perspectiveRatio,s=e.x1*o+n.point.x,l=e.y1*o+n.point.y,u=e.x2*o+n.point.x,c=e.y2*o+n.point.y;return!this.isInsideGrid(s,l,u,c)||!t&&this.grid.hitTest(s,l,u,c,a)?{box:[],offscreen:!1}:{box:[s,l,u,c],offscreen:this.isOffscreen(s,l,u,c)}},pt.prototype.placeCollisionCircles=function(t,i,r,a,n,o,s,l,u,c,p,h,d){var f=[],_=new e.Point(i.anchorX,i.anchorY),m=$e(_,o),g=et(this.transform.cameraToCenterDistance,m.signedDistanceFromCamera),y=(c?n/g:n*g)/e.ONE_EM,v=$e(_,s).point,b=rt(y,a,i.lineOffsetX*y,i.lineOffsetY*y,!1,v,_,i,r,s,{}),x=!1,w=!1,S=!0;if(b){for(var A=.5*h*g+d,k=new e.Point(-100,-100),E=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),I=new We,T=b.first,C=b.last,P=[],L=T.path.length-1;L>=1;L--)P.push(T.path[L]);for(var R=1;R<C.path.length;R++)P.push(C.path[R]);var M=2.5*A;if(l){var z=P.map((function(e){return $e(e,l)}));P=z.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:z.map((function(e){return e.point}))}var D=[];if(P.length>0){for(var B=P[0].clone(),F=P[0].clone(),O=1;O<P.length;O++)B.x=Math.min(B.x,P[O].x),B.y=Math.min(B.y,P[O].y),F.x=Math.max(F.x,P[O].x),F.y=Math.max(F.y,P[O].y);D=B.x>=k.x&&F.x<=E.x&&B.y>=k.y&&F.y<=E.y?[P]:F.x<k.x||B.x>E.x||F.y<k.y||B.y>E.y?[]:e.clipLine([P],k.x,k.y,E.x,E.y)}for(var N=0,U=D;N<U.length;N+=1){var q;I.reset(U[N],.25*A),q=I.length<=.5*A?1:Math.ceil(I.paddedLength/M)+1;for(var V=0;V<q;V++){var j=V/Math.max(q-1,1),G=I.lerp(j),K=G.x+100,Z=G.y+100;f.push(K,Z,A,0);var H=K-A,Q=Z-A,W=K+A,J=Z+A;if(S=S&&this.isOffscreen(H,Q,W,J),w=w||this.isInsideGrid(H,Q,W,J),!t&&this.grid.hitTestCircle(K,Z,A,p)&&(x=!0,!u))return{circles:[],offscreen:!1,collisionDetected:x}}}}return{circles:!u&&x||!w?[]:f,offscreen:S,collisionDetected:x}},pt.prototype.queryRenderedSymbols=function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var i=[],r=1/0,a=1/0,n=-1/0,o=-1/0,s=0,l=t;s<l.length;s+=1){var u=l[s],c=new e.Point(u.x+100,u.y+100);r=Math.min(r,c.x),a=Math.min(a,c.y),n=Math.max(n,c.x),o=Math.max(o,c.y),i.push(c)}for(var p={},h={},d=0,f=this.grid.query(r,a,n,o).concat(this.ignoredGrid.query(r,a,n,o));d<f.length;d+=1){var _=f[d],m=_.key;if(void 0===p[m.bucketInstanceId]&&(p[m.bucketInstanceId]={}),!p[m.bucketInstanceId][m.featureIndex]){var g=[new e.Point(_.x1,_.y1),new e.Point(_.x2,_.y1),new e.Point(_.x2,_.y2),new e.Point(_.x1,_.y2)];e.polygonIntersectsPolygon(i,g)&&(p[m.bucketInstanceId][m.featureIndex]=!0,void 0===h[m.bucketInstanceId]&&(h[m.bucketInstanceId]=[]),h[m.bucketInstanceId].push(m.featureIndex))}}return h},pt.prototype.insertCollisionBox=function(e,t,i,r,a){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:a},e[0],e[1],e[2],e[3])},pt.prototype.insertCollisionCircles=function(e,t,i,r,a){for(var n=t?this.ignoredGrid:this.grid,o={bucketInstanceId:i,featureIndex:r,collisionGroupID:a},s=0;s<e.length;s+=4)n.insertCircle(o,e[s],e[s+1],e[s+2])},pt.prototype.projectAndGetPerspectiveRatio=function(t,i,r){var a=[i,r,0,1];return ct(a,a,t),{point:new e.Point((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/a[3]*.5}},pt.prototype.isOffscreen=function(e,t,i,r){return i<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},pt.prototype.isInsideGrid=function(e,t,i,r){return i>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary},pt.prototype.getViewportMatrix=function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t};var dt=function(e,t,i,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&i?1:0,this.placed=i};dt.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ft=function(e,t,i,r,a){this.text=new dt(e?e.text:null,t,i,a),this.icon=new dt(e?e.icon:null,t,r,a)};ft.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var _t=function(e,t,i){this.text=e,this.icon=t,this.skipFade=i},mt=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},gt=function(e,t,i,r,a){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=a},yt=function(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}};function vt(t,i,r,a,n){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*i,l=-(o.verticalAlign-.5)*r,u=e.evaluateVariableOffset(t,a);return new e.Point(s+u[0]*n,l+u[1]*n)}function bt(t,i,r,a,n,o){var s=t.x1,l=t.x2,u=t.y1,c=t.y2,p=t.anchorPointX,h=t.anchorPointY,d=new e.Point(i,r);return a&&d._rotate(n?o:-o),{x1:s+d.x,y1:u+d.y,x2:l+d.x,y2:c+d.y,anchorPointX:p,anchorPointY:h}}yt.prototype.get=function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]};var xt=function(e,t,i,r){this.transform=e.clone(),this.collisionIndex=new pt(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new yt(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function wt(e,t,i,r,a){e.emplaceBack(t?1:0,i?1:0,r||0,a||0),e.emplaceBack(t?1:0,i?1:0,r||0,a||0),e.emplaceBack(t?1:0,i?1:0,r||0,a||0),e.emplaceBack(t?1:0,i?1:0,r||0,a||0)}xt.prototype.getBucketParts=function(t,i,r,a){var n=r.getBucket(i),o=r.latestFeatureIndex;if(n&&o&&i.id===n.layerIds[0]){var s=r.collisionBoxArray,l=n.layers[0].layout,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,p=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),f=ht(r,1,this.transform.zoom),_=Xe(p,h,d,this.transform,f),m=null;if(h){var g=Ye(p,h,d,this.transform,f);m=e.multiply([],this.transform.labelPlaneMatrix,g)}this.retainedQueryData[n.bucketInstanceId]=new gt(n.bucketInstanceId,o,n.sourceLayerIndex,n.index,r.tileID);var y={bucket:n,layout:l,posMatrix:p,textLabelPlaneMatrix:_,labelToScreenMatrix:m,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(n.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(n.sourceID)};if(a)for(var v=0,b=n.sortKeyRanges;v<b.length;v+=1){var x=b[v];t.push({sortKey:x.sortKey,symbolInstanceStart:x.symbolInstanceStart,symbolInstanceEnd:x.symbolInstanceEnd,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:n.symbolInstances.length,parameters:y})}},xt.prototype.attemptAnchorPlacement=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f){var _,m=[p.textOffset0,p.textOffset1],g=vt(e,i,r,m,a),y=this.collisionIndex.placeCollisionBox(bt(t,g.x,g.y,n,o,this.transform.angle),c,s,l,u.predicate);if(!f||0!==this.collisionIndex.placeCollisionBox(bt(f,g.x,g.y,n,o,this.transform.angle),c,s,l,u.predicate).box.length)return y.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(_=this.prevPlacement.variableOffsets[p.crossTileID].anchor),this.variableOffsets[p.crossTileID]={textOffset:m,width:i,height:r,anchor:e,textBoxScale:a,prevAnchor:_},this.markUsedJustification(h,e,p,d),h.allowVerticalPlacement&&(this.markUsedOrientation(h,d,p),this.placedOrientations[p.crossTileID]=d),{shift:g,placedGlyphBoxes:y}):void 0},xt.prototype.placeLayerBucketPart=function(t,i,r){var a=this,n=t.parameters,o=n.bucket,s=n.layout,l=n.posMatrix,u=n.textLabelPlaneMatrix,c=n.labelToScreenMatrix,p=n.textPixelRatio,h=n.holdingForFade,d=n.collisionBoxArray,f=n.partiallyEvaluatedTextSize,_=n.collisionGroup,m=s.get("text-optional"),g=s.get("icon-optional"),y=s.get("text-allow-overlap"),v=s.get("icon-allow-overlap"),b="map"===s.get("text-rotation-alignment"),x="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),S="viewport-y"===s.get("symbol-z-order"),A=y&&(v||!o.hasIconData()||g),k=v&&(y||!o.hasTextData()||m);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d);var E=function(t,n){if(!i[t.crossTileID])if(h)a.placements[t.crossTileID]=new _t(!1,!1,!1);else{var d,S=!1,E=!1,I=!0,T=null,C={box:null,offscreen:null},P={box:null,offscreen:null},L=null,R=null,M=0,z=0,D=0;n.textFeatureIndex?M=n.textFeatureIndex:t.useRuntimeCollisionCircles&&(M=t.featureIndex),n.verticalTextFeatureIndex&&(z=n.verticalTextFeatureIndex);var B=n.textBox;if(B){var F=function(i){var r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!i&&a.prevPlacement){var n=a.prevPlacement.placedOrientations[t.crossTileID];n&&(a.placedOrientations[t.crossTileID]=n,a.markUsedOrientation(o,r=n,t))}return r},O=function(i,r){if(o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n.verticalTextBox)for(var a=0,s=o.writingModes;a<s.length&&(s[a]===e.WritingMode.vertical?(C=r(),P=C):C=i(),!(C&&C.box&&C.box.length));a+=1);else C=i()};if(s.get("text-variable-anchor")){var N=s.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var U=a.prevPlacement.variableOffsets[t.crossTileID];N.indexOf(U.anchor)>0&&(N=N.filter((function(e){return e!==U.anchor}))).unshift(U.anchor)}var q=function(e,i,r){for(var n=e.x2-e.x1,s=e.y2-e.y1,u=t.textBoxScale,c=w&&!v?i:null,h={box:[],offscreen:!1},d=y?2*N.length:N.length,f=0;f<d;++f){var m=a.attemptAnchorPlacement(N[f%N.length],e,n,s,u,b,x,p,l,_,f>=N.length,t,o,r,c);if(m&&(h=m.placedGlyphBoxes)&&h.box&&h.box.length){S=!0,T=m.shift;break}}return h};O((function(){return q(B,n.iconBox,e.WritingMode.horizontal)}),(function(){var i=n.verticalTextBox;return o.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&t.numVerticalGlyphVertices>0&&i?q(i,n.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}})),C&&(S=C.box,I=C.offscreen);var V=F(C&&C.box);if(!S&&a.prevPlacement){var j=a.prevPlacement.variableOffsets[t.crossTileID];j&&(a.variableOffsets[t.crossTileID]=j,a.markUsedJustification(o,j.anchor,t,V))}}else{var G=function(e,i){var r=a.collisionIndex.placeCollisionBox(e,y,p,l,_.predicate);return r&&r.box&&r.box.length&&(a.markUsedOrientation(o,i,t),a.placedOrientations[t.crossTileID]=i),r};O((function(){return G(B,e.WritingMode.horizontal)}),(function(){var i=n.verticalTextBox;return o.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?G(i,e.WritingMode.vertical):{box:null,offscreen:null}})),F(C&&C.box&&C.box.length)}}if(S=(d=C)&&d.box&&d.box.length>0,I=d&&d.offscreen,t.useRuntimeCollisionCircles){var K=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),Z=e.evaluateSizeForFeature(o.textSizeData,f,K),H=s.get("text-padding");L=a.collisionIndex.placeCollisionCircles(y,K,o.lineVertexArray,o.glyphOffsetArray,Z,l,u,c,r,x,_.predicate,t.collisionCircleDiameter,H),S=y||L.circles.length>0&&!L.collisionDetected,I=I&&L.offscreen}if(n.iconFeatureIndex&&(D=n.iconFeatureIndex),n.iconBox){var Q=function(e){var t=w&&T?bt(e,T.x,T.y,b,x,a.transform.angle):e;return a.collisionIndex.placeCollisionBox(t,v,p,l,_.predicate)};E=P&&P.box&&P.box.length&&n.verticalIconBox?(R=Q(n.verticalIconBox)).box.length>0:(R=Q(n.iconBox)).box.length>0,I=I&&R.offscreen}var W=m||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,J=g||0===t.numIconVertices;if(W||J?J?W||(E=E&&S):S=E&&S:E=S=E&&S,S&&d&&d.box&&a.collisionIndex.insertCollisionBox(d.box,s.get("text-ignore-placement"),o.bucketInstanceId,P&&P.box&&z?z:M,_.ID),E&&R&&a.collisionIndex.insertCollisionBox(R.box,s.get("icon-ignore-placement"),o.bucketInstanceId,D,_.ID),L&&(S&&a.collisionIndex.insertCollisionCircles(L.circles,s.get("text-ignore-placement"),o.bucketInstanceId,M,_.ID),r)){var X=o.bucketInstanceId,Y=a.collisionCircleArrays[X];void 0===Y&&(Y=a.collisionCircleArrays[X]=new mt);for(var $=0;$<L.circles.length;$+=4)Y.circles.push(L.circles[$+0]),Y.circles.push(L.circles[$+1]),Y.circles.push(L.circles[$+2]),Y.circles.push(L.collisionDetected?1:0)}a.placements[t.crossTileID]=new _t(S||A,E||k,I||o.justReloaded),i[t.crossTileID]=!0}};if(S)for(var I=o.getSortedSymbolIndexes(this.transform.angle),T=I.length-1;T>=0;--T){var C=I[T];E(o.symbolInstances.get(C),o.collisionArrays[C])}else for(var P=t.symbolInstanceStart;P<t.symbolInstanceEnd;P++)E(o.symbolInstances.get(P),o.collisionArrays[P]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){var L=this.collisionCircleArrays[o.bucketInstanceId];e.invert(L.invProjMatrix,l),L.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1},xt.prototype.markUsedJustification=function(t,i,r,a){var n;n=a===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o+=1){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=n>=0&&l!==n?0:r.crossTileID)}},xt.prototype.markUsedOrientation=function(t,i,r){for(var a=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,n=i===e.WritingMode.vertical?i:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o+=1)t.text.placedSymbolArray.get(s[o]).placedOrientation=a;r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=n)},xt.prototype.commit=function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,a=t?t.opacities:{},n=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=a[s];u?(this.opacities[s]=new ft(u,r,l.text,l.icon),i=i||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new ft(null,r,l.text,l.icon,l.skipFade),i=i||l.text||l.icon)}for(var c in a){var p=a[c];if(!this.opacities[c]){var h=new ft(p,r,!1,!1);h.isHidden()||(this.opacities[c]=h,i=i||p.text.placed||p.icon.placed)}}for(var d in n)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=n[d]);for(var f in o)this.placedOrientations[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.placedOrientations[f]=o[f]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)},xt.prototype.updateLayerOpacities=function(e,t){for(var i={},r=0,a=t;r<a.length;r+=1){var n=a[r],o=n.getBucket(e);o&&n.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,i,n.collisionBoxArray)}},xt.prototype.updateBucketOpacities=function(t,i,r){var a=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var n=t.layers[0].layout,o=new ft(null,0,!1,!1,!0),s=n.get("text-allow-overlap"),l=n.get("icon-allow-overlap"),u=n.get("text-variable-anchor"),c="map"===n.get("text-rotation-alignment"),p="map"===n.get("text-pitch-alignment"),h="none"!==n.get("icon-text-fit"),d=new ft(null,0,s&&(l||!t.hasIconData()||n.get("icon-optional")),l&&(s||!t.hasTextData()||n.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var f=function(e,t,i){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(i)},_=function(r){var n=t.symbolInstances.get(r),s=n.numHorizontalGlyphVertices,l=n.numVerticalGlyphVertices,_=n.crossTileID,m=a.opacities[_];i[_]?m=o:m||(a.opacities[_]=m=d),i[_]=!0;var g=n.numIconVertices>0,y=a.placedOrientations[n.crossTileID],v=y===e.WritingMode.vertical,b=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(s>0||l>0){var x=Pt(m.text);f(t.text,s,v?Lt:x),f(t.text,l,b?Lt:x);var w=m.text.isHidden();[n.rightJustifiedTextSymbolIndex,n.centerJustifiedTextSymbolIndex,n.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=w||v?1:0)})),n.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(n.verticalPlacedTextSymbolIndex).hidden=w||b?1:0);var S=a.variableOffsets[n.crossTileID];S&&a.markUsedJustification(t,S.anchor,n,y);var A=a.placedOrientations[n.crossTileID];A&&(a.markUsedJustification(t,"left",n,A),a.markUsedOrientation(t,A,n))}if(g){var k=Pt(m.icon),E=!(h&&n.verticalPlacedIconSymbolIndex&&v);n.placedIconSymbolIndex>=0&&(f(t.icon,n.numIconVertices,E?k:Lt),t.icon.placedSymbolArray.get(n.placedIconSymbolIndex).hidden=m.icon.isHidden()),n.verticalPlacedIconSymbolIndex>=0&&(f(t.icon,n.numVerticalIconVertices,E?Lt:k),t.icon.placedSymbolArray.get(n.verticalPlacedIconSymbolIndex).hidden=m.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var I=t.collisionArrays[r];if(I){var T=new e.Point(0,0);if(I.textBox||I.verticalTextBox){var C=!0;if(u){var P=a.variableOffsets[_];P?(T=vt(P.anchor,P.width,P.height,P.textOffset,P.textBoxScale),c&&T._rotate(p?a.transform.angle:-a.transform.angle)):C=!1}I.textBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||v,T.x,T.y),I.verticalTextBox&&wt(t.textCollisionBox.collisionVertexArray,m.text.placed,!C||b,T.x,T.y)}var L=Boolean(!b&&I.verticalIconBox);I.iconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,L,h?T.x:0,h?T.y:0),I.verticalIconBox&&wt(t.iconCollisionBox.collisionVertexArray,m.icon.placed,!L,h?T.x:0,h?T.y:0)}}},m=0;m<t.symbolInstances.length;m++)_(m);if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var g=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=g.invProjMatrix,t.placementViewportMatrix=g.viewportMatrix,t.collisionCircleArray=g.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}},xt.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xt.prototype.zoomAdjustment=function(e){return Math.max(0,(this.transform.zoom-e)/1.5)},xt.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},xt.prototype.stillRecent=function(e,t){var i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e},xt.prototype.setStale=function(){this.stale=!0};var St=Math.pow(2,25),At=Math.pow(2,24),kt=Math.pow(2,17),Et=Math.pow(2,16),It=Math.pow(2,9),Tt=Math.pow(2,8),Ct=Math.pow(2,1);function Pt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*St+t*At+i*kt+t*Et+i*It+t*Tt+i*Ct+t}var Lt=0,Rt=function(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Rt.prototype.continuePlacement=function(e,t,i,r,a){for(var n=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(n,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,a())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,n.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<n.length;)if(t.placeLayerBucketPart(n[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,a())return!0;return!1};var Mt=function(e,t,i,r,a,n,o){this.placement=new xt(e,a,n,o),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1};Mt.prototype.isDone=function(){return this._done},Mt.prototype.continuePlacement=function(t,i,r){for(var a=this,n=e.browser.now(),o=function(){var t=e.browser.now()-n;return!a._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=i[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Rt(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Mt.prototype.commit=function(e){return this.placement.commit(e),this.placement};var zt=512/e.EXTENT/2,Dt=function(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(var r=0;r<t.length;r++){var a=t.get(r),n=a.key;this.indexedSymbolInstances[n]||(this.indexedSymbolInstances[n]=[]),this.indexedSymbolInstances[n].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}};Dt.prototype.getScaledCoordinates=function(t,i){var r=zt/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*r),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*r)}},Dt.prototype.findMatches=function(e,t,i){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),a=0;a<e.length;a++){var n=e.get(a);if(!n.crossTileID){var o=this.indexedSymbolInstances[n.key];if(o)for(var s=this.getScaledCoordinates(n,t),l=0,u=o;l<u.length;l+=1){var c=u[l];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!i[c.crossTileID]){i[c.crossTileID]=!0,n.crossTileID=c.crossTileID;break}}}}};var Bt=function(){this.maxCrossTileID=0};Bt.prototype.generate=function(){return++this.maxCrossTileID};var Ft=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ft.prototype.handleWrapJump=function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var i in this.indexes){var r=this.indexes[i],a={};for(var n in r){var o=r[n];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),a[o.tileID.key]=o}this.indexes[i]=a}this.lng=e},Ft.prototype.addBucket=function(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var a=this.usedCrossTileIDs[e.overscaledZ];for(var n in this.indexes){var o=this.indexes[n];if(Number(n)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,a)}else{var u=o[e.scaledTo(Number(n)).key];u&&u.findMatches(t.symbolInstances,e,a)}}for(var c=0;c<t.symbolInstances.length;c++){var p=t.symbolInstances.get(c);p.crossTileID||(p.crossTileID=i.generate(),a[p.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Dt(e,t.symbolInstances,t.bucketInstanceId),!0},Ft.prototype.removeBucketCrossTileIDs=function(e,t){for(var i in t.indexedSymbolInstances)for(var r=0,a=t.indexedSymbolInstances[i];r<a.length;r+=1)delete this.usedCrossTileIDs[e][a[r].crossTileID]},Ft.prototype.removeStaleBuckets=function(e){var t=!1;for(var i in this.indexes){var r=this.indexes[i];for(var a in r)e[r[a].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[a]),delete r[a],t=!0)}return t};var Ot=function(){this.layerIndexes={},this.crossTileIDs=new Bt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ot.prototype.addLayer=function(e,t,i){var r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Ft);var a=!1,n={};r.handleWrapJump(i);for(var o=0,s=t;o<s.length;o+=1){var l=s[o],u=l.getBucket(e);u&&e.id===u.layerIds[0]&&(u.bucketInstanceId||(u.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(l.tileID,u,this.crossTileIDs)&&(a=!0),n[u.bucketInstanceId]=!0)}return r.removeStaleBuckets(n)&&(a=!0),a},Ot.prototype.pruneUnusedLayers=function(e){var t={};for(var i in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[i]||delete this.layerIndexes[i]};var Nt=function(t,i){return e.emitValidationErrors(t,i&&i.filter((function(e){return"source.canvas"!==e.identifier})))},Ut=e.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),qt=e.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),Vt=function(){var t={},i=e.styleSpec.$version;for(var r in e.styleSpec.$root){var a,n=e.styleSpec.$root[r];n.required&&null!=(a="version"===r?i:"array"===n.type?[]:{})&&(t[r]=a)}return t}(),jt=function(t){function i(r,a){var n=this;void 0===a&&(a={}),t.call(this),this.map=r,this.dispatcher=new A(Oe(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new v(r._requestManager,a.localIdeographFontFamily),this.lineAtlas=new S(256,512),this.crossTileSymbolIndex=new Ot,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var o=this;this._rtlTextPluginCallback=i.registerForPluginStateChange((function(t){o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,i){if(e.triggerPluginCompletionEvent(t),i&&i.every((function(e){return e})))for(var r in o.sourceCaches)o.sourceCaches[r].reload()}))})),this.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.sourceCaches[e.sourceId];if(t){var i=t.getSource();if(i&&i.vectorLayerIds)for(var r in n._layers){var a=n._layers[r];a.source===i.id&&n._validateLayer(a)}}}}))}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.loadURL=function(t,i){var r=this;void 0===i&&(i={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var a="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);var n=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(n,(function(t,i){r._request=null,t?r.fire(new e.ErrorEvent(t)):i&&r._load(i,a)}))},i.prototype.loadJSON=function(t,i){var r=this;void 0===i&&(i={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame((function(){r._request=null,r._load(t,!1!==i.validate)}))},i.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Vt,!1)},i.prototype._load=function(t,i){if(!i||!Nt(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=t,t.sources)this.addSource(r,t.sources[r],{validate:!1});t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);var a=Ue(this.stylesheet.layers);this._order=a.map((function(e){return e.id})),this._layers={},this._serializedLayers={};for(var n=0,o=a;n<o.length;n+=1){var s=o[n];(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},i.prototype._loadSprite=function(t){var i=this;this._spriteRequest=function(t,i,r){var a,n,o,s=e.browser.devicePixelRatio>1?"@2x":"",l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,a=t,c())})),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,n=t,c())}));function c(){if(o)r(o);else if(a&&n){var t=e.browser.getImageData(n),i={};for(var s in a){var l=a[s],u=l.width,c=l.height,p=l.x,h=l.y,d=l.sdf,f=l.pixelRatio,_=l.stretchX,m=l.stretchY,g=l.content,y=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,y,{x:p,y:h},{x:0,y:0},{width:u,height:c}),i[s]={data:y,pixelRatio:f,sdf:d,stretchX:_,stretchY:m,content:g}}r(null,i)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,r){if(i._spriteRequest=null,t)i.fire(new e.ErrorEvent(t));else if(r)for(var a in r)i.imageManager.addImage(a,r[a]);i.imageManager.setLoaded(!0),i._availableImages=i.imageManager.listImages(),i.dispatcher.broadcast("setImages",i._availableImages),i.fire(new e.Event("data",{dataType:"style"}))}))},i.prototype._validateLayer=function(t){var i=this.sourceCaches[t.source];if(i){var r=t.sourceLayer;if(r){var a=i.getSource();("geojson"===a.type||a.vectorLayerIds&&-1===a.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+a.id+'" as specified by style layer "'+t.id+'"')))}}},i.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()},i.prototype._serializeLayers=function(e){for(var t=[],i=0,r=e;i<r.length;i+=1){var a=this._layers[r[i]];"custom"!==a.type&&t.push(a.serialize())}return t},i.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1},i.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},i.prototype.update=function(t){if(this._loaded){var i=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),a=Object.keys(this._removedLayers);for(var n in(r.length||a.length)&&this._updateWorkerLayers(r,a),this._updatedSources){var o=this._updatedSources[n];"reload"===o?this._reloadSource(n):"clear"===o&&this._clearSource(n)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}for(var l in this.sourceCaches)this.sourceCaches[l].used=!1;for(var u=0,c=this._order;u<c.length;u+=1){var p=this._layers[c[u]];p.recalculate(t,this._availableImages),!p.isHidden(t.zoom)&&p.source&&(this.sourceCaches[p.source].used=!0)}this.light.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}},i.prototype._updateTilesForChangedImages=function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}},i.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},i.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},i.prototype.setState=function(t){var i=this;if(this._checkLoaded(),Nt(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Ue(t.layers);var r=function(t,i){if(!t)return[{command:qe.setStyle,args:[i]}];var r=[];try{if(!e.deepEqual(t.version,i.version))return[{command:qe.setStyle,args:[i]}];e.deepEqual(t.center,i.center)||r.push({command:qe.setCenter,args:[i.center]}),e.deepEqual(t.zoom,i.zoom)||r.push({command:qe.setZoom,args:[i.zoom]}),e.deepEqual(t.bearing,i.bearing)||r.push({command:qe.setBearing,args:[i.bearing]}),e.deepEqual(t.pitch,i.pitch)||r.push({command:qe.setPitch,args:[i.pitch]}),e.deepEqual(t.sprite,i.sprite)||r.push({command:qe.setSprite,args:[i.sprite]}),e.deepEqual(t.glyphs,i.glyphs)||r.push({command:qe.setGlyphs,args:[i.glyphs]}),e.deepEqual(t.transition,i.transition)||r.push({command:qe.setTransition,args:[i.transition]}),e.deepEqual(t.light,i.light)||r.push({command:qe.setLight,args:[i.light]});var a={},n=[];!function(t,i,r,a){var n;for(n in i=i||{},t=t||{})t.hasOwnProperty(n)&&(i.hasOwnProperty(n)||je(n,r,a));for(n in i)i.hasOwnProperty(n)&&(t.hasOwnProperty(n)?e.deepEqual(t[n],i[n])||("geojson"===t[n].type&&"geojson"===i[n].type&&Ke(t,i,n)?r.push({command:qe.setGeoJSONSourceData,args:[n,i[n].data]}):Ge(n,i,r,a)):Ve(n,i,r))}(t.sources,i.sources,n,a);var o=[];t.layers&&t.layers.forEach((function(e){a[e.source]?r.push({command:qe.removeLayer,args:[e.id]}):o.push(e)})),r=r.concat(n),function(t,i,r){i=i||[];var a,n,o,s,l,u,c,p=(t=t||[]).map(He),h=i.map(He),d=t.reduce(Qe,{}),f=i.reduce(Qe,{}),_=p.slice(),m=Object.create(null);for(a=0,n=0;a<p.length;a++)f.hasOwnProperty(o=p[a])?n++:(r.push({command:qe.removeLayer,args:[o]}),_.splice(_.indexOf(o,n),1));for(a=0,n=0;a<h.length;a++)_[_.length-1-a]!==(o=h[h.length-1-a])&&(d.hasOwnProperty(o)?(r.push({command:qe.removeLayer,args:[o]}),_.splice(_.lastIndexOf(o,_.length-n),1)):n++,r.push({command:qe.addLayer,args:[f[o],u=_[_.length-a]]}),_.splice(_.length-a,0,o),m[o]=!0);for(a=0;a<h.length;a++)if(s=d[o=h[a]],l=f[o],!m[o]&&!e.deepEqual(s,l))if(e.deepEqual(s.source,l.source)&&e.deepEqual(s["source-layer"],l["source-layer"])&&e.deepEqual(s.type,l.type)){for(c in Ze(s.layout,l.layout,r,o,null,qe.setLayoutProperty),Ze(s.paint,l.paint,r,o,null,qe.setPaintProperty),e.deepEqual(s.filter,l.filter)||r.push({command:qe.setFilter,args:[o,l.filter]}),e.deepEqual(s.minzoom,l.minzoom)&&e.deepEqual(s.maxzoom,l.maxzoom)||r.push({command:qe.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ze(s[c],l[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],l[c])||r.push({command:qe.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Ze(s[c],l[c],r,o,c.slice(6),qe.setPaintProperty):e.deepEqual(s[c],l[c])||r.push({command:qe.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:qe.removeLayer,args:[o]}),u=_[_.lastIndexOf(o)+1],r.push({command:qe.addLayer,args:[l,u]})}(o,i.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:qe.setStyle,args:[i]}]}return r}(this.serialize(),t).filter((function(e){return!(e.command in qt)}));if(0===r.length)return!1;var a=r.filter((function(e){return!(e.command in Ut)}));if(a.length>0)throw new Error("Unimplemented: "+a.map((function(e){return e.command})).join(", ")+".");return r.forEach((function(e){"setTransition"!==e.command&&i[e.command].apply(i,e.args)})),this.stylesheet=t,!0},i.prototype.addImage=function(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,i),this._afterImageUpdated(t)},i.prototype.updateImage=function(e,t){this.imageManager.updateImage(e,t)},i.prototype.getImage=function(e){return this.imageManager.getImage(e)},i.prototype.removeImage=function(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)},i.prototype._afterImageUpdated=function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))},i.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},i.prototype.addSource=function(t,i,r){var a=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(i).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,i,null,r))){this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);var n=this.sourceCaches[t]=new Pe(t,i,this.dispatcher);n.style=this,n.setEventedParent(this,(function(){return{isSourceLoaded:a.loaded(),source:n.serialize(),sourceId:t}})),n.onAdd(this.map),this._changed=!0}},i.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");for(var i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'+t+'" cannot be removed while layer "'+i+'" is using it.')));var r=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],r.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},i.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},i.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},i.prototype.addLayer=function(t,i,r){void 0===r&&(r={}),this._checkLoaded();var a=t.id;if(this.getLayer(a))this.fire(new e.ErrorEvent(new Error('Layer with id "'+a+'" already exists on this map')));else{var n;if("custom"===t.type){if(Nt(this,e.validateCustomStyleLayer(t)))return;n=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(a,t.source),t=e.clone$1(t),t=e.extend(t,{source:a})),this._validate(e.validateStyle.layer,"layers."+a,t,{arrayIndex:-1},r))return;n=e.createStyleLayer(t),this._validateLayer(n),n.setEventedParent(this,{layer:{id:a}}),this._serializedLayers[n.id]=n.serialize()}var o=i?this._order.indexOf(i):this._order.length;if(i&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.')));else{if(this._order.splice(o,0,a),this._layerOrderChanged=!0,this._layers[a]=n,this._removedLayers[a]&&n.source&&"custom"!==n.type){var s=this._removedLayers[a];delete this._removedLayers[a],s.type!==n.type?this._updatedSources[n.source]="clear":(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause())}this._updateLayer(n),n.onAdd&&n.onAdd(this.map)}}},i.prototype.moveLayer=function(t,i){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==i){var r=this._order.indexOf(t);this._order.splice(r,1);var a=i?this._order.indexOf(i):this._order.length;i&&-1===a?this.fire(new e.ErrorEvent(new Error('Layer with id "'+i+'" does not exist on this map.'))):(this._order.splice(a,0,t),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")))},i.prototype.removeLayer=function(t){this._checkLoaded();var i=this._layers[t];if(i){i.setEventedParent(null);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")))},i.prototype.getLayer=function(e){return this._layers[e]},i.prototype.hasLayer=function(e){return e in this._layers},i.prototype.setLayerZoomRange=function(t,i,r){this._checkLoaded();var a=this.getLayer(t);a?a.minzoom===i&&a.maxzoom===r||(null!=i&&(a.minzoom=i),null!=r&&(a.maxzoom=r),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")))},i.prototype.setFilter=function(t,i,r){void 0===r&&(r={}),this._checkLoaded();var a=this.getLayer(t);if(a){if(!e.deepEqual(a.filter,i))return null==i?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateStyle.filter,"layers."+a.id+".filter",i,null,r)||(a.filter=e.clone$1(i),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")))},i.prototype.getFilter=function(t){return e.clone$1(this.getLayer(t).filter)},i.prototype.setLayoutProperty=function(t,i,r,a){void 0===a&&(a={}),this._checkLoaded();var n=this.getLayer(t);n?e.deepEqual(n.getLayoutProperty(i),r)||(n.setLayoutProperty(i,r,a),this._updateLayer(n)):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getLayoutProperty=function(t,i){var r=this.getLayer(t);if(r)return r.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style.")))},i.prototype.setPaintProperty=function(t,i,r,a){void 0===a&&(a={}),this._checkLoaded();var n=this.getLayer(t);n?e.deepEqual(n.getPaintProperty(i),r)||(n.setPaintProperty(i,r,a)&&this._updateLayer(n),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")))},i.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},i.prototype.setFeatureState=function(t,i){this._checkLoaded();var r=t.source,a=t.sourceLayer,n=this.sourceCaches[r];if(void 0!==n){var o=n.getSource().type;"geojson"===o&&a?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==o||a?(void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),n.setFeatureState(a,t.id,i)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.removeFeatureState=function(t,i){this._checkLoaded();var r=t.source,a=this.sourceCaches[r];if(void 0!==a){var n=a.getSource().type,o="vector"===n?t.sourceLayer:void 0;"vector"!==n||o?i&&"string"!=typeof t.id&&"number"!=typeof t.id?this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):a.removeFeatureState(o,t.id,i):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},i.prototype.getFeatureState=function(t){this._checkLoaded();var i=t.source,r=t.sourceLayer,a=this.sourceCaches[i];if(void 0!==a){if("vector"!==a.getSource().type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),a.getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+i+"' does not exist in the map's style.")))},i.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},i.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,(function(e){return e.serialize()})),layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))},i.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},i.prototype._flattenAndSortRenderedFeatures=function(e){for(var t=this,i=function(e){return"fill-extrusion"===t._layers[e].type},r={},a=[],n=this._order.length-1;n>=0;n--){var o=this._order[n];if(i(o)){r[o]=n;for(var s=0,l=e;s<l.length;s+=1){var u=l[s][o];if(u)for(var c=0,p=u;c<p.length;c+=1)a.push(p[c])}}}a.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var h=[],d=this._order.length-1;d>=0;d--){var f=this._order[d];if(i(f))for(var _=a.length-1;_>=0;_--){var m=a[_].feature;if(r[m.layer.id]<d)break;h.push(m),a.pop()}else for(var g=0,y=e;g<y.length;g+=1){var v=y[g][f];if(v)for(var b=0,x=v;b<x.length;b+=1)h.push(x[b].feature)}}return h},i.prototype.queryRenderedFeatures=function(t,i,r){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);var a={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var n=0,o=i.layers;n<o.length;n+=1){var s=o[n],l=this._layers[s];if(!l)return this.fire(new e.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];a[l.source]=!0}}var u=[];for(var c in i.availableImages=this._availableImages,this.sourceCaches)i.layers&&!a[c]||u.push(F(this.sourceCaches[c],this._layers,this._serializedLayers,t,i,r));return this.placement&&u.push(function(e,t,i,r,a,n,o){for(var s={},l=n.queryRenderedSymbols(r),u=[],c=0,p=Object.keys(l).map(Number);c<p.length;c+=1)u.push(o[p[c]]);u.sort(O);for(var h=function(){var i=f[d],r=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,a.filter,a.layers,a.availableImages,e);for(var n in r){var o=s[n]=s[n]||[],u=r[n];u.sort((function(e,t){var r=i.featureSortOrder;if(r){var a=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-a}return t.featureIndex-e.featureIndex}));for(var c=0,p=u;c<p.length;c+=1)o.push(p[c])}},d=0,f=u;d<f.length;d+=1)h();var _=function(t){s[t].forEach((function(r){var a=r.feature,n=i[e[t].source].getFeatureState(a.layer["source-layer"],a.id);a.source=a.layer.source,a.layer["source-layer"]&&(a.sourceLayer=a.layer["source-layer"]),a.state=n}))};for(var m in s)_(m);return s}(this._layers,this._serializedLayers,this.sourceCaches,t,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(u)},i.prototype.querySourceFeatures=function(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);var r=this.sourceCaches[t];return r?function(e,t){for(var i=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],a={},n=0;n<i.length;n++){var o=i[n],s=o.tileID.canonical.key;a[s]||(a[s]=!0,o.querySourceFeatures(r,t))}return r}(r,i):[]},i.prototype.addSourceType=function(e,t,r){return i.getSourceType(e)?r(new Error('A source type called "'+e+'" already exists.')):(i.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},r):r(null,null))},i.prototype.getLight=function(){return this.light.getLight()},i.prototype.setLight=function(t,i){void 0===i&&(i={}),this._checkLoaded();var r=this.light.getLight(),a=!1;for(var n in t)if(!e.deepEqual(t[n],r[n])){a=!0;break}if(a){var o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}},i.prototype._validate=function(t,i,r,a,n){return void 0===n&&(n={}),(!n||!1!==n.validate)&&Nt(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:r,styleSpec:e.styleSpec},a)))},i.prototype._remove=function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var i in this.sourceCaches)this.sourceCaches[i].clearTiles(),this.sourceCaches[i].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},i.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},i.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},i.prototype._updateSources=function(e){for(var t in this.sourceCaches)this.sourceCaches[t].update(e)},i.prototype._generateCollisionBoxes=function(){for(var e in this.sourceCaches)this._reloadSource(e)},i.prototype._updatePlacement=function(t,i,r,a,n){void 0===n&&(n=!1);for(var o=!1,s=!1,l={},u=0,c=this._order;u<c.length;u+=1){var p=this._layers[c[u]];if("symbol"===p.type){if(!l[p.source]){var h=this.sourceCaches[p.source];l[p.source]=h.getRenderableIds(!0).map((function(e){return h.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var d=this.crossTileSymbolIndex.addLayer(p,l[p.source],t.center.lng);o=o||d}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new Mt(t,this._order,n,i,r,a,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(var f=0,_=this._order;f<_.length;f+=1){var m=this._layers[_[f]];"symbol"===m.type&&this.placement.updateLayerOpacities(m,l[m.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},i.prototype._releaseSymbolFadeTiles=function(){for(var e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()},i.prototype.getImages=function(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();var r=this.sourceCaches[t.source];r&&r.setDependencies(t.tileID.key,t.type,t.icons)},i.prototype.getGlyphs=function(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)},i.prototype.getResource=function(t,i,r){return e.makeRequest(i,r)},i}(e.Evented);jt.getSourceType=function(e){return D[e]},jt.setSourceType=function(e,t){D[e]=t},jt.registerForPluginStateChange=e.registerForPluginStateChange;var Gt=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Kt=gi("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Zt=gi("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ht=gi("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Qt=gi("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Wt=gi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Jt=gi("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),Xt=gi("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Yt=gi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),$t=gi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ei=gi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),ti=gi("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ii=gi("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ri=gi("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ai=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ni=gi("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),oi=gi("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),si=gi("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),li=gi("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ui=gi("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ci=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),pi=gi("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),hi=gi("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),di=gi("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),fi=gi("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),_i=gi("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),mi=gi("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function gi(e,t){var i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute ([\w]+) ([\w]+)/g),a=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),n=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=n?n.concat(a):a,s={};return{fragmentSource:e=e.replace(i,(function(e,t,i,r,a){return s[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})),vertexSource:t=t.replace(i,(function(e,t,i,r,a){var n="float"===r?"vec2":"vec4",o=a.match(/color/)?"color":n;return s[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\nvarying "+i+" "+r+" "+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+o+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float u_"+a+"_t;\nattribute "+i+" "+n+" a_"+a+";\n#else\nuniform "+i+" "+r+" u_"+a+";\n#endif\n":"vec4"===o?"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = a_"+a+";\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+i+" "+r+" "+a+" = unpack_mix_"+o+"(a_"+a+", u_"+a+"_t);\n#else\n    "+i+" "+r+" "+a+" = u_"+a+";\n#endif\n"})),staticAttributes:r,staticUniforms:o}}var yi=Object.freeze({__proto__:null,prelude:Kt,background:Zt,backgroundPattern:Ht,circle:Qt,clippingMask:Wt,heatmap:Jt,heatmapTexture:Xt,collisionBox:Yt,collisionCircle:$t,debug:ei,fill:ti,fillOutline:ii,fillOutlinePattern:ri,fillPattern:ai,fillExtrusion:ni,fillExtrusionPattern:oi,hillshadePrepare:si,hillshade:li,line:ui,lineGradient:ci,linePattern:pi,lineSDF:hi,raster:di,symbolIcon:fi,symbolSDF:_i,symbolTextAndIcon:mi}),vi=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function bi(e){for(var t=[],i=0;i<e.length;i++)if(null!==e[i]){var r=e[i].split(" ");t.push(r.pop())}return t}vi.prototype.bind=function(e,t,i,r,a,n,o,s){this.context=e;for(var l=this.boundPaintVertexBuffers.length!==r.length,u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===a&&this.boundVertexOffset===n&&this.boundDynamicVertexBuffer===o&&this.boundDynamicVertexBuffer2===s?(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),a&&a.dynamicDraw&&a.bind(),s&&s.bind()):this.freshBind(t,i,r,a,n,o,s)},vi.prototype.freshBind=function(e,t,i,r,a,n,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=a,this.boundDynamicVertexBuffer=n,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var p=l;p<s;p++)c.disableVertexAttribArray(p)}t.enableAttributes(c,e);for(var h=0,d=i;h<d.length;h+=1)d[h].enableAttributes(c,e);n&&n.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,a);for(var f=0,_=i;f<_.length;f+=1){var m=_[f];m.bind(),m.setVertexAttribPointers(c,e,a)}n&&(n.bind(),n.setVertexAttribPointers(c,e,a)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,a)),u.currentNumAttributes=l},vi.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var xi=function(e,t,i,r,a,n){var o=e.gl;this.program=o.createProgram();for(var s=bi(i.staticAttributes),l=r?r.getBinderAttributes():[],u=s.concat(l),c=i.staticUniforms?bi(i.staticUniforms):[],p=r?r.getBinderUniforms():[],h=[],d=0,f=c.concat(p);d<f.length;d+=1){var _=f[d];h.indexOf(_)<0&&h.push(_)}var m=r?r.defines():[];n&&m.push("#define OVERDRAW_INSPECTOR;");var g=m.concat(Kt.fragmentSource,i.fragmentSource).join("\n"),y=m.concat(Kt.vertexSource,i.vertexSource).join("\n"),v=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(v,g),o.compileShader(v),o.attachShader(this.program,v);var b=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(b,y),o.compileShader(b),o.attachShader(this.program,b),this.attributes={};var x={};this.numAttributes=u.length;for(var w=0;w<this.numAttributes;w++)u[w]&&(o.bindAttribLocation(this.program,w,u[w]),this.attributes[u[w]]=w);o.linkProgram(this.program),o.deleteShader(b),o.deleteShader(v);for(var S=0;S<h.length;S++){var A=h[S];if(A&&!x[A]){var k=o.getUniformLocation(this.program,A);k&&(x[A]=k)}}this.fixedUniforms=a(e,x),this.binderUniforms=r?r.getUniforms(e,x):[]}}};function wi(e,t,i){var r=1/ht(i,1,t.transform.tileZoom),a=Math.pow(2,i.tileID.overscaledZ),n=i.tileSize*Math.pow(2,t.transform.tileZoom)/a,o=n*(i.tileID.canonical.x+i.tileID.wrap*a),s=n*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}xi.prototype.draw=function(e,t,i,r,a,n,o,s,l,u,c,p,h,d,f,_){var m,g=e.gl;if(!this.failedToCreate){for(var y in e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(r),e.setColorMode(a),e.setCullFace(n),this.fixedUniforms)this.fixedUniforms[y].set(o[y]);d&&d.setUniforms(e,this.binderUniforms,p,{zoom:h});for(var v=(m={},m[g.LINES]=2,m[g.TRIANGLES]=3,m[g.LINE_STRIP]=1,m)[t],b=0,x=c.get();b<x.length;b+=1){var w=x[b],S=w.vaos||(w.vaos={});(S[s]||(S[s]=new vi)).bind(e,this,l,d?d.getPaintVertexBuffers():[],u,w.vertexOffset,f,_),g.drawElements(t,w.primitiveLength*v,g.UNSIGNED_SHORT,w.primitiveOffset*v*2)}}};var Si=function(t,i,r,a){var n=i.style.light,o=n.properties.get("position"),s=[o.x,o.y,o.z],l=e.create$1();"viewport"===n.properties.get("anchor")&&e.fromRotation(l,-i.transform.angle),e.transformMat3(s,s,l);var u=n.properties.get("color");return{u_matrix:t,u_lightpos:s,u_lightintensity:n.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+r,u_opacity:a}},Ai=function(t,i,r,a,n,o,s){return e.extend(Si(t,i,r,a),wi(o,i,s),{u_height_factor:-Math.pow(2,n.overscaledZ)/s.tileSize/8})},ki=function(e){return{u_matrix:e}},Ei=function(t,i,r,a){return e.extend(ki(t),wi(r,i,a))},Ii=function(e,t){return{u_matrix:e,u_world:t}},Ti=function(t,i,r,a,n){return e.extend(Ei(t,i,r,a),{u_world:n})},Ci=function(t,i,r,a){var n,o,s=t.transform;if("map"===a.paint.get("circle-pitch-alignment")){var l=ht(r,1,s.zoom);n=!0,o=[l,l]}else n=!1,o=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===a.paint.get("circle-pitch-scale")),u_matrix:t.translatePosMatrix(i.posMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_pitch_with_map:+n,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:o}},Pi=function(e,t,i){var r=ht(i,1,t.zoom),a=Math.pow(2,t.zoom-i.tileID.overscaledZ),n=i.tileID.overscaleFactor();return{u_matrix:e,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[t.pixelsToGLUnits[0]/(r*a),t.pixelsToGLUnits[1]/(r*a)],u_overscale_factor:n}},Li=function(e,t,i){return{u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:i.cameraToCenterDistance,u_viewport_size:[i.width,i.height]}},Ri=function(e,t,i){return void 0===i&&(i=1),{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}},Mi=function(e){return{u_matrix:e}},zi=function(e,t,i,r){return{u_matrix:e,u_extrude_scale:ht(t,1,i),u_intensity:r}},Di=function(t,i,r){var a=t.transform;return{u_matrix:Ui(t,i,r),u_ratio:1/ht(i,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},Bi=function(t,i,r,a){return e.extend(Di(t,i,r),{u_image:0,u_image_height:a})},Fi=function(t,i,r,a){var n=t.transform,o=Ni(i,n);return{u_matrix:Ui(t,i,r),u_texsize:i.imageAtlasTexture.size,u_ratio:1/ht(i,1,n.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[o,a.fromScale,a.toScale],u_fade:a.t,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Oi=function(t,i,r,a,n){var o=t.lineAtlas,s=Ni(i,t.transform),l="round"===r.layout.get("line-cap"),u=o.getDash(a.from,l),c=o.getDash(a.to,l),p=u.width*n.fromScale,h=c.width*n.toScale;return e.extend(Di(t,i,r),{u_patternscale_a:[s/p,-u.height/2],u_patternscale_b:[s/h,-c.height/2],u_sdfgamma:o.width/(256*Math.min(p,h)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:c.y,u_mix:n.t})};function Ni(e,t){return 1/ht(e,1,t.tileZoom)}function Ui(e,t,i){return e.translatePosMatrix(t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}var qi=function(e,t,i,r,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*a.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:a.paint.get("raster-brightness-min"),u_brightness_high:a.paint.get("raster-brightness-max"),u_saturation_factor:(o=a.paint.get("raster-saturation"),o>0?1-1/(1.001-o):-o),u_contrast_factor:(n=a.paint.get("raster-contrast"),n>0?1/(1-n):1+n),u_spin_weights:Vi(a.paint.get("raster-hue-rotate"))};var n,o};function Vi(e){e*=Math.PI/180;var t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}var ji,Gi=function(e,t,i,r,a,n,o,s,l,u){var c=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:n,u_label_plane_matrix:o,u_coord_matrix:s,u_is_text:+l,u_pitch_with_map:+r,u_texsize:u,u_texture:0}},Ki=function(t,i,r,a,n,o,s,l,u,c,p){var h=n.transform;return e.extend(Gi(t,i,r,a,n,o,s,l,u,c),{u_gamma_scale:a?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+p})},Zi=function(t,i,r,a,n,o,s,l,u,c){return e.extend(Ki(t,i,r,a,n,o,s,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1})},Hi=function(e,t,i){return{u_matrix:e,u_opacity:t,u_color:i}},Qi=function(t,i,r,a,n,o){return e.extend(function(e,t,i,r){var a=i.imageManager.getPattern(e.from.toString()),n=i.imageManager.getPattern(e.to.toString()),o=i.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,i.transform.tileZoom)/u,p=c*(r.tileID.canonical.x+r.tileID.wrap*u),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:a.tl,u_pattern_br_a:a.br,u_pattern_tl_b:n.tl,u_pattern_br_b:n.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:a.displaySize,u_pattern_size_b:n.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/ht(r,1,i.transform.tileZoom),u_pixel_coord_upper:[p>>16,h>>16],u_pixel_coord_lower:[65535&p,65535&h]}}(a,o,r,n),{u_matrix:t,u_opacity:i})},Wi={fillExtrusion:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fillExtrusionPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}},fill:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},fillPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},fillOutline:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}},fillOutlinePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},circle:function(t,i){return{u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(t,i.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},collisionBox:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(t,i.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_overscale_factor:new e.Uniform1f(t,i.u_overscale_factor)}},collisionCircle:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}},debug:function(t,i){return{u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}},clippingMask:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmap:function(t,i){return{u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}},heatmapTexture:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}},hillshade:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}},hillshadePrepare:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}},line:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}},lineGradient:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}},linePattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}},lineSDF:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}},raster:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}},symbolIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}},symbolSDF:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},symbolTextAndIcon:function(t,i){return{u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}},background:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}},backgroundPattern:function(t,i){return{u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}}};function Ji(t,i,r,a,n,o,s){for(var l=t.context,u=l.gl,c=t.useProgram("collisionBox"),p=[],h=0,d=0,f=0;f<a.length;f++){var _=a[f],m=i.getTile(_),g=m.getBucket(r);if(g){var y=_.posMatrix;0===n[0]&&0===n[1]||(y=t.translatePosMatrix(_.posMatrix,m,n,o));var v=s?g.textCollisionBox:g.iconCollisionBox,b=g.collisionCircleArray;if(b.length>0){var x=e.create(),w=y;e.mul(x,g.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(x,x,g.placementViewportMatrix),p.push({circleArray:b,circleOffset:d,transform:w,invTransform:x}),d=h+=b.length/4}v&&c.draw(l,u.LINES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,Pi(y,t.transform,m),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,t.transform.zoom,null,null,v.collisionVertexBuffer)}}if(s&&p.length){var S=t.useProgram("collisionCircle"),A=new e.StructArrayLayout2f1f2i16;A.resize(4*h),A._trim();for(var k=0,E=0,I=p;E<I.length;E+=1)for(var T=I[E],C=0;C<T.circleArray.length/4;C++){var P=4*C,L=T.circleArray[P+0],R=T.circleArray[P+1],M=T.circleArray[P+2],z=T.circleArray[P+3];A.emplace(k++,L,R,M,z,0),A.emplace(k++,L,R,M,z,1),A.emplace(k++,L,R,M,z,2),A.emplace(k++,L,R,M,z,3)}(!ji||ji.length<2*h)&&(ji=function(t){var i=2*t,r=new e.StructArrayLayout3ui6;r.resize(i),r._trim();for(var a=0;a<i;a++){var n=6*a;r.uint16[n+0]=4*a+0,r.uint16[n+1]=4*a+1,r.uint16[n+2]=4*a+2,r.uint16[n+3]=4*a+2,r.uint16[n+4]=4*a+3,r.uint16[n+5]=4*a+0}return r}(h));for(var D=l.createIndexBuffer(ji,!0),B=l.createVertexBuffer(A,e.collisionCircleLayout.members,!0),F=0,O=p;F<O.length;F+=1){var N=O[F],U=Li(N.transform,N.invTransform,t.transform);S.draw(l,u.TRIANGLES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,U,r.id,B,D,e.SegmentVector.simpleSegment(0,2*N.circleOffset,N.circleArray.length,N.circleArray.length/2),null,t.transform.zoom,null,null,null)}B.destroy(),D.destroy()}}var Xi=e.identity(new Float32Array(16));function Yi(t,i,r,a,n,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*i,u=-(s.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,a);return new e.Point((l/n+c[0])*o,(u/n+c[1])*o)}function $i(t,i,r,a,n,o,s,l,u,c,p){var h=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,_={};d.clear();for(var m=0;m<h.length;m++){var g=h.get(m),y=g.hidden||!g.crossTileID||t.allowVerticalPlacement&&!g.placedOrientation?null:a[g.crossTileID];if(y){var v=new e.Point(g.anchorX,g.anchorY),b=$e(v,r?l:s),x=et(o.cameraToCenterDistance,b.signedDistanceFromCamera),w=n.evaluateSizeForFeature(t.textSizeData,c,g)*x/e.ONE_EM;r&&(w*=t.tilePixelRatio/u);for(var S=Yi(y.anchor,y.width,y.height,y.textOffset,y.textBoxScale,w),A=r?$e(v.add(S),s).point:b.point.add(i?S.rotate(-o.angle):S),k=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,E=0;E<g.numGlyphs;E++)e.addDynamicAttributes(d,A,k);p&&g.associatedIconIndex>=0&&(_[g.associatedIconIndex]={shiftedAnchor:A,angle:k})}else ut(g.numGlyphs,d)}if(p){f.clear();for(var I=t.icon.placedSymbolArray,T=0;T<I.length;T++){var C=I.get(T);if(C.hidden)ut(C.numGlyphs,f);else{var P=_[T];if(P)for(var L=0;L<C.numGlyphs;L++)e.addDynamicAttributes(f,P.shiftedAnchor,P.angle);else ut(C.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function er(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function tr(t,i,r,a,n,o,s,l,u,c,p,h){for(var d=t.context,f=d.gl,_=t.transform,m="map"===l,g="map"===u,y=m&&"point"!==r.layout.get("symbol-placement"),v=m&&!g&&!y,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),x=t.depthModeForSublayer(0,ke.ReadOnly),w=r.layout.get("text-variable-anchor"),S=[],A=0,k=a;A<k.length;A+=1){var E=k[A],I=i.getTile(E),T=I.getBucket(r);if(T){var C=n?T.text:T.icon;if(C&&C.segments.get().length){var P=C.programConfigurations.get(r.id),L=n||T.sdfIcons,R=n?T.textSizeData:T.iconSizeData,M=g||0!==_.pitch,z=t.useProgram(er(L,n,T),P),D=e.evaluateSizeForZoom(R,_.zoom),B=void 0,F=[0,0],O=void 0,N=void 0,U=null,q=void 0;if(n)O=I.glyphAtlasTexture,N=f.LINEAR,B=I.glyphAtlasTexture.size,T.iconsInText&&(F=I.imageAtlasTexture.size,U=I.imageAtlasTexture,q=M||t.options.rotating||t.options.zooming||"composite"===R.kind||"camera"===R.kind?f.LINEAR:f.NEAREST);else{var V=1!==r.layout.get("icon-size").constantOr(0)||T.iconsNeedLinear;O=I.imageAtlasTexture,N=L||t.options.rotating||t.options.zooming||V||M?f.LINEAR:f.NEAREST,B=I.imageAtlasTexture.size}var j=ht(I,1,t.transform.zoom),G=Xe(E.posMatrix,g,m,t.transform,j),K=Ye(E.posMatrix,g,m,t.transform,j),Z=w&&T.hasTextData(),H="none"!==r.layout.get("icon-text-fit")&&Z&&T.hasIconData();y&&it(T,E.posMatrix,t,n,G,K,g,c);var Q=t.translatePosMatrix(E.posMatrix,I,o,s),W=y||n&&w||H?Xi:G,J=t.translatePosMatrix(K,I,o,s,!0),X=L&&0!==r.paint.get(n?"text-halo-width":"icon-halo-width").constantOr(1),Y={program:z,buffers:C,uniformValues:L?T.iconsInText?Zi(R.kind,D,v,g,t,Q,W,J,B,F):Ki(R.kind,D,v,g,t,Q,W,J,n,B,!0):Gi(R.kind,D,v,g,t,Q,W,J,n,B),atlasTexture:O,atlasTextureIcon:U,atlasInterpolation:N,atlasInterpolationIcon:q,isSDF:L,hasHalo:X};if(b)for(var $=0,ee=C.segments.get();$<ee.length;$+=1){var te=ee[$];S.push({segments:new e.SegmentVector([te]),sortKey:te.sortKey,state:Y})}else S.push({segments:C.segments,sortKey:0,state:Y})}}}b&&S.sort((function(e,t){return e.sortKey-t.sortKey}));for(var ie=0,re=S;ie<re.length;ie+=1){var ae=re[ie],ne=ae.state;if(d.activeTexture.set(f.TEXTURE0),ne.atlasTexture.bind(ne.atlasInterpolation,f.CLAMP_TO_EDGE),ne.atlasTextureIcon&&(d.activeTexture.set(f.TEXTURE1),ne.atlasTextureIcon&&ne.atlasTextureIcon.bind(ne.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),ne.isSDF){var oe=ne.uniformValues;ne.hasHalo&&(oe.u_is_halo=1,ir(ne.buffers,ae.segments,r,t,ne.program,x,p,h,oe)),oe.u_is_halo=0}ir(ne.buffers,ae.segments,r,t,ne.program,x,p,h,ne.uniformValues)}}function ir(e,t,i,r,a,n,o,s,l){var u=r.context;a.draw(u,u.gl.TRIANGLES,n,o,s,Te.disabled,l,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function rr(e,t,i,r,a,n,o){var s,l,u,c,p,h=e.context.gl,d=i.paint.get("fill-pattern"),f=d&&d.constantOr(1),_=i.getCrossfadeParameters();o?(l=f&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(l=f?"fillPattern":"fill",s=h.TRIANGLES);for(var m=0,g=r;m<g.length;m+=1){var y=g[m],v=t.getTile(y);if(!f||v.patternsLoaded()){var b=v.getBucket(i);if(b){var x=b.programConfigurations.get(i.id),w=e.useProgram(l,x);f&&(e.context.activeTexture.set(h.TEXTURE0),v.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),x.updatePaintBuffers(_));var S=d.constantOr(null);if(S&&v.imageAtlas){var A=v.imageAtlas,k=A.patternPositions[S.to.toString()],E=A.patternPositions[S.from.toString()];k&&E&&x.setConstantPatternPositions(k,E)}var I=e.translatePosMatrix(y.posMatrix,v,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(o){c=b.indexBuffer2,p=b.segments2;var T=[h.drawingBufferWidth,h.drawingBufferHeight];u="fillOutlinePattern"===l&&f?Ti(I,e,_,v,T):Ii(I,T)}else c=b.indexBuffer,p=b.segments,u=f?Ei(I,e,_,v):ki(I);w.draw(e.context,s,a,e.stencilModeForClipping(y),n,Te.disabled,u,i.id,b.layoutVertexBuffer,c,p,i.paint,e.transform.zoom,x)}}}}function ar(e,t,i,r,a,n,o){for(var s=e.context,l=s.gl,u=i.paint.get("fill-extrusion-pattern"),c=u.constantOr(1),p=i.getCrossfadeParameters(),h=i.paint.get("fill-extrusion-opacity"),d=0,f=r;d<f.length;d+=1){var _=f[d],m=t.getTile(_),g=m.getBucket(i);if(g){var y=g.programConfigurations.get(i.id),v=e.useProgram(c?"fillExtrusionPattern":"fillExtrusion",y);c&&(e.context.activeTexture.set(l.TEXTURE0),m.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(p));var b=u.constantOr(null);if(b&&m.imageAtlas){var x=m.imageAtlas,w=x.patternPositions[b.to.toString()],S=x.patternPositions[b.from.toString()];w&&S&&y.setConstantPatternPositions(w,S)}var A=e.translatePosMatrix(_.posMatrix,m,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),k=i.paint.get("fill-extrusion-vertical-gradient"),E=c?Ai(A,e,k,h,_,p,m):Si(A,e,k,h);v.draw(s,s.gl.TRIANGLES,a,n,o,Te.backCCW,E,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,e.transform.zoom,y)}}}function nr(t,i,r,a,n,o){var s=t.context,l=s.gl,u=i.fbo;if(u){var c=t.useProgram("hillshade");s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,u.colorAttachment.get());var p=function(t,i,r){var a=r.paint.get("hillshade-shadow-color"),n=r.paint.get("hillshade-highlight-color"),o=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=t.transform.angle);var l,u,c,p=!t.options.moving;return{u_matrix:t.transform.calculatePosMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:(l=i.tileID,u=Math.pow(2,l.canonical.z),c=l.canonical.y,[new e.MercatorCoordinate(0,c/u).toLngLat().lat,new e.MercatorCoordinate(0,(c+1)/u).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:a,u_highlight:n,u_accent:o}}(t,i,r);c.draw(s,l.TRIANGLES,a,n,o,Te.disabled,p,r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function or(t,i,r,a,n,o){var s=t.context,l=s.gl,u=i.dem;if(u&&u.data){var c=u.dim,p=u.stride,h=u.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(p),i.demTexture){var d=i.demTexture;d.update(h,{premultiply:!1}),d.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else i.demTexture=new e.Texture(s,h,l.RGBA,{premultiply:!1}),i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);var f=i.fbo;if(!f){var _=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);_.bind(l.LINEAR,l.CLAMP_TO_EDGE),(f=i.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(_.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,a,n,o,Te.disabled,function(t,i){var r=i.stride,a=e.create();return e.ortho(a,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(a,a,[0,-e.EXTENT,0]),{u_matrix:a,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:i.getUnpackVector()}}(i.tileID,u),r.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function sr(t,i,r,a,n){var o=a.paint.get("raster-fade-duration");if(o>0){var s=e.browser.now(),l=(s-t.timeAdded)/o,u=i?(s-i.timeAdded)/o:-1,c=r.getSource(),p=n.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-p)>Math.abs(t.tileID.overscaledZ-p),d=h&&t.refreshedUponExpiration?1:e.clamp(h?l:1-u,0,1);return t.refreshedUponExpiration&&l>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var lr=new e.Color(1,0,0,1),ur=new e.Color(0,1,0,1),cr=new e.Color(0,0,1,1),pr=new e.Color(1,0,1,1),hr=new e.Color(0,1,1,1);function dr(e,t,i,r){_r(e,0,t+i/2,e.transform.width,i,r)}function fr(e,t,i,r){_r(e,t-i/2,0,i,e.transform.height,r)}function _r(t,i,r,a,n,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.browser.devicePixelRatio,r*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio,n*e.browser.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}function mr(t,i,r){var a=t.context,n=a.gl,o=r.posMatrix,s=t.useProgram("debug"),l=ke.disabled,u=Ee.disabled,c=t.colorModeForRenderPass();a.activeTexture.set(n.TEXTURE0),t.emptyTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),s.draw(a,n.LINE_STRIP,l,u,c,Te.disabled,Ri(o,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);var p=i.getTileByID(r.key).latestRawTileData,h=Math.floor((p&&p.byteLength||0)/1024),d=i.getTile(r).tileSize,f=512/Math.min(d,512)*(r.overscaledZ/t.transform.zoom)*.5,_=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(_+=" => "+r.overscaledZ),function(e,t){e.initDebugOverlayCanvas();var i=e.debugOverlayCanvas,r=e.context.gl,a=e.debugOverlayCanvas.getContext("2d");a.clearRect(0,0,i.width,i.height),a.shadowColor="white",a.shadowBlur=2,a.lineWidth=1.5,a.strokeStyle="white",a.textBaseline="top",a.font="bold 36px Open Sans, sans-serif",a.fillText(t,5,5),a.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,_+" "+h+"kb"),s.draw(a,n.TRIANGLES,l,u,Ie.alphaBlended,Te.disabled,Ri(o,e.Color.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}var gr={symbol:function(t,i,r,a,n){if("translucent"===t.renderPass){var o=Ee.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,i,r,a,n,o,s){for(var l=i.transform,u="map"===n,c="map"===o,p=0,h=t;p<h.length;p+=1){var d=h[p],f=a.getTile(d),_=f.getBucket(r);if(_&&_.text&&_.text.segments.get().length){var m=e.evaluateSizeForZoom(_.textSizeData,l.zoom),g=ht(f,1,i.transform.zoom),y=Xe(d.posMatrix,c,u,i.transform,g),v="none"!==r.layout.get("icon-text-fit")&&_.hasIconData();if(m){var b=Math.pow(2,l.zoom-f.tileID.overscaledZ);$i(_,u,c,s,e.symbolSize,l,y,d.posMatrix,b,m,v)}}}}(a,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),n),0!==r.paint.get("icon-opacity").constantOr(1)&&tr(t,i,r,a,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&tr(t,i,r,a,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),i.map.showCollisionBoxes&&(Ji(t,i,r,a,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Ji(t,i,r,a,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,i,r,a){if("translucent"===t.renderPass){var n=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==n.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,p=t.depthModeForSublayer(0,ke.ReadOnly),h=Ee.disabled,d=t.colorModeForRenderPass(),f=[],_=0;_<a.length;_++){var m=a[_],g=i.getTile(m),y=g.getBucket(r);if(y){var v=y.programConfigurations.get(r.id),b={programConfiguration:v,program:t.useProgram("circle",v),layoutVertexBuffer:y.layoutVertexBuffer,indexBuffer:y.indexBuffer,uniformValues:Ci(t,m,g,r)};if(l)for(var x=0,w=y.segments.get();x<w.length;x+=1){var S=w[x];f.push({segments:new e.SegmentVector([S]),sortKey:S.sortKey,state:b})}else f.push({segments:y.segments,sortKey:0,state:b})}}l&&f.sort((function(e,t){return e.sortKey-t.sortKey}));for(var A=0,k=f;A<k.length;A+=1){var E=k[A],I=E.state;I.program.draw(u,c.TRIANGLES,p,h,d,Te.disabled,I.uniformValues,r.id,I.layoutVertexBuffer,I.indexBuffer,E.segments,r.paint,t.transform.zoom,I.programConfiguration)}}}},heatmap:function(t,i,r,a){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var n=t.context,o=n.gl,s=Ee.disabled,l=new Ie([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var a=i.heatmapFbo;if(a)r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),e.bindFramebuffer.set(a.framebuffer);else{var n=r.createTexture();r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),a=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,r){var a=e.gl;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t.width/4,t.height/4,0,a.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(e,t,n,a)}}(n,t,r),n.clear({color:e.Color.transparent});for(var u=0;u<a.length;u++){var c=a[u];if(!i.hasRenderableParent(c)){var p=i.getTile(c),h=p.getBucket(r);if(h){var d=h.programConfigurations.get(r.id);t.useProgram("heatmap",d).draw(n,o.TRIANGLES,ke.disabled,s,l,Te.disabled,zi(c.posMatrix,p,t.transform.zoom,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,t.transform.zoom,d)}}}n.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){var r=t.context,a=r.gl,n=i.heatmapFbo;if(n){r.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,n.colorAttachment.get()),r.activeTexture.set(a.TEXTURE1);var o=i.colorRampTexture;o||(o=i.colorRampTexture=new e.Texture(r,i.colorRamp,a.RGBA)),o.bind(a.LINEAR,a.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,a.TRIANGLES,ke.disabled,Ee.disabled,t.colorModeForRenderPass(),Te.disabled,function(t,i,r,a){var n=e.create();e.ortho(n,0,t.width,t.height,0,0,1);var o=t.context.gl;return{u_matrix:n,u_world:[o.drawingBufferWidth,o.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}}(t,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}}(t,r))},line:function(t,i,r,a){if("translucent"===t.renderPass){var n=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==n.constantOr(1)&&0!==o.constantOr(1))for(var s=t.depthModeForSublayer(0,ke.ReadOnly),l=t.colorModeForRenderPass(),u=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),p=c.constantOr(1),h=r.paint.get("line-gradient"),d=r.getCrossfadeParameters(),f=p?"linePattern":u?"lineSDF":h?"lineGradient":"line",_=t.context,m=_.gl,g=!0,y=0,v=a;y<v.length;y+=1){var b=v[y],x=i.getTile(b);if(!p||x.patternsLoaded()){var w=x.getBucket(r);if(w){var S=w.programConfigurations.get(r.id),A=t.context.program.get(),k=t.useProgram(f,S),E=g||k.program!==A,I=c.constantOr(null);if(I&&x.imageAtlas){var T=x.imageAtlas,C=T.patternPositions[I.to.toString()],P=T.patternPositions[I.from.toString()];C&&P&&S.setConstantPatternPositions(C,P)}var L=p?Fi(t,x,r,d):u?Oi(t,x,r,u,d):h?Bi(t,x,r,w.lineClipsArray.length):Di(t,x,r);if(p)_.activeTexture.set(m.TEXTURE0),x.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),S.updatePaintBuffers(d);else if(u&&(E||t.lineAtlas.dirty))_.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(_);else if(h){var R=w.gradients[r.id],M=R.texture;if(r.gradientVersion!==R.version){var z=256;if(r.stepInterpolant){var D=i.getSource().maxzoom,B=b.canonical.z===D?Math.ceil(1<<t.transform.maxZoom-b.canonical.z):1;z=e.clamp(e.nextPowerOfTwo(w.maxLineLength/e.EXTENT*1024*B),256,_.maxTextureSize)}R.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:z,image:R.gradient||void 0,clips:w.lineClipsArray}),R.texture?R.texture.update(R.gradient):R.texture=new e.Texture(_,R.gradient,m.RGBA),R.version=r.gradientVersion,M=R.texture}_.activeTexture.set(m.TEXTURE0),M.bind(r.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}k.draw(_,m.TRIANGLES,s,t.stencilModeForClipping(b),l,Te.disabled,L,r.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,r.paint,t.transform.zoom,S,w.layoutVertexBuffer2),g=!1}}}}},fill:function(t,i,r,a){var n=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===n.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?ke.ReadWrite:ke.ReadOnly);rr(t,i,r,a,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var p=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,ke.ReadOnly);rr(t,i,r,a,p,s,!0)}}},"fill-extrusion":function(e,t,i,r){var a=i.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===e.renderPass){var n=new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D);if(1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1))ar(e,t,i,r,n,Ee.disabled,Ie.disabled),ar(e,t,i,r,n,e.stencilModeFor3D(),e.colorModeForRenderPass());else{var o=e.colorModeForRenderPass();ar(e,t,i,r,n,Ee.disabled,o)}}},hillshade:function(e,t,i,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){for(var a=e.context,n=e.depthModeForSublayer(0,ke.ReadOnly),o=e.colorModeForRenderPass(),s="translucent"===e.renderPass?e.stencilConfigForOverlap(r):[{},r],l=s[0],u=0,c=s[1];u<c.length;u+=1){var p=c[u],h=t.getTile(p);h.needsHillshadePrepare&&"offscreen"===e.renderPass?or(e,h,i,n,Ee.disabled,o):"translucent"===e.renderPass&&nr(e,h,i,n,l[p.overscaledZ],o)}a.viewport.set([0,0,e.width,e.height])}},raster:function(e,t,i,r){if("translucent"===e.renderPass&&0!==i.paint.get("raster-opacity")&&r.length)for(var a=e.context,n=a.gl,o=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),u=o instanceof R?[{},r]:e.stencilConfigForOverlap(r),c=u[0],p=u[1],h=p[p.length-1].overscaledZ,d=!e.options.moving,f=0,_=p;f<_.length;f+=1){var m=_[f],g=e.depthModeForSublayer(m.overscaledZ-h,1===i.paint.get("raster-opacity")?ke.ReadWrite:ke.ReadOnly,n.LESS),y=t.getTile(m),v=e.transform.calculatePosMatrix(m.toUnwrapped(),d);y.registerFadeDuration(i.paint.get("raster-fade-duration"));var b=t.findLoadedParent(m,0),x=sr(y,b,t,i,e.transform),w=void 0,S=void 0,A="nearest"===i.paint.get("raster-resampling")?n.NEAREST:n.LINEAR;a.activeTexture.set(n.TEXTURE0),y.texture.bind(A,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),a.activeTexture.set(n.TEXTURE1),b?(b.texture.bind(A,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,b.tileID.overscaledZ-y.tileID.overscaledZ),S=[y.tileID.canonical.x*w%1,y.tileID.canonical.y*w%1]):y.texture.bind(A,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST);var k=qi(v,S||[0,0],w||1,x,i);o instanceof R?s.draw(a,n.TRIANGLES,g,Ee.disabled,l,Te.disabled,k,i.id,o.boundsBuffer,e.quadTriangleIndexBuffer,o.boundsSegments):s.draw(a,n.TRIANGLES,g,c[m.overscaledZ],l,Te.disabled,k,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}},background:function(e,t,i){var r=i.paint.get("background-color"),a=i.paint.get("background-opacity");if(0!==a){var n=e.context,o=n.gl,s=e.transform,l=s.tileSize,u=i.paint.get("background-pattern");if(!e.isPatternMissing(u)){var c=!u&&1===r.a&&1===a&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass===c){var p=Ee.disabled,h=e.depthModeForSublayer(0,"opaque"===c?ke.ReadWrite:ke.ReadOnly),d=e.colorModeForRenderPass(),f=e.useProgram(u?"backgroundPattern":"background"),_=s.coveringTiles({tileSize:l});u&&(n.activeTexture.set(o.TEXTURE0),e.imageManager.bind(e.context));for(var m=i.getCrossfadeParameters(),g=0,y=_;g<y.length;g+=1){var v=y[g],b=e.transform.calculatePosMatrix(v.toUnwrapped()),x=u?Qi(b,a,e,u,{tileID:v,tileSize:l},m):Hi(b,a,r);f.draw(n,o.TRIANGLES,h,p,d,Te.disabled,x,i.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}}}},debug:function(e,t,i){for(var r=0;r<i.length;r++)mr(e,t,i[r])},custom:function(e,t,i){var r=e.context,a=i.implementation;if("offscreen"===e.renderPass){var n=a.prerender;n&&(e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),n.call(a,r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),r.setColorMode(e.colorModeForRenderPass()),r.setStencilMode(Ee.disabled);var o="3d"===a.renderingMode?new ke(e.context.gl.LEQUAL,ke.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,ke.ReadOnly);r.setDepthMode(o),a.render(r.gl,e.transform.customLayerMatrix()),r.setDirty(),e.setBaseState(),r.bindFramebuffer.set(null)}}},yr=function(e,t){this.context=new Ce(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ot,this.gpuTimers={}};yr.prototype.resize=function(t,i){if(this.width=t*e.browser.devicePixelRatio,this.height=i*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,a=this.style._order;r<a.length;r+=1)this.style._layers[a[r]].resize()},yr.prototype.setup=function(){var t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,Gt.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,Gt.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(a,L.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(1,0),n.emplaceBack(0,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,Gt.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout1ui2;o.emplaceBack(0),o.emplaceBack(1),o.emplaceBack(3),o.emplaceBack(2),o.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(o);var s=new e.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);var l=this.context.gl;this.stencilClearMode=new Ee({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)},yr.prototype.clearStencil=function(){var t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=e.create();e.ortho(r,0,this.width,this.height,0,0,1),e.scale(r,r,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,ke.disabled,this.stencilClearMode,Ie.disabled,Te.disabled,Mi(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},yr.prototype._renderTileClippingMasks=function(e,t){if(this.currentStencilSource!==e.source&&e.isTileClipped()&&t&&t.length){this.currentStencilSource=e.source;var i=this.context,r=i.gl;this.nextStencilID+t.length>256&&this.clearStencil(),i.setColorMode(Ie.disabled),i.setDepthMode(ke.disabled);var a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var n=0,o=t;n<o.length;n+=1){var s=o[n],l=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;a.draw(i,r.TRIANGLES,ke.disabled,new Ee({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE),Ie.disabled,Te.disabled,Mi(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},yr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var e=this.nextStencilID++,t=this.context.gl;return new Ee({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)},yr.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new Ee({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},yr.prototype.stencilConfigForOverlap=function(e){var t,i=this.context.gl,r=e.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=r[r.length-1].overscaledZ,n=r[0].overscaledZ-a+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();for(var o={},s=0;s<n;s++)o[s+a]=new Ee({func:i.GEQUAL,mask:255},s+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=n,[o,r]}return[(t={},t[a]=Ee.disabled,t),r]},yr.prototype.colorModeForRenderPass=function(){var t=this.context.gl;return this._showOverdrawInspector?new Ie([t.CONSTANT_COLOR,t.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Ie.unblended:Ie.alphaBlended},yr.prototype.depthModeForSublayer=function(e,t,i){if(!this.opaquePassEnabledForLayer())return ke.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ke(i||this.context.gl.LEQUAL,t,[r,r])},yr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},yr.prototype.render=function(t,i){var r=this;this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var a=this.style._order,n=this.style.sourceCaches;for(var o in n){var s=n[o];s.used&&s.prepare(this.context)}var l,u,c={},p={},h={};for(var d in n){var f=n[d];c[d]=f.getVisibleCoordinates(),p[d]=c[d].slice().reverse(),h[d]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var _=0;_<a.length;_++)if(this.style._layers[a[_]].is3D()){this.opaquePassCutoff=_;break}this.renderPass="offscreen";for(var m=0,g=a;m<g.length;m+=1){var y=this.style._layers[g[m]];if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var v=p[y.source];("custom"===y.type||v.length)&&this.renderLayer(this,n[y.source],y,v)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[a[this.currentLayer]],x=n[b.source],w=c[b.source];this._renderTileClippingMasks(b,w),this.renderLayer(this,x,b,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){var S=this.style._layers[a[this.currentLayer]],A=n[S.source],k=("symbol"===S.type?h:p)[S.source];this._renderTileClippingMasks(S,c[S.source]),this.renderLayer(this,A,S,k)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach((function(e){e.source&&!e.isHidden(r.transform.zoom)&&(e.source!==(u&&u.id)&&(u=r.style.sourceCaches[e.source]),(!l||l.getSource().maxzoom<u.getSource().maxzoom)&&(l=u))})),l&&gr.debug(this,l,l.getVisibleCoordinates())),this.options.showPadding&&function(e){var t=e.transform.padding;dr(e,e.transform.height-(t.top||0),3,lr),dr(e,t.bottom||0,3,ur),fr(e,t.left||0,3,cr),fr(e,e.transform.width-(t.right||0),3,pr);var i=e.transform.centerPoint;!function(e,t,i,r){_r(e,t-1,i-10,2,20,r),_r(e,t-10,i-1,20,2,r)}(e,i.x,e.transform.height-i.y,hr)}(this),this.context.setDefault()},yr.prototype.renderLayer=function(e,t,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"custom"===i.type||r.length)&&(this.id=i.id,this.gpuTimingStart(i),gr[i.type](e,t,i,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},yr.prototype.gpuTimingStart=function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}},yr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}},yr.prototype.collectGpuTimers=function(){var e=this.gpuTimers;return this.gpuTimers={},e},yr.prototype.queryGpuTimers=function(e){var t={};for(var i in e){var r=e[i],a=this.context.extTimerQuery,n=a.getQueryObjectEXT(r.query,a.QUERY_RESULT_EXT)/1e6;a.deleteQueryEXT(r.query),t[i]=n}return t},yr.prototype.translatePosMatrix=function(t,i,r,a,n){if(!r[0]&&!r[1])return t;var o=n?"map"===a?this.transform.angle:0:"viewport"===a?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[n?r[0]:ht(i,r[0],this.transform.zoom),n?r[1]:ht(i,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c},yr.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},yr.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},yr.prototype.isPatternMissing=function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i},yr.prototype.useProgram=function(e,t){this.cache=this.cache||{};var i=""+e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new xi(this.context,e,yi[e],t,Wi[e],this._showOverdrawInspector)),this.cache[i]},yr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},yr.prototype.setBaseState=function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)},yr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},yr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var vr=function(e,t){this.points=e,this.planes=t};vr.fromInvProjectionMatrix=function(t,i,r){var a=Math.pow(2,r),n=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(i){return e.transformMat4([],i,t)})).map((function(t){return e.scale$1([],t,1/t[3]/i*a)})),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(t){var i=e.sub([],n[t[0]],n[t[1]]),r=e.sub([],n[t[2]],n[t[1]]),a=e.normalize([],e.cross([],i,r)),o=-e.dot(a,n[t[1]]);return a.concat(o)}));return new vr(n,o)};var br=function(t,i){this.min=t,this.max=i,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};br.prototype.quadrant=function(t){for(var i=[t%2==0,t<2],r=e.clone$2(this.min),a=e.clone$2(this.max),n=0;n<i.length;n++)r[n]=i[n]?this.min[n]:this.center[n],a[n]=i[n]?this.center[n]:this.max[n];return a[2]=this.max[2],new br(r,a)},br.prototype.distanceX=function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]},br.prototype.distanceY=function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]},br.prototype.intersects=function(t){for(var i=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,a=0;a<t.planes.length;a++){for(var n=t.planes[a],o=0,s=0;s<i.length;s++)o+=e.dot$1(n,i[s])>=0;if(0===o)return 0;o!==i.length&&(r=!1)}if(r)return 2;for(var l=0;l<3;l++){for(var u=Number.MAX_VALUE,c=-Number.MAX_VALUE,p=0;p<t.points.length;p++){var h=t.points[p][l]-this.min[l];u=Math.min(u,h),c=Math.max(c,h)}if(c<0||u>this.max[l]-this.min[l])return 0}return 1};var xr=function(e,t,i,r){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=r};xr.prototype.interpolate=function(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,r)),this},xr.prototype.getCenter=function(t,i){var r=e.clamp((this.left+t-this.right)/2,0,t),a=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.Point(r,a)},xr.prototype.equals=function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right},xr.prototype.clone=function(){return new xr(this.top,this.bottom,this.left,this.right)},xr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var wr=function(t,i,r,a,n){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==r?0:r,this._maxPitch=null==a?60:a,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xr,this._posMatrixCache={},this._alignedPosMatrixCache={}},Sr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};wr.prototype.clone=function(){var e=new wr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._calcMatrices(),e},Sr.minZoom.get=function(){return this._minZoom},Sr.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},Sr.maxZoom.get=function(){return this._maxZoom},Sr.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},Sr.minPitch.get=function(){return this._minPitch},Sr.minPitch.set=function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))},Sr.maxPitch.get=function(){return this._maxPitch},Sr.maxPitch.set=function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))},Sr.renderWorldCopies.get=function(){return this._renderWorldCopies},Sr.renderWorldCopies.set=function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e},Sr.worldSize.get=function(){return this.tileSize*this.scale},Sr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Sr.size.get=function(){return new e.Point(this.width,this.height)},Sr.bearing.get=function(){return-this.angle/Math.PI*180},Sr.bearing.set=function(t){var i=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Sr.pitch.get=function(){return this._pitch/Math.PI*180},Sr.pitch.set=function(t){var i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())},Sr.fov.get=function(){return this._fov/Math.PI*180},Sr.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},Sr.zoom.get=function(){return this._zoom},Sr.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},Sr.center.get=function(){return this._center},Sr.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},Sr.padding.get=function(){return this._edgeInsets.toJSON()},Sr.padding.set=function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())},Sr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},wr.prototype.isPaddingEqual=function(e){return this._edgeInsets.equals(e)},wr.prototype.interpolatePadding=function(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()},wr.prototype.coveringZoomLevel=function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)},wr.prototype.getVisibleUnwrappedCoordinates=function(t){var i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),a=this.pointCoordinate(new e.Point(this.width,0)),n=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,a.x,n.x,o.x)),l=Math.floor(Math.max(r.x,a.x,n.x,o.x)),u=s-1;u<=l+1;u++)0!==u&&i.push(new e.UnwrappedTileID(u,t));return i},wr.prototype.coveringTiles=function(t){var i=this.coveringZoomLevel(t),r=i;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);var a=e.MercatorCoordinate.fromLngLat(this.center),n=Math.pow(2,i),o=[n*a.x,n*a.y,0],s=vr.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),l=t.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(l=i);var u=function(e){return{aabb:new br([e*n,0,0],[(e+1)*n,n,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}},c=[],p=[],h=i,d=t.reparseOverscaled?r:i;if(this._renderWorldCopies)for(var f=1;f<=3;f++)c.push(u(-f)),c.push(u(f));for(c.push(u(0));c.length>0;){var _=c.pop(),m=_.x,g=_.y,y=_.fullyVisible;if(!y){var v=_.aabb.intersects(s);if(0===v)continue;y=2===v}var b=_.aabb.distanceX(o),x=_.aabb.distanceY(o),w=Math.max(Math.abs(b),Math.abs(x));if(_.zoom===h||w>3+(1<<h-_.zoom)-2&&_.zoom>=l)p.push({tileID:new e.OverscaledTileID(_.zoom===h?d:_.zoom,_.wrap,_.zoom,m,g),distanceSq:e.sqrLen([o[0]-.5-m,o[1]-.5-g])});else for(var S=0;S<4;S++){var A=(m<<1)+S%2,k=(g<<1)+(S>>1);c.push({aabb:_.aabb.quadrant(S),zoom:_.zoom+1,x:A,y:k,wrap:_.wrap,fullyVisible:y})}}return p.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))},wr.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},Sr.unmodified.get=function(){return this._unmodified},wr.prototype.zoomScale=function(e){return Math.pow(2,e)},wr.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},wr.prototype.project=function(t){var i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)},wr.prototype.unproject=function(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()},Sr.point.get=function(){return this.project(this.center)},wr.prototype.setLocationAtPoint=function(t,i){var r=this.pointCoordinate(i),a=this.pointCoordinate(this.centerPoint),n=this.locationCoordinate(t),o=new e.MercatorCoordinate(n.x-(r.x-a.x),n.y-(r.y-a.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())},wr.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},wr.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},wr.prototype.locationCoordinate=function(t){return e.MercatorCoordinate.fromLngLat(t)},wr.prototype.coordinateLocation=function(e){return e.toLngLat()},wr.prototype.pointCoordinate=function(t){var i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(r,r,this.pixelMatrixInverse);var a=i[3],n=r[3],o=i[1]/a,s=r[1]/n,l=i[2]/a,u=r[2]/n,c=l===u?0:(0-l)/(u-l);return new e.MercatorCoordinate(e.number(i[0]/a,r[0]/n,c)/this.worldSize,e.number(o,s,c)/this.worldSize)},wr.prototype.coordinatePoint=function(t){var i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix),new e.Point(i[0]/i[3],i[1]/i[3])},wr.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},wr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},wr.prototype.setMaxBounds=function(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},wr.prototype.calculatePosMatrix=function(t,i){void 0===i&&(i=!1);var r=t.key,a=i?this._alignedPosMatrixCache:this._posMatrixCache;if(a[r])return a[r];var n=t.canonical,o=this.worldSize/this.zoomScale(n.z),s=n.x+Math.pow(2,n.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[s*o,n.y*o,0]),e.scale(l,l,[o/e.EXTENT,o/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),a[r]=new Float32Array(l),a[r]},wr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},wr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,i,r,a,n=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;n=e.mercatorYfromLat(p[1])*this.worldSize,t=(o=e.mercatorYfromLat(p[0])*this.worldSize)-n<u.y?u.y/(o-n):0}if(this.lngRange){var h=this.lngRange;s=e.mercatorXfromLng(h[0])*this.worldSize,i=(l=e.mercatorXfromLng(h[1])*this.worldSize)-s<u.x?u.x/(l-s):0}var d=this.point,f=Math.max(i||0,t||0);if(f)return this.center=this.unproject(new e.Point(i?(l+s)/2:d.x,t?(o+n)/2:d.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var _=d.y,m=u.y/2;_-m<n&&(a=n+m),_+m>o&&(a=o-m)}if(this.lngRange){var g=d.x,y=u.x/2;g-y<s&&(r=s+y),g+y>l&&(r=l-y)}void 0===r&&void 0===a||(this.center=this.unproject(new e.Point(void 0!==r?r:d.x,void 0!==a?a:d.y))),this._unmodified=c,this._constraining=!1}},wr.prototype._calcMatrices=function(){if(this.height){var t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var i=Math.PI/2+this._pitch,r=this._fov*(.5+t.y/this.height),a=Math.sin(r)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-i-r,.01,Math.PI-.01)),n=this.point,o=n.x,s=n.y,l=1.01*(Math.cos(Math.PI/2-this._pitch)*a+this.cameraToCenterDistance),u=this.height/50,c=new Float64Array(16);e.perspective(c,this._fov,this.width/this.height,u,l),c[8]=2*-t.x/this.width,c[9]=2*t.y/this.height,e.scale(c,c,[1,-1,1]),e.translate(c,c,[0,0,-this.cameraToCenterDistance]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle),e.translate(c,c,[-o,-s,0]),this.mercatorMatrix=e.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),e.scale(c,c,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=e.invert([],this.projMatrix);var p=this.width%2/2,h=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),_=o-Math.round(o)+d*p+f*h,m=s-Math.round(s)+d*h+f*p,g=new Float64Array(c);if(e.translate(g,g,[_>.5?_-1:_,m>.5?m-1:m,0]),this.alignedProjMatrix=g,c=e.create(),e.scale(c,c,[this.width/2,-this.height/2,1]),e.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=e.create(),e.scale(c,c,[1,-1,1]),e.translate(c,c,[-1,-1,0]),e.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},wr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var t=this.pointCoordinate(new e.Point(0,0)),i=[t.x*this.worldSize,t.y*this.worldSize,0,1];return e.transformMat4(i,i,this.pixelMatrix)[3]/this.cameraToCenterDistance},wr.prototype.getCameraPoint=function(){var t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))},wr.prototype.getCameraQueryGeometry=function(t){var i=this.getCameraPoint();if(1===t.length)return[t[0],i];for(var r=i.x,a=i.y,n=i.x,o=i.y,s=0,l=t;s<l.length;s+=1){var u=l[s];r=Math.min(r,u.x),a=Math.min(a,u.y),n=Math.max(n,u.x),o=Math.max(o,u.y)}return[new e.Point(r,a),new e.Point(n,a),new e.Point(n,o),new e.Point(r,o),new e.Point(r,a)]},Object.defineProperties(wr.prototype,Sr);var Ar=function(t){var i,r,a,n;this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(i=this._updateHashUnthrottled.bind(this),r=!1,a=null,n=function(){a=null,r&&(i(),a=setTimeout(n,300),r=!1)},function(){return r=!0,a||n(),a})};Ar.prototype.addTo=function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ar.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ar.prototype.getHashString=function(t){var i=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,a=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,a),o=Math.round(i.lng*n)/n,s=Math.round(i.lat*n)/n,l=this._map.getBearing(),u=this._map.getPitch(),c="";if(c+=t?"/"+o+"/"+s+"/"+r:r+"/"+s+"/"+o,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){var p=this._hashName,h=!1,d=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===p?(h=!0,t+"="+c):e})).filter((function(e){return e}));return h||d.push(p+"="+c),"#"+d.join("&")}return"#"+c},Ar.prototype._getCurrentHash=function(){var t,i=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===i._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")},Ar.prototype._onHashChange=function(){var e=this._getCurrentHash();if(e.length>=3&&!e.some((function(e){return isNaN(e)}))){var t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},Ar.prototype._updateHashUnthrottled=function(){var t=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",t)}catch(e){}};var kr={linearity:.3,easing:e.bezier(0,0,.3,1)},Er=e.extend({deceleration:2500,maxSpeed:1400},kr),Ir=e.extend({deceleration:20,maxSpeed:1400},kr),Tr=e.extend({deceleration:1e3,maxSpeed:360},kr),Cr=e.extend({deceleration:1e3,maxSpeed:90},kr),Pr=function(e){this._map=e,this.clear()};function Lr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Rr(t,i,r){var a=r.maxSpeed,n=r.linearity,o=r.deceleration,s=e.clamp(t*n/(i/1e3),-a,a),l=Math.abs(s)/(o*n);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}Pr.prototype.clear=function(){this._inertiaBuffer=[]},Pr.prototype.record=function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})},Pr.prototype._drainInertiaBuffer=function(){for(var t=this._inertiaBuffer,i=e.browser.now();t.length>0&&i-t[0].time>160;)t.shift()},Pr.prototype._onMoveEnd=function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var i={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},r=0,a=this._inertiaBuffer;r<a.length;r+=1){var n=a[r].settings;i.zoom+=n.zoomDelta||0,i.bearing+=n.bearingDelta||0,i.pitch+=n.pitchDelta||0,n.panDelta&&i.pan._add(n.panDelta),n.around&&(i.around=n.around),n.pinchAround&&(i.pinchAround=n.pinchAround)}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){var l=Rr(i.pan.mag(),o,e.extend({},Er,t||{}));s.offset=i.pan.mult(l.amount/i.pan.mag()),s.center=this._map.transform.center,Lr(s,l)}if(i.zoom){var u=Rr(i.zoom,o,Ir);s.zoom=this._map.transform.zoom+u.amount,Lr(s,u)}if(i.bearing){var c=Rr(i.bearing,o,Tr);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),Lr(s,c)}if(i.pitch){var p=Rr(i.pitch,o,Cr);s.pitch=this._map.transform.pitch+p.amount,Lr(s,p)}if(s.zoom||s.bearing){var h=void 0===i.pinchAround?i.around:i.pinchAround;s.around=h?this._map.unproject(h):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}};var Mr=function(t){function r(r,a,n,o){void 0===o&&(o={});var s=i.mousePos(a.getCanvasContainer(),n),l=a.unproject(s);t.call(this,r,e.extend({point:s,lngLat:l,originalEvent:n},o)),this._defaultPrevented=!1,this.target=a}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var a={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,a),r}(e.Event),zr=function(t){function r(r,a,n){var o="touchend"===r?n.changedTouches:n.touches,s=i.touchPos(a.getCanvasContainer(),o),l=s.map((function(e){return a.unproject(e)})),u=s.reduce((function(e,t,i,r){return e.add(t.div(r.length))}),new e.Point(0,0)),c=a.unproject(u);t.call(this,r,{points:s,point:u,lngLats:l,lngLat:c,originalEvent:n}),this._defaultPrevented=!1}t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r;var a={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},a.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,a),r}(e.Event),Dr=function(e){function t(t,i,r){e.call(this,t,{originalEvent:r}),this._defaultPrevented=!1}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={defaultPrevented:{configurable:!0}};return t.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(t.prototype,i),t}(e.Event),Br=function(e,t){this._map=e,this._clickTolerance=t.clickTolerance};Br.prototype.reset=function(){delete this._mousedownPos},Br.prototype.wheel=function(e){return this._firePreventable(new Dr(e.type,this._map,e))},Br.prototype.mousedown=function(e,t){return this._mousedownPos=t,this._firePreventable(new Mr(e.type,this._map,e))},Br.prototype.mouseup=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.click=function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.dblclick=function(e){return this._firePreventable(new Mr(e.type,this._map,e))},Br.prototype.mouseover=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.mouseout=function(e){this._map.fire(new Mr(e.type,this._map,e))},Br.prototype.touchstart=function(e){return this._firePreventable(new zr(e.type,this._map,e))},Br.prototype.touchmove=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype.touchend=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype.touchcancel=function(e){this._map.fire(new zr(e.type,this._map,e))},Br.prototype._firePreventable=function(e){if(this._map.fire(e),e.defaultPrevented)return{}},Br.prototype.isEnabled=function(){return!0},Br.prototype.isActive=function(){return!1},Br.prototype.enable=function(){},Br.prototype.disable=function(){};var Fr=function(e){this._map=e};Fr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Fr.prototype.mousemove=function(e){this._map.fire(new Mr(e.type,this._map,e))},Fr.prototype.mousedown=function(){this._delayContextMenu=!0},Fr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Fr.prototype.contextmenu=function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new Mr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()},Fr.prototype.isEnabled=function(){return!0},Fr.prototype.isActive=function(){return!1},Fr.prototype.enable=function(){},Fr.prototype.disable=function(){};var Or=function(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1};function Nr(e,t){for(var i={},r=0;r<e.length;r++)i[e[r].identifier]=t[r];return i}Or.prototype.isEnabled=function(){return!!this._enabled},Or.prototype.isActive=function(){return!!this._active},Or.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Or.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Or.prototype.mousedown=function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)},Or.prototype.mousemoveWindow=function(e,t){if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var a=this._startPos;this._lastPos=r,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var n=Math.min(a.x,r.x),o=Math.max(a.x,r.x),s=Math.min(a.y,r.y),l=Math.max(a.y,r.y);i.setTransform(this._box,"translate("+n+"px,"+s+"px)"),this._box.style.width=o-n+"px",this._box.style.height=l-s+"px"}}},Or.prototype.mouseupWindow=function(t,r){var a=this;if(this._active&&0===t.button){var n=this._startPos,o=r;if(this.reset(),i.suppressClick(),n.x!==o.x||n.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(n,o,a._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",t)}},Or.prototype.keydown=function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))},Or.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos},Or.prototype._fireEvent=function(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))};var Ur=function(e){this.reset(),this.numTouches=e.numTouches};Ur.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ur.prototype.touchstart=function(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){for(var i=new e.Point(0,0),r=0,a=t;r<a.length;r+=1)i._add(a[r]);return i.div(t.length)}(i),this.touches=Nr(r,i)))},Ur.prototype.touchmove=function(e,t,i){if(!this.aborted&&this.centroid){var r=Nr(i,t);for(var a in this.touches){var n=r[a];(!n||n.dist(this.touches[a])>30)&&(this.aborted=!0)}}},Ur.prototype.touchend=function(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}};var qr=function(e){this.singleTap=new Ur(e),this.numTaps=e.numTaps,this.reset()};qr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},qr.prototype.touchstart=function(e,t,i){this.singleTap.touchstart(e,t,i)},qr.prototype.touchmove=function(e,t,i){this.singleTap.touchmove(e,t,i)},qr.prototype.touchend=function(e,t,i){var r=this.singleTap.touchend(e,t,i);if(r){var a=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(a&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}};var Vr=function(){this._zoomIn=new qr({numTouches:1,numTaps:2}),this._zoomOut=new qr({numTouches:2,numTaps:1}),this.reset()};Vr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Vr.prototype.touchstart=function(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)},Vr.prototype.touchmove=function(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)},Vr.prototype.touchend=function(e,t,i){var r=this,a=this._zoomIn.touchend(e,t,i),n=this._zoomOut.touchend(e,t,i);return a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(a)},{originalEvent:e})}}):n?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(n)},{originalEvent:e})}}):void 0},Vr.prototype.touchcancel=function(){this.reset()},Vr.prototype.enable=function(){this._enabled=!0},Vr.prototype.disable=function(){this._enabled=!1,this.reset()},Vr.prototype.isEnabled=function(){return this._enabled},Vr.prototype.isActive=function(){return this._active};var jr={0:1,2:2},Gr=function(e){this.reset(),this._clickTolerance=e.clickTolerance||1};Gr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Gr.prototype._correctButton=function(e,t){return!1},Gr.prototype._move=function(e,t){return{}},Gr.prototype.mousedown=function(e,t){if(!this._lastPoint){var r=i.mouseButton(e);this._correctButton(e,r)&&(this._lastPoint=t,this._eventButton=r)}},Gr.prototype.mousemoveWindow=function(e,t){var i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){var i=jr[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)},Gr.prototype.mouseupWindow=function(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())},Gr.prototype.enable=function(){this._enabled=!0},Gr.prototype.disable=function(){this._enabled=!1,this.reset()},Gr.prototype.isEnabled=function(){return this._enabled},Gr.prototype.isActive=function(){return this._active};var Kr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.mousedown=function(t,i){e.prototype.mousedown.call(this,t,i),this._lastPoint&&(this._active=!0)},t.prototype._correctButton=function(e,t){return 0===t&&!e.ctrlKey},t.prototype._move=function(e,t){return{around:t,panDelta:t.sub(e)}},t}(Gr),Zr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Gr),Hr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype._correctButton=function(e,t){return 0===t&&e.ctrlKey||2===t},t.prototype._move=function(e,t){var i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}},t.prototype.contextmenu=function(e){e.preventDefault()},t}(Gr),Qr=function(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()};Qr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Qr.prototype.touchstart=function(e,t,i){return this._calculateTransform(e,t,i)},Qr.prototype.touchmove=function(e,t,i){if(this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)},Qr.prototype.touchend=function(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()},Qr.prototype.touchcancel=function(){this.reset()},Qr.prototype._calculateTransform=function(t,i,r){r.length>0&&(this._active=!0);var a=Nr(r,i),n=new e.Point(0,0),o=new e.Point(0,0),s=0;for(var l in a){var u=a[l],c=this._touches[l];c&&(n._add(u),o._add(u.sub(c)),s++,a[l]=u)}if(this._touches=a,!(s<this._minTouches)&&o.mag()){var p=o.div(s);if(this._sum._add(p),!(this._sum.mag()<this._clickTolerance))return{around:n.div(s),panDelta:p}}},Qr.prototype.enable=function(){this._enabled=!0},Qr.prototype.disable=function(){this._enabled=!1,this.reset()},Qr.prototype.isEnabled=function(){return this._enabled},Qr.prototype.isActive=function(){return this._active};var Wr=function(){this.reset()};function Jr(e,t,i){for(var r=0;r<e.length;r++)if(e[r].identifier===i)return t[r]}function Xr(e,t){return Math.log(e/t)/Math.LN2}Wr.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Wr.prototype._start=function(e){},Wr.prototype._move=function(e,t,i){return{}},Wr.prototype.touchstart=function(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))},Wr.prototype.touchmove=function(e,t,i){if(this._firstTwoTouches){e.preventDefault();var r=this._firstTwoTouches,a=r[1],n=Jr(i,t,r[0]),o=Jr(i,t,a);if(n&&o){var s=this._aroundCenter?null:n.add(o).div(2);return this._move([n,o],s,e)}}},Wr.prototype.touchend=function(e,t,r){if(this._firstTwoTouches){var a=this._firstTwoTouches,n=a[1],o=Jr(r,t,a[0]),s=Jr(r,t,n);o&&s||(this._active&&i.suppressClick(),this.reset())}},Wr.prototype.touchcancel=function(){this.reset()},Wr.prototype.enable=function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around},Wr.prototype.disable=function(){this._enabled=!1,this.reset()},Wr.prototype.isEnabled=function(){return this._enabled},Wr.prototype.isActive=function(){return this._active};var Yr=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._distance,delete this._startDistance},t.prototype._start=function(e){this._startDistance=this._distance=e[0].dist(e[1])},t.prototype._move=function(e,t){var i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Xr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xr(this._distance,i),pinchAround:t}},t}(Wr);function $r(e,t){return 180*e.angleWith(t)/Math.PI}var ea=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},t.prototype._start=function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])},t.prototype._move=function(e,t){var i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$r(this._vector,i),pinchAround:t}},t.prototype._isBelowThreshold=function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,i=$r(e,this._startVector);return Math.abs(i)<t},t}(Wr);function ta(e){return Math.abs(e.y)>Math.abs(e.x)}var ia=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.reset=function(){e.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},t.prototype._start=function(e){this._lastPoints=e,ta(e[0].sub(e[1]))&&(this._valid=!1)},t.prototype._move=function(e,t,i){var r=e[0].sub(this._lastPoints[0]),a=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(r,a,i.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(r.y+a.y)/2*-.5}},t.prototype.gestureBeginsVertically=function(e,t,i){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,a=t.mag()>=2;if(r||a){if(!r||!a)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;var n=e.y>0==t.y>0;return ta(e)&&ta(t)&&n}},t}(Wr),ra={panStep:100,bearingStep:15,pitchStep:10},aa=function(){var e=ra;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep};function na(e){return e*(2-e)}aa.prototype.reset=function(){this._active=!1},aa.prototype.keydown=function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=0,r=0,a=0,n=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:i=1;break;case 189:case 109:case 173:i=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),n=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),n=1);break;case 38:e.shiftKey?a=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?a=-1:(e.preventDefault(),o=1);break;default:return}return{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:na,zoom:i?Math.round(l)+i*(e.shiftKey?2:1):l,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+a*t._pitchStep,offset:[-n*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var oa=function(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)};oa.prototype.setZoomRate=function(e){this._defaultZoomRate=e},oa.prototype.setWheelZoomRate=function(e){this._wheelZoomRate=e},oa.prototype.isEnabled=function(){return!!this._enabled},oa.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},oa.prototype.isZooming=function(){return!!this._zooming},oa.prototype.enable=function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},oa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},oa.prototype.wheel=function(t){if(this.isEnabled()){var i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.browser.now(),a=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":a>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(a*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}},oa.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},oa.prototype._start=function(t){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var r=i.mousePos(this._el,t);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},oa.prototype.renderFrame=function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var i=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==a&&(a=1/a);var n="number"==typeof this._targetZoom?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(n*a))),"wheel"===this._type&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var o,s="number"==typeof this._targetZoom?this._targetZoom:i.zoom,l=this._startZoom,u=this._easing,c=!1;if("wheel"===this._type&&l&&u){var p=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),h=u(p);o=e.number(l,s,h),p<1?this._frameId||(this._frameId=!0):c=!0}else o=s,c=!0;return this._active=!0,c&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!c,zoomDelta:o-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},oa.prototype._smoothOutEasing=function(t){var i=e.ease;if(this._prevEase){var r=this._prevEase,a=(e.browser.now()-r.start)/r.duration,n=r.easing(a+.01)-r.easing(a),o=.27/Math.sqrt(n*n+1e-4)*.01,s=Math.sqrt(.0729-o*o);i=e.bezier(o,s,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:i},i},oa.prototype.reset=function(){this._active=!1};var sa=function(e,t){this._clickZoom=e,this._tapZoom=t};sa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},sa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},sa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},sa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var la=function(){this.reset()};la.prototype.reset=function(){this._active=!1},la.prototype.dblclick=function(e,t){return e.preventDefault(),{cameraAnimation:function(i){i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var ua=function(){this._tap=new qr({numTouches:1,numTaps:1}),this.reset()};ua.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ua.prototype.touchstart=function(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))},ua.prototype.touchmove=function(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;var r=t[0],a=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}else this._tap.touchmove(e,t,i)},ua.prototype.touchend=function(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)},ua.prototype.touchcancel=function(){this.reset()},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var ca=function(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i};ca.prototype.enable=function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},ca.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},ca.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},ca.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var pa=function(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i};pa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},pa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},pa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},pa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ha=function(e,t,i,r){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0};ha.prototype.enable=function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ha.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ha.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ha.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ha.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ha.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var da=function(e){return e.zoom||e.drag||e.pitch||e.rotate},fa=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t}(e.Event);function _a(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var ma=function(t,r){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Pr(t),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var a=this._el;this._listeners=[[a,"touchstart",{passive:!0}],[a,"touchmove",{passive:!1}],[a,"touchend",void 0],[a,"touchcancel",void 0],[a,"mousedown",void 0],[a,"mousemove",void 0],[a,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[a,"mouseover",void 0],[a,"mouseout",void 0],[a,"dblclick",void 0],[a,"click",void 0],[a,"keydown",{capture:!1}],[a,"keyup",void 0],[a,"wheel",{passive:!1}],[a,"contextmenu",void 0],[e.window,"blur",void 0]];for(var n=0,o=this._listeners;n<o.length;n+=1){var s=o[n],l=s[0];i.addEventListener(l,s[1],l===e.window.document?this.handleWindowEvent:this.handleEvent,s[2])}};ma.prototype.destroy=function(){for(var t=0,r=this._listeners;t<r.length;t+=1){var a=r[t],n=a[0];i.removeEventListener(n,a[1],n===e.window.document?this.handleWindowEvent:this.handleEvent,a[2])}},ma.prototype._addDefaultHandlers=function(e){var t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new Br(t,e));var r=t.boxZoom=new Or(t,e);this._add("boxZoom",r);var a=new Vr,n=new la;t.doubleClickZoom=new sa(n,a),this._add("tapZoom",a),this._add("clickZoom",n);var o=new ua;this._add("tapDragZoom",o);var s=t.touchPitch=new ia;this._add("touchPitch",s);var l=new Zr(e),u=new Hr(e);t.dragRotate=new pa(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Kr(e),p=new Qr(e);t.dragPan=new ca(i,c,p),this._add("mousePan",c),this._add("touchPan",p,["touchZoom","touchRotate"]);var h=new ea,d=new Yr;t.touchZoomRotate=new ha(i,d,h,o),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);var f=t.scrollZoom=new oa(t,this);this._add("scrollZoom",f,["mousePan"]);var _=t.keyboard=new aa;this._add("keyboard",_),this._add("blockableMapEvent",new Fr(t));for(var m=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];m<g.length;m+=1){var y=g[m];e.interactive&&e[y]&&t[y].enable(e[y])}},ma.prototype._add=function(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t},ma.prototype.stop=function(e){if(!this._updatingCamera){for(var t=0,i=this._handlers;t<i.length;t+=1)i[t].handler.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}},ma.prototype.isActive=function(){for(var e=0,t=this._handlers;e<t.length;e+=1)if(t[e].handler.isActive())return!0;return!1},ma.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},ma.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},ma.prototype.isMoving=function(){return Boolean(da(this._eventsInProgress))||this.isZooming()},ma.prototype._blockedByActive=function(e,t,i){for(var r in e)if(r!==i&&(!t||t.indexOf(r)<0))return!0;return!1},ma.prototype.handleWindowEvent=function(e){this.handleEvent(e,e.type+"Window")},ma.prototype._getMapTouches=function(e){for(var t=[],i=0,r=e;i<r.length;i+=1){var a=r[i];this._el.contains(a.target)&&t.push(a)}return t},ma.prototype.handleEvent=function(e,t){if("blur"!==e.type){this._updatingCamera=!0;for(var r="renderFrame"===e.type?void 0:e,a={needsRenderFrame:!1},n={},o={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?i.touchPos(this._el,s):i.mousePos(this._el,e),u=0,c=this._handlers;u<c.length;u+=1){var p=c[u],h=p.handlerName,d=p.handler,f=p.allowed;if(d.isEnabled()){var _=void 0;this._blockedByActive(o,f,h)?d.reset():d[t||e.type]&&(_=d[t||e.type](e,l,s),this.mergeHandlerResult(a,n,_,h,r),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||d.isActive())&&(o[h]=d)}}var m={};for(var g in this._previousActiveHandlers)o[g]||(m[g]=r);this._previousActiveHandlers=o,(Object.keys(m).length||_a(a))&&(this._changes.push([a,n,m]),this._triggerRenderFrame()),(Object.keys(o).length||_a(a))&&this._map._stop(!0),this._updatingCamera=!1;var y=a.cameraAnimation;y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],y(this._map))}else this.stop(!0)},ma.prototype.mergeHandlerResult=function(t,i,r,a,n){if(r){e.extend(t,r);var o={handlerName:a,originalEvent:r.originalEvent||n};void 0!==r.zoomDelta&&(i.zoom=o),void 0!==r.panDelta&&(i.drag=o),void 0!==r.pitchDelta&&(i.pitch=o),void 0!==r.bearingDelta&&(i.rotate=o)}},ma.prototype._applyChanges=function(){for(var t={},i={},r={},a=0,n=this._changes;a<n.length;a+=1){var o=n[a],s=o[0],l=o[1],u=o[2];s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(i,l),e.extend(r,u)}this._updateMapTransform(t,i,r),this._changes=[]},ma.prototype._updateMapTransform=function(e,t,i){var r=this._map,a=r.transform;if(!_a(e))return this._fireEvents(t,i,!0);var n=e.panDelta,o=e.zoomDelta,s=e.bearingDelta,l=e.pitchDelta,u=e.around,c=e.pinchAround;void 0!==c&&(u=c),r._stop(!0),u=u||r.transform.centerPoint;var p=a.pointLocation(n?u.sub(n):u);s&&(a.bearing+=s),l&&(a.pitch+=l),o&&(a.zoom+=o),a.setLocationAtPoint(p,u),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,i,!0)},ma.prototype._fireEvents=function(t,i,r){var a=this,n=da(this._eventsInProgress),o=da(t),s={};for(var l in t)this._eventsInProgress[l]||(s[l+"start"]=t[l].originalEvent),this._eventsInProgress[l]=t[l];for(var u in!n&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(u,s[u]);for(var c in o&&this._fireEvent("move",o.originalEvent),t)this._fireEvent(c,t[c].originalEvent);var p,h={};for(var d in this._eventsInProgress){var f=this._eventsInProgress[d],_=f.handlerName,m=f.originalEvent;this._handlersById[_].isActive()||(delete this._eventsInProgress[d],h[d+"end"]=p=i[_]||m)}for(var g in h)this._fireEvent(g,h[g]);var y=da(this._eventsInProgress);if(r&&(n||o)&&!y){this._updatingCamera=!0;var v=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),b=function(e){return 0!==e&&-a._bearingSnap<e&&e<a._bearingSnap};v?(b(v.bearing||this._map.getBearing())&&(v.bearing=0),this._map.easeTo(v,{originalEvent:p})):(this._map.fire(new e.Event("moveend",{originalEvent:p})),b(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},ma.prototype._fireEvent=function(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))},ma.prototype._requestFrame=function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){delete e._frameId,e.handleEvent(new fa("renderFrame",{timeStamp:t})),e._applyChanges()}))},ma.prototype._triggerRenderFrame=function(){void 0===this._frameId&&(this._frameId=this._requestFrame())};var ga=function(t){function i(i,r){t.call(this),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=r.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i,i.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},i.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},i.prototype.panBy=function(t,i,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),r)},i.prototype.panTo=function(t,i,r){return this.easeTo(e.extend({center:t},i),r)},i.prototype.getZoom=function(){return this.transform.zoom},i.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},i.prototype.zoomTo=function(t,i,r){return this.easeTo(e.extend({zoom:t},i),r)},i.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},i.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},i.prototype.getBearing=function(){return this.transform.bearing},i.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},i.prototype.getPadding=function(){return this.transform.padding},i.prototype.setPadding=function(e,t){return this.jumpTo({padding:e},t),this},i.prototype.rotateTo=function(t,i,r){return this.easeTo(e.extend({bearing:t},i),r)},i.prototype.resetNorth=function(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this},i.prototype.resetNorthPitch=function(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this},i.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},i.prototype.getPitch=function(){return this.transform.pitch},i.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},i.prototype.cameraForBounds=function(t,i){return t=e.LngLatBounds.convert(t),this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),0,i)},i.prototype._cameraForBoxAndBearing=function(t,i,r,a){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(a=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},a)).padding){var o=a.padding;a.padding={top:o,bottom:o,right:o,left:o}}a.padding=e.extend(n,a.padding);var s=this.transform,l=s.padding,u=s.project(e.LngLat.convert(t)),c=s.project(e.LngLat.convert(i)),p=u.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),d=new e.Point(Math.max(p.x,h.x),Math.max(p.y,h.y)),f=new e.Point(Math.min(p.x,h.x),Math.min(p.y,h.y)),_=d.sub(f),m=(s.width-(l.left+l.right+a.padding.left+a.padding.right))/_.x,g=(s.height-(l.top+l.bottom+a.padding.top+a.padding.bottom))/_.y;if(!(g<0||m<0)){var y=Math.min(s.scaleZoom(s.scale*Math.min(m,g)),a.maxZoom),v=e.Point.convert(a.offset),b=new e.Point(v.x+(a.padding.left-a.padding.right)/2,v.y+(a.padding.top-a.padding.bottom)/2).mult(s.scale/s.zoomScale(y));return{center:s.unproject(u.add(c).div(2).sub(b)),zoom:y,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},i.prototype.fitBounds=function(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)},i.prototype.fitScreenCoordinates=function(t,i,r,a,n){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(i)),r,a),a,n)},i.prototype._fitInternal=function(t,i,r){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,r):this.flyTo(i,r)):this},i.prototype.jumpTo=function(t,i){this.stop();var r=this.transform,a=!1,n=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(a=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(n=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),a&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),n&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),o&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))},i.prototype.easeTo=function(t,i){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);var a=this.transform,n=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),u="zoom"in t?+t.zoom:n,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,p="pitch"in t?+t.pitch:s,h="padding"in t?t.padding:a.padding,d=e.Point.convert(t.offset),f=a.centerPoint.add(d),_=a.pointLocation(f),m=e.LngLat.convert(t.center||_);this._normalizeCenter(m);var g,y,v=a.project(_),b=a.project(m).sub(v),x=a.zoomScale(u-n);t.around&&(g=e.LngLat.convert(t.around),y=a.locationPoint(g));var w={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||u!==n,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||p!==s,this._padding=!a.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,w),this._ease((function(t){if(r._zooming&&(a.zoom=e.number(n,u,t)),r._rotating&&(a.bearing=e.number(o,c,t)),r._pitching&&(a.pitch=e.number(s,p,t)),r._padding&&(a.interpolatePadding(l,h,t),f=a.centerPoint.add(d)),g)a.setLocationAtPoint(g,y);else{var _=a.zoomScale(a.zoom-n),m=u>n?Math.min(2,x):Math.max(.5,x),w=Math.pow(m,1-t),S=a.unproject(v.add(b.mult(t*w)).mult(_));a.setLocationAtPoint(a.renderWorldCopies?S.wrap():S,f)}r._fireMoveEvents(i)}),(function(e){r._afterEase(i,e)}),t),this},i.prototype._prepareEase=function(t,i,r){void 0===r&&(r={}),this._moving=!0,i||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))},i.prototype._fireMoveEvents=function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))},i.prototype._afterEase=function(t,i){if(!this._easeId||!i||this._easeId!==i){delete this._easeId;var r=this._zooming,a=this._rotating,n=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),a&&this.fire(new e.Event("rotateend",t)),n&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}},i.prototype.flyTo=function(t,i){var r=this;if(!t.essential&&e.browser.prefersReducedMotion){var a=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(a,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var n=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,n.minZoom,n.maxZoom):o,p="bearing"in t?this._normalizeBearing(t.bearing,s):s,h="pitch"in t?+t.pitch:l,d="padding"in t?t.padding:n.padding,f=n.zoomScale(c-o),_=e.Point.convert(t.offset),m=n.centerPoint.add(_),g=n.pointLocation(m),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var v=n.project(g),b=n.project(y).sub(v),x=t.curve,w=Math.max(n.width,n.height),S=w/f,A=b.mag();if("minZoom"in t){var k=e.clamp(Math.min(t.minZoom,o,c),n.minZoom,n.maxZoom),E=w/n.zoomScale(k-o);x=Math.sqrt(E/A*2)}var I=x*x;function T(e){var t=(S*S-w*w+(e?-1:1)*I*I*A*A)/(2*(e?S:w)*I*A);return Math.log(Math.sqrt(t*t+1)-t)}function C(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}var L=T(0),R=function(e){return P(L)/P(L+x*e)},M=function(e){return w*((P(L)*(C(t=L+x*e)/P(t))-C(L))/I)/A;var t},z=(T(1)-L)/x;if(Math.abs(A)<1e-6||!isFinite(z)){if(Math.abs(w-S)<1e-6)return this.easeTo(t,i);var D=S<w?-1:1;z=Math.abs(Math.log(S/w))/x,M=function(){return 0},R=function(e){return Math.exp(D*x*e)}}return t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/x:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=s!==p,this._pitching=h!==l,this._padding=!n.isPaddingEqual(d),this._prepareEase(i,!1),this._ease((function(t){var a=t*z,f=1/R(a);n.zoom=1===t?c:o+n.scaleZoom(f),r._rotating&&(n.bearing=e.number(s,p,t)),r._pitching&&(n.pitch=e.number(l,h,t)),r._padding&&(n.interpolatePadding(u,d,t),m=n.centerPoint.add(_));var g=1===t?y:n.unproject(v.add(b.mult(M(a))).mult(f));n.setLocationAtPoint(n.renderWorldCopies?g.wrap():g,m),r._fireMoveEvents(i)}),(function(){return r._afterEase(i)}),t),this},i.prototype.isEasing=function(){return!!this._easeFrameId},i.prototype.stop=function(){return this._stop()},i.prototype._stop=function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this},i.prototype._ease=function(t,i,r){!1===r.animate||0===r.duration?(t(1),i()):(this._easeStart=e.browser.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},i.prototype._renderFrameCallback=function(){var t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},i.prototype._normalizeBearing=function(t,i){t=e.wrap(t,-180,180);var r=Math.abs(t-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t},i.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}},i}(e.Evented),ya=function(t){void 0===t&&(t={}),this.options=t,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};ya.prototype.getDefaultPosition=function(){return"bottom-right"},ya.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},ya.prototype.onRemove=function(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},ya.prototype._updateEditLink=function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=i.reduce((function(e,t,r){return t.value&&(e+=t.key+"="+t.value+(r<i.length-1?"&":"")),e}),"?");t.href=e.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),t.rel="noopener nofollow"}},ya.prototype._updateData=function(e){!e||"metadata"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())},ya.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((function(e){return"string"!=typeof e?"":e}))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var i=this._map.style.sourceCaches;for(var r in i){var a=i[r];if(a.used){var n=a.getSource();n.attribution&&e.indexOf(n.attribution)<0&&e.push(n.attribution)}}e.sort((function(e,t){return e.length-t.length}));var o=(e=e.filter((function(t,i){for(var r=i+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}))).join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},ya.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var va=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};va.prototype.onAdd=function(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");var t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},va.prototype.onRemove=function(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},va.prototype.getDefaultPosition=function(){return"bottom-left"},va.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},va.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},va.prototype._updateCompact=function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}};var ba=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ba.prototype.add=function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t},ba.prototype.remove=function(e){for(var t=this._currentlyRunning,i=0,r=t?this._queue.concat(t):this._queue;i<r.length;i+=1){var a=r[i];if(a.id===e)return void(a.cancelled=!0)}},ba.prototype.run=function(e){void 0===e&&(e=0);var t=this._currentlyRunning=this._queue;this._queue=[];for(var i=0,r=t;i<r.length;i+=1){var a=r[i];if(!a.cancelled&&(a.callback(e),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ba.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var xa={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},wa=e.window.HTMLImageElement,Sa=e.window.HTMLElement,Aa=e.window.ImageBitmap,ka={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ea=function(r){function a(t){var i=this;if(null!=(t=e.extend({},ka,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var a=new wr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies);if(r.call(this,a,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new ba,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},xa,t.locale),this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error("Container '"+t.container+"' not found.")}else{if(!(t.container instanceof Sa))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new ma(this,t),this._hash=t.hash&&new Ar("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new ya({customAttribution:t.customAttribution})),this.addControl(new va,t.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(t){i._update("style"===t.dataType),i.fire(new e.Event(t.dataType+"data",t))})),this.on("dataloading",(function(t){i.fire(new e.Event(t.dataType+"dataloading",t))}))}r&&(a.__proto__=r),(a.prototype=Object.create(r&&r.prototype)).constructor=a;var n={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return a.prototype._getMapId=function(){return this._mapId},a.prototype.addControl=function(t,i){if(void 0===i&&t.getDefaultPosition&&(i=t.getDefaultPosition()),void 0===i&&(i="top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var a=this._controlPositions[i];return-1!==i.indexOf("bottom")?a.insertBefore(r,a.firstChild):a.appendChild(r),this},a.prototype.removeControl=function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this},a.prototype.resize=function(t){var i=this._containerDimensions(),r=i[0],a=i[1];this._resizeCanvas(r,a),this.transform.resize(r,a),this.painter.resize(r,a);var n=!this._moving;return n&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this},a.prototype.getBounds=function(){return this.transform.getBounds()},a.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},a.prototype.setMaxBounds=function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()},a.prototype.setMinZoom=function(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},a.prototype.getMinZoom=function(){return this.transform.minZoom},a.prototype.setMaxZoom=function(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},a.prototype.getMaxZoom=function(){return this.transform.maxZoom},a.prototype.setMinPitch=function(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},a.prototype.getMinPitch=function(){return this.transform.minPitch},a.prototype.setMaxPitch=function(e){if((e=null==e?60:e)>60)throw new Error("maxPitch must be less than or equal to 60");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")},a.prototype.getMaxPitch=function(){return this.transform.maxPitch},a.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},a.prototype.setRenderWorldCopies=function(e){return this.transform.renderWorldCopies=e,this._update()},a.prototype.project=function(t){return this.transform.locationPoint(e.LngLat.convert(t))},a.prototype.unproject=function(t){return this.transform.pointLocation(e.Point.convert(t))},a.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},a.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},a.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},a.prototype._createDelegatedListener=function(e,t,i){var r,a=this;if("mouseenter"===e||"mouseover"===e){var n=!1;return{layer:t,listener:i,delegates:{mousemove:function(r){var o=a.getLayer(t)?a.queryRenderedFeatures(r.point,{layers:[t]}):[];o.length?n||(n=!0,i.call(a,new Mr(e,a,r.originalEvent,{features:o}))):n=!1},mouseout:function(){n=!1}}}}if("mouseleave"===e||"mouseout"===e){var o=!1;return{layer:t,listener:i,delegates:{mousemove:function(r){(a.getLayer(t)?a.queryRenderedFeatures(r.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,i.call(a,new Mr(e,a,r.originalEvent)))},mouseout:function(t){o&&(o=!1,i.call(a,new Mr(e,a,t.originalEvent)))}}}}return{layer:t,listener:i,delegates:(r={},r[e]=function(e){var r=a.getLayer(t)?a.queryRenderedFeatures(e.point,{layers:[t]}):[];r.length&&(e.features=r,i.call(a,e),delete e.features)},r)}},a.prototype.on=function(e,t,i){if(void 0===i)return r.prototype.on.call(this,e,t);var a=this._createDelegatedListener(e,t,i);for(var n in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a),a.delegates)this.on(n,a.delegates[n]);return this},a.prototype.once=function(e,t,i){if(void 0===i)return r.prototype.once.call(this,e,t);var a=this._createDelegatedListener(e,t,i);for(var n in a.delegates)this.once(n,a.delegates[n]);return this},a.prototype.off=function(e,t,i){var a=this;return void 0===i?r.prototype.off.call(this,e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&function(r){for(var n=r[e],o=0;o<n.length;o++){var s=n[o];if(s.layer===t&&s.listener===i){for(var l in s.delegates)a.off(l,s.delegates[l]);return n.splice(o,1),a}}}(this._delegatedListeners),this)},a.prototype.queryRenderedFeatures=function(t,i){if(!this.style)return[];var r;if(void 0!==i||void 0===t||t instanceof e.Point||Array.isArray(t)||(i=t,t=void 0),i=i||{},(t=t||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof t[0])r=[e.Point.convert(t)];else{var a=e.Point.convert(t[0]),n=e.Point.convert(t[1]);r=[a,new e.Point(n.x,a.y),n,new e.Point(a.x,n.y),a]}return this.style.queryRenderedFeatures(r,i,this.transform)},a.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},a.prototype.setStyle=function(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))},a.prototype._getUIString=function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '"+e+"'");return t},a.prototype._updateStyle=function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},a.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},a.prototype._diffStyle=function(t,i){var r=this;if("string"==typeof t){var a=this._requestManager.normalizeStyleURL(t),n=this._requestManager.transformRequest(a,e.ResourceType.Style);e.getJSON(n,(function(t,a){t?r.fire(new e.ErrorEvent(t)):a&&r._updateDiff(a,i)}))}else"object"==typeof t&&this._updateDiff(t,i)},a.prototype._updateDiff=function(t,i){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(t,i)}},a.prototype.getStyle=function(){if(this.style)return this.style.serialize()},a.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},a.prototype.addSource=function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)},a.prototype.isSourceLoaded=function(t){var i=this.style&&this.style.sourceCaches[t];if(void 0!==i)return i.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+t+"'")))},a.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var i=e[t]._tiles;for(var r in i){var a=i[r];if("loaded"!==a.state&&"errored"!==a.state)return!1}}return!0},a.prototype.addSourceType=function(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)},a.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0)},a.prototype.getSource=function(e){return this.style.getSource(e)},a.prototype.addImage=function(t,i,r){void 0===r&&(r={});var a=r.pixelRatio;void 0===a&&(a=1);var n=r.sdf;void 0===n&&(n=!1);var o=r.stretchX,s=r.stretchY,l=r.content;if(this._lazyInitEmptyStyle(),i instanceof wa||Aa&&i instanceof Aa){var u=e.browser.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:u.width,height:u.height},u.data),pixelRatio:a,stretchX:o,stretchY:s,content:l,sdf:n,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=i;this.style.addImage(t,{data:new e.RGBAImage({width:i.width,height:i.height},new Uint8Array(i.data)),pixelRatio:a,stretchX:o,stretchY:s,content:l,sdf:n,version:0,userImage:c}),c.onAdd&&c.onAdd(this,t)}},a.prototype.updateImage=function(t,i){var r=this.style.getImage(t);if(!r)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var a=i instanceof wa||Aa&&i instanceof Aa?e.browser.getImageData(i):i,n=a.width,o=a.height,s=a.data;return void 0===n||void 0===o?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):n!==r.data.width||o!==r.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(i instanceof wa||Aa&&i instanceof Aa)),void this.style.updateImage(t,r))},a.prototype.hasImage=function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},a.prototype.removeImage=function(e){this.style.removeImage(e)},a.prototype.loadImage=function(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)},a.prototype.listImages=function(){return this.style.listImages()},a.prototype.addLayer=function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)},a.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0)},a.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0)},a.prototype.getLayer=function(e){return this.style.getLayer(e)},a.prototype.setLayerZoomRange=function(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)},a.prototype.setFilter=function(e,t,i){return void 0===i&&(i={}),this.style.setFilter(e,t,i),this._update(!0)},a.prototype.getFilter=function(e){return this.style.getFilter(e)},a.prototype.setPaintProperty=function(e,t,i,r){return void 0===r&&(r={}),this.style.setPaintProperty(e,t,i,r),this._update(!0)},a.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},a.prototype.setLayoutProperty=function(e,t,i,r){return void 0===r&&(r={}),this.style.setLayoutProperty(e,t,i,r),this._update(!0)},a.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},a.prototype.setLight=function(e,t){return void 0===t&&(t={}),this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)},a.prototype.getLight=function(){return this.style.getLight()},a.prototype.setFeatureState=function(e,t){return this.style.setFeatureState(e,t),this._update()},a.prototype.removeFeatureState=function(e,t){return this.style.removeFeatureState(e,t),this._update()},a.prototype.getFeatureState=function(e){return this.style.getFeatureState(e)},a.prototype.getContainer=function(){return this._container},a.prototype.getCanvasContainer=function(){return this._canvasContainer},a.prototype.getCanvas=function(){return this._canvas},a.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]},a.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},a.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var a=this._controlContainer=i.create("div","mapboxgl-control-container",e),n=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){n[e]=i.create("div","mapboxgl-ctrl-"+e,a)}))},a.prototype._resizeCanvas=function(t,i){var r=e.browser.devicePixelRatio||1;this._canvas.width=r*t,this._canvas.height=r*i,this._canvas.style.width=t+"px",this._canvas.style.height=i+"px"},a.prototype._setupPainter=function(){var i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);r?(this.painter=new yr(r,this.transform),e.webpSupported.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},a.prototype._contextLost=function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))},a.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))},a.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},a.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this},a.prototype._requestRenderFrame=function(e){return this._update(),this._renderTaskQueue.add(e)},a.prototype._cancelRenderFrame=function(e){this._renderTaskQueue.remove(e)},a.prototype._render=function(t){var i,r=this,a=0,n=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=n.createQueryEXT(),n.beginQueryEXT(n.TIME_ELAPSED_EXT,i),a=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),!this._removed){var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=e.browser.now();this.style.zoomHistory.update(s,l);var u=new e.EvaluationParameters(s,{now:l,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),c=u.crossFadingFactor();1===c&&c===this._crossFadingFactor||(o=!0,this._crossFadingFactor=c),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var p=e.browser.now()-a;n.endQueryEXT(n.TIME_ELAPSED_EXT,i),setTimeout((function(){var t=n.getQueryObjectEXT(i,n.QUERY_RESULT_EXT)/1e6;n.deleteQueryEXT(i),r.fire(new e.Event("gpu-timing-frame",{cpuTime:p,gpuTime:t}))}),50)}if(this.listens("gpu-timing-layer")){var h=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(h);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}var d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new e.Event("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0),this}},a.prototype.remove=function(){this._hash&&this._hash.remove();for(var t=0,i=this._controls;t<i.length;t+=1)i[t].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Ia(this._canvasContainer),Ia(this._controlContainer),Ia(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},a.prototype.triggerRepaint=function(){var t=this;this.style&&!this._frame&&(this._frame=e.browser.frame((function(e){t._frame=null,t._render(e)})))},a.prototype._onWindowOnline=function(){this._update()},a.prototype._onWindowResize=function(e){this._trackResize&&this.resize({originalEvent:e})._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showPadding.get=function(){return!!this._showPadding},n.showPadding.set=function(e){this._showPadding!==e&&(this._showPadding=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},a.prototype._setCacheLimits=function(t,i){e.setCacheLimits(t,i)},n.version.get=function(){return e.version},Object.defineProperties(a.prototype,n),a}(ga);function Ia(e){e.parentNode&&e.parentNode.removeChild(e)}var Ta={showCompass:!0,showZoom:!0,visualizePitch:!1},Ca=function(t){var r=this;this.options=e.extend({},Ta,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){return r._map.zoomIn({},{originalEvent:e})})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){return r._map.zoomOut({},{originalEvent:e})})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:e}):r._map.resetNorth({},{originalEvent:e})})),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ca.prototype._updateZoomButtons=function(){var e=this._map.getZoom();this._zoomInButton.disabled=e===this._map.getMaxZoom(),this._zoomOutButton.disabled=e===this._map.getMinZoom()},Ca.prototype._rotateCompassArrow=function(){var e=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=e},Ca.prototype.onAdd=function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Pa(this._map,this._compass,this.options.visualizePitch)),this._container},Ca.prototype.onRemove=function(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ca.prototype._createButton=function(e,t){var r=i.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r},Ca.prototype._setButtonTitle=function(e,t){var i=this._map._getUIString("NavigationControl."+t);e.title=i,e.setAttribute("aria-label",i)};var Pa=function(t,r,a){void 0===a&&(a=!1),this._clickTolerance=10,this.element=r,this.mouseRotate=new Zr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,a&&(this.mousePitch=new Hr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(r,"mousedown",this.mousedown),i.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(r,"touchmove",this.touchmove),i.addEventListener(r,"touchend",this.touchend),i.addEventListener(r,"touchcancel",this.reset)};function La(t,i,r){if(t=new e.LngLat(t.lng,t.lat),i){var a=new e.LngLat(t.lng-360,t.lat),n=new e.LngLat(t.lng+360,t.lat),o=r.locationPoint(t).distSqr(i);r.locationPoint(a).distSqr(i)<o?t=a:r.locationPoint(n).distSqr(i)<o&&(t=n)}for(;Math.abs(t.lng-r.center.lng)>180;){var s=r.locationPoint(t);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}Pa.prototype.down=function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()},Pa.prototype.move=function(e,t){var i=this.map,r=this.mouseRotate.mousemoveWindow(e,t);if(r&&r.bearingDelta&&i.setBearing(i.getBearing()+r.bearingDelta),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t);a&&a.pitchDelta&&i.setPitch(i.getPitch()+a.pitchDelta)}},Pa.prototype.off=function(){var e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()},Pa.prototype.offTemp=function(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)},Pa.prototype.mousedown=function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)},Pa.prototype.mousemove=function(e){this.move(e,i.mousePos(this.element,e))},Pa.prototype.mouseup=function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()},Pa.prototype.touchstart=function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))},Pa.prototype.touchmove=function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))},Pa.prototype.touchend=function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Pa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var Ra={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ma(e,t,i){var r=e.classList;for(var a in Ra)r.remove("mapboxgl-"+i+"-anchor-"+a);r.add("mapboxgl-"+i+"-anchor-"+t)}var za,Da=function(t){function r(r,a){var n=this;if(t.call(this),(r instanceof e.window.HTMLElement||a)&&(r=e.extend({element:r},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=e.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");var o=i.createNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height","41px"),o.setAttributeNS(null,"width","27px"),o.setAttributeNS(null,"viewBox","0 0 27 41");var s=i.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"fill-rule","nonzero");var u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"transform","translate(3.0, 29.0)"),u.setAttributeNS(null,"fill","#000000");for(var c=0,p=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<p.length;c+=1){var h=p[c],d=i.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",h.rx),d.setAttributeNS(null,"ry",h.ry),u.appendChild(d)}var f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"fill",this._color);var _=i.createNS("http://www.w3.org/2000/svg","path");_.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),f.appendChild(_);var m=i.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"fill","#000000");var g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),m.appendChild(g);var y=i.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),y.setAttributeNS(null,"fill","#FFFFFF");var v=i.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=i.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=i.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),v.appendChild(b),v.appendChild(x),l.appendChild(u),l.appendChild(f),l.appendChild(m),l.appendChild(y),l.appendChild(v),o.appendChild(l),o.setAttributeNS(null,"height",41*this._scale+"px"),o.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(o),this._offset=e.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(e){e.preventDefault()})),this._element.addEventListener("mousedown",(function(e){e.preventDefault()})),this._element.addEventListener("focus",(function(){var e=n._map.getContainer();e.scrollTop=0,e.scrollLeft=0})),Ma(this._element,this._anchor,"marker"),this._popup=null}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=Math.sqrt(Math.pow(13.5,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[t,-1*(24.6+t)],"bottom-right":[-t,-1*(24.6+t)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(e){var t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()},r.prototype._onMapClick=function(e){var t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},r.prototype._update=function(e){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=La(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(t="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),e&&"moveend"!==e.type||(this._pos=this._pos.round()),i.setTransform(this._element,Ra[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+t)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(t){return this._offset=e.Point.convert(t),this._update(),this},r.prototype._onMove=function(t){this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(e){return this._rotation=e||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(e){return this._rotationAlignment=e||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(e.Evented),Ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Fa=0,Oa=!1,Na=function(t){function r(i){t.call(this),this.options=e.extend({},Ba,i),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.onAdd=function(t){var r;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==za?r(za):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){r(za="denied"!==e.state)})):r(za=!!e.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Fa=0,Oa=!1},r.prototype._isOutOfMapMaxBounds=function(e){var t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}},r.prototype._updateCamera=function(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,a=this._map.getBearing(),n=e.extend({bearing:a},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),n,{geolocateSource:!0})},r.prototype._updateMarker=function(t){if(t){var i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),r=t.distanceTo(i),a=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=a+"px",this._circleElement.style.height=a+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&Oa)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(t){var r=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{var n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Da(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Da({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==r._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new e.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Fa--,Oa=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Fa>1?(t={maximumAge:6e5,timeout:0},Oa=!0):(t=this.options.positionOptions,Oa=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(e.Evented),Ua={maxWidth:100,unit:"metric"},qa=function(t){this.options=e.extend({},Ua,t),e.bindAll(["_onMove","setUnit"],this)};function Va(e,t,i){var r=i&&i.maxWidth||100,a=e._container.clientHeight/2,n=e.unproject([0,a]),o=e.unproject([r,a]),s=n.distanceTo(o);if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?ja(t,r,l/5280,e._getUIString("ScaleControl.Miles")):ja(t,r,l,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?ja(t,r,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?ja(t,r,s/1e3,e._getUIString("ScaleControl.Kilometers")):ja(t,r,s,e._getUIString("ScaleControl.Meters"))}function ja(e,t,i,r){var a,n,o,s=(a=i,(n=Math.pow(10,(""+Math.floor(a)).length-1))*(o=(o=a/n)>=10?10:o>=5?5:o>=3?3:o>=2?2:o>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(o)));e.style.width=t*(s/i)+"px",e.innerHTML=s+"&nbsp;"+r}qa.prototype.getDefaultPosition=function(){return"bottom-left"},qa.prototype._onMove=function(){Va(this._map,this._container,this.options)},qa.prototype.onAdd=function(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},qa.prototype.onRemove=function(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},qa.prototype.setUnit=function(e){this.options.unit=e,Va(this._map,this._container,this.options)};var Ga=function(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ga.prototype.onAdd=function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ga.prototype.onRemove=function(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ga.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ga.prototype._setupUI=function(){var t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ga.prototype._updateTitle=function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e},Ga.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ga.prototype._isFullscreen=function(){return this._fullscreen},Ga.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ga.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ka={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Za=function(t){function r(i){t.call(this),this.options=e.extend(Object.create(Ka),i),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return t&&(r.__proto__=t),(r.prototype=Object.create(t&&t.prototype)).constructor=r,r.prototype.addTo=function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(t){return this.setDOMContent(e.window.document.createTextNode(t))},r.prototype.setHTML=function(t){var i,r=e.window.document.createDocumentFragment(),a=e.window.document.createElement("body");for(a.innerHTML=t;i=a.firstChild;)r.appendChild(i);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(e){return this.options.maxWidth=e,this._update(),this},r.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},r.prototype.addClassName=function(e){this._container&&this._container.classList.add(e)},r.prototype.removeClassName=function(e){this._container&&this._container.classList.remove(e)},r.prototype.toggleClassName=function(e){if(this._container)return this._container.classList.toggle(e)},r.prototype._createContent=function(){this._content&&i.remove(this._content),this._content=i.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._onMouseUp=function(e){this._update(e.point)},r.prototype._onMouseMove=function(e){this._update(e.point)},r.prototype._onDrag=function(e){this._update(e.point)},r.prototype._update=function(t){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(e){return r._container.classList.add(e)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=La(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||t)){var a=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat),n=this.options.anchor,o=function t(i){if(i){if("number"==typeof i){var r=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new e.Point(0,0),top:new e.Point(0,i),"top-left":new e.Point(r,r),"top-right":new e.Point(-r,r),bottom:new e.Point(0,-i),"bottom-left":new e.Point(r,-r),"bottom-right":new e.Point(-r,-r),left:new e.Point(i,0),right:new e.Point(-i,0)}}if(i instanceof e.Point||Array.isArray(i)){var a=e.Point.convert(i);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:e.Point.convert(i.center||[0,0]),top:e.Point.convert(i.top||[0,0]),"top-left":e.Point.convert(i["top-left"]||[0,0]),"top-right":e.Point.convert(i["top-right"]||[0,0]),bottom:e.Point.convert(i.bottom||[0,0]),"bottom-left":e.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(i["bottom-right"]||[0,0]),left:e.Point.convert(i.left||[0,0]),right:e.Point.convert(i.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!n){var s,l=this._container.offsetWidth,u=this._container.offsetHeight;s=a.y+o.bottom.y<u?["top"]:a.y>this._map.transform.height-u?["bottom"]:[],a.x<l/2?s.push("left"):a.x>this._map.transform.width-l/2&&s.push("right"),n=0===s.length?"bottom":s.join("-")}var c=a.add(o[n]).round();i.setTransform(this._container,Ra[n]+" translate("+c.x+"px,"+c.y+"px)"),Ma(this._container,n,"popup")}},r.prototype._onClose=function(){this.remove()},r}(e.Evented),Ha={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Ea,NavigationControl:Ca,GeolocateControl:Na,AttributionControl:ya,ScaleControl:qa,FullscreenControl:Ga,Popup:Za,Marker:Da,Style:jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){Oe().acquire(ze)},clearPrewarmedResources:function(){var e=Be;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(ze),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return De.workerCount},set workerCount(e){De.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:""};return Ha})),i}()}));function Z(e){let t;const i=e[8].default,r=o(i,e,e[7],null);return{c(){r&&r.c()},m(e,i){r&&r.m(e,i),t=!0},p(e,t){r&&r.p&&128&t&&l(r,i,e,e[7],t,null,null)},i(e){t||(B(r,e),t=!0)},o(e){F(r,e),t=!1},d(e){r&&r.d(e)}}}function H(e){let t,i,a=e[0]&&Z(e);return{c(){t=h("div"),a&&a.c(),g(t,"id","map"),g(t,"class","svelte-4zwsn0")},m(r,n){c(r,t,n),a&&a.m(t,null),e[9](t),i=!0},p(e,[i]){e[0]?a?(a.p(e,i),1&i&&B(a,1)):(a=Z(e),a.c(),B(a,1),a.m(t,null)):a&&(D={r:0,c:[],p:D},F(a,1,1,(()=>{a=null})),D.r||r(D.c),D=D.p)},i(e){i||(B(a),i=!0)},o(e){F(a),i=!1},d(i){i&&p(t),a&&a.d(),e[9](null)}}}function Q(e,t,i){let r,a,{$$slots:n={},$$scope:o}=t,{worldview:s="US"}=t,{location:l={bounds:[[-10.76,49.864],[1.863,59.479]]}}=t,{style:u}=t,{map:c}=t,{locale:p}=t,{data:h}=t,d=p.split("-")[0]||"en",f=p.split("-")[1]||"US";return l.bounds&&(a={bounds:l.bounds}),w((()=>{const e=document.createElement("link");return e.rel="stylesheet",e.href="https://unpkg.com/mapbox-gl/dist/mapbox-gl.css",e.onload=()=>{K.accessToken="pk.eyJ1IjoicGxhbmVtYWQiLCJhIjoiemdYSVVLRSJ9.g3lbg_eN0kztmsfIPxa9MQ",i(0,c=new K.Map({container:r,style:u,interactive:!0,...a})),K.setRTLTextPlugin("https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js",null,!0);var e=new K.NavigationControl;c.addControl(e,"top-right");var t=new K.ScaleControl({maxWidth:80});c.addControl(t,"bottom-right"),c.on("load",(function(){!function(){const e=["all",["any",["in",s,["get","worldview"]],["==","all",["get","worldview"]]]];c.setFilter("country-boundaries",e),c.setFilter("country-boundaries-outline",e),c.setFilter("admin-boundaries-line",e),c.setLayoutProperty("country-label","visibility","none");let t,i=["ar","en","es","fr","de","it","pt","ru","zh-Hans","zh-Hant","ja","ko","vi"];["zh"].indexOf(d)>=0&&(["CN"].indexOf(f)>=0&&(d="zh-Hans"),["TW","HK","SG"].indexOf(f)>=0&&(d="zh-Hant"));if(i.indexOf(d)>=0)t=["coalesce",["get","name_"+d],["get","name"]],c.setLayoutProperty("country-label","text-field",t);else{let e=["match",["get","iso_3166_1"]];Object.keys(h).forEach((t=>{e.push([h[t].iso_3166_1]),e.push(h[t].name_lang)})),e.push(""),c.setLayoutProperty("country-label","text-field",e),t=["coalesce",["get","name_en"],["get","name"]]}c.setLayoutProperty("settlement-minor-label","text-field",t),c.setLayoutProperty("settlement-major-label","text-field",t),c.addLayer({id:"capital-location",type:"circle",source:{type:"geojson",data:null},paint:{"circle-radius":3,"circle-color":"hsla(355, 100%, 50%, 0.5)","circle-stroke-color":"white","circle-stroke-width":1},layout:{}})}()}))},document.head.appendChild(e),()=>{c.remove(),e.parentNode.removeChild(e)}})),e.$$set=e=>{"worldview"in e&&i(2,s=e.worldview),"location"in e&&i(3,l=e.location),"style"in e&&i(4,u=e.style),"map"in e&&i(0,c=e.map),"locale"in e&&i(5,p=e.locale),"data"in e&&i(6,h=e.data),"$$scope"in e&&i(7,o=e.$$scope)},[c,r,s,l,u,p,h,o,n,function(e){A[e?"unshift":"push"]((()=>{r=e,i(1,r)}))}]}class W extends j{constructor(e){super(),V(this,e,Q,H,n,{worldview:2,location:3,style:4,map:0,locale:5,data:6})}}async function J(e){let t=await fetch("https://query.wikidata.org/sparql?query="+encodeURIComponent(e),{headers:{accept:"application/sparql-results+json"}});return(await t.json()).results.bindings}function X(e){let t,i;const r=e[1].default,a=o(r,e,e[0],null);return{c(){t=h("div"),a&&a.c(),g(t,"class","svelte-1rdgfc9")},m(e,r){c(e,t,r),a&&a.m(t,null),i=!0},p(e,[t]){a&&a.p&&1&t&&l(a,r,e,e[0],t,null,null)},i(e){i||(B(a,e),i=!0)},o(e){F(a,e),i=!1},d(e){e&&p(t),a&&a.d(e)}}}function Y(e,t,i){let{$$slots:r={},$$scope:a}=t;return e.$$set=e=>{"$$scope"in e&&i(0,a=e.$$scope)},[a,r]}class $ extends j{constructor(e){super(),V(this,e,Y,X,n,{})}}const ee=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,te=new RegExp("^"+ee.source+"(\\s"+ee.source+"){1,}");function ie(e){var t,i=e.split(";"),r=i.pop(),a=(i.shift()||"").split("=").pop(),n=0;function o(e){var t=r.substring(n).match(e);return t?(n+=t[0].length,t[0]):null}function s(){o(/^\s*/)}function l(){s();for(var e,t=0,i=[],r=[i],a=i;e=o(/^(\()/)||o(/^(\))/)||o(/^(,)/)||o(te);){if("("===e)r.push(a),a=[],r[r.length-1].push(a),t++;else if(")"===e){if(0===a.length)return null;if(!(a=r.pop()))return null;if(0===--t)break}else if(","===e)a=[],r[r.length-1].push(a);else{if(e.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(a,e.split(/\s/g).map(parseFloat))}s()}return 0!==t?null:i}function u(){for(var e,t,i=[];t=o(te)||o(/^(,)/);)","===t?(i.push(e),e=[]):t.split(/\s/g).some(isNaN)||(e||(e=[]),Array.prototype.push.apply(e,t.split(/\s/g).map(parseFloat))),s();return e?(i.push(e),i.length?i:null):null}function c(){return function(){if(!o(/^(point(\sz)?)/i))return null;if(s(),!o(/^(\()/))return null;var e=u();return e?(s(),o(/^(\))/)?{type:"Point",coordinates:e[0]}:null):null}()||function(){if(!o(/^(linestring(\sz)?)/i))return null;if(s(),!o(/^(\()/))return null;var e=u();return e&&o(/^(\))/)?{type:"LineString",coordinates:e}:null}()||function(){if(!o(/^(polygon(\sz)?)/i))return null;s();var e=l();return e?{type:"Polygon",coordinates:e}:null}()||function(){if(!o(/^(multipoint)/i))return null;s();var e=r.substring(r.indexOf("(")+1,r.length-1).replace(/\(/g,"").replace(/\)/g,"");r="MULTIPOINT ("+e+")";var t=l();return t?(s(),{type:"MultiPoint",coordinates:t}):null}()||function(){if(!o(/^(multilinestring)/i))return null;s();var e=l();return e?(s(),{type:"MultiLineString",coordinates:e}):null}()||function(){if(!o(/^(multipolygon)/i))return null;s();var e=l();return e?{type:"MultiPolygon",coordinates:e}:null}()||function(){var e,t=[];if(!o(/^(geometrycollection)/i))return null;if(s(),!o(/^(\()/))return null;for(;e=c();)t.push(e),s(),o(/^(,)/),s();return o(/^(\))/)?{type:"GeometryCollection",geometries:t}:null}()}return(t=c())&&a.match(/\d+/)&&(t.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+a}}),t}var re=G((function(e,t){var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();e.exports=t=i.fetch,i.fetch&&(t.default=i.fetch.bind(i)),t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response}));let ae;ae="undefined"==typeof window||window.hasOwnProperty("fetch")?re:fetch;var ne=function(e,t,i,r){return r=r||"Timeout error",i=i||1e4,function(e,t,i){return new Promise(((r,a)=>{setTimeout((()=>{a(i)}),t),e.then(r,a)}))}(ae(e,t=t||{}),i,r)},oe=[{feature_id:"11145394",description:"state",worldview:"IN",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.1995,30.5986]",bounds:"[60.8738,23.7046,75.3843,36.9115]",area_sqkm:"906726",region:"Asia",subregion:"Southern Asia",name:" - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"2494581",description:"state",worldview:"all",iso_3166_1:"KH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KHM",wikidata_id:"Q424",centroid:"[105.133,12.558]",bounds:"[102.3341,10.3531,107.6316,14.69]",area_sqkm:"187279",region:"Asia",subregion:"South-eastern Asia",name:"Cambodia",name_en:"Cambodia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Cambodia", "Kingdom of Cambodia", "kh", "", "Kampuchea", "Camboya", "Campuchia", "Kamboja", "Kambodzha" ], "km": [ "", "" ] }'},{feature_id:"2363413",description:"state",worldview:"all",iso_3166_1:"BF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BFA",wikidata_id:"Q965",centroid:"[-1.1849,12.2601]",bounds:"[-5.5119,9.408799999999999,2.4048,15.0855]",area_sqkm:"281258",region:"Africa",subregion:"Sub-Saharan Africa",name:"Burkina Faso",name_en:"Burkina Faso",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Burkina Faso", "bf", "" ], "fr": [ "Burkina Faso", "Burkina" ] }'},{feature_id:"13635833",description:"state",worldview:"all",iso_3166_1:"ZA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZAF",wikidata_id:"Q258",centroid:"[23.9312,-28.6718]",bounds:"[16.4519,-34.8341,32.8941,-22.125]",area_sqkm:"1408737",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Africa",name_en:"South Africa",disputed:"FALSE",color_group:"2",names:'{ "af": [ "Suid-Afrika", "Republiek van Suid-Afrika" ], "en": [ "South Africa", "Republic of South Africa", "RSA", "SA", "za", "" ], "xh": [ "UMzantsi Afrika", "IRiphabliki yaseMzantsi Afrika" ], "zu": [ "IRiphabliki yaseNingizimu Afrika" ] }'},{feature_id:"12783820",description:"state",worldview:"all",iso_3166_1:"SM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SMR",wikidata_id:"Q238",centroid:"[12.4611,43.942]",bounds:"[12.4038,43.8938,12.5161,43.9919]",area_sqkm:"84",region:"Europe",subregion:"Southern Europe",name:"San Marino",name_en:"San Marino",disputed:"FALSE",color_group:"2",names:'{ "en": [ "San Marino", "sm", "", "Most Serene Republic of San Marino", "SMR" ], "it": [ "San Marino", "Serenissima Repubblica di San Marino", "Repubblica di San Marino" ] }'},{feature_id:"1118708",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",region:"",subregion:"",name:"Demchok disputed area",name_en:"Demchok disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2429428",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"1053172",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",region:"",subregion:"",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2036212",description:"disputed area",worldview:"JP",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"13832400",description:"state",worldview:"US",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"11931835",description:"state",worldview:"all",iso_3166_1:"QA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"QAT",wikidata_id:"Q846",centroid:"[51.1522,25.3174]",bounds:"[50.7501,24.4701,51.6622,26.1833]",area_sqkm:"12848",region:"Asia",subregion:"Western Asia",name:"",name_en:"Qatar",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "", " " ], "en": [ "Qatar", "qa", "State of Qatar", "" ], "fa": [ "" ] }'},{feature_id:"11145394",description:"state",worldview:"JP",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:" - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"13963394",description:"state",worldview:"all",iso_3166_1:"LK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LKA",wikidata_id:"Q854",centroid:"[80.6383,7.8836]",bounds:"[79.65049999999999,5.9216,81.8789,9.835800000000001]",area_sqkm:"66658",region:"Asia",subregion:"Southern Asia",name:"Sri Lanka",name_en:"Sri Lanka",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Sri Lanka", "Democratic Socialist Republic of Sri Lanka", "Ceylon", "Taprobane", "Serendib", "Ceylan", "", "lk", "Lanka, Sri", "sri", "lke", "ce", "Srilanka", "SRI" ], "si": [ " ", "" ], "ta": [ "", "   ", "", "   " ] }'},{feature_id:"1904675",description:"state",worldview:"all",iso_3166_1:"BW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BWA",wikidata_id:"Q963",centroid:"[24.4745,-22.4181]",bounds:"[19.998,-26.9073,29.3714,-17.7782]",area_sqkm:"627274",region:"Africa",subregion:"Sub-Saharan Africa",name:"Botswana",name_en:"Botswana",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Botswana", "Republic of Botswana", "Lefatshe la Botswana", "bw", "", "BOT" ], "tn": [ "Botswana" ] }'},{feature_id:"14422228",description:"state",worldview:"all",iso_3166_1:"SY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYR",wikidata_id:"Q858",centroid:"[38.5585,34.8522]",bounds:"[35.7167,32.3116,42.3764,37.3188]",area_sqkm:"228968",region:"Asia",subregion:"Western Asia",name:"",name_en:"Syria",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "", "", "  ", "  " ], "en": [ "Syria", "sy", "", "Syrian Arab Republic", "SYR" ] }'},{feature_id:"14028996",description:"state",worldview:"all",iso_3166_1:"SD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SDN",wikidata_id:"Q1049",centroid:"[29.7844,15.4506]",bounds:"[21.8143,8.683,38.8492,22.0065]",area_sqkm:"1953663",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Sudan",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "", " " ], "en": [ "Sudan", "Republic of the Sudan", "as-Sdn", "sd", "North Sudan", "the Sudan", "", "Republic of Sudan", "SUD" ] }'},{feature_id:"8786062",description:"state",worldview:"all",iso_3166_1:"MG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDG",wikidata_id:"Q1019",centroid:"[46.6872,-18.9175]",bounds:"[43.1885,-25.6062,50.4861,-11.9488]",area_sqkm:"634137",region:"Africa",subregion:"Sub-Saharan Africa",name:"Madagascar",name_en:"Madagascar",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Madagascar", "mg", "", "Republic of Madagascar", "MAD" ], "fr": [ "Madagascar" ], "mg": [ "Madagasikara", "Repoblikan\'i Madagasikara" ] }'},{feature_id:"4198458",description:"state",worldview:"all",iso_3166_1:"DJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DJI",wikidata_id:"Q977",centroid:"[42.5037,11.8131]",bounds:"[41.7719,10.9157,43.4537,12.7067]",area_sqkm:"22281",region:"Africa",subregion:"Sub-Saharan Africa",name:"Djibouti",name_en:"Djibouti",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Djibouti", "Republic of Djibouti", "Jabuuti", "Gabuuti", "Jbt", "dj", "", "DJI" ], "so": [ "Jabuuti" ] }'},{feature_id:"7344238",description:"state",worldview:"all",iso_3166_1:"IT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ITA",wikidata_id:"Q38",centroid:"[12.5138,42.6725]",bounds:"[6.6266,35.493,18.5205,47.0919]",area_sqkm:"412408",region:"Europe",subregion:"Southern Europe",name:"Italia",name_en:"Italy",disputed:"FALSE",color_group:"6",names:'{ "de": [ "Italien", "Italienische Republik" ], "en": [ "Italy", "Italia", "Italian Republic", "IT", "it", "", "ITA" ], "fr": [ "Italie", "Rpublique Italienne", "Italia", "IT", "ITA" ], "it": [ "Italia", "ITA", "IT", "Repubblica italiana", "it", "" ] }'},{feature_id:"2232820",description:"disputed area",worldview:"CN",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14618853",description:"state",worldview:"all",iso_3166_1:"TZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TZA",wikidata_id:"Q924",centroid:"[34.2541,-6.4017]",bounds:"[29.3908,-11.7613,40.4451,-0.9853]",area_sqkm:"954271",region:"Africa",subregion:"Sub-Saharan Africa",name:"Tanzania",name_en:"Tanzania",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tanzania", "United Republic of Tanzania", "tz", "", "United Republic of Tanganyika and Zanzibar" ], "sw": [ "Tanzania", "Jamhuri ya Muungano wa Tanzania" ] }'},{feature_id:"2429428",description:"disputed area",worldview:"US",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"791028",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN9",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",region:"",subregion:"",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1642996",description:"disputed area",worldview:"CN",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2363892",description:"disputed area",worldview:"US",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2232348",description:"state",worldview:"all",iso_3166_1:"BN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRN",wikidata_id:"Q921",centroid:"[114.5238,4.5256]",bounds:"[114.0758,4.0023,115.3634,5.0459]",area_sqkm:"5898",region:"Asia",subregion:"South-eastern Asia",name:"Brunei Darussalam  ",name_en:"Brunei",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Brunei", "Nation of Brunei, the Abode of Peace", "bn", "Brunei Darussalam", "", "BRN", "BRU" ], "ms": [ "Brunei", "Negara Brunei Darussalam", "Brunei Darussalam" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"10096786",description:"state",worldview:"all",iso_3166_1:"MM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MMR",wikidata_id:"Q836",centroid:"[95.9058,19.5274]",bounds:"[92.1721,9.597899999999999,101.1703,28.5484]",area_sqkm:"731508",region:"Asia",subregion:"South-eastern Asia",name:"",name_en:"Myanmar",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Myanmar", "Burma", "Republic of the Union of Myanmar", "Union of Burma", "MM", "", "BUR", "MYA" ], "my": [ "", "  ", "Burma" ] }'},{feature_id:"12325063",description:"dependent territory",worldview:"all",iso_3166_1:"SH",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"SHN",wikidata_id:"Q34497",centroid:"[-12.2823,-37.1159]",bounds:"[-14.421,-40.3714,-5.6341,-7.8892]",area_sqkm:"428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Saint Helena, Ascension and Tristan da Cunha",name_en:"Saint Helena, Ascension and Tristan da Cunha",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Saint Helena", "St Helena" ] }'},{feature_id:"8917150",description:"state",worldview:"all",iso_3166_1:"MY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MYS",wikidata_id:"Q833",centroid:"[114.6579,3.9511]",bounds:"[99.6407,0.8546,119.2697,7.3806]",area_sqkm:"333082",region:"Asia",subregion:"South-eastern Asia",name:"Malaysia",name_en:"Malaysia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Malaysia", "my", "", "Federation of Malaysia", "Malaysia Federation", "MAS" ], "ms": [ "Malaysia", "", "Persekutuan Malaysia", " " ], "zh-hant": [ "" ] }'},{feature_id:"4591704",description:"state",worldview:"all",iso_3166_1:"GQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNQ",wikidata_id:"Q983",centroid:"[10.4695,1.6342]",bounds:"[5.5989,-1.4676,11.3654,3.7887]",area_sqkm:"27152",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guine quatoriale - Guinea Ecuatorial  Guin Equatorial",name_en:"Equatorial Guinea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Equatorial Guinea", "Republic of Equatorial Guinea", "gq", "", "GEQ" ], "es": [ "Guinea Ecuatorial", "Repblica de Guinea Ecuatorial", "Republica de Guinea Ecuatorial" ] }'},{feature_id:"14225621",description:"state",worldview:"all",iso_3166_1:"SZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWZ",wikidata_id:"Q1050",centroid:"[31.4607,-26.5203]",bounds:"[30.7908,-27.3175,32.1322,-25.7188]",area_sqkm:"19452",region:"Africa",subregion:"Sub-Saharan Africa",name:"eSwatini",name_en:"Eswatini",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Eswatini", "Umbuso weSwatini", "eSwatini", "", "Kingdom of Swaziland", "sz", "Swaziland", "Kingdom of Eswatini", "SWZ" ], "ss": [ "Umbuso weSwatini" ] }'},{feature_id:"6754404",description:"state",worldview:"all",iso_3166_1:"HU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HUN",wikidata_id:"Q28",centroid:"[19.1493,47.1813]",bounds:"[16.1141,45.7372,22.8974,48.5854]",area_sqkm:"136736",region:"Europe",subregion:"Eastern Europe",name:"Magyarorszg",name_en:"Hungary",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Ungarn" ], "en": [ "Hungary", "hu", "", "HUN" ], "hu": [ "Magyarorszg", "Mo.", "hu", "", "harmadik magyar kztrsasg", "Magyar Kztrsasg" ] }'},{feature_id:"1773598",description:"state",worldview:"all",iso_3166_1:"BQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BES",wikidata_id:"Q27561",centroid:"[-68.2465,12.1671]",bounds:"[-68.4207,12.0243,-62.9459,17.6501]",area_sqkm:"325",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bonaire, Sint Eustatius and Saba",name_en:"Bonaire, Sint Eustatius and Saba",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Caribbean Netherlands", "BES islands", "" ] }'},{feature_id:"4722752",description:"state",worldview:"all",iso_3166_1:"EE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EST",wikidata_id:"Q191",centroid:"[25.3668,58.6092]",bounds:"[21.7643,57.5093,28.2099,59.822]",area_sqkm:"84155",region:"Europe",subregion:"Northern Europe",name:"Eesti",name_en:"Estonia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Estonia", "Republic of Estonia", "Estland", "Eesti", "ee", "EST", "" ], "et": [ "Eesti", "Eesti Vabariik" ], "fi": [ "Viro", "Eesti", "Viron tasavalta" ], "ru": [ "", " ", " ", "" ] }'},{feature_id:"14946528",description:"state",worldview:"all",iso_3166_1:"TO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TON",wikidata_id:"Q678",centroid:"[-175.2735,-21.168]",bounds:"[-176.2137,-22.3497,-173.7351,-15.5659]",area_sqkm:"808",region:"Oceania",subregion:"Polynesia",name:"Tonga",name_en:"Tonga",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Tonga", "", "to", "Kingdom of Tonga", "TGA" ], "to": [ "Tonga" ] }'},{feature_id:"7475312",description:"state",worldview:"all",iso_3166_1:"JM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JAM",wikidata_id:"Q766",centroid:"[-77.1598,18.1156]",bounds:"[-78.3687,17.7057,-76.1824,18.5249]",area_sqkm:"11611",region:"Americas",subregion:"Latin America and the Caribbean",name:"Jamaica",name_en:"Jamaica",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Jamaica", "JA", "Commonwealth of Jamaica", "Jamdung", "jm", "", "JAM" ], "jam": [ "Jumieka" ] }'},{feature_id:"15143137",description:"state",worldview:"all",iso_3166_1:"TR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUR",wikidata_id:"Q43",centroid:"[35.5135,39.0251]",bounds:"[25.6652,35.8129,44.8264,42.1046]",area_sqkm:"1007665",region:"Asia",subregion:"Western Asia",name:"Trkiye",name_en:"Turkey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Turkey", "Republic of Turkey", "tr", "", "TUR" ], "tr": [ "Trkiye", "Trkiye Cumhuriyeti", "T.C.", "TC", "tr", "" ] }'},{feature_id:"5378124",description:"state",worldview:"all",iso_3166_1:"GA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GAB",wikidata_id:"Q1000",centroid:"[11.6604,-0.8204]",bounds:"[8.6991,-3.956,14.5281,2.318]",area_sqkm:"265120",region:"Africa",subregion:"Sub-Saharan Africa",name:"Gabon",name_en:"Gabon",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Gabon", "Gabonese Republic", "Rpublique Gabonaise", "ga", "", "Republique Gabonaise", "GAB" ], "fr": [ "Gabon", "Rpublique gabonaise" ] }'},{feature_id:"12128447",description:"state",worldview:"all",iso_3166_1:"RU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RUS",wikidata_id:"Q159",centroid:"[110.0304,65.09690000000001]",bounds:"[-180,41.1853,180,81.8574]",area_sqkm:"34911957",region:"Europe",subregion:"Eastern Europe",name:"",name_en:"Russia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Russia", "Rossiya", "Rossija", "RU", "ru", "Rossijskaja Federatsija", "Russian Federation", "Rossiyskaya Federatsiya", "Rus", "RUS" ], "ru": [ "", " ", "", "" ] }'},{feature_id:"66064479",description:"state",worldview:"US",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"16584881",description:"state",worldview:"all",iso_3166_1:"PH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PHL",wikidata_id:"Q928",centroid:"[120.7409,15.6149]",bounds:"[116.9283,4.5869,126.6053,21.0701]",area_sqkm:"300397",region:"Asia",subregion:"South-eastern Asia",name:"Philippines",name_en:"Philippines",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Philippines", "Republic of the Philippines", "PH", "ph", "the Philippines", "Philippine Islands", "PHL", "RP", "", "PHI" ], "es": [ "Filipinas", "Repblica de Filipinas", "Republica de Filipinas" ], "ceb": [ "Pilipinas", "Republika sa Pilipinas" ] }'},{feature_id:"1642529",description:"state",worldview:"JP",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"66064479",description:"state",worldview:"JP",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"6295638",description:"state",worldview:"all",iso_3166_1:"GN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GIN",wikidata_id:"Q1006",centroid:"[-9.662000000000001,9.945]",bounds:"[-15.0761,7.1905,-7.6374,12.6756]",area_sqkm:"251048",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guine",name_en:"Guinea",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Guinea", "Guinea-Conakry", "Republic of Guinea", "Rpublique de Guine", "gn", "", "Republique de Guinee", "GUI" ], "ff": [ "Gine" ], "fr": [ "Guine", "Guine-Conakry", "Rpublique de Guine" ] }'},{feature_id:"10883193",description:"state",worldview:"all",iso_3166_1:"KP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRK",wikidata_id:"Q423",centroid:"[126.8405,40.3963]",bounds:"[124.1813,37.6769,130.6998,43.009]",area_sqkm:"160141",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"North Korea",disputed:"FALSE",color_group:"3",names:'{ "en": [ "North Korea", "", "Democratic People\'s Republic of Korea", "DPRK", "PRK", "kp", "Dem. Rep. Korea", "N. Korea" ], "ko": [ "", "", "" ] }'},{feature_id:"3084336",description:"state",worldview:"CN",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11717970",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"66130068",description:"state",worldview:"US",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"5902420",description:"state",worldview:"all",iso_3166_1:"GL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRL",wikidata_id:"Q223",centroid:"[-40.4109,76.068]",bounds:"[-73.26349999999999,59.7773,-11.3123,83.62739999999999]",area_sqkm:"8511107",region:"Americas",subregion:"Northern America",name:"Kalaallit Nunaat",name_en:"Greenland",disputed:"FALSE",color_group:"4",names:'{ "da": [ "Grnland" ], "en": [ "Greenland", "gl", "" ], "kl": [ "Kalaallit Nunaat" ] }'},{feature_id:"11014311",description:"state",worldview:"all",iso_3166_1:"NO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NOR",wikidata_id:"Q20",centroid:"[13.6065,65.3651]",bounds:"[4.4976,57.9599,31.1681,71.1855]",area_sqkm:"745444",region:"Europe",subregion:"Northern Europe",name:"Norge",name_en:"Norway",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Norway", "Kingdom of Norway", "Norge", "Norvge", "NO", "NOR", "no", "Noreg", "", "Norwegen" ], "nb": [ "Norge", "Kongeriket Norge", "Noreg", "Kongeriket Norge\\/Noreg" ], "nn": [ "Noreg", "Kongeriket Noreg", "Norge" ] }'},{feature_id:"16519419",description:"state",worldview:"all",iso_3166_1:"ZW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZWE",wikidata_id:"Q954",centroid:"[29.4113,-19.0547]",bounds:"[25.2374,-22.422,33.054,-15.6099]",area_sqkm:"415447",region:"Africa",subregion:"Sub-Saharan Africa",name:"Zimbabwe",name_en:"Zimbabwe",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Zimbabwe", "Republic of Zimbabwe", "Southern Rhodesia", "Rhodesia", "Zimbabwe Rhodesia", "", "zw", "ZIM" ], "sn": [ "Zimbabwe" ] }'},{feature_id:"8327300",description:"state",worldview:"all",iso_3166_1:"LS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LSO",wikidata_id:"Q1013",centroid:"[28.1745,-29.6285]",bounds:"[27.0113,-30.6755,29.4557,-28.5708]",area_sqkm:"35232",region:"Africa",subregion:"Sub-Saharan Africa",name:"Lesotho",name_en:"Lesotho",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Lesotho", "Kingdom of Lesotho", "ls", "", "LES" ], "st": [ "Lesotho", "Mmuso wa Lesotho" ], "zu": [ "OSotho" ] }'},{feature_id:"14094543",description:"state",worldview:"all",iso_3166_1:"SR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SUR",wikidata_id:"Q730",centroid:"[-56.1089,3.923]",bounds:"[-58.0547,1.834,-53.9802,6.0088]",area_sqkm:"146569",region:"Americas",subregion:"Latin America and the Caribbean",name:"Suriname",name_en:"Suriname",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Suriname", "Surinam", "Republic of Suriname", "Republic of Surinam", "Dutch Guiana", "sr", "", "SUR" ], "nl": [ "Suriname", "Republiek Suriname", "SR", "SUR" ], "srn": [ "Sranankondre" ] }'},{feature_id:"10424481",description:"state",worldview:"all",iso_3166_1:"NC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NCL",wikidata_id:"Q33788",centroid:"[165.2478,-21.24]",bounds:"[158.2487,-22.848,172.09,-18.0264]",area_sqkm:"20324",region:"Oceania",subregion:"Melanesia",name:"Nouvelle-Caldonie",name_en:"New Caledonia",disputed:"FALSE",color_group:"7",names:'{ "en": [ "New Caledonia", "nc", "", "Nouvelle-Caldonie" ], "fr": [ "Nouvelle-Caldonie", "La nouvelle caledonie", "Nouvelle caledonie", "Nouvelle Caldonie", "Nouvelle-Caledonie", "New Caledonia", "988" ] }'},{feature_id:"1446388",description:"disputed area",worldview:"IN",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"463348",description:"disputed area",worldview:"all",iso_3166_1:"D0BRUY1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-55.9486,-30.9757]",bounds:"[-56.0185,-31.0871,-55.8127,-30.8647]",area_sqkm:"290",region:"",subregion:"",name:"Rincn de Artigas",name_en:"Rincn de Artigas",disputed:"TRUE",color_group:"",names:""},{feature_id:"1249780",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN5",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",region:"",subregion:"",name:"Chumar disputed area",name_en:"Chumar disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2036212",description:"disputed area",worldview:"US",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"9703562",description:"state",worldview:"all",iso_3166_1:"MC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MCO",wikidata_id:"Q235",centroid:"[7.4243,43.7384]",bounds:"[7.409,43.7246,7.44,43.7519]",area_sqkm:"2",region:"Europe",subregion:"Western Europe",name:"Monaco",name_en:"Monaco",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Monaco", "Principality of Monaco", "mc", "", "MON" ], "fr": [ "Monaco", "Principaut de Monaco", "MON", "mc" ] }'},{feature_id:"1970676",description:"disputed area",worldview:"IN",iso_3166_1:"D0ILPS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",region:"",subregion:"",name:"East Jerusalem",name_en:"East Jerusalem",disputed:"TRUE",color_group:"",names:""},{feature_id:"66130068",description:"state",worldview:"IN",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"16650295",description:"state",worldview:"all",iso_3166_1:"CY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CYP",wikidata_id:"Q229",centroid:"[33.3986,35.1661]",bounds:"[32.2692,34.6323,34.6066,35.7109]",area_sqkm:"10996",region:"Asia",subregion:"Western Asia",name:"",name_en:"Cyprus",disputed:"FALSE",color_group:"1",names:'{ "el": [ "", " " ], "en": [ "Cyprus", "Republic of Cyprus", "cy", "" ], "tr": [ "Kbrs Cumhuriyeti", "Kbrs" ] }'},{feature_id:"12587188",description:"dependent territory",worldview:"all",iso_3166_1:"PM",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"SPM",wikidata_id:"Q34617",centroid:"[-56.3267,46.9642]",bounds:"[-56.406,46.7489,-56.1266,47.145]",area_sqkm:"331",region:"Americas",subregion:"Northern America",name:"Saint-Pierre-et-Miquelon",name_en:"Saint Pierre and Miquelon",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Pierre and Miquelon", "Saint-Pierre-et-Miquelon", "Saint-Pierre et Miquelon", "pm", "St. Pierre and Miquelon", "St Pierre and Miquelon", "" ], "fr": [ "Saint-Pierre-et-Miquelon", "les Saint-Pierre-et-Miquelon", "975" ] }'},{feature_id:"1970210",description:"state",worldview:"all",iso_3166_1:"BV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BVT",wikidata_id:"Q23408",centroid:"[3.3595,-54.4197]",bounds:"[3.2845,-54.4549,3.4333,-54.3864]",area_sqkm:"86",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bouvet Island",name_en:"Bouvet Island",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Bouvet Island", "bv", "", "Bouvetya" ] }'},{feature_id:"528884",description:"disputed area",worldview:"US",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1183763",description:"state",worldview:"all",iso_3166_1:"BD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGD",wikidata_id:"Q902",centroid:"[89.8601,23.7235]",bounds:"[88.0004,20.5751,92.6795,26.6395]",area_sqkm:"155617",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Bangladesh",disputed:"FALSE",color_group:"3",names:'{ "bn": [ "", " ", "bd" ], "en": [ "Bangladesh", "bd", "", "BAN" ] }'},{feature_id:"5640274",description:"state",worldview:"all",iso_3166_1:"GH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GHA",wikidata_id:"Q117",centroid:"[-1.0593,7.9674]",bounds:"[-3.2551,4.7392,1.2001,11.1683]",area_sqkm:"242806",region:"Africa",subregion:"Sub-Saharan Africa",name:"Ghana",name_en:"Ghana",disputed:"FALSE",color_group:"5",names:'{ "ak": [ "Ghana" ], "ee": [ "Ghana" ], "en": [ "Ghana", "Republic of Ghana", "", "gh", "GHA" ] }'},{feature_id:"922100",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN8",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",region:"",subregion:"",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14160073",description:"dependent territory",worldview:"all",iso_3166_1:"SJ",sovereign_iso_3166_1:"NO",iso_3166_1_alpha_3:"SJM",wikidata_id:"Q25231",centroid:"[18.5821,78.4378]",bounds:"[-9.086399999999999,70.8278,37.0668,80.8212]",area_sqkm:"336616",region:"Europe",subregion:"Northern Europe",name:"Svalbard and Jan Mayen",name_en:"Svalbard and Jan Mayen",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Svalbard", "Svaldbard", "Spitsburgen", "Svalbard Archipelago", "Svaalbard", "Svalbard Islands", "Sval\'bard", "Spitzburgen", "Svalbard Island", "Spitzbergen" ], "nb": [ "Svalbard", "Svalbardianer", "Svalbardianar" ], "ru": [ "", "", "", "" ] }'},{feature_id:"10555557",description:"state",worldview:"all",iso_3166_1:"NI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NIC",wikidata_id:"Q811",centroid:"[-85.5806,12.8787]",bounds:"[-87.69029999999999,10.7094,-82.7346,15.0294]",area_sqkm:"132107",region:"Americas",subregion:"Latin America and the Caribbean",name:"Nicaragua",name_en:"Nicaragua",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Nicaragua", "ni", "", "Republic of Nicaragua", "NIC", "NI", "NCA" ], "es": [ "Nicaragua", "Repblica de Nicaragua", "Republica de Nicaragua", "Salve a ti, Nicaragua" ] }'},{feature_id:"397812",description:"disputed area",worldview:"US",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14487780",description:"state",worldview:"US",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"856564",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN7",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",region:"",subregion:"",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1446388",description:"disputed area",worldview:"JP",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"3084336",description:"state",worldview:"IN",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11603523",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"1511449",description:"state",worldview:"all",iso_3166_1:"BJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEN",wikidata_id:"Q962",centroid:"[2.283,9.333299999999999]",bounds:"[0.7798,6.2347,3.8534,12.4092]",area_sqkm:"118068",region:"Africa",subregion:"Sub-Saharan Africa",name:"Bnin",name_en:"Benin",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Benin", "Republic of Benin", "Dahomey", "bj", "", "BEN" ], "fr": [ "Bnin", "La Rpublique du Bnin" ] }'},{feature_id:"8458376",description:"state",worldview:"all",iso_3166_1:"LY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBY",wikidata_id:"Q1016",centroid:"[17.4446,26.5832]",bounds:"[9.392300000000001,19.5087,25.1471,33.1669]",area_sqkm:"1835729",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Libya",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "", "", "", "", "", "", "", " ", " ", " ()", " ()", " ()", " ()" ], "en": [ "Libya", "State of Libya", "ly", "", "LBA" ] }'},{feature_id:"7934197",description:"state",worldview:"US",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosov - ",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"10490027",description:"state",worldview:"all",iso_3166_1:"NZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NZL",wikidata_id:"Q664",centroid:"[171.0074,-43.6656]",bounds:"[-176.8931,-52.6088,178.8243,-34.1292]",area_sqkm:"352083",region:"Oceania",subregion:"Australia and New Zealand",name:"New Zealand",name_en:"New Zealand",disputed:"FALSE",color_group:"3",names:'{ "en": [ "New Zealand", "NZ", "NZL", "Dominion of New Zealand", "Aotearoa", "nz", "" ] }'},{feature_id:"10031263",description:"state",worldview:"all",iso_3166_1:"MZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MOZ",wikidata_id:"Q1029",centroid:"[34.3703,-18.8696]",bounds:"[30.2167,-26.8681,40.8393,-10.4709]",area_sqkm:"826132",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mozambique",name_en:"Mozambique",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Mozambique", "Moambique", "Repblica de Moambique", "MZ", "MOZ", "mz", "", "Republic of Mozambique" ], "pt": [ "Moambique", "Repblica de Moambique", "Republica de Mocambique", "Mocambique" ] }'},{feature_id:"10358950",description:"state",worldview:"all",iso_3166_1:"NL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NLD",wikidata_id:"Q55",centroid:"[5.5869,52.1287]",bounds:"[3.3583,50.7502,7.2275,53.555]",area_sqkm:"57203",region:"Europe",subregion:"Western Europe",name:"Nederland",name_en:"Netherlands",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Niederlande", "Holland", "NL", "nl" ], "en": [ "Netherlands", "Holland", "the Netherlands", "NL", "NED", "Nederland", "nl", "", "Netherlands (after 1945)" ], "fr": [ "Pays-Bas", "Hollande", "NL", "nl", "Les Pays-Bas", "NED", "" ], "nl": [ "Nederland", "NL", "NED", "nl", "NLD" ], "nds": [ "Nedderlannen" ] }'},{feature_id:"1708532",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"6885481",description:"state",worldview:"CN",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.176,35.6733]",area_sqkm:"3403202",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"13045950",description:"state",worldview:"CN",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"266251",description:"dependent territory",worldview:"all",iso_3166_1:"AS",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"ASM",wikidata_id:"Q16641",centroid:"[-170.7511,-14.3018]",bounds:"[-171.0902,-14.5488,-168.1432,-11.0478]",area_sqkm:"216",region:"Oceania",subregion:"Polynesia",name:"American Samoa",name_en:"American Samoa",disputed:"FALSE",color_group:"4",names:'{ "en": [ "American Samoa", "as", "East Samoa", "Samoa (American)", "Territory of American Samoa", "", "U.S. Samoa", "US Samoa", "ASA" ], "sm": [ "Amerika Smoa" ] }'},{feature_id:"66130068",description:"state",worldview:"JP",iso_3166_1:"MO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAC",wikidata_id:"Q14773",centroid:"[113.5643,22.1404]",bounds:"[113.5287,22.1097,113.5983,22.217]",area_sqkm:"34",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Macau",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Macau", "Macao", "Macau Special Administrative Region", "Macau Special Administrative Region of the People\'s Republic of China", "Aomen", "mo", "Macao Special Administrative Region", "Macao Special Administrative Region of the People\'s Republic of China", "Macau SAR", "Macau SAR, China", "Macao SAR", "Macao SAR, China", "" ], "zh-hant": [ "", "", "" ] }'},{feature_id:"6819949",description:"state",worldview:"all",iso_3166_1:"IS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISL",wikidata_id:"Q189",centroid:"[-18.32,65.0123]",bounds:"[-24.5327,63.2958,-13.4946,66.5664]",area_sqkm:"241784",region:"Europe",subregion:"Northern Europe",name:"sland",name_en:"Iceland",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Iceland", "Republic of Iceland", "is", "Island", "", "ISL" ], "is": [ "sland", "Lveldi sland" ] }'},{feature_id:"3084336",description:"state",worldview:"JP",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"987152",description:"state",worldview:"all",iso_3166_1:"AZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AZE",wikidata_id:"Q227",centroid:"[47.7228,40.176]",bounds:"[44.7645,38.3929,50.6248,41.913]",area_sqkm:"113049",region:"Asia",subregion:"Western Asia",name:"Azrbaycan",name_en:"Azerbaijan",disputed:"FALSE",color_group:"1",names:'{ "az": [ "Azrbaycan", "Azrbaycan Respublikas" ], "en": [ "Azerbaijan", "Republic of Azerbaijan", "az", "", "AZE" ] }'},{feature_id:"2297878",description:"state",worldview:"all",iso_3166_1:"BG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BGR",wikidata_id:"Q219",centroid:"[25.195,42.7429]",bounds:"[22.3564,41.2354,28.6119,44.2153]",area_sqkm:"151322",region:"Europe",subregion:"Eastern Europe",name:"",name_en:"Bulgaria",disputed:"FALSE",color_group:"4",names:'{ "bg": [ "", " " ], "en": [ "Bulgaria", "Republic of Bulgaria", "bg", "", "BUL" ], "ru": [ "", "", " " ], "tr": [ "Bulgaristan", "Bulgaristan Cumhuriyeti" ] }'},{feature_id:"15929579",description:"state",worldview:"all",iso_3166_1:"UZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UZB",wikidata_id:"Q265",centroid:"[63.3577,41.5182]",bounds:"[55.9742,37.1818,73.1521,45.5821]",area_sqkm:"605881",region:"Asia",subregion:"Central Asia",name:"Ozbekiston",name_en:"Uzbekistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Uzbekistan", "Republic of Uzbekistan", "uz", "", "UZB" ], "ru": [ "", " " ], "uz": [ "Ozbekiston", "Ozbekiston Respublikasi" ] }'},{feature_id:"921612",description:"state",worldview:"all",iso_3166_1:"AT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUT",wikidata_id:"Q40",centroid:"[14.7915,47.713]",bounds:"[9.5307,46.3721,17.1584,49.0204]",area_sqkm:"124043",region:"Europe",subregion:"Western Europe",name:"sterreich",name_en:"Austria",disputed:"FALSE",color_group:"3",names:'{ "de": [ "sterreich", "Republik sterreich" ], "en": [ "Austria", "sterreich", "Republic of Austria", "Republik sterreich", "AT", "at", "AUT", "" ], "fr": [ "Autriche", "AUT" ], "bar": [ "stareich" ] }'},{feature_id:"10817699",description:"state",worldview:"all",iso_3166_1:"NF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NFK",wikidata_id:"Q31057",centroid:"[167.9588,-29.0289]",bounds:"[167.9149,-29.1318,167.997,-28.9952]",area_sqkm:"43",region:"Oceania",subregion:"Australia and New Zealand",name:"Norfolk Island",name_en:"Norfolk Island",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Norfolk Island", "", "Norfolk Island, Other Territories, Australia", "Norfolk Island, Other Territories" ] }'},{feature_id:"13766778",description:"state",worldview:"all",iso_3166_1:"KR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KOR",wikidata_id:"Q884",centroid:"[127.9592,36.4849]",bounds:"[124.6096,33.1121,131.873,38.6175]",area_sqkm:"124983",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"South Korea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "South Korea", "Republic of Korea", "ROK", "Daehan Minguk", "The Republic of Great Han", "Republic of Great Han", "kr", "Rep. Korea", "S. Korea", "Korea Republic", "Republic of South Korea", "", "KOR" ], "ko": [ "", "", "", "", "", "" ] }'},{feature_id:"922100",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN8",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1259,31.2045]",bounds:"[78.8826,30.9496,79.4173,31.459]",area_sqkm:"1714",region:"",subregion:"",name:"Jadh-Nelang disputed area",name_en:"Jadh-Nelang disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"594420",description:"disputed area",worldview:"all",iso_3166_1:"D0JPRU1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[147.8445,44.9901]",bounds:"[145.3993,43.3607,148.9003,45.5493]",area_sqkm:"7154",region:"",subregion:"",name:"Kuril Islands",name_en:"Kuril Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1446388",description:"disputed area",worldview:"US",iso_3166_1:"D0BTCN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[89.0081,27.5135]",bounds:"[88.9483,27.3998,89.1622,27.6271]",area_sqkm:"187",region:"",subregion:"",name:"Doklam Plateau",name_en:"Doklam Plateau",disputed:"TRUE",color_group:"",names:""},{feature_id:"1380852",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN0",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",region:"",subregion:"",name:"Arunachal Pradash",name_en:"Arunachal Pradash",disputed:"TRUE",color_group:"",names:""},{feature_id:"16716022",description:"state",worldview:"all",iso_3166_1:"XS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XSB",wikidata_id:"Q37362",centroid:"[33.7622,35.0331]",bounds:"[32.7549,34.5623,33.9166,35.1237]",area_sqkm:"311",region:"Asia",subregion:"Western Asia",name:"Sovereign Base Areas of Akrotiri and Dhekelia",name_en:"Sovereign Base Areas of Akrotiri and Dhekelia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Akrotiri and Dhekelia", "Sovereign Base Areas of Akrotiri and Dhekelia" ] }'},{feature_id:"12849361",description:"state",worldview:"all",iso_3166_1:"ST",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"STP",wikidata_id:"Q1039",centroid:"[6.595,0.216]",bounds:"[6.4605,-0.0138,7.4624,1.7015]",area_sqkm:"1009",region:"Africa",subregion:"Sub-Saharan Africa",name:"So Tom e Prncipe",name_en:"So Tom and Prncipe",disputed:"FALSE",color_group:"1",names:'{ "en": [ "So Tom and Prncipe", "Democratic Republic of So Tom and Prncipe", "So Tom og Prncipe", "Sao Tome and Principe", "st", "", "STP" ], "pt": [ "So Tom e Prncipe", "Sao Tome e Principe" ] }'},{feature_id:"7016556",description:"state",worldview:"all",iso_3166_1:"IR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRN",wikidata_id:"Q794",centroid:"[53.7474,32.719]",bounds:"[44.0319,25.0591,63.3209,39.7831]",area_sqkm:"1936614",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Iran",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Iran", "Islamic Republic of Iran", "Persia", "ir", "Islamic Rep. Iran", "", "Republic of Iran" ], "fa": [ "", "  ", "", "", " " ], "azb": [ "" ] }'},{feature_id:"5181520",description:"dependent territory",worldview:"all",iso_3166_1:"GF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"GUF",wikidata_id:"Q3769",centroid:"[-53.0359,3.9351]",bounds:"[-54.53,2.1229,-51.6202,5.7517]",area_sqkm:"84341",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guyane",name_en:"French Guiana",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Guiana", "gf", "", "Guyane", "Guiana (France)", "Guyane franaise" ], "fr": [ "Guyane", "973" ] }'},{feature_id:"4067368",description:"state",worldview:"all",iso_3166_1:"CD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COD",wikidata_id:"Q974",centroid:"[22.4374,-4.0875]",bounds:"[12.2003,-13.4548,31.3328,5.3922]",area_sqkm:"2360347",region:"Africa",subregion:"Sub-Saharan Africa",name:"Rpublique Dmocratique du Congo",name_en:"Democratic Republic of the Congo",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Democratic Republic of the Congo", "DRC", "DR Congo", "Congo-Kinshasa", "Zaire", "Congo", "Democratic Republic of Congo", "cd", "Dem. Republic of the Congo", "Dem. Republic of Congo", "Dem. Rep. Congo", "", "Congo (Kinshasa)", "COD" ], "sw": [ "Jamhuri ya Kidemokrasia ya Kongo" ] }'},{feature_id:"9113753",description:"state",worldview:"all",iso_3166_1:"MT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLT",wikidata_id:"Q233",centroid:"[14.4137,35.9024]",bounds:"[14.1834,35.8062,14.5765,36.0824]",area_sqkm:"392",region:"Europe",subregion:"Southern Europe",name:"Malta",name_en:"Malta",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Malta", "Republic of Malta", "mt", "", "MLT" ], "fr": [ "Malte" ], "it": [ "Malta", "Repubblica di Malta" ], "mt": [ "Malta" ] }'},{feature_id:"15667434",description:"state",worldview:"all",iso_3166_1:"UY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"URY",wikidata_id:"Q77",centroid:"[-55.7992,-32.5631]",bounds:"[-58.4891,-34.9735,-53.1014,-30.0855]",area_sqkm:"213064",region:"Americas",subregion:"Latin America and the Caribbean",name:"Uruguay",name_en:"Uruguay",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Uruguay", "Repblica Oriental del Uruguay", "uy", "", "Republica Oriental del Uruguay", "URU" ], "es": [ "Uruguay", "Repblica Oriental de Uruguay" ] }'},{feature_id:"15077599",description:"state",worldview:"all",iso_3166_1:"TN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUN",wikidata_id:"Q948",centroid:"[8.841200000000001,33.8627]",bounds:"[7.5227,30.2303,11.6112,37.5597]",area_sqkm:"188995",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Tunisia",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "", " ", " ", "" ], "en": [ "Tunisia", "Republic of Tunisia", "Tnis", "Tunisian Republic", "al-Jumhriyyah at-Tnisiyyah", "tn", "", "TUN" ], "fr": [ "Tunisie" ] }'},{feature_id:"13373642",description:"state",worldview:"all",iso_3166_1:"SK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVK",wikidata_id:"Q214",centroid:"[19.6543,48.6813]",bounds:"[16.8334,47.7312,22.5665,49.6138]",area_sqkm:"74312",region:"Europe",subregion:"Eastern Europe",name:"Slovensko",name_en:"Slovakia",disputed:"FALSE",color_group:"2",names:'{ "cs": [ "Slovensko", "Slovensk republika", "Slovensk tt" ], "de": [ "Slowakei", "Slowakische Republik", "Slowakien" ], "en": [ "Slovakia", "Slovak Republic", "sk", "", "SVK" ], "hu": [ "Szlovkia", "Szlovk Kztrsasg", "Felvidk" ], "sk": [ "Slovensko", "Slovensk republika" ] }'},{feature_id:"2035743",description:"state",worldview:"all",iso_3166_1:"BR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRA",wikidata_id:"Q155",centroid:"[-49.7742,-15.1216]",bounds:"[-73.9901,-33.7504,-28.8483,5.2724]",area_sqkm:"8734596",region:"Americas",subregion:"Latin America and the Caribbean",name:"Brasil",name_en:"Brazil",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Brazil", "Federative Republic of Brazil", "Brasil", "Repblica Federativa do Brasil", "Federativa Repblica do Brasil", "Republic Federative of Brasil", "Estados Unidos del Brazil", "BR", "BRA", "Republica Federativa do Brasil", "Federativa Republica do Brasil", "br", "" ], "pt": [ "Brasil", "Repblica Federativa do Brasil", "Brazil" ] }'},{feature_id:"8589445",description:"state",worldview:"all",iso_3166_1:"LT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LTU",wikidata_id:"Q37",centroid:"[24.1282,55.195]",bounds:"[20.9539,53.8988,26.8354,56.4502]",area_sqkm:"114290",region:"Europe",subregion:"Northern Europe",name:"Lietuva",name_en:"Lithuania",disputed:"FALSE",color_group:"6",names:'{ "de": [ "Litauen" ], "en": [ "Lithuania", "Republic of Lithuania", "lt", "Lietuva", "", "LTU" ], "lt": [ "Lietuva", "Lietuvos Respublika" ], "ru": [ "", "Lietuva", " " ] }'},{feature_id:"12914881",description:"state",worldview:"all",iso_3166_1:"SA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SAU",wikidata_id:"Q851",centroid:"[44.1943,24.5136]",bounds:"[34.4953,16.3795,55.6666,32.1537]",area_sqkm:"2121348",region:"Asia",subregion:"Western Asia",name:"",name_en:"Saudi Arabia",disputed:"FALSE",color_group:"6",names:'{ "ar": [ "", " ", " ", "", "  " ], "en": [ "Saudi Arabia", "Kingdom of Saudi Arabia", "", "KSA", "sa" ] }'},{feature_id:"13045950",description:"state",worldview:"US",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"8851612",description:"state",worldview:"all",iso_3166_1:"MW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MWI",wikidata_id:"Q1020",centroid:"[33.7428,-13.2731]",bounds:"[32.6748,-17.1259,35.9173,-9.3622]",area_sqkm:"122428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Malawi",name_en:"Malawi",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Malawi", "Republic of Malawi", "mw", "", "MAW" ], "ny": [ "Malai" ] }'},{feature_id:"14356523",description:"state",worldview:"all",iso_3166_1:"CH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHE",wikidata_id:"Q39",centroid:"[8.4481,46.8224]",bounds:"[5.9559,45.818,10.4921,47.8085]",area_sqkm:"59508",region:"Europe",subregion:"Western Europe",name:"Switzerland",name_en:"Switzerland",disputed:"FALSE",color_group:"5",names:'{ "de": [ "Schweiz", "Schweizerische Eidgenossenschaft", "Eidgenossenschaft", "CH", "SUI", "CHE" ], "en": [ "Switzerland", "Swiss Confederation", "CH", "SUI", "Suisse", "Schweiz", "Svizzera", "", "Swiss" ], "fr": [ "Suisse", "Confdration helvtique", "Confdration suisse", "CH", "SUI", "Helvtie", "" ], "gsw": [ "Schwiz", "Schwiiz, Schwyz (aber nd zverwgsle mit Schwyz, wo e Gmaind, en Bezirk und en Kanton bedte chan)", "Eidgenosseschaft", "Helvezie" ] }'},{feature_id:"12652781",description:"state",worldview:"all",iso_3166_1:"VC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VCT",wikidata_id:"Q757",centroid:"[-61.1949,13.2528]",bounds:"[-61.4611,12.5829,-61.1148,13.3829]",area_sqkm:"401",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Vincent and the Grenadines",name_en:"Saint Vincent and the Grenadines",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Saint Vincent and the Grenadines", "vc", "St. Vincent and the Grenadines", "St Vincent and the Grenadines", "Saint Vincent", "St. Vincent", "St Vincent", "" ] }'},{feature_id:"16322626",description:"state",worldview:"all",iso_3166_1:"EH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESH",wikidata_id:"Q6250",centroid:"[-13.686,24.2721]",bounds:"[-17.1033,20.7697,-8.6663,27.6837]",area_sqkm:"298478",region:"Africa",subregion:"Northern Africa",name:" ",name_en:"Western Sahara",disputed:"FALSE",color_group:"4",names:'{ "ar": [ " ", " " ], "en": [ "Western Sahara", "eh", "West Sahara", "Spanish Sahara", "West-Sahara", "" ] }'},{feature_id:"15274198",description:"dependent territory",worldview:"all",iso_3166_1:"TC",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"TCA",wikidata_id:"Q18221",centroid:"[-71.75920000000001,21.7779]",bounds:"[-72.48220000000001,21.1774,-71.0819,21.9624]",area_sqkm:"1041",region:"Americas",subregion:"Latin America and the Caribbean",name:"Turks and Caicos Islands",name_en:"Turks and Caicos Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Turks and Caicos Islands", "TCI", "", "tc", "Turks & Caicos" ] }'},{feature_id:"6230097",description:"state",worldview:"all",iso_3166_1:"GG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GGY",wikidata_id:"Q25230",centroid:"[-2.5827,49.4632]",bounds:"[-2.6751,49.4002,-2.1586,49.7328]",area_sqkm:"124",region:"Europe",subregion:"Northern Europe",name:"Guernsey",name_en:"Guernsey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Guernsey", "Bailliage de Guernesey", "Bailiwick of Guernsey", "gg", "", "XA-GG", "Lisia", "GGY", "GB-GSY", "GBG", "Great Britain Guernsey" ] }'},{feature_id:"2560047",description:"state",worldview:"all",iso_3166_1:"CM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CMR",wikidata_id:"Q1009",centroid:"[13.6386,7.4045]",bounds:"[8.498699999999999,1.6514,16.1912,13.0809]",area_sqkm:"470320",region:"Africa",subregion:"Sub-Saharan Africa",name:"Cameroun - Cameroon",name_en:"Cameroon",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cameroon", "Republic of Cameroon", "cm", "", "CMR", "CAM" ], "fr": [ "Cameroun", "Rpublique du Cameroun", "CMR" ] }'},{feature_id:"13045950",description:"state",worldview:"IN",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"10948757",description:"dependent territory",worldview:"all",iso_3166_1:"MP",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"MNP",wikidata_id:"Q16644",centroid:"[145.7471,15.1905]",bounds:"[144.885,14.1101,146.066,20.555]",area_sqkm:"515",region:"Oceania",subregion:"Micronesia",name:"Northern Mariana Islands",name_en:"Northern Mariana Islands",disputed:"FALSE",color_group:"4",names:'{ "ch": [ "Notte Marinas", "Sankattan Siha Na Islas Marinas" ], "en": [ "Northern Mariana Islands", "MP", "NMI", "Commonwealth of the Northern Maria Islands", "CNMI", "" ] }'},{feature_id:"6885481",description:"state",worldview:"IN",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[78.64960000000001,23.3717]",bounds:"[68.17449999999999,6.756,97.3954,37.0919]",area_sqkm:"3626444",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"7278695",description:"state",worldview:"all",iso_3166_1:"IL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ISR",wikidata_id:"Q801",centroid:"[34.665,31.434]",bounds:"[34.2678,29.4956,35.8945,33.333]",area_sqkm:"25871",region:"Asia",subregion:"Western Asia",name:"",name_en:"Israel",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "", " ", " " ], "en": [ "Israel", "State of Israel", "il", "", "Holy Land", "the Jewish state", "ISR" ], "he": [ "", " ", " " ], "ru": [ "", " " ] }'},{feature_id:"593924",description:"state",worldview:"all",iso_3166_1:"AG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATG",wikidata_id:"Q781",centroid:"[-61.7945,17.0856]",bounds:"[-62.3473,16.9323,-61.657,17.7294]",area_sqkm:"443",region:"Americas",subregion:"Latin America and the Caribbean",name:"Antigua and Barbuda",name_en:"Antigua and Barbuda",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Antigua and Barbuda", "ag", "", "ANT" ] }'},{feature_id:"6099036",description:"dependent territory",worldview:"all",iso_3166_1:"GU",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"GUM",wikidata_id:"Q16635",centroid:"[144.7579,13.45]",bounds:"[144.618,13.2343,144.9569,13.6542]",area_sqkm:"568",region:"Oceania",subregion:"Micronesia",name:"Guam",name_en:"Guam",disputed:"FALSE",color_group:"4",names:'{ "ch": [ "Guhn" ], "en": [ "Guam", "GU", "", "Territory of Guam" ] }'},{feature_id:"9048209",description:"state",worldview:"all",iso_3166_1:"ML",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MLI",wikidata_id:"Q912",centroid:"[-0.7247,17.4996]",bounds:"[-12.2403,10.1521,4.2493,24.9999]",area_sqkm:"1310878",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mali",name_en:"Mali",disputed:"FALSE",color_group:"1",names:'{ "bm": [ "Mali" ], "en": [ "Mali", "Republic of Mali", "Rpublique du Mali", "ml", "", "Republique du Mali", "MLI" ], "fr": [ "Mali", "Rpublique du Mali" ] }'},{feature_id:"9834636",description:"state",worldview:"all",iso_3166_1:"ME",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNE",wikidata_id:"Q236",centroid:"[19.2878,42.7151]",bounds:"[18.4354,41.8468,20.3555,43.5518]",area_sqkm:"19002",region:"Europe",subregion:"Southern Europe",name:"Crna Gora",name_en:"Montenegro",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Montenegro", "me", "", "MNE" ], "sr": [ " " ], "sr-el": [ "Crna Gora" ] }'},{feature_id:"15864041",description:"state",worldview:"all",iso_3166_1:"US",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"USA",wikidata_id:"Q30",centroid:"[-99.5889,38.1815]",bounds:"[-179.1448,18.9107,179.7749,71.3904]",area_sqkm:"16834531",region:"Americas",subregion:"Northern America",name:"United States",name_en:"United States",disputed:"FALSE",color_group:"4",names:'{ "en": [ "United States of America", "the United States", "the United States of America", "United States", "America", "the States", "U.S.A.", "USA", "U.S.", "US", "the US", "the USA", "US of A", "" ] }'},{feature_id:"13308115",description:"state",worldview:"all",iso_3166_1:"SX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SXM",wikidata_id:"Q26273",centroid:"[-63.0544,18.034]",bounds:"[-63.138,18.0054,-63.0132,18.0626]",area_sqkm:"34",region:"Americas",subregion:"Latin America and the Caribbean",name:"Sint Maarten",name_en:"Sint Maarten",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Sint Maarten", "St. Maarten", "Saint Martin (Dutch part)", "Sint Maarten (Dutch part)", "", "St Martin", "SX", "NL-SX", "Saint Martin" ], "es": [ "Sint Maarten", "San Martn", "San Martin" ] }'},{feature_id:"2363892",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"10227881",description:"state",worldview:"all",iso_3166_1:"NR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NRU",wikidata_id:"Q697",centroid:"[166.9315,-0.5286999999999999]",bounds:"[166.9096,-0.5542,166.9593,-0.5021]",area_sqkm:"22",region:"Oceania",subregion:"Micronesia",name:"Nauru",name_en:"Nauru",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Nauru", "Republic of Nauru", "Pleasant Island", "Naoero", "nr", "" ], "na": [ "Naoero" ] }'},{feature_id:"1511924",description:"disputed area",worldview:"CN",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"397812",description:"disputed area",worldview:"CN",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"US",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2232820",description:"disputed area",worldview:"JP",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"16060652",description:"state",worldview:"all",iso_3166_1:"VA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VAT",wikidata_id:"Q237",centroid:"[12.4532,41.9039]",bounds:"[12.4457,41.9003,12.4585,41.9076]",area_sqkm:"0",region:"Europe",subregion:"Southern Europe",name:"Vatican City",name_en:"Vatican City",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Vatican City", "Vatican City State", "Papal State", "Vatican", "va", "", "The Vatican", "vat", "Status Civitatis Vaticanae", "Stato della Citt del Vaticano", "Citt del Vaticano", "Civitas Vaticana", "State of Vatican City" ], "it": [ "Citt del Vaticano", "Vaticano", "Stato della Citt del Vaticano" ], "la": [ "Civitas Vaticana", "Status Civitatis Vaticanae", "Status Civitatis Vatican" ] }'},{feature_id:"11276471",description:"state",worldview:"all",iso_3166_1:"PS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PSE",wikidata_id:"Q219060",centroid:"[35.2703,31.9492]",bounds:"[34.2186,31.2199,35.5739,32.5525]",area_sqkm:"7187",region:"Asia",subregion:"Western Asia",name:" ",name_en:"Palestine",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "", " " ], "en": [ "State of Palestine", "Palestinian Authority", "PA", "", "Palestinian state", "Palestine" ] }'},{feature_id:"13832400",description:"state",worldview:"IN",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"636626",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"13242566",description:"state",worldview:"all",iso_3166_1:"SG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SGP",wikidata_id:"Q334",centroid:"[103.8297,1.3389]",bounds:"[103.6057,1.1587,104.0855,1.4707]",area_sqkm:"724",region:"Asia",subregion:"South-eastern Asia",name:"Singapore",name_en:"Singapore",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Singapore", "Republic of Singapore", "SG", "sg", "", "Singapore City", "SGP" ], "ms": [ "Singapura" ], "zh": [ "", "", "" ] }'},{feature_id:"8982683",description:"state",worldview:"all",iso_3166_1:"MV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDV",wikidata_id:"Q826",centroid:"[73.09999999999999,-0.6321]",bounds:"[72.6392,-0.7037,73.75960000000001,7.1064]",area_sqkm:"226",region:"Asia",subregion:"Southern Asia",name:"Maldives",name_en:"Maldives",disputed:"FALSE",color_group:"2",names:'{ "dv": [ "", " ", " " ], "en": [ "Maldives", "mv", "", "Republic of Maldives", "MDV" ] }'},{feature_id:"397320",description:"state",worldview:"all",iso_3166_1:"AO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AGO",wikidata_id:"Q916",centroid:"[18.8562,-12.005]",bounds:"[11.6693,-18.0395,24.0837,-4.3607]",area_sqkm:"1290030",region:"Africa",subregion:"Sub-Saharan Africa",name:"Angola",name_en:"Angola",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Angola", "Republic of Angola", "ao", "", "Ngola", "ANG" ], "pt": [ "Angola" ] }'},{feature_id:"4984903",description:"state",worldview:"all",iso_3166_1:"FJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FJI",wikidata_id:"Q712",centroid:"[177.9783,-17.7941]",bounds:"[-180,-21.0424,179.9999,-12.4617]",area_sqkm:"19940",region:"Oceania",subregion:"Melanesia",name:"Fiji",name_en:"Fiji",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Fiji", "Republic of Fiji", "fj", "", "FIJ" ], "fj": [ "Viti", "Matanitu Tugalala o Viti" ], "hi": [ "" ], "hif": [ "Fiji" ] }'},{feature_id:"4853832",description:"dependent territory",worldview:"all",iso_3166_1:"FK",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"FLK",wikidata_id:"Q9648",centroid:"[-58.6015,-51.8]",bounds:"[-61.4563,-52.9191,-57.7147,-50.9967]",area_sqkm:"19459",region:"Americas",subregion:"Latin America and the Caribbean",name:"Falkland Islands (Islas Malvinas)",name_en:"Falkland Islands (Islas Malvinas)",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Falkland Islands", "Falklands", "Malvinas", "Islas Malvinas", "fk", "flk", "" ] }'},{feature_id:"13897796",description:"state",worldview:"all",iso_3166_1:"ES",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ESP",wikidata_id:"Q29",centroid:"[-3.4204,40.0061]",bounds:"[-18.1608,27.6378,4.3277,43.7904]",area_sqkm:"667403",region:"Europe",subregion:"Southern Europe",name:"Espaa",name_en:"Spain",disputed:"FALSE",color_group:"4",names:'{ "ca": [ "Espanya", "Regne d\'Espanya", "ES", "ESP", "Estat espanyol", "" ], "en": [ "Spain", "Espaa", "Kingdom of Spain", "ES", "ESP", "" ], "es": [ "Espaa", "Reino de Espaa", "ES", "ESP", "Estado espaol", "" ] }'},{feature_id:"528393",description:"state",worldview:"all",iso_3166_1:"AQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ATA",wikidata_id:"Q51",centroid:"[63.6432,-78.41679999999999]",bounds:"[-180,-85.05110000000001,180,-60.5155]",area_sqkm:"58466582",region:"Antarctica",subregion:"Antarctica",name:"Antarctica",name_en:"Antarctica",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Antarctica" ] }'},{feature_id:"15536130",description:"state",worldview:"all",iso_3166_1:"AE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARE",wikidata_id:"Q878",centroid:"[55.1509,24.3653]",bounds:"[51.498,22.6282,56.3816,26.0788]",area_sqkm:"78088",region:"Asia",subregion:"Western Asia",name:"  ",name_en:"United Arab Emirates",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "  ", "", "   " ], "en": [ "United Arab Emirates", "U.A.E.", "", "UAE", "ae", "Emirates", "the United Arab Emirates", "the UAE", "the U.A.E.", "the Emirates" ] }'},{feature_id:"7213160",description:"state",worldview:"all",iso_3166_1:"IM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IMN",wikidata_id:"Q9676",centroid:"[-4.5149,54.2362]",bounds:"[-4.8307,54.0431,-4.3079,54.4181]",area_sqkm:"978",region:"Europe",subregion:"Northern Europe",name:"Isle of Man",name_en:"Isle of Man",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Isle of Man", "Ellan Vannin", "Mann", "the Isle of Man", "im", "Manx", "" ] }'},{feature_id:"3018798",description:"state",worldview:"all",iso_3166_1:"CL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHL",wikidata_id:"Q298",centroid:"[-72.3188,-37.8958]",bounds:"[-109.4498,-55.982,-66.4148,-17.4986]",area_sqkm:"1020689",region:"Americas",subregion:"Latin America and the Caribbean",name:"Chile",name_en:"Chile",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Chile", "cl", "Repblica de Chile", "", "Republica de Chile", "Republic of Chile", "CHI" ], "es": [ "Chile", "Repblica de Chile", "Republica de Chile" ] }'},{feature_id:"462853",description:"dependent territory",worldview:"all",iso_3166_1:"AI",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"AIA",wikidata_id:"Q25228",centroid:"[-63.0406,18.2177]",bounds:"[-63.4296,18.1491,-62.9244,18.5953]",area_sqkm:"84",region:"Americas",subregion:"Latin America and the Caribbean",name:"Anguilla",name_en:"Anguilla",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Anguilla", "ai", "" ] }'},{feature_id:"266740",description:"disputed area",worldview:"all",iso_3166_1:"D0EGSD1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.5497,22.5762]",bounds:"[34.0814,22,36.8944,23.1463]",area_sqkm:"19449",region:"",subregion:"",name:"Hala'ib Triangle",name_en:"Hala'ib Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"70132",description:"disputed area",worldview:"all",iso_3166_1:"D0SDSS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[24.1191,9.260199999999999]",bounds:"[23.4407,8.683,24.8471,9.8377]",area_sqkm:"13301",region:"",subregion:"",name:"Kafia Kingi",name_en:"Kafia Kingi",disputed:"TRUE",color_group:"",names:""},{feature_id:"856077",description:"state",worldview:"all",iso_3166_1:"AU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AUS",wikidata_id:"Q408",centroid:"[133.5282,-25.7567]",bounds:"[72.5827,-54.778,167.997,-9.142200000000001]",area_sqkm:"8694425",region:"Oceania",subregion:"Australia and New Zealand",name:"Australia",name_en:"Australia",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Australia", "Commonwealth of Australia", "AU", "AUS", "au", "British Colony of Australia", "", "Straya" ] }'},{feature_id:"11145394",description:"state",worldview:"US",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:" - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"16453882",description:"state",worldview:"all",iso_3166_1:"ZM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ZMB",wikidata_id:"Q953",centroid:"[25.4621,-13.2073]",bounds:"[22,-18.0765,33.703,-8.2415]",area_sqkm:"778428",region:"Africa",subregion:"Sub-Saharan Africa",name:"Zambia",name_en:"Zambia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Zambia", "Republic of Zambia", "zm", "ZAM", "" ], "ny": [ "Zambia" ] }'},{feature_id:"13832400",description:"state",worldview:"JP",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"6688865",description:"state",worldview:"all",iso_3166_1:"HN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HND",wikidata_id:"Q783",centroid:"[-87.2195,14.5108]",bounds:"[-89.35639999999999,12.9837,-83.1358,17.4177]",area_sqkm:"116438",region:"Americas",subregion:"Latin America and the Caribbean",name:"Honduras",name_en:"Honduras",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Honduras", "hn", "", "Republic of Honduras", "Honduran Republic", "HON" ], "es": [ "Honduras", "Repblica de Honduras" ] }'},{feature_id:"14749917",description:"state",worldview:"all",iso_3166_1:"TL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TLS",wikidata_id:"Q574",centroid:"[125.7585,-8.891500000000001]",bounds:"[124.043,-9.5036,127.3423,-8.126899999999999]",area_sqkm:"15203",region:"Asia",subregion:"South-eastern Asia",name:"Timor-Leste - Timor Lorosae",name_en:"East Timor",disputed:"FALSE",color_group:"2",names:'{ "en": [ "East Timor", "Democratic Republic of Timor-Leste", "Timor-Leste", "tl", "", "Timor Leste", "Democratic Republic of East Timor", "TLS" ], "pt": [ "Timor-Leste", "Timor Leste" ], "tet": [ "Timor-Leste" ] }'},{feature_id:"1380852",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN0",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[94.0334,28.1416]",bounds:"[91.56229999999999,26.8862,97.3954,29.3827]",area_sqkm:"77393",region:"",subregion:"",name:"Arunachal Pradash",name_en:"Arunachal Pradash",disputed:"TRUE",color_group:"",names:""},{feature_id:"659466",description:"state",worldview:"all",iso_3166_1:"AR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARG",wikidata_id:"Q414",centroid:"[-64.9932,-38.6979]",bounds:"[-73.56529999999999,-55.0572,-53.6358,-21.7815]",area_sqkm:"3369093",region:"Americas",subregion:"Latin America and the Caribbean",name:"Argentina",name_en:"Argentina",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Argentina", "AR", "ar", "", "Argentine Republic", "ARG" ], "es": [ "Argentina", "Repblica Argentina", "Provincias Unidas del Ro de la Plata", "Confederacin Argentina", "Republica Argentina", "Provincias Unidas del Rio de la Plata", "Confederacion Argentina", "" ] }'},{feature_id:"1249780",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN5",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6045,32.6215]",bounds:"[78.5668,32.6004,78.64109999999999,32.6423]",area_sqkm:"25",region:"",subregion:"",name:"Chumar disputed area",name_en:"Chumar disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1184244",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",region:"",subregion:"",name:"Chumar East disputed area",name_en:"Chumar East disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1511924",description:"disputed area",worldview:"JP",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"8392835",description:"state",worldview:"all",iso_3166_1:"LR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBR",wikidata_id:"Q1014",centroid:"[-9.638199999999999,6.456]",bounds:"[-11.4918,4.3535,-7.3672,8.551]",area_sqkm:"97145",region:"Africa",subregion:"Sub-Saharan Africa",name:"Liberia",name_en:"Liberia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Liberia", "Republic of Liberia", "lr", "", "LBR" ] }'},{feature_id:"9965705",description:"state",worldview:"all",iso_3166_1:"MA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MAR",wikidata_id:"Q1028",centroid:"[-6.1699,31.8889]",bounds:"[-13.1671,27.6705,-1.0108,35.9222]",area_sqkm:"489286",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Morocco",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "", " ", " " ], "en": [ "Morocco", "Kingdom of Morocco", "Arab Maghreb", "Marocco", "al-Marib", "Lmarib", "Maroc", "ma", "", "MAR" ], "fr": [ "Maroc", "Royaume du Maroc", "ma" ], "ary": [ "" ] }'},{feature_id:"1642996",description:"disputed area",worldview:"US",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2298356",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNPHTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[113.3158,8.1846]",bounds:"[111.6427,7.3643,116.9354,11.4694]",area_sqkm:"647",region:"",subregion:"",name:"Spratly Islands",name_en:"Spratly Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"12259354",description:"dependent territory",worldview:"all",iso_3166_1:"BL",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"BLM",wikidata_id:"Q25362",centroid:"[-62.8117,17.9036]",bounds:"[-62.9101,17.8782,-62.7891,17.9608]",area_sqkm:"21",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint-Barthlemy",name_en:"Saint-Barthlemy",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Barthlemy", "Saint Barthlemy", "Ouanalao", "Collectivit de Saint-Barthlemy", "Saint Barths", "Ile Saint-Barthlemy", "Saint Barthlmy", "St. Barthelemy", "St barths", "St. Barthlemy", "Saint Barts", "Saint-Barthlmy", "St. Barths", "ISO 3166-1:BL", "le Saint-Barthlemy", "Saint Bartz", "St barts", "St. Barth", "America\\/St Barthelemy", "Collectivity of Saint Barthlemy", "Saint-Barthelemy", "Saint Barthelemy", "St barthelemy", "Saint Barth", "bl", "", "Collectivite de Saint-Barthelemy", "Ile Saint-Barthelemy", "Collectivity of Saint Barthelemy", "St. Barts", "FR-BL" ], "fr": [ "Saint-Barthlemy", "Saint Barthlemy", "St Barth", "Collectivite d\'outre-mer de Saint-Barthelemy", "Collectivit d\'outre-mer de Saint-Barthlemy", "Saint-Barthlmy", "Saint-Barth", "Saint Barth", "977", "bl", "", "ISO 3166-1:BL", "FR-BL" ] }'},{feature_id:"397812",description:"disputed area",worldview:"IN",iso_3166_1:"D0GYSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-57.3612,2.4457]",bounds:"[-58.3309,1.4976,-56.4851,3.3943]",area_sqkm:"14492",region:"",subregion:"",name:"Tigri Area",name_en:"Tigri Area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1249298",description:"state",worldview:"all",iso_3166_1:"BB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BRB",wikidata_id:"Q244",centroid:"[-59.559,13.1898]",bounds:"[-59.6526,13.0447,-59.4203,13.3348]",area_sqkm:"446",region:"Americas",subregion:"Latin America and the Caribbean",name:"Barbados",name_en:"Barbados",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Barbados", "BB", "bb", "", "BAR" ] }'},{feature_id:"3477553",description:"state",worldview:"all",iso_3166_1:"CO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COL",wikidata_id:"Q739",centroid:"[-72.6147,4.1587]",bounds:"[-81.73569999999999,-4.2285,-66.84650000000001,13.3948]",area_sqkm:"1151361",region:"Americas",subregion:"Latin America and the Caribbean",name:"Colombia",name_en:"Colombia",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Colombia", "", "Repblica de Colombia", "Republic of Colombia", "Republica de Colombia", "COL" ], "es": [ "Colombia", "Repblica de Colombia (wayuunaiki)", "Repblica de Colombia", "Republica de Colombia" ] }'},{feature_id:"8654982",description:"state",worldview:"all",iso_3166_1:"LU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LUX",wikidata_id:"Q32",centroid:"[6.0814,49.8167]",bounds:"[5.7358,49.4478,6.531,50.1827]",area_sqkm:"4011",region:"Europe",subregion:"Western Europe",name:"Luxembourg",name_en:"Luxembourg",disputed:"FALSE",color_group:"1",names:'{ "de": [ "Luxemburg", "Groussherzogtum Ltzebuerg", "Grand-Duch de Luxembourg" ], "en": [ "Luxembourg", "Luxemburg", "Grand Duchy of Luxembourg", "LU", "lu", "", "LUX" ], "fr": [ "Luxembourg", "Grand-Duch de Luxembourg", "Grand-duch de Luxembourg", "grand-duch de Luxembourg", "LUX", "LU", "" ], "lb": [ "Ltzebuerg", "Groussherzogtum Ltzebuerg", "Ltzebuerger Land", "Grand-Duch de Luxembourg", "Grand-Duch" ], "pt": [ "Luxemburgo", "Gro-de-bico do Luxemburgo", "de Luxemburgo", "Gro-Ducado de Luxemburgo" ] }'},{feature_id:"8261759",description:"state",worldview:"all",iso_3166_1:"LB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LBN",wikidata_id:"Q822",centroid:"[35.9001,33.878]",bounds:"[35.1036,33.0554,36.6233,34.6921]",area_sqkm:"12369",region:"Asia",subregion:"Western Asia",name:"",name_en:"Lebanon",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "", " " ], "en": [ "Lebanon", "Lebanese Republic", "lb", "Republic of Lebanon", "", "LBN" ] }'},{feature_id:"1708061",description:"state",worldview:"all",iso_3166_1:"BO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BOL",wikidata_id:"Q750",centroid:"[-63.6244,-16.3961]",bounds:"[-69.6444,-22.9004,-57.4526,-9.6669]",area_sqkm:"1143748",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bolivia",name_en:"Bolivia",disputed:"FALSE",color_group:"1",names:'{ "ay": [ "Wuliwya" ], "en": [ "Bolivia", "Plurinational State of Bolivia", "bo", "bol", "", "Republic of Bolivia", "BOL" ], "es": [ "Bolivia", "Repblica de Bolivia", "Estado Plurinacional de Bolivia" ], "qu": [ "Buliwya" ] }'},{feature_id:"724999",description:"state",worldview:"all",iso_3166_1:"AM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ARM",wikidata_id:"Q399",centroid:"[44.8409,40.0811]",bounds:"[43.4483,38.8402,46.633,41.2999]",area_sqkm:"39160",region:"Asia",subregion:"Western Asia",name:"",name_en:"Armenia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Armenia", "Republic of Armenia", "", "ARM" ], "hy": [ "", "", "", " ", "" ] }'},{feature_id:"4919370",description:"state",worldview:"all",iso_3166_1:"FO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FRO",wikidata_id:"Q4628",centroid:"[-7.0174,62.1252]",bounds:"[-7.6947,61.3921,-6.2572,62.3957]",area_sqkm:"3092",region:"Europe",subregion:"Northern Europe",name:"Froyar",name_en:"Faroe Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Faroe Islands", "Faeroe Islands", "Atlantic\\/Faroe", "Fareo islands", "Faeroyene", "Far Oer", "Faeroerne", "Faer Oer", "Faroe Isles", "Faroer", "Frer", "Faeroe Isles", "Faroes", "Faroese Islands", "Foroyar", "Faeroes", "Faeroer", "Froyar", "Faroe Island", "The Faroe Islands", "Frer", "Freyjar", "Fr er", "Faeroe Is", "The Faeroe Islands", "Fryene", "Frerne", "Fare Islands", "Sheep Islands", "Froes", "fo", "" ], "fo": [ "Froyar", "Froyum", "Froya", "Faroe Islands" ] }'},{feature_id:"5443669",description:"state",worldview:"all",iso_3166_1:"GM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GMB",wikidata_id:"Q1005",centroid:"[-15.9728,13.4365]",bounds:"[-16.8133,13.0458,-13.7917,13.8266]",area_sqkm:"11731",region:"Africa",subregion:"Sub-Saharan Africa",name:"The Gambia",name_en:"Gambia",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Gambia", "gm", "Islamic Republic of the Gambia", "", "Republic of The Gambia", "The Gambia", "GAM" ] }'},{feature_id:"10162336",description:"state",worldview:"all",iso_3166_1:"NA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NAM",wikidata_id:"Q1030",centroid:"[17.2133,-23.1061]",bounds:"[11.737,-28.9695,25.2562,-16.9635]",area_sqkm:"890791",region:"Africa",subregion:"Sub-Saharan Africa",name:"Namibia",name_en:"Namibia",disputed:"FALSE",color_group:"4",names:'{ "af": [ "Namibi", "Republiek van Namibi" ], "en": [ "Namibia", "Republic of Namibia", "na", "", "NAM" ] }'},{feature_id:"6951013",description:"state",worldview:"all",iso_3166_1:"ID",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IDN",wikidata_id:"Q252",centroid:"[113.3193,0.1133]",bounds:"[95.01049999999999,-11.0097,141.0296,6.0769]",area_sqkm:"1914185",region:"Asia",subregion:"South-eastern Asia",name:"Indonesia",name_en:"Indonesia",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Indonesia", "Republic of Indonesia", "NKRI", "Negara Kesatuan Republik Indonesia", "Republik Indonesia", "ID", "IDN", "RI", "id", "", "INA" ], "id": [ "Indonesia", "Republik Indonesia", "Negara Kesatuan Republik Indonesia", "NKRI", "ID", "INA", "IDN" ], "jv": [ "Indonsia" ], "su": [ "Indonsia" ] }'},{feature_id:"9179279",description:"state",worldview:"all",iso_3166_1:"MH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MHL",wikidata_id:"Q709",centroid:"[171.3717,7.109]",bounds:"[160.7953,4.5725,172.1725,14.7232]",area_sqkm:"314",region:"Oceania",subregion:"Micronesia",name:"Marshall Islands",name_en:"Marshall Islands",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Marshall Islands", "Republic of the Marshall Islands", "Aolepn Aorkin Maje", "mh", "", "MHL" ], "mh": [ "Majl", "Aolepn Aorkin Maje" ] }'},{feature_id:"10752170",description:"state",worldview:"all",iso_3166_1:"NU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NIU",wikidata_id:"Q34020",centroid:"[-169.8494,-19.054]",bounds:"[-169.9508,-19.1561,-169.7737,-18.9523]",area_sqkm:"283",region:"Oceania",subregion:"Polynesia",name:"Niue",name_en:"Niue",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Niue", "Niu", "nu", "" ] }'},{feature_id:"8523905",description:"state",worldview:"all",iso_3166_1:"LI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LIE",wikidata_id:"Q347",centroid:"[9.547000000000001,47.1593]",bounds:"[9.4717,47.0484,9.6356,47.2706]",area_sqkm:"235",region:"Europe",subregion:"Western Europe",name:"Liechtenstein",name_en:"Liechtenstein",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Liechtenstein", "Frstentum Liechtenstein", "Frstentum Lichtenstein" ], "en": [ "Liechtenstein", "LI", "Principality of Liechtenstein", "FL", "li", "", "LIE" ], "gsw": [ "Liachtaschta" ] }'},{feature_id:"11866294",description:"dependent territory",worldview:"all",iso_3166_1:"PR",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"PRI",wikidata_id:"Q1183",centroid:"[-66.40389999999999,18.2218]",bounds:"[-67.95140000000001,17.8814,-65.22110000000001,18.516]",area_sqkm:"9463",region:"Americas",subregion:"Latin America and the Caribbean",name:"Puerto Rico",name_en:"Puerto Rico",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "PR", "The Commonwealth of Puerto Rico", "", "Porto Rico", "Territory of Puerto Rico", "Commonwealth of Puerto Rico" ], "es": [ "Puerto Rico", "Estado Libre Asociado de Puerto Rico", "Territorio Estadounidense de Puerto Rico" ] }'},{feature_id:"11407536",description:"state",worldview:"all",iso_3166_1:"PG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PNG",wikidata_id:"Q691",centroid:"[144.3478,-6.6693]",bounds:"[140.8424,-11.6554,155.9831,-1.3148]",area_sqkm:"468868",region:"Oceania",subregion:"Melanesia",name:"Papua New Guinea",name_en:"Papua New Guinea",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Papua New Guinea", "Independent State of Papua New Guinea", "PNG", "pg", "" ], "tpi": [ "Papua Niugini" ] }'},{feature_id:"7540850",description:"state",worldview:"US",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"14487780",description:"state",worldview:"IN",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"14291141",description:"state",worldview:"all",iso_3166_1:"SE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SWE",wikidata_id:"Q34",centroid:"[14.9499,62.9927]",bounds:"[10.9577,55.3367,24.1762,69.0599]",area_sqkm:"990948",region:"Europe",subregion:"Northern Europe",name:"Sverige",name_en:"Sweden",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Sweden", "Kingdom of Sweden", "SE", "se", "SWE" ], "sv": [ "Sverige", "Konungariket Sverige", "Kungariket Sverige", "Kungadmet Sverige", "SE", "SWE" ] }'},{feature_id:"3608618",description:"state",worldview:"all",iso_3166_1:"CG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COG",wikidata_id:"Q971",centroid:"[16.0718,-0.6664]",bounds:"[11.1466,-5.0375,18.644,3.7122]",area_sqkm:"345037",region:"Africa",subregion:"Sub-Saharan Africa",name:"Rpublique du Congo",name_en:"Republic of the Congo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Republic of the Congo", "Congo-Brazzaville", "Congo Republic", "Rpublique du Congo", "Republic of Congo", "cg", "Rep. Congo", "", "Republique du Congo", "Congo (Brazzaville)", "CGO" ], "fr": [ "Rpublique du Congo", "Congo", "Congo-Brazzaville" ] }'},{feature_id:"12521613",description:"dependent territory",worldview:"all",iso_3166_1:"MF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MAF",wikidata_id:"Q25596",centroid:"[-63.0507,18.0848]",bounds:"[-63.1529,18.0447,-62.9703,18.1253]",area_sqkm:"52",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint-Martin",name_en:"Saint Martin",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Saint Martin", "St. Martin" ], "fr": [ "Saint-Martin", "le de Saint-Martin", "le de Saint Martin" ] }'},{feature_id:"7147622",description:"state",worldview:"all",iso_3166_1:"IE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRL",wikidata_id:"Q27",centroid:"[-8.113200000000001,53.4616]",bounds:"[-10.6613,51.422,-5.9941,55.4367]",area_sqkm:"115782",region:"Europe",subregion:"Northern Europe",name:"Ireland - ire",name_en:"Ireland",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Ireland", "ire", "IE", "IRL", "Republic of Ireland", "Hibernia", "Ireland, Republic of", "ie", "ireland", "", "Eire", "Southern Ireland" ], "fr": [ "Irlande", "Rpublique d\'Irlande", "Eire", "ire", "Republic of Ireland", "Ireland" ], "ga": [ "Poblacht na hireann", "ire" ] }'},{feature_id:"135174",description:"state",worldview:"all",iso_3166_1:"AL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ALB",wikidata_id:"Q222",centroid:"[20.0221,41.1701]",bounds:"[19.2635,39.6449,21.0569,42.6603]",area_sqkm:"38143",region:"Europe",subregion:"Southern Europe",name:"Shqipria",name_en:"Albania",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Albania", "Republic of Albania", "al", "Republika e Shqipris", "Shqipris", "", "ALB" ], "sq": [ "Shqipria", "Republika e Shqipris" ] }'},{feature_id:"14553307",description:"state",worldview:"all",iso_3166_1:"TJ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TJK",wikidata_id:"Q863",centroid:"[70.94499999999999,38.8917]",bounds:"[67.34220000000001,36.6718,75.1558,41.0442]",area_sqkm:"181309",region:"Asia",subregion:"Central Asia",name:"",name_en:"Tajikistan",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tajikistan", "Republic of Tajikistan", "tj", "", "TJK" ], "ru": [ "", " " ], "tg": [ "", " " ] }'},{feature_id:"15798512",description:"dependent territory",worldview:"all",iso_3166_1:"VI",sovereign_iso_3166_1:"US",iso_3166_1_alpha_3:"VIR",wikidata_id:"Q26262",centroid:"[-64.75920000000001,17.7289]",bounds:"[-65.0853,17.674,-64.5652,18.413]",area_sqkm:"370",region:"Americas",subregion:"Latin America and the Caribbean",name:"Virgin Islands",name_en:"Virgin Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Virgin Islands" ] }'},{feature_id:"5115979",description:"state",worldview:"all",iso_3166_1:"FR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FRA",wikidata_id:"Q142",centroid:"[2.1592,46.8894]",bounds:"[-5.143,41.3333,9.5603,51.0892]",area_sqkm:"795594",region:"Europe",subregion:"Western Europe",name:"France",name_en:"France",disputed:"FALSE",color_group:"7",names:'{ "en": [ "France", "fr", "FR", "", "Rpublique franaise", "La France", "Republic of France", "French Republic", "FRA" ], "es": [ "Francia", "Repblica Francesa", "Republica Francesa" ], "fr": [ "France", "FR", "Rpublique franaise", "FRA", "RF", "", "fr", "l\'Hexagone" ] }'},{feature_id:"4329533",description:"state",worldview:"all",iso_3166_1:"DO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DOM",wikidata_id:"Q786",centroid:"[-70.1246,18.7721]",bounds:"[-72.0094,17.4703,-68.32340000000001,19.9324]",area_sqkm:"51251",region:"Americas",subregion:"Latin America and the Caribbean",name:"Repblica Dominicana",name_en:"Dominican Republic",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Dominican Republic", "Repblica Dominicana", "", "RD", "DR", "Republica Dominicana" ], "es": [ "Repblica Dominicana", "Republica Dominicana" ] }'},{feature_id:"9375898",description:"state",worldview:"all",iso_3166_1:"MU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MUS",wikidata_id:"Q1027",centroid:"[57.5902,-20.2529]",bounds:"[56.5853,-20.5248,63.5033,-10.3372]",area_sqkm:"2165",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mauritius",name_en:"Mauritius",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Mauritius", "Republic of Mauritius", "Maurice", "Moris", "mu", "", "MRI" ], "bho": [ "", "" ] }'},{feature_id:"3346486",description:"dependent territory",worldview:"all",iso_3166_1:"CX",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CXR",wikidata_id:"Q31063",centroid:"[105.6169,-10.4914]",bounds:"[105.5333,-10.5705,105.7126,-10.4124]",area_sqkm:"139",region:"Oceania",subregion:"Australia and New Zealand",name:"Christmas Island",name_en:"Christmas Island",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Christmas Island", "cx", "", "Christmas Island, Other Territories", "Christmas Island, Other Territories, Australia" ] }'},{feature_id:"7409708",description:"state",worldview:"all",iso_3166_1:"CI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CIV",wikidata_id:"Q1008",centroid:"[-5.5573,7.5616]",bounds:"[-8.6029,4.3609,-2.4947,10.7397]",area_sqkm:"327143",region:"Africa",subregion:"Sub-Saharan Africa",name:"Cte dIvoire",name_en:"Ivory Coast",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Ivory Coast", "Republic of Cte d\'Ivoire", "ci", "Cote d\'Ivoire", "", "Cte d\'Ivoire", "Republic of Cote d\'Ivoire", "Cte-d\'Ivoire", "Cte D\'Ivoire", "Cote D\'Ivoire", "Cote d\'lvoire", "Ivory coast", "Cote D\' Ivoire", "Cote d\' Ivoire", "Cte dIvoire", "Cte d\'Ivorie", "Cte d\'ivoire", "Cote d\'ivoire", "Cote dIvoire", "Cote d ivoire", "Cote divoire", "Cote Ivoire", "Cote dIvoire", "Rpublique de Cte d\'Ivoire", "Republic of Ivory Coast", "Cote Divoire", "Cote-d\'Ivoire", "Cote d\'ivore", "Cote dIvoire", "Cte dIvoire", "Cte Divoire", "Cte D\'ivoire", "Republic of the Ivory Coast", "The Ivory Coast", "CIV" ], "fr": [ "Cte d\'Ivoire", "Cte dIvoire", "Cte-dIvoire", "Cte-d\'Ivoire" ] }'},{feature_id:"1577460",description:"disputed area",worldview:"CN",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"9769107",description:"state",worldview:"all",iso_3166_1:"MN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MNG",wikidata_id:"Q711",centroid:"[105.2046,47.1285]",bounds:"[87.7367,41.5827,119.9322,52.1514]",area_sqkm:"2281619",region:"Asia",subregion:"Eastern Asia",name:" ",name_en:"Mongolia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Mongolia", "mn", "Mongol uls", "MNG", "", "MGL" ], "mn": [ " ", "" ] }'},{feature_id:"6426718",description:"state",worldview:"all",iso_3166_1:"GY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GUY",wikidata_id:"Q734",centroid:"[-58.9506,4.8622]",bounds:"[-61.3918,1.1701,-56.4917,8.5349]",area_sqkm:"213209",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guyana",name_en:"Guyana",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guyana", "Co-operative Republic of Guyana", "gy", "Republic of Guyana", "", "GUY" ] }'},{feature_id:"6033495",description:"state",worldview:"all",iso_3166_1:"GP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GLP",wikidata_id:"Q17012",centroid:"[-61.6777,16.1542]",bounds:"[-61.8094,15.8323,-61.0019,16.5145]",area_sqkm:"1711",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guadeloupe",name_en:"Guadeloupe",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Guadeloupe", "gp", "" ], "fr": [ "Guadeloupe", "971" ] }'},{feature_id:"9506973",description:"state",worldview:"all",iso_3166_1:"MX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MEX",wikidata_id:"Q96",centroid:"[-102.3697,23.9442]",bounds:"[-118.3643,14.53,-86.7105,32.7188]",area_sqkm:"2168490",region:"Americas",subregion:"Latin America and the Caribbean",name:"Mxico",name_en:"Mexico",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Mexico", "MX", "mx", "", "United Mexican States", "Mexican Republic", "MEX" ], "es": [ "Mxico", "mx", "Mjico", "Mejico", "Estados Unidos Mexicanos", "MX", "MEX", "Mexico", "Republica Mexicana", "Repblica Mexicana" ] }'},{feature_id:"11341997",description:"state",worldview:"all",iso_3166_1:"PA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAN",wikidata_id:"Q804",centroid:"[-81.4812,8.420199999999999]",bounds:"[-83.05159999999999,7.2042,-77.13939999999999,9.6457]",area_sqkm:"76373",region:"Americas",subregion:"Latin America and the Caribbean",name:"Panama",name_en:"Panama",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Panama", "Republic of Panama", "pa", "" ], "es": [ "Panam", "Repblica de Panam" ] }'},{feature_id:"14487780",description:"state",worldview:"JP",iso_3166_1:"TW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TWN",wikidata_id:"Q865",centroid:"[120.8354,23.609]",bounds:"[114.3593,10.3713,122.1091,26.3853]",area_sqkm:"40091",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Taiwan",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Taiwan", "ROC", "Chunghwa Minkwo", "Chunghwa Minkuo", "Formosa", "Republic of China", "Nationalist China", "Free China", "Free area of the Republic of China", "Republic of China (Taiwan)", "Chinese Taipei", "", "tw" ], "zh-hant": [ "", "", "", "", "", "ROC", "", "", "" ] }'},{feature_id:"1118231",description:"state",worldview:"all",iso_3166_1:"BH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHR",wikidata_id:"Q398",centroid:"[50.5534,26.025]",bounds:"[50.3152,25.5717,50.8245,26.4229]",area_sqkm:"858",region:"Asia",subregion:"Western Asia",name:"",name_en:"Bahrain",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "", " " ], "en": [ "Bahrain", "bh", "Kingdom of Bahrain", "", "BAH" ] }'},{feature_id:"7868534",description:"state",worldview:"all",iso_3166_1:"KI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KIR",wikidata_id:"Q710",centroid:"[-157.371,1.8709]",bounds:"[-174.5434,-11.4479,176.8485,4.6994]",area_sqkm:"1021",region:"Oceania",subregion:"Micronesia",name:"Kiribati",name_en:"Kiribati",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kiribati", "Republic of Kiribati", "", "ki", "KIR" ] }'},{feature_id:"12980429",description:"state",worldview:"all",iso_3166_1:"SN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SEN",wikidata_id:"Q1041",centroid:"[-14.6562,14.5118]",bounds:"[-17.5301,12.3068,-11.3463,16.6916]",area_sqkm:"203620",region:"Africa",subregion:"Sub-Saharan Africa",name:"Sngal",name_en:"Senegal",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Senegal", "Republic of Senegal", "Rpublique du Sngal", "sn", "Sngal", "", "Republique du Senegal", "SEN" ], "ff": [ "Senegaal" ], "fr": [ "Sngal", "La Rpublique du Sngal" ], "wo": [ "Senegaal" ] }'},{feature_id:"4460609",description:"state",worldview:"all",iso_3166_1:"EG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"EGY",wikidata_id:"Q79",centroid:"[29.4676,26.9406]",bounds:"[24.6929,21.9993,36.8944,31.6717]",area_sqkm:"1121082",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Egypt",disputed:"FALSE",color_group:"4",names:'{ "ar": [ "", " ", "  " ], "en": [ "Egypt", "Republic of Egypt", "eg", "EGY", "", "Arab Republic of Egypt", "Arab Rep. Egypt", "Rep. Egypt" ], "arz": [ "" ] }'},{feature_id:"332276",description:"disputed area",worldview:"all",iso_3166_1:"D0ILSY1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.749,33.008]",bounds:"[35.6118,32.6823,35.8962,33.333]",area_sqkm:"1370",region:"",subregion:"",name:"Golan Heights",name_en:"Golan Heights",disputed:"TRUE",color_group:"",names:""},{feature_id:"1642529",description:"state",worldview:"CN",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3571,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43658",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"528884",description:"disputed area",worldview:"JP",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1315316",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN6",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",region:"",subregion:"",name:"Kauirik disputed area",name_en:"Kauirik disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"2428952",description:"state",worldview:"all",iso_3166_1:"BI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BDI",wikidata_id:"Q967",centroid:"[29.9633,-3.3895]",bounds:"[29.0007,-4.4677,30.8483,-2.31]",area_sqkm:"26936",region:"Africa",subregion:"Sub-Saharan Africa",name:"Burundi",name_en:"Burundi",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Burundi", "Republic of Burundi", "bi", "", "Republika y\'Uburundi", "Gouvernement du Burundi", "BDI" ], "fr": [ "Burundi", "Rpublique du Burundi" ], "rn": [ "Uburundi", "Republika y\'Uburundi" ] }'},{feature_id:"1445925",description:"state",worldview:"all",iso_3166_1:"BZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLZ",wikidata_id:"Q242",centroid:"[-88.72709999999999,17.1949]",bounds:"[-89.22499999999999,15.8859,-87.486,18.4958]",area_sqkm:"23325",region:"Americas",subregion:"Latin America and the Caribbean",name:"Belize",name_en:"Belize",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Belize", "bz", "" ], "es": [ "Belice" ] }'},{feature_id:"528884",description:"disputed area",worldview:"IN",iso_3166_1:"D0BTCN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[90.2383,28.2113]",bounds:"[89.8182,28.0606,90.61490000000001,28.3608]",area_sqkm:"1440",region:"",subregion:"",name:"Kula Kangri",name_en:"Kula Kangri",disputed:"TRUE",color_group:"",names:""},{feature_id:"1577460",description:"disputed area",worldview:"US",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"3084336",description:"state",worldview:"US",iso_3166_1:"CN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CHN",wikidata_id:"Q148",centroid:"[100.5057,38.8017]",bounds:"[73.5013,7.3643,134.7734,53.5604]",area_sqkm:"11649405",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"China",disputed:"FALSE",color_group:"4",names:'{ "en": [ "People\'s Republic of China", "China", "CN", "PR China", "PRC", "cn", "CHN", "Communist China", "" ], "zh": [ "", "", "", "", "", "", "", "" ] }'},{feature_id:"856564",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN7",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.791,31.3804]",bounds:"[78.7495,31.294,78.86020000000001,31.4674]",area_sqkm:"106",region:"",subregion:"",name:"Shipki Pass disputed area",name_en:"Shipki Pass disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"5247151",description:"dependent territory",worldview:"all",iso_3166_1:"PF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"PYF",wikidata_id:"Q30971",centroid:"[-149.4451,-17.688]",bounds:"[-154.7272,-27.9005,-134.4511,-7.895]",area_sqkm:"4633",region:"Oceania",subregion:"Polynesia",name:"Polynsie Franaise",name_en:"French Polynesia",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Polynesia", "pf", "" ], "fr": [ "Polynsie franaise", "tablissements franais de l\'Ocanie", "Polynsie Francaise", "tablissements franais de lOcanie", "F-OH", "Polynesie francaise", "987" ], "ty": [ "Prnetia farni" ] }'},{feature_id:"790542",description:"state",worldview:"all",iso_3166_1:"AW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ABW",wikidata_id:"Q21203",centroid:"[-69.98180000000001,12.5176]",bounds:"[-70.0637,12.4118,-69.8657,12.6234]",area_sqkm:"185",region:"Americas",subregion:"Latin America and the Caribbean",name:"Aruba",name_en:"Aruba",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Aruba", "ISO 3166-1:AW", "America\\/Aruba", "Island of Aruba", "aw", "", "ARU" ], "nl": [ "Aruba", "AW", "ABW" ], "pap": [ "Aruba" ] }'},{feature_id:"7606383",description:"state",worldview:"all",iso_3166_1:"JE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JEY",wikidata_id:"Q785",centroid:"[-2.1258,49.213]",bounds:"[-2.2545,49.1631,-2.017,49.2623]",area_sqkm:"186",region:"Europe",subregion:"Northern Europe",name:"Jersey",name_en:"Jersey",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Jersey", "Balliwick of Jersey", "je", "Bailiwick of Jersey", "" ] }'},{feature_id:"13701210",description:"dependent territory",worldview:"all",iso_3166_1:"GS",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"SGS",wikidata_id:"Q35086",centroid:"[-36.4992,-54.4399]",bounds:"[-42.2024,-59.4855,-26.2675,-53.3417]",area_sqkm:"7350",region:"Americas",subregion:"Latin America and the Caribbean",name:"South Georgia and South Sandwich Islands",name_en:"South Georgia and South Sandwich Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "South Georgia and the South Sandwich Islands", "South Georgia", "South Sandwich Islands", "gs", "SGSSI", "", "South Georgia and South Sandwich Islands" ] }'},{feature_id:"13177035",description:"state",worldview:"all",iso_3166_1:"SL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLE",wikidata_id:"Q1044",centroid:"[-11.875,8.4655]",bounds:"[-13.3064,6.9246,-10.2741,10.0001]",area_sqkm:"73816",region:"Africa",subregion:"Sub-Saharan Africa",name:"Sierra Leone",name_en:"Sierra Leone",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Sierra Leone", "Republic of Sierra Leone", "sl", "", "SLE" ] }'},{feature_id:"1577460",description:"disputed area",worldview:"JP",iso_3166_1:"D0INPK2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.503,33.9882]",bounds:"[73.75,32.2722,79.30589999999999,35.6733]",area_sqkm:"128240",region:"",subregion:"",name:"Indian-administered Kashmir",name_en:"Indian-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"12193984",description:"state",worldview:"all",iso_3166_1:"RW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"RWA",wikidata_id:"Q1037",centroid:"[29.9879,-1.9431]",bounds:"[28.862,-2.8388,30.8993,-1.0479]",area_sqkm:"25346",region:"Africa",subregion:"Sub-Saharan Africa",name:"Rwanda",name_en:"Rwanda",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Rwanda", "Republic of Rwanda", "rw", "" ], "rw": [ "Rwanda", "Repubulika y\'u Rwanda" ] }'},{feature_id:"11210937",description:"state",worldview:"all",iso_3166_1:"PW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PLW",wikidata_id:"Q695",centroid:"[134.5573,7.5288]",bounds:"[131.1199,2.9715,134.7214,8.094099999999999]",area_sqkm:"492",region:"Oceania",subregion:"Micronesia",name:"Belau",name_en:"Palau",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Palau", "Republic of Palau", "Belau", "Pelew", "pw", "Republic of Belau", "" ] }'},{feature_id:"1642529",description:"state",worldview:"IN",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"66064479",description:"state",worldview:"IN",iso_3166_1:"HK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HKG",wikidata_id:"Q8646",centroid:"[114.0599,22.4114]",bounds:"[113.8351,22.1539,114.4417,22.562]",area_sqkm:"1214",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Hong Kong",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Hong Kong", "HKSAR", "HKG", "HK", "Hong Kong SAR", "China Hong Kong", "Hong Kong, China", "hk", "Hong Kong SAR, China", "", "Hong Kong Special Administrative Region" ], "yue": [ "", "", "", "" ], "zh-hant": [ "", "", "", "" ] }'},{feature_id:"4526290",description:"state",worldview:"all",iso_3166_1:"SV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLV",wikidata_id:"Q792",centroid:"[-88.9105,13.802]",bounds:"[-90.1326,13.1524,-87.6905,14.4497]",area_sqkm:"21644",region:"Americas",subregion:"Latin America and the Caribbean",name:"El Salvador",name_en:"El Salvador",disputed:"FALSE",color_group:"1",names:'{ "en": [ "El Salvador", "sv", "", "Republic of El Salvador", "ESA" ], "es": [ "El Salvador", "Repblica de El Salvador", "Republica de El Salvador" ] }'},{feature_id:"2822268",description:"dependent territory",worldview:"all",iso_3166_1:"KY",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"CYM",wikidata_id:"Q5785",centroid:"[-81.17149999999999,19.3299]",bounds:"[-81.42059999999999,19.2632,-79.723,19.7567]",area_sqkm:"284",region:"Americas",subregion:"Latin America and the Caribbean",name:"Cayman Islands",name_en:"Cayman Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Cayman Islands", "ky", "", "CAY" ] }'},{feature_id:"16257267",description:"dependent territory",worldview:"all",iso_3166_1:"WF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"WLF",wikidata_id:"Q35555",centroid:"[-176.2086,-13.2859]",bounds:"[-178.1824,-14.3622,-176.1242,-13.1828]",area_sqkm:"153",region:"Oceania",subregion:"Polynesia",name:"Wallis-et-Futuna",name_en:"Wallis and Futuna",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Wallis and Futuna", "wf", "" ], "fr": [ "Wallis-et-Futuna", "Wallis et Futuna", "Emeni Simete", "les Wallis et Futuna", "Makape Papilio", "le de Futuna", "986", "Collectivit des les Wallis et Futuna" ] }'},{feature_id:"11669685",description:"state",worldview:"all",iso_3166_1:"PN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PCN",wikidata_id:"Q35672",centroid:"[-128.3268,-24.376]",bounds:"[-130.7562,-25.0798,-124.772,-23.9077]",area_sqkm:"59",region:"Oceania",subregion:"Polynesia",name:"Pitcairn Islands",name_en:"Pitcairn Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Pitcairn Islands", "pn", "", "Pitcairn, Henderson, Ducie and Oeno Islands" ] }'},{feature_id:"2167023",description:"dependent territory",worldview:"all",iso_3166_1:"VG",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"VGB",wikidata_id:"Q25305",centroid:"[-64.64,18.4204]",bounds:"[-64.8501,18.3064,-64.2706,18.7497]",area_sqkm:"164",region:"Americas",subregion:"Latin America and the Caribbean",name:"British Virgin Islands",name_en:"British Virgin Islands",disputed:"FALSE",color_group:"6",names:'{ "en": [ "British Virgin Islands", "Virgin Islands", "BVI", "vg", "", "IVB" ] }'},{feature_id:"16126190",description:"state",worldview:"all",iso_3166_1:"VE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VEN",wikidata_id:"Q717",centroid:"[-65.43519999999999,6.4568]",bounds:"[-73.35290000000001,0.6514,-59.8065,12.4912]",area_sqkm:"927706",region:"Americas",subregion:"Latin America and the Caribbean",name:"Venezuela",name_en:"Venezuela",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Venezuela", "Bolivarian Republic of Venezuela", "BR Venezuela", "VE", "", "Estados Unidos de Venezuela", "Vzla", "VEN" ], "es": [ "Venezuela", "RB Venezuela", "VE", "La Repblica Bolivarana de Venezuela", "Estados Unidos de Venezuela", "Republica Bolivariana de Venezuela", "La Republica Bolivarana de Venezuela", "La Repblica Bolivariana de Venezuela", "La Republica Bolivariana de Venezuela", "Repblica Bolivariana de Venezuela", "Vzla" ] }'},{feature_id:"6557795",description:"state",worldview:"all",iso_3166_1:"HT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HTI",wikidata_id:"Q790",centroid:"[-72.29510000000001,18.9902]",bounds:"[-74.4806,18.0214,-71.622,20.0894]",area_sqkm:"28641",region:"Americas",subregion:"Latin America and the Caribbean",name:"Hati",name_en:"Haiti",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Haiti", "Republic of Haiti", "ht", "Hayti", "HT", "Rpublique d\'Hati", "Haitian Republic", "Ayiti", "", "HAI" ], "ht": [ "Ayiti", "Repiblik d Ayiti" ] }'},{feature_id:"7082091",description:"state",worldview:"all",iso_3166_1:"IQ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IRQ",wikidata_id:"Q796",centroid:"[42.461,33.3185]",bounds:"[38.7923,29.0583,48.6128,37.3815]",area_sqkm:"522150",region:"Asia",subregion:"Western Asia",name:"",name_en:"Iraq",disputed:"FALSE",color_group:"1",names:'{ "ar": [ "", " ", " " ], "en": [ "Iraq", "Republic of Iraq", "al-Irq", "Jumhriyyat al-Irq", "Komar-i raq", "iq", "", "IRQ" ], "ckb": [ "" ] }'},{feature_id:"13439176",description:"state",worldview:"all",iso_3166_1:"SI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SVN",wikidata_id:"Q215",centroid:"[14.634,46.1541]",bounds:"[13.3757,45.4216,16.6118,46.8768]",area_sqkm:"29228",region:"Europe",subregion:"Southern Europe",name:"Slovenija",name_en:"Slovenia",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Slowenien", "Republik Slowenien" ], "en": [ "Slovenia", "Slovenija", "Republika Slovenija", "si", "", "svn", "slo", "Republic of Slovenia", "SLO" ], "hr": [ "Slovenija" ], "sl": [ "Slovenija", "Republika Slovenija" ] }'},{feature_id:"7802995",description:"state",worldview:"US",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"10293416",description:"state",worldview:"all",iso_3166_1:"NP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NPL",wikidata_id:"Q837",centroid:"[83.0746,28.4212]",bounds:"[80.05549999999999,26.3546,88.2016,30.448]",area_sqkm:"168299",region:"Asia",subregion:"Southern Asia",name:"Nepal",name_en:"Nepal",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Nepal", "NPL", "Federal Democratic Republic of Nepal", "NEP", "NP", "" ], "ne": [ "", "   ", "   " ], "mai": [ "", "   " ] }'},{feature_id:"13111491",description:"state",worldview:"all",iso_3166_1:"SC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SYC",wikidata_id:"Q1042",centroid:"[55.4924,-4.6841]",bounds:"[46.2029,-10.2271,56.2947,-3.7129]",area_sqkm:"498",region:"Africa",subregion:"Sub-Saharan Africa",name:"Seychelles",name_en:"Seychelles",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Seychelles", "Republic of Seychelles", "sc", "", "SEY" ], "fr": [ "Seychelles", "Rpublique des Seychelles", "Repiblik Sesel", "", "sc", "SEY" ] }'},{feature_id:"200766",description:"state",worldview:"all",iso_3166_1:"DZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DZA",wikidata_id:"Q262",centroid:"[0.5969,28.4756]",bounds:"[-8.667999999999999,18.9562,11.9942,37.0897]",area_sqkm:"2639266",region:"Africa",subregion:"Northern Africa",name:"",name_en:"Algeria",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "", "   " ], "en": [ "Algeria", "Peoples Democratic Republic of Algeria", "dz", "", "ALG" ], "fr": [ "Algrie", "Rpublique algrienne dmocratique et populaire", "RADP", "dz", "Algerie" ] }'},{feature_id:"11735219",description:"state",worldview:"all",iso_3166_1:"PL",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"POL",wikidata_id:"Q36",centroid:"[19.1972,52.0136]",bounds:"[14.1229,49.002,24.1458,54.8358]",area_sqkm:"509240",region:"Europe",subregion:"Eastern Europe",name:"Polska",name_en:"Poland",disputed:"FALSE",color_group:"3",names:'{ "de": [ "Polen", "Republik Polen" ], "en": [ "Poland", "POL", "Republic of Poland", "PL", "Polska", "" ], "pl": [ "Polska", "Rzeczpospolita Polska", "RP", "POL", "PL" ], "ru": [ "", "Polska", " " ] }'},{feature_id:"12390520",description:"state",worldview:"all",iso_3166_1:"KN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KNA",wikidata_id:"Q763",centroid:"[-62.7446,17.3156]",bounds:"[-62.8642,17.094,-62.5394,17.4177]",area_sqkm:"276",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Kitts and Nevis",name_en:"Saint Kitts and Nevis",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Saint Kitts and Nevis", "Saint Christopher and Nevis", "Federation of Saint Kitts and Nevis", "kn", "St. Kitts and Nevis", "St Kitts and Nevis", "" ] }'},{feature_id:"13045950",description:"state",worldview:"JP",iso_3166_1:"RS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SRB",wikidata_id:"Q403",centroid:"[21.0101,44.2456]",bounds:"[18.838,42.2357,23.006,46.1898]",area_sqkm:"108170",region:"Europe",subregion:"Southern Europe",name:"",name_en:"Serbia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Serbia", "", "Republic of Serbia", "Republika Srbija", "rs", "Srbija", "SRB" ], "sq": [ "Serbia", "Republika e Serbis" ], "sr": [ "", " ", "rs", "Republika Srbija" ], "sr-ec": [ "" ], "sr-el": [ "Srbija" ] }'},{feature_id:"6885481",description:"state",worldview:"JP",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"10621090",description:"state",worldview:"all",iso_3166_1:"NE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NER",wikidata_id:"Q1032",centroid:"[9.891299999999999,17.5768]",bounds:"[0.1673,11.6961,15.9979,23.518]",area_sqkm:"1248250",region:"Africa",subregion:"Sub-Saharan Africa",name:"Niger",name_en:"Niger",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Niger", "Republic of Niger", "Republic Niger", "ne", "", "The Niger", "Republic of The Niger" ], "fr": [ "Niger", "Rpublique du Niger", "NIG", "NE", "ne", "" ], "ha": [ "Nijar" ] }'},{feature_id:"3805282",description:"state",worldview:"all",iso_3166_1:"HR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HRV",wikidata_id:"Q224",centroid:"[15.3255,44.7753]",bounds:"[13.4898,42.3922,19.4473,46.5549]",area_sqkm:"80481",region:"Europe",subregion:"Southern Europe",name:"Hrvatska",name_en:"Croatia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Croatia", "Republic of Croatia", "HR", "HRV", "hr", "", "CRO" ], "hr": [ "Hrvatska", "Republika Hrvatska" ] }'},{feature_id:"15012066",description:"state",worldview:"all",iso_3166_1:"TT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TTO",wikidata_id:"Q754",centroid:"[-61.2604,10.4435]",bounds:"[-61.9305,10.0424,-60.4924,11.3584]",area_sqkm:"5263",region:"Americas",subregion:"Latin America and the Caribbean",name:"Trinidad and Tobago",name_en:"Trinidad and Tobago",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Trinidad and Tobago", "Republic of Trinidad and Tobago", "tt", "", "TTO" ] }'},{feature_id:"15995122",description:"state",worldview:"all",iso_3166_1:"VU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VUT",wikidata_id:"Q686",centroid:"[167.051,-15.1569]",bounds:"[166.5414,-20.2532,170.2402,-13.0725]",area_sqkm:"12996",region:"Oceania",subregion:"Melanesia",name:"Vanuatu",name_en:"Vanuatu",disputed:"FALSE",color_group:"6",names:'{ "bi": [ "Vanuatu" ], "en": [ "Vanuatu", "Republic of Vanuatu", "vu", "", "vut", "van", "VAN" ], "fr": [ "Vanuatu", "Rpublique de Vanuatu" ] }'},{feature_id:"7540850",description:"state",worldview:"CN",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473647",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"4395071",description:"state",worldview:"all",iso_3166_1:"EC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ECU",wikidata_id:"Q736",centroid:"[-78.27249999999999,-1.7987]",bounds:"[-92.0081,-5.0161,-75.1944,1.6817]",area_sqkm:"257928",region:"Americas",subregion:"Latin America and the Caribbean",name:"Ecuador",name_en:"Ecuador",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Ecuador", "Republic of Ecuador", "ec", "ecu", "ECU", "EC", "Republic of the Equator", "The Ecuadorian State", "" ], "es": [ "Ecuador", "Republica del Ecuador", "Repblica del Ecuador", "ECU", "EC", "ecu", "ec", "el Ecuador", "Estado Ecuatoriano" ], "qu": [ "Ecuador", "Ikwayur Runaq Imayka", "ECU", "EC", "ecu", "ec" ] }'},{feature_id:"5836889",description:"state",worldview:"all",iso_3166_1:"GR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRC",wikidata_id:"Q41",centroid:"[21.7609,39.1182]",bounds:"[19.3728,34.8006,29.6457,41.7489]",area_sqkm:"170162",region:"Europe",subregion:"Southern Europe",name:"",name_en:"Greece",disputed:"FALSE",color_group:"2",names:'{ "el": [ "", "", " ", "  ", "  ", "" ], "en": [ "Greece", "Hellenic Republic", "Hellas", "gr", "", "Greek Republic", "GRE" ] }'},{feature_id:"8065140",description:"state",worldview:"all",iso_3166_1:"KG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KGZ",wikidata_id:"Q813",centroid:"[75.0168,41.2558]",bounds:"[69.26390000000001,39.1824,80.2504,43.2655]",area_sqkm:"265841",region:"Asia",subregion:"Central Asia",name:"",name_en:"Kyrgyzstan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kyrgyzstan", "Kyrgyz Republic", "kg", "Kirgizia", "", "KGZ" ], "ky": [ "", " , Kyrgyz Respublikasy" ], "ru": [ "", " ", " ", "" ] }'},{feature_id:"9441528",description:"dependent territory",worldview:"all",iso_3166_1:"YT",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MYT",wikidata_id:"Q17063",centroid:"[45.1494,-12.8252]",bounds:"[45.0182,-13.0058,45.2999,-12.636]",area_sqkm:"401",region:"Africa",subregion:"Sub-Saharan Africa",name:"Mayotte",name_en:"Mayotte",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Mayotte", "Department of Mayotte", "yt", "" ], "fr": [ "Mayotte", "976" ] }'},{feature_id:"7737469",description:"state",worldview:"all",iso_3166_1:"KZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KAZ",wikidata_id:"Q232",centroid:"[66.572,48.5488]",bounds:"[46.4929,40.5688,87.3147,55.4454]",area_sqkm:"4064264",region:"Asia",subregion:"Central Asia",name:"",name_en:"Kazakhstan",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Kazakhstan", "Republic of Kazakhstan", "kz", "Qazaqstan", "", "KAZ" ], "kk": [ "", " ", "  \'" ], "ru": [ "", " ", "" ] }'},{feature_id:"5574713",description:"state",worldview:"all",iso_3166_1:"DE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DEU",wikidata_id:"Q183",centroid:"[10.5807,51.3283]",bounds:"[5.8663,47.2702,15.0418,55.0568]",area_sqkm:"567005",region:"Europe",subregion:"Western Europe",name:"Deutschland",name_en:"Germany",disputed:"FALSE",color_group:"2",names:'{ "de": [ "Deutschland", "BR Deutschland", "BRD", "Bundesrepublik Deutschland" ], "en": [ "Germany", "FRG", "BRD", "Bundesrepublik Deutschland", "Federal Republic of Germany", "de", "", "Deutschland", "GER" ], "fr": [ "Allemagne", "RFA", "Rpublique fdrale allemande", "Rpublique fdrale d\'Allemagne" ], "bar": [ "Deitschland" ], "nds": [ "Dtschland" ] }'},{feature_id:"1315316",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN6",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.6587,32.0285]",bounds:"[78.4284,31.7806,78.7796,32.2759]",area_sqkm:"494",region:"",subregion:"",name:"Kauirik disputed area",name_en:"Kauirik disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1708532",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.3474,5.0562]",bounds:"[34.4136,4.6246,35.9353,5.5039]",area_sqkm:"6286",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"5050438",description:"state",worldview:"all",iso_3166_1:"FI",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FIN",wikidata_id:"Q33",centroid:"[27.5283,65.4504]",bounds:"[20.5471,59.6761,31.5879,70.0924]",area_sqkm:"760676",region:"Europe",subregion:"Northern Europe",name:"Suomi",name_en:"Finland",disputed:"FALSE",color_group:"4",names:'{ "de": [ "Finnland", "Finland", "Suomi", "Republik Finnland", "Suomen tasavalta", "Republiken Finland" ], "en": [ "Finland", "Republic of Finland", "Finlande", "Finlandia", "Finnland", "Finnia", "Land of Thousand Lakes", "fi", "Suomi", "Suomen tasavalta", "Republiken Finland", "", "FIN" ], "fi": [ "Suomi", "Suomen tasavalta", "Finland", "Republiken Finland" ], "sv": [ "Finland", "Republiken Finland", "Suomi", "Suomen tasavalta" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"5967950",description:"state",worldview:"all",iso_3166_1:"GD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GRD",wikidata_id:"Q769",centroid:"[-61.6867,12.111]",bounds:"[-61.8026,11.9847,-61.3783,12.5402]",area_sqkm:"365",region:"Americas",subregion:"Latin America and the Caribbean",name:"Grenada",name_en:"Grenada",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Grenada", "gd", "", "GRN" ] }'},{feature_id:"65998863",description:"state",worldview:"all",iso_3166_1:"AX",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ALA",wikidata_id:"Q5689",centroid:"[19.9087,60.1993]",bounds:"[19.2633,59.7333,21.3303,60.6657]",area_sqkm:"3291",region:"Europe",subregion:"Northern Europe",name:"Landskapet land",name_en:"land Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "land Islands", "land", "Ahvenanmaa", "Aaland", "Aaland Islands", "land region", "ax", "Aland", "", "Aland Islands" ], "sv": [ "land", "Ahvenanmaa", "Landskapet land" ] }'},{feature_id:"9638027",description:"state",worldview:"all",iso_3166_1:"MD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MDA",wikidata_id:"Q217",centroid:"[28.8269,47.0019]",bounds:"[26.6197,45.4689,30.1628,48.4923]",area_sqkm:"49957",region:"Europe",subregion:"Eastern Europe",name:"Moldova",name_en:"Moldova",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Moldova", "md", "Republic of Moldova", "Moldavia", "Republica Moldova", "", "MDA" ], "ro": [ "Republica Moldova", "R. Moldova", "Moldova", "RM", "Rep. Moldova" ], "uk": [ "" ] }'},{feature_id:"9310359",description:"state",worldview:"all",iso_3166_1:"MR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MRT",wikidata_id:"Q1025",centroid:"[-11.4598,21.1503]",bounds:"[-17.0698,14.7202,-4.83,27.3129]",area_sqkm:"1121076",region:"Africa",subregion:"Sub-Saharan Africa",name:"",name_en:"Mauritania",disputed:"FALSE",color_group:"3",names:'{ "ar": [ "", "  " ], "en": [ "Mauritania", "Islamic Republic of Mauritania", "Muritanya", "Agawej", "Gnnaar", "Murutaane", "Moritani", "mr", "", "Gannaar", "MTN" ], "fr": [ "Mauritanie", "Rpublique islamique de Mauritanie" ] }'},{feature_id:"7540850",description:"state",worldview:"IN",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"11538606",description:"state",worldview:"all",iso_3166_1:"PE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PER",wikidata_id:"Q419",centroid:"[-75.8061,-9.3155]",bounds:"[-81.32850000000001,-18.3517,-68.6521,-0.0389]",area_sqkm:"1324621",region:"Americas",subregion:"Latin America and the Caribbean",name:"Per",name_en:"Peru",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Peru", "pe", "Republic of Peru", "Repblica del Per", "", "Republica del Peru" ], "es": [ "Per", "Repblica del Per", "Peru", "Republica del Peru", "pe" ], "qu": [ "Piruw" ] }'},{feature_id:"69635",description:"state",worldview:"all",iso_3166_1:"AF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AFG",wikidata_id:"Q889",centroid:"[65.7792,34.0569]",bounds:"[60.4734,29.3778,74.8857,38.4911]",area_sqkm:"774224",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Afghanistan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Afghanistan", "af", "", "Islamic Republic of Afghanistan", "AFG" ], "fa": [ "" ], "ps": [ "" ] }'},{feature_id:"1839121",description:"state",worldview:"all",iso_3166_1:"BA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BIH",wikidata_id:"Q225",centroid:"[17.9371,43.9344]",bounds:"[15.7212,42.5605,19.6235,45.2764]",area_sqkm:"71632",region:"Europe",subregion:"Southern Europe",name:"Bosna i Hercegovina",name_en:"Bosnia and Herzegovina",disputed:"FALSE",color_group:"1",names:'{ "bs": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ], "en": [ "Bosnia and Herzegovina", "Bosnia-Herzegovina", "Bosnia", "BiH", "Bosnia & Herzegovina", "B&H", "", "ba", "BIH" ], "hr": [ "Bosna i Hercegovina", "BiH", "BH", "Bosna" ] }'},{feature_id:"3412007",description:"dependent territory",worldview:"all",iso_3166_1:"CC",sovereign_iso_3166_1:"AU",iso_3166_1_alpha_3:"CCK",wikidata_id:"Q36004",centroid:"[96.83029999999999,-12.171]",bounds:"[96.8168,-12.2092,96.9295,-11.8146]",area_sqkm:"14",region:"Oceania",subregion:"Australia and New Zealand",name:"Cocos (Keeling) Islands",name_en:"Cocos (Keeling) Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cocos Islands", "Cocos Islands", "Keeling Islands", "Territory of the Cocos (Keeling) Islands", "cc", "" ], "ms": [ "Kepulauan Cocos" ] }'},{feature_id:"1314852",description:"state",worldview:"all",iso_3166_1:"BY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BLR",wikidata_id:"Q184",centroid:"[27.883,53.7747]",bounds:"[23.1783,51.2322,32.7763,56.1721]",area_sqkm:"347178",region:"Europe",subregion:"Eastern Europe",name:"",name_en:"Belarus",disputed:"FALSE",color_group:"1",names:'{ "be": [ "", " ", " " ], "en": [ "Belarus", "", "White Russia", "White Ruthenia", "Republic of Belarus", "by", "Byeloruss", "BLR", "Bielorussia", "Belorussia", "Byelorussia" ], "ru": [ "", "", " ", " ", "" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"987636",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",region:"",subregion:"",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",disputed:"TRUE",color_group:"",names:""},{feature_id:"12062909",description:"state",worldview:"all",iso_3166_1:"RO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ROU",wikidata_id:"Q218",centroid:"[24.2311,45.9908]",bounds:"[20.262,43.6188,29.7153,48.2654]",area_sqkm:"341465",region:"Europe",subregion:"Eastern Europe",name:"Romnia",name_en:"Romania",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Romania", "Roumania", "Rumania", "Romnia", "ro", "" ], "fr": [ "Roumanie" ], "ro": [ "Romnia", "Romania", "ro", "" ] }'},{feature_id:"791028",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN9",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.02800000000001,30.7827]",bounds:"[79.69880000000001,30.5589,80.24930000000001,31.0058]",area_sqkm:"942",region:"",subregion:"",name:"Lapthal-Bara Hoti disputed area",name_en:"Lapthal-Bara Hoti disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"14684378",description:"state",worldview:"all",iso_3166_1:"TH",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"THA",wikidata_id:"Q869",centroid:"[101.6544,13.1506]",bounds:"[97.34350000000001,5.612,105.6367,20.4644]",area_sqkm:"541799",region:"Asia",subregion:"South-eastern Asia",name:"",name_en:"Thailand",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Thailand", "Kingdom of Thailand", "th", "Siam", "", "Land of Smiles", "THA" ], "th": [ "", "Thailand", "", "", "Kingdom of Thailand", "" ] }'},{feature_id:"7934197",description:"state",worldview:"IN",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosov - ",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"9244822",description:"dependent territory",worldview:"all",iso_3166_1:"MQ",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"MTQ",wikidata_id:"Q17054",centroid:"[-61.0154,14.6366]",bounds:"[-61.2288,14.3887,-60.8101,14.8782]",area_sqkm:"1147",region:"Americas",subregion:"Latin America and the Caribbean",name:"Martinique",name_en:"Martinique",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Martinique", "", "MQ" ], "fr": [ "Martinique", "972" ] }'},{feature_id:"6164571",description:"state",worldview:"all",iso_3166_1:"GT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GTM",wikidata_id:"Q774",centroid:"[-90.29559999999999,15.7886]",bounds:"[-92.22490000000001,13.7402,-88.2325,17.8166]",area_sqkm:"113759",region:"Americas",subregion:"Latin America and the Caribbean",name:"Guatemala",name_en:"Guatemala",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guatemala", "gt", "", "Republic of Guatemala", "GUA" ], "es": [ "Guatemala", "Repblica de Guatemala", "Republica de Guatemala" ] }'},{feature_id:"7934197",description:"state",worldview:"JP",iso_3166_1:"XK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"XKS",wikidata_id:"Q1246",centroid:"[20.9131,42.5637]",bounds:"[20.0164,41.8511,21.7907,43.2681]",area_sqkm:"14823",region:"Europe",subregion:"Southern Europe",name:"Kosov - ",name_en:"Kosovo",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Kosovo", "Republic of Kosovo", "XK", "KOS", "XKX", "KV", "" ], "sq": [ "Kosov", "Republika e Kosovs", "RKS", "KS", "Kosova" ] }'},{feature_id:"1642529",description:"state",worldview:"US",iso_3166_1:"BT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BTN",wikidata_id:"Q917",centroid:"[90.3415,27.473]",bounds:"[88.7683,26.6948,92.124,28.2458]",area_sqkm:"43846",region:"Asia",subregion:"Southern Asia",name:"",name_en:"Bhutan",disputed:"FALSE",color_group:"5",names:'{ "dz": [ "", "" ], "en": [ "Bhutan", "Kingdom of Bhutan", "bt", "", "BHU" ], "ne": [ "" ] }'},{feature_id:"3739698",description:"state",worldview:"all",iso_3166_1:"CR",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CRI",wikidata_id:"Q800",centroid:"[-83.6675,9.6333]",bounds:"[-87.102,5.4991,-82.5514,11.2197]",area_sqkm:"52305",region:"Americas",subregion:"Latin America and the Caribbean",name:"Costa Rica",name_en:"Costa Rica",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Costa Rica", "Republic of Costa Rica", "", "cr", "CRI", "CRC" ], "es": [ "Costa Rica", "CR", "Repblica de Costa Rica", "CRC" ] }'},{feature_id:"7540850",description:"state",worldview:"JP",iso_3166_1:"JP",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JPN",wikidata_id:"Q17",centroid:"[139.8855,37.6006]",bounds:"[122.9338,24.0457,145.8175,45.523]",area_sqkm:"473653",region:"Asia",subregion:"Eastern Asia",name:"",name_en:"Japan",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Japan", "State of Japan", "Land of the Rising Sun", "Nihon", "Nippon", "JP", "Nippon-koku", "Nihon-koku", "JA", "JPN", "", "jp", "JAP", "" ], "ja": [ "", "", "", "", "", "" ] }'},{feature_id:"4001848",description:"state",worldview:"all",iso_3166_1:"CZ",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CZE",wikidata_id:"Q213",centroid:"[15.5271,49.8197]",bounds:"[12.0906,48.552,18.8592,51.0557]",area_sqkm:"121734",region:"Europe",subregion:"Eastern Europe",name:"esko",name_en:"Czechia",disputed:"FALSE",color_group:"1",names:'{ "cs": [ "esko", "R", "cz", "cze", "esk republika", "Czechia" ], "de": [ "Tschechien", "Tschechische Republik" ], "en": [ "Czech Republic", "CZR", "cz", "esko", "esk republika", "R", "", "cze", "CZE", "Czechia" ], "sk": [ "esko", "esk republika" ] }'},{feature_id:"4263996",description:"state",worldview:"all",iso_3166_1:"DM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DMA",wikidata_id:"Q784",centroid:"[-61.3411,15.4238]",bounds:"[-61.4801,15.2074,-61.2402,15.6399]",area_sqkm:"786",region:"Americas",subregion:"Latin America and the Caribbean",name:"Dominica",name_en:"Dominica",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Dominica", "Commonwealth of Dominica", "The Commonwealth of Dominica", "", "dm", "DOM", "DMA" ] }'},{feature_id:"5312728",description:"dependent territory",worldview:"all",iso_3166_1:"TF",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"ATF",wikidata_id:"Q129003",centroid:"[70.21769999999999,-49.1974]",bounds:"[40.3259,-50.0213,77.59569999999999,-11.5678]",area_sqkm:"11927",region:"Africa",subregion:"Sub-Saharan Africa",name:"Terres australes et antarctiques franaises",name_en:"French Southern and Antarctic Lands",disputed:"FALSE",color_group:"7",names:'{ "en": [ "French Southern and Antarctic Lands", "tf", "", "French Southern Territories" ], "fr": [ "Terres australes et antarctiques franaises", "TAAF", "Terres Australes Franaises", "Terres australes et antarctiques francaises", "984" ] }'},{feature_id:"15405287",description:"state",worldview:"all",iso_3166_1:"UG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UGA",wikidata_id:"Q1036",centroid:"[32.7123,1.3729]",bounds:"[29.5607,-1.4873,35.0197,4.2266]",area_sqkm:"243407",region:"Africa",subregion:"Sub-Saharan Africa",name:"Uganda",name_en:"Uganda",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Uganda", "Republic of Uganda", "ug", "", "UGA" ], "lg": [ "Yuganda" ], "sw": [ "Uganda", "Jamhuri ya Uganda" ] }'},{feature_id:"15470822",description:"state",worldview:"all",iso_3166_1:"UA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UKR",wikidata_id:"Q212",centroid:"[31.0081,48.5409]",bounds:"[22.1376,44.3866,40.2256,52.3794]",area_sqkm:"922375",region:"Europe",subregion:"Eastern Europe",name:"",name_en:"Ukraine",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Ukraine", "UA", "UKR", "ua", "Ukrainia", "" ], "ru": [ "" ], "uk": [ "", "", "", "ua" ] }'},{feature_id:"7671921",description:"state",worldview:"all",iso_3166_1:"JO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"JOR",wikidata_id:"Q810",centroid:"[36.3091,31.3051]",bounds:"[34.9581,29.1896,39.3001,33.3746]",area_sqkm:"104752",region:"Asia",subregion:"Western Asia",name:"",name_en:"Jordan",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "", "  ", "  " ], "en": [ "Jordan", "Hashemite Kingdom of Jordan", "JO", "JOR", "jo", "Kingdom of Jordan", "" ] }'},{feature_id:"14880988",description:"dependent territory",worldview:"all",iso_3166_1:"TK",sovereign_iso_3166_1:"NZ",iso_3166_1_alpha_3:"TKL",wikidata_id:"Q36823",centroid:"[-171.7801,-9.175700000000001]",bounds:"[-172.5208,-9.444000000000001,-171.1814,-8.532]",area_sqkm:"15",region:"Oceania",subregion:"Polynesia",name:"Tokelau",name_en:"Tokelau",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Tokelau", "tk", "" ] }'},{feature_id:"12718324",description:"state",worldview:"all",iso_3166_1:"WS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"WSM",wikidata_id:"Q683",centroid:"[-172.439,-13.6221]",bounds:"[-172.8041,-14.0772,-171.3978,-13.4398]",area_sqkm:"2956",region:"Oceania",subregion:"Polynesia",name:"Samoa",name_en:"Samoa",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Samoa", "Western Samoa", "Independent State of Samoa", "ws", "" ], "sm": [ "Smoa" ] }'},{feature_id:"987636",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[76.45740000000001,35.9527]",bounds:"[75.932,35.462,77.5187,36.4396]",area_sqkm:"5941",region:"",subregion:"",name:"Trans-Karakoram Tract",name_en:"Trans-Karakoram Tract",disputed:"TRUE",color_group:"",names:""},{feature_id:"659956",description:"disputed area",worldview:"all",iso_3166_1:"D0JPKR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[131.8648,37.242]",bounds:"[131.8614,37.238,131.8728,37.2477]",area_sqkm:"0",region:"",subregion:"",name:"Liancourt Rocks",name_en:"Liancourt Rocks",disputed:"TRUE",color_group:"",names:""},{feature_id:"2691110",description:"state",worldview:"all",iso_3166_1:"CA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAN",wikidata_id:"Q16",centroid:"[-116.9186,60.2273]",bounds:"[-141.016,41.6814,-52.6194,83.13679999999999]",area_sqkm:"25442850",region:"Americas",subregion:"Northern America",name:"Canada",name_en:"Canada",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Canada", "Dominion of Canada", "British North America", "CAN", "CA", "ca", "CDN", "" ], "fr": [ "Canada", "CA" ] }'},{feature_id:"1118708",description:"disputed area",worldview:"US",iso_3166_1:"D0CNIN3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.3519,32.8792]",bounds:"[79.1397,32.5191,79.5613,33.2379]",area_sqkm:"1768",region:"",subregion:"",name:"Demchok disputed area",name_en:"Demchok disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"3870771",description:"state",worldview:"all",iso_3166_1:"CU",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CUB",wikidata_id:"Q241",centroid:"[-77.8291,21.5254]",bounds:"[-84.9521,19.8262,-74.1314,23.2767]",area_sqkm:"120464",region:"Americas",subregion:"Latin America and the Caribbean",name:"Cuba",name_en:"Cuba",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Cuba", "Republic of Cuba", "cu", "", "CUB" ], "es": [ "Cuba", "Repblica de Cuba", "Republica de Cuba" ] }'},{feature_id:"11473082",description:"state",worldview:"all",iso_3166_1:"PY",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRY",wikidata_id:"Q733",centroid:"[-58.4145,-23.4993]",bounds:"[-62.6415,-27.5759,-54.2591,-19.2928]",area_sqkm:"436149",region:"Americas",subregion:"Latin America and the Caribbean",name:"Paraguay",name_en:"Paraguay",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Paraguay", "Republic of Paraguay", "py", "", "Heart of South America" ], "es": [ "Paraguay", "Repblica del Paraguay", "Republica del Paraguay" ], "gn": [ "Paragui" ] }'},{feature_id:"1052704",description:"state",worldview:"all",iso_3166_1:"BS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BHS",wikidata_id:"Q778",centroid:"[-78.0455,24.7032]",bounds:"[-79.30549999999999,20.912,-72.7118,27.2629]",area_sqkm:"14194",region:"Americas",subregion:"Latin America and the Caribbean",name:"Bahamas",name_en:"Bahamas",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Bahamas", "Commonwealth of the Bahamas", "bs", "", "The Bahamas", "Bahama Islands" ] }'},{feature_id:"13570254",description:"state",worldview:"all",iso_3166_1:"SO",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SOM",wikidata_id:"Q1045",centroid:"[46.8166,5.1742]",bounds:"[40.9924,-1.6627,51.4156,11.9893]",area_sqkm:"643601",region:"Africa",subregion:"Sub-Saharan Africa",name:"",name_en:"Somalia",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "", "", " ", "  " ], "en": [ "Somalia", "Federal Republic of Somalia", "a-ml", "Soomaaliya", "so", "", "SOM" ], "so": [ "Soomaaliya", "Soomaaliyeey toosoo" ] }'},{feature_id:"4657219",description:"state",worldview:"all",iso_3166_1:"ER",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ERI",wikidata_id:"Q986",centroid:"[38.0893,15.2]",bounds:"[36.4282,12.3629,43.1588,17.9992]",area_sqkm:"126770",region:"Africa",subregion:"Sub-Saharan Africa",name:"Eritrea - ",name_en:"Eritrea",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Eritrea", "State of Eritrea", "Ertr", "Iritriy", "er", "", "ERI", "IRI" ], "ti": [ "", " ", "  " ] }'},{feature_id:"15601741",description:"state",worldview:"all",iso_3166_1:"GB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GBR",wikidata_id:"Q145",centroid:"[-2.1838,54.5475]",bounds:"[-8.6501,49.8668,1.763,60.8608]",area_sqkm:"415318",region:"Europe",subregion:"Northern Europe",name:"United Kingdom",name_en:"United Kingdom",disputed:"FALSE",color_group:"6",names:'{ "en": [ "United Kingdom", "", "UK", "United Kingdom of Great Britain and Northern Ireland", "U.K.", "GBR" ], "fr": [ "Royaume-Uni", "UK", "Royaume-Uni de Grande-Bretagne et dIrlande du Nord", "Royaume Uni", "GB", "GBR" ] }'},{feature_id:"725492",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNJPTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",region:"",subregion:"",name:"Senkaku Islands",name_en:"Senkaku Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"2101354",description:"dependent territory",worldview:"all",iso_3166_1:"IO",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"IOT",wikidata_id:"Q43448",centroid:"[72.4716,-7.3392]",bounds:"[71.23739999999999,-7.4446,72.4957,-5.236]",area_sqkm:"65",region:"Africa",subregion:"Sub-Saharan Africa",name:"British Indian Ocean Territory",name_en:"British Indian Ocean Territory",disputed:"FALSE",color_group:"6",names:'{ "en": [ "British Indian Ocean Territory", "io", "" ] }'},{feature_id:"8196231",description:"state",worldview:"all",iso_3166_1:"LV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LVA",wikidata_id:"Q211",centroid:"[24.4397,56.9003]",bounds:"[20.9706,55.6744,28.2422,58.0856]",area_sqkm:"117706",region:"Europe",subregion:"Northern Europe",name:"Latvija",name_en:"Latvia",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Latvia", "Republic of Latvia", "Latvian Republic", "lv", "Latvija", "", "LAT", "LVA" ], "lv": [ "Latvija", "Latvijas Republika", "LAT", "LVA" ], "ru": [ "", "Latvija", " ", " " ] }'},{feature_id:"15339747",description:"state",worldview:"all",iso_3166_1:"TV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TUV",wikidata_id:"Q672",centroid:"[178.6758,-7.4786]",bounds:"[176.0588,-10.7919,179.4781,-5.6425]",area_sqkm:"38",region:"Oceania",subregion:"Polynesia",name:"Tuvalu",name_en:"Tuvalu",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Tuvalu", "Ellice Islands", "tv", "", "TUV" ] }'},{feature_id:"1642996",description:"disputed area",worldview:"IN",iso_3166_1:"D0GFSR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[-54.1343,2.7239]",bounds:"[-54.6024,2.1443,-53.9703,3.3029]",area_sqkm:"3444",region:"",subregion:"",name:"French GuianaSuriname disputed area",name_en:"French GuianaSuriname disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"135668",description:"disputed area",worldview:"all",iso_3166_1:"D0SDSS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[28.4279,9.716799999999999]",bounds:"[27.833,9.3348,29.0004,10.1667]",area_sqkm:"10928",region:"",subregion:"",name:"Abyei",name_en:"Abyei",disputed:"TRUE",color_group:"",names:""},{feature_id:"2363892",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNTWVN1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[111.7015,16.2212]",bounds:"[111.1905,15.7749,112.7456,17.1141]",area_sqkm:"489",region:"",subregion:"",name:"Paracel Islands",name_en:"Paracel Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"201204",description:"disputed area",worldview:"all",iso_3166_1:"D0EGSD2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[33.6971,21.8656]",bounds:"[33.1724,21.7249,34.0814,22.0065]",area_sqkm:"2216",region:"",subregion:"",name:"Bir Tawil",name_en:"Bir Tawil",disputed:"TRUE",color_group:"",names:""},{feature_id:"9572425",description:"state",worldview:"all",iso_3166_1:"FM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"FSM",wikidata_id:"Q702",centroid:"[158.2402,6.8852]",bounds:"[137.4253,1.0253,163.0356,10.0906]",area_sqkm:"785",region:"Oceania",subregion:"Micronesia",name:"Federated States of Micronesia",name_en:"Federated States of Micronesia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Federated States of Micronesia", "Micronesia", "FSM", "fm", "Fed. Sts. Micronesia", "Fed. Sts. of Micronesia", "Federated States of Micronesia, FSM", "" ] }'},{feature_id:"13832400",description:"state",worldview:"CN",iso_3166_1:"SS",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SSD",wikidata_id:"Q958",centroid:"[29.1116,7.8795]",bounds:"[24.1507,3.4803,35.9353,12.2322]",area_sqkm:"639959",region:"Africa",subregion:"Sub-Saharan Africa",name:"South Sudan",name_en:"South Sudan",disputed:"FALSE",color_group:"1",names:'{ "ar": [ " ", "  ", "   ", " ()", " ()", " ()", " ()", "", " ()", " ()", "", "", "", "", "  " ], "en": [ "South Sudan", "Republic of South Sudan", "Southern Sudan", "ss", "", "SSD" ] }'},{feature_id:"8130686",description:"state",worldview:"all",iso_3166_1:"LA",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LAO",wikidata_id:"Q819",centroid:"[102.1592,18.2605]",bounds:"[100.0818,13.9098,107.635,22.5049]",area_sqkm:"244136",region:"Asia",subregion:"South-eastern Asia",name:"",name_en:"Laos",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Laos", "Lao People\'s Democratic Republic", "la", "Lao PDR", "", "LAO" ], "lo": [ "", "  " ] }'},{feature_id:"4788293",description:"state",worldview:"all",iso_3166_1:"ET",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"ETH",wikidata_id:"Q115",centroid:"[38.9667,9.196999999999999]",bounds:"[32.9975,3.3961,47.9878,14.8942]",area_sqkm:"1150612",region:"Africa",subregion:"Sub-Saharan Africa",name:"Ethiopia",name_en:"Ethiopia",disputed:"FALSE",color_group:"4",names:'{ "am": [ "" ], "en": [ "Ethiopia", "Federal Democratic Republic of Ethiopia", "et", "", "ETH" ], "om": [ "Itoophiyaa" ] }'},{feature_id:"1839604",description:"disputed area",worldview:"JP",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"1053172",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[79.1217,34.697]",bounds:"[77.9097,33.3858,80.4217,35.9879]",area_sqkm:"37463",region:"",subregion:"",name:"Aksai Chin disputed area",name_en:"Aksai Chin disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1839604",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2167284",description:"disputed area",worldview:"all",iso_3166_1:"D0AEIR2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[55.3051,26.2649]",bounds:"[55.2855,26.2475,55.3228,26.2821]",area_sqkm:"12",region:"",subregion:"",name:"Greater Tunb Island",name_en:"Greater Tunb Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"14815449",description:"state",worldview:"all",iso_3166_1:"TG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TGO",wikidata_id:"Q945",centroid:"[1.0401,8.6357]",bounds:"[-0.1438,6.1126,1.8091,11.1373]",area_sqkm:"57966",region:"Africa",subregion:"Sub-Saharan Africa",name:"Togo",name_en:"Togo",disputed:"FALSE",color_group:"3",names:'{ "ee": [ "Togo" ], "en": [ "Togo", "Togolese Republic", "Rpublique Togolaise", "tg", "", "Republique Togolaise", "TOG" ], "fr": [ "Togo", "Rpublique togolaise" ] }'},{feature_id:"9900184",description:"dependent territory",worldview:"all",iso_3166_1:"MS",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"MSR",wikidata_id:"Q13353",centroid:"[-62.1928,16.7492]",bounds:"[-62.2417,16.6747,-62.1446,16.8238]",area_sqkm:"106",region:"Americas",subregion:"Latin America and the Caribbean",name:"Montserrat",name_en:"Montserrat",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Montserrat", "ms", "" ] }'},{feature_id:"1970676",description:"disputed area",worldview:"US",iso_3166_1:"D0ILPS1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.2419,31.7959]",bounds:"[35.1507,31.7092,35.2654,31.8829]",area_sqkm:"83",region:"",subregion:"",name:"East Jerusalem",name_en:"East Jerusalem",disputed:"TRUE",color_group:"",names:""},{feature_id:"1839604",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS3",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.6763,4.6062]",bounds:"[35.597,4.5877,35.7068,4.6247]",area_sqkm:"24",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"7802995",description:"state",worldview:"CN",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"6885481",description:"state",worldview:"US",iso_3166_1:"IN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"IND",wikidata_id:"Q668",centroid:"[79.5556,22.5605]",bounds:"[68.17449999999999,6.756,97.3954,35.6733]",area_sqkm:"3484254",region:"Asia",subregion:"Southern Asia",name:"India",name_en:"India",disputed:"FALSE",color_group:"1",names:'{ "en": [ "India", "Bharat", "Hindustan", "Bharatvarsh", "in", "IN", "Republic of India", "", "IND" ], "hi": [ "", "", "", "", " ", "", "", "", "" ] }'},{feature_id:"2756660",description:"state",worldview:"all",iso_3166_1:"CV",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CPV",wikidata_id:"Q1011",centroid:"[-23.6351,15.1204]",bounds:"[-25.3616,14.8021,-22.6572,17.2053]",area_sqkm:"4305",region:"Africa",subregion:"Sub-Saharan Africa",name:"Cabo Verde",name_en:"Cape Verde",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Cape Verde", "Republic of Cape Verde", "Cabo Verde", "CV", "CPV", "cv", "" ], "pt": [ "Cabo Verde", "Repblica de Cabo Verde" ], "kea": [ "Kabu Verdi", "Kauberdi", "Kab Verd" ] }'},{feature_id:"2887721",description:"state",worldview:"all",iso_3166_1:"CF",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CAF",wikidata_id:"Q929",centroid:"[20.6627,6.638]",bounds:"[14.4152,2.2227,27.4536,11.017]",area_sqkm:"628505",region:"Africa",subregion:"Sub-Saharan Africa",name:"Centrafrique",name_en:"Central African Republic",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Central African Republic", "CAR", "Kdrsse t Bafrka", "Rpublique centrafricaine", "Centrafrique", "cf", "", "Republique centrafricaine", "CAF" ], "fr": [ "Rpublique centrafricaine", "Centrafrique" ], "sg": [ "Kdrsse t Bafrka" ] }'},{feature_id:"8720528",description:"state",worldview:"all",iso_3166_1:"MK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"MKD",wikidata_id:"Q221",centroid:"[21.7483,41.6182]",bounds:"[20.453,40.8535,23.034,42.3741]",area_sqkm:"34040",region:"Europe",subregion:"Southern Europe",name:" ",name_en:"North Macedonia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "North Macedonia", "Republic of North Macedonia", "MKD", "FYROM", "FYR Macedonia", "Macedonia", "Former Yugoslav Republic of Macedonia", "Republic of Macedonia", "", "mk" ], "mk": [ "", "  ", " ", " " ], "sq": [ "Maqedonia e Veriut", "Maqedonia", "IRJM", "Ish Republika Jugosllave e Maqedonis", "Republika e Maqedonis s Veriut" ] }'},{feature_id:"7999611",description:"state",worldview:"all",iso_3166_1:"KW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KWT",wikidata_id:"Q817",centroid:"[47.4272,29.3169]",bounds:"[46.558,28.5235,48.7781,30.1033]",area_sqkm:"19829",region:"Asia",subregion:"Western Asia",name:"",name_en:"Kuwait",disputed:"FALSE",color_group:"2",names:'{ "ar": [ "", " " ], "en": [ "Kuwait", "", "State of Kuwait", "Dawlat al-Kuwait", "kw", "KUW" ] }'},{feature_id:"5509199",description:"state",worldview:"all",iso_3166_1:"GE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GEO",wikidata_id:"Q230",centroid:"[43.6774,42.3325]",bounds:"[40.0068,41.0553,46.7365,43.5863]",area_sqkm:"93812",region:"Asia",subregion:"Western Asia",name:"",name_en:"Georgia",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Georgia", "Republic of Georgia", "GE", "", "GEO" ], "ka": [ "", " " ], "xmf": [ "" ] }'},{feature_id:"6623328",description:"state",worldview:"all",iso_3166_1:"HM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"HMD",wikidata_id:"Q131198",centroid:"[73.5286,-53.0783]",bounds:"[72.5827,-53.1949,73.8764,-52.9022]",area_sqkm:"612",region:"Oceania",subregion:"Australia and New Zealand",name:"Heard and McDonald Islands",name_en:"Heard and McDonald Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Heard Island and McDonald Islands", "hm", "Territory of Heard Island and McDonald Islands", "HIMI", "", "Heard and McDonald Islands" ] }'},{feature_id:"725492",description:"disputed area",worldview:"US",iso_3166_1:"D0CNJPTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[123.4764,25.743]",bounds:"[123.4579,25.7204,124.5603,25.9289]",area_sqkm:"6",region:"",subregion:"",name:"Senkaku Islands",name_en:"Senkaku Islands",disputed:"TRUE",color_group:"",names:""},{feature_id:"1511924",description:"disputed area",worldview:"US",iso_3166_1:"D0INPK1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[75.4564,34.957]",bounds:"[72.5081,32.7649,77.1204,37.0919]",area_sqkm:"97311",region:"",subregion:"",name:"Pakistan-administered Kashmir",name_en:"Pakistan-administered Kashmir",disputed:"TRUE",color_group:"",names:""},{feature_id:"331777",description:"state",worldview:"all",iso_3166_1:"AD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"AND",wikidata_id:"Q228",centroid:"[1.5893,42.5425]",bounds:"[1.4138,42.4288,1.7865,42.6549]",area_sqkm:"629",region:"Europe",subregion:"Southern Europe",name:"Andorra",name_en:"Andorra",disputed:"FALSE",color_group:"1",names:'{ "ca": [ "Andorra", "el pas dels Pirineus", "Principat d\'Andorra", "les Valls d\'Andorra" ], "en": [ "Andorra", "Principality of Andorra", "Principality of the Valleys of Andorra", "ad", "", "AND" ], "es": [ "Andorra", "Principado de Andorra" ] }'},{feature_id:"2036212",description:"disputed area",worldview:"CN",iso_3166_1:"D0INNP1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[80.7744,30.3206]",bounds:"[80.5254,30.1691,81.04519999999999,30.4716]",area_sqkm:"468",region:"",subregion:"",name:"Kalapani-Lympiadhura disputed area",name_en:"Kalapani-Lympiadhura disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"6361181",description:"state",worldview:"all",iso_3166_1:"GW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"GNB",wikidata_id:"Q1007",centroid:"[-14.5964,11.805]",bounds:"[-16.7153,10.8643,-13.6342,12.6855]",area_sqkm:"35004",region:"Africa",subregion:"Sub-Saharan Africa",name:"Guin-Bissau",name_en:"Guinea-Bissau",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Guinea-Bissau", "Republic of Guinea-Bissau", "", "gw", "GBS" ], "pt": [ "Guin-Bissau", "Repblica da Guin-Bissau" ] }'},{feature_id:"7802995",description:"state",worldview:"JP",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4758,-0.0219]",bounds:"[33.9216,-4.6913,41.9109,4.6327]",area_sqkm:"587115",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"11997372",description:"dependent territory",worldview:"all",iso_3166_1:"RE",sovereign_iso_3166_1:"FR",iso_3166_1_alpha_3:"REU",wikidata_id:"Q17070",centroid:"[55.537,-21.1313]",bounds:"[55.2163,-21.3899,55.8371,-20.8718]",area_sqkm:"2707",region:"Africa",subregion:"Sub-Saharan Africa",name:"La Runion",name_en:"Reunion",disputed:"FALSE",color_group:"7",names:'{ "en": [ "Runion", "Reunion", "La Runion", "La Reunion", "re", ".re", "" ], "fr": [ "La Runion", "974", "Runion", "le de La Runion", "le de la Runion" ], "ta": [ "", "" ] }'},{feature_id:"1576987",description:"dependent territory",worldview:"all",iso_3166_1:"BM",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"BMU",wikidata_id:"Q23635",centroid:"[-64.77370000000001,32.3019]",bounds:"[-64.8871,32.247,-64.64660000000001,32.3908]",area_sqkm:"64",region:"Americas",subregion:"Northern America",name:"Bermuda",name_en:"Bermuda",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Bermuda", "Somers Isles", "Bermuda Islands", "Atlantic\\/Bermuda", "Bermudian Islands", "Bermoothes", "Virgineola", "The Somers Isles", "Summers\' Isles", "Territory of Bermuda", "Bermudas", "Somers Islands", "Colony of Bermuda", "Devil\'s Isles", "Summer\'s Isles", "Isle of Devils", "bm", "" ] }'},{feature_id:"4132923",description:"state",worldview:"all",iso_3166_1:"DK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"DNK",wikidata_id:"Q35",centroid:"[9.314399999999999,55.9565]",bounds:"[8.0725,54.5591,15.1974,57.7522]",area_sqkm:"76801",region:"Europe",subregion:"Northern Europe",name:"Danmark",name_en:"Denmark",disputed:"FALSE",color_group:"4",names:'{ "da": [ "Danmark", "DK", "dk" ], "de": [ "Dnemark" ], "en": [ "Denmark", "DK", "Danmark", "DNK", "DEK", "dk", "Denmark proper", "metropolitan Denmark", "", "DEN", "TAN" ], "sv": [ "Danmark", "Danska kungariket", "DK", "Kungariket Danmark", "Kungadmet Danmark", "Kongeriget Danmark", "Danska kungadmet" ] }'},{feature_id:"7802995",description:"state",worldview:"IN",iso_3166_1:"KE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"KEN",wikidata_id:"Q114",centroid:"[37.4854,0.1774]",bounds:"[33.9216,-4.6913,41.9109,5.0334]",area_sqkm:"590477",region:"Africa",subregion:"Sub-Saharan Africa",name:"Kenya",name_en:"Kenya",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Kenya", "Republic of Kenya", "KE", "KEN", "ke", "" ], "ki": [ "Kenya" ], "sw": [ "Kenya", "Jamhuri ya Kenya" ] }'},{feature_id:"3674157",description:"state",worldview:"all",iso_3166_1:"CK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COK",wikidata_id:"Q26988",centroid:"[-159.7783,-21.2339]",bounds:"[-165.8794,-21.9591,-157.3206,-8.9147]",area_sqkm:"275",region:"Oceania",subregion:"Polynesia",name:"Cook Islands",name_en:"Cook Islands",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Cook Islands", "ck", "", "COK" ] }'},{feature_id:"5705811",description:"dependent territory",worldview:"all",iso_3166_1:"GI",sovereign_iso_3166_1:"UK",iso_3166_1_alpha_3:"GIB",wikidata_id:"Q1410",centroid:"[-5.3482,36.134]",bounds:"[-5.3677,36.1089,-5.3386,36.159]",area_sqkm:"8",region:"Europe",subregion:"Southern Europe",name:"Gibraltar",name_en:"Gibraltar",disputed:"FALSE",color_group:"6",names:'{ "en": [ "Gibraltar", "gi", "Gib", "The Rock of Gibraltar", "" ], "es": [ "Gibraltar" ] }'},{feature_id:"13504706",description:"state",worldview:"all",iso_3166_1:"SB",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"SLB",wikidata_id:"Q685",centroid:"[160.1487,-9.598699999999999]",bounds:"[155.5122,-12.3083,170.1925,-5.0269]",area_sqkm:"28968",region:"Oceania",subregion:"Melanesia",name:"Solomon Islands",name_en:"Solomon Islands",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Solomon Islands", "sb", "", "SOL" ] }'},{feature_id:"1380372",description:"state",worldview:"all",iso_3166_1:"BE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"BEL",wikidata_id:"Q31",centroid:"[4.8641,50.5117]",bounds:"[2.5454,49.4972,6.4082,51.5051]",area_sqkm:"48408",region:"Europe",subregion:"Western Europe",name:"Belgique - Belgi  Belgien",name_en:"Belgium",disputed:"FALSE",color_group:"3",names:'{ "de": [ "Belgien" ], "en": [ "Belgium", "Kingdom of Belgium", "BEL", "be", "" ], "fr": [ "Belgique", "Royaume de Belgique", "BE" ], "nl": [ "Belgi", "Koninkrijk Belgi", "Belgie", "BE", "BEL" ] }'},{feature_id:"2232820",description:"disputed area",worldview:"US",iso_3166_1:"D0INNP2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[83.8659,27.3922]",bounds:"[83.8167,27.3464,83.9084,27.438]",area_sqkm:"37",region:"",subregion:"",name:"Susta disputed area",name_en:"Susta disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"IN",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"1905140",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.7462,4.6551]",bounds:"[35.703,4.6247,35.7813,4.6854]",area_sqkm:"47",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2101748",description:"disputed area",worldview:"all",iso_3166_1:"D0AEIR1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[55.0306,25.8779]",bounds:"[55.0093,25.8558,55.0567,25.9]",area_sqkm:"14",region:"",subregion:"",name:"Abu Musa Island",name_en:"Abu Musa Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"10686628",description:"state",worldview:"all",iso_3166_1:"NG",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"NGA",wikidata_id:"Q1033",centroid:"[7.99,9.104900000000001]",bounds:"[2.6732,4.2707,14.6784,13.8789]",area_sqkm:"930279",region:"Africa",subregion:"Sub-Saharan Africa",name:"Nigeria",name_en:"Nigeria",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Nigeria", "Federal Republic of Nigeria", "", "NG", "FRN", "NGA", "NGR", "Naija" ], "ha": [ "Nijeriya" ], "ig": [ "Naijiria" ], "yo": [ "Njr", "Nj", "Nigeria", "NG", "", "Orl-d Olmniira Alpap Njr" ] }'},{feature_id:"11079852",description:"state",worldview:"all",iso_3166_1:"OM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"OMN",wikidata_id:"Q842",centroid:"[57.0243,20.8862]",bounds:"[52,16.6501,59.8398,26.4049]",area_sqkm:"331175",region:"Asia",subregion:"Western Asia",name:"",name_en:"Oman",disputed:"FALSE",color_group:"1",names:'{ "ar": [ " ", "", "", " " ], "en": [ "Oman", "om", "", "Sultanate of Oman" ] }'},{feature_id:"1184244",description:"disputed area",worldview:"JP",iso_3166_1:"D0CNIN4",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[78.7079,32.683]",bounds:"[78.6656,32.6564,78.746,32.7097]",area_sqkm:"18",region:"",subregion:"",name:"Chumar East disputed area",name_en:"Chumar East disputed area",disputed:"TRUE",color_group:"",names:""},{feature_id:"11145394",description:"state",worldview:"CN",iso_3166_1:"PK",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PAK",wikidata_id:"Q843",centroid:"[70.2714,30.6947]",bounds:"[60.8738,23.7046,77.1204,37.0919]",area_sqkm:"1007923",region:"Asia",subregion:"Southern Asia",name:" - Pakistan",name_en:"Pakistan",disputed:"FALSE",color_group:"2",names:'{ "en": [ "Pakistan", "", "pk", "Islamic Republic of Pakistan" ], "ps": [ "" ], "sd": [ "", "  " ], "ur": [ "", "  " ], "pnb": [ "" ] }'},{feature_id:"15208670",description:"state",worldview:"all",iso_3166_1:"TM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TKM",wikidata_id:"Q874",centroid:"[58.902,39.0689]",bounds:"[52.4511,35.1308,66.6922,42.799]",area_sqkm:"633155",region:"Asia",subregion:"Central Asia",name:"Trkmenistan",name_en:"Turkmenistan",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Turkmenistan", "Turkmenia", "tm", "", "TKM" ], "ru": [ "", "" ], "tk": [ "Trkmenistan", "Trkmenistan \\/ " ] }'},{feature_id:"3543159",description:"state",worldview:"all",iso_3166_1:"KM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"COM",wikidata_id:"Q970",centroid:"[43.3307,-11.6527]",bounds:"[43.2291,-12.4221,44.5406,-11.3649]",area_sqkm:"1720",region:"Africa",subregion:"Sub-Saharan Africa",name:"Comores -  - Komori",name_en:"Comoros",disputed:"FALSE",color_group:"2",names:'{ "ar": [ " " ], "en": [ "Comoros", "Juzur al-Qumur", "Juzur al-Qamar", "Union of the Comoros", "Udzima wa Komori", "Union des Comores", "al-Ittid al-Qumur", "km", "", "Massiwa ya komori", "ouvoimoja wakomori", "COM" ], "fr": [ "Comores", "Union des Comores" ] }'},{feature_id:"16191729",description:"state",worldview:"all",iso_3166_1:"VN",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"VNM",wikidata_id:"Q881",centroid:"[107.6937,16.115]",bounds:"[102.1448,7.6024,116.6811,23.3923]",area_sqkm:"348204",region:"Asia",subregion:"South-eastern Asia",name:"Vit Nam",name_en:"Vietnam",disputed:"FALSE",color_group:"5",names:'{ "en": [ "Vietnam", "Viet Nam", "Socialist Republic of Vietnam", "", "VN", "VIE" ], "vi": [ "Vit Nam", "VN", "nc Vit", "Vit quc", "t Vit", "nc Vit Nam", "quc gia Vit Nam", "Cng ha x hi ch ngha Vit Nam" ] }'},{feature_id:"15732968",description:"state",worldview:"all",iso_3166_1:"UM",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"UMI",wikidata_id:"Q16645",centroid:"[166.6495,19.2894]",bounds:"[-176.6238,-0.3805,166.6575,19.3187]",area_sqkm:"29",region:"Oceania",subregion:"Micronesia",name:"US Minor Outlying Islands",name_en:"US Minor Outlying Islands",disputed:"FALSE",color_group:"4",names:'{ "en": [ "United States Minor Outlying Islands", "um", "US Minor Outlying Islands", "U.S. Minor Outlying Islands", "" ] }'},{feature_id:"3936309",description:"state",worldview:"all",iso_3166_1:"CW",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"CUW",wikidata_id:"Q25279",centroid:"[-69.0407,12.2129]",bounds:"[-69.1623,11.978,-68.6395,12.3924]",area_sqkm:"451",region:"Americas",subregion:"Latin America and the Caribbean",name:"Curaao",name_en:"Curaao",disputed:"FALSE",color_group:"4",names:'{ "en": [ "Curaao", "Island Territory of Curaao", "Curacau", "Curaoa", "Curaao", "Krsou", "Korsou", "Curocao", "ISO 3166-1:CW", "CUW", "Curazao", "Curacao", "Country of Curaao", "", "CW" ], "pap": [ "Krsou", "Kurasoleo", "Curacao", "Korsou", "Corsou", "Corsouw", "Krsou", "Curaao", "Corsow" ] }'},{feature_id:"16388343",description:"state",worldview:"all",iso_3166_1:"YE",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"YEM",wikidata_id:"Q805",centroid:"[47.4901,15.822]",bounds:"[41.9037,12.1081,54.5343,19]",area_sqkm:"474122",region:"Asia",subregion:"Western Asia",name:"",name_en:"Yemen",disputed:"FALSE",color_group:"5",names:'{ "ar": [ "", " " ], "en": [ "Yemen", "Republic of Yemen", "ye", "Rep. Yemen", "", "YEM" ] }'},{feature_id:"1774068",description:"disputed area",worldview:"US",iso_3166_1:"D0KESS2",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[35.1872,4.8288]",bounds:"[34.3988,4.6172,35.597,5.0334]",area_sqkm:"3330",region:"",subregion:"",name:"Ilemi Triangle",name_en:"Ilemi Triangle",disputed:"TRUE",color_group:"",names:""},{feature_id:"2429428",description:"disputed area",worldview:"IN",iso_3166_1:"D0CNTW1",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"",wikidata_id:"",centroid:"[116.7287,20.7035]",bounds:"[116.7069,20.6972,116.7349,20.7097]",area_sqkm:"1",region:"",subregion:"",name:"Pratas Island",name_en:"Pratas Island",disputed:"TRUE",color_group:"",names:""},{feature_id:"12456064",description:"state",worldview:"all",iso_3166_1:"LC",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"LCA",wikidata_id:"Q760",centroid:"[-60.9776,13.909]",bounds:"[-61.0794,13.708,-60.8728,14.1096]",area_sqkm:"624",region:"Americas",subregion:"Latin America and the Caribbean",name:"Saint Lucia",name_en:"Saint Lucia",disputed:"FALSE",color_group:"3",names:'{ "en": [ "Saint Lucia", "lc", "St. Lucia", "St Lucia", "" ] }'},{feature_id:"11800760",description:"state",worldview:"all",iso_3166_1:"PT",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"PRT",wikidata_id:"Q45",centroid:"[-8.296200000000001,39.6065]",bounds:"[-31.2694,30.0305,-6.1892,42.1543]",area_sqkm:"119609",region:"Europe",subregion:"Southern Europe",name:"Portugal",name_en:"Portugal",disputed:"FALSE",color_group:"1",names:'{ "en": [ "Portugal", "Portuguese Republic", "PT", "pt", "" ], "fr": [ "Portugal" ], "pt": [ "Portugal", "Repblica Portuguesa", "Repblica de Portugal", "PT", "pt", "" ] }'},{feature_id:"2953431",description:"state",worldview:"all",iso_3166_1:"TD",sovereign_iso_3166_1:"",iso_3166_1_alpha_3:"TCD",wikidata_id:"Q657",centroid:"[18.6422,15.5973]",bounds:"[13.4731,7.4418,24.0016,23.4504]",area_sqkm:"1329064",region:"Africa",subregion:"Sub-Saharan Africa",name:"Tchad ",name_en:"Chad",disputed:"FALSE",color_group:"6",names:'{ "ar": [ "", " ", "" ], "en": [ "Chad", "Republic of Chad", "Rpublique du Tchad", " ", "umhriyyat Td", "Tchad", "td", "", "Republique du Tchad", "CHA", "GUM" ], "fr": [ "Tchad", "Rpublique du Tchad" ] }'}];function se(e,t,i){const r=e.slice();return r[13]=t[i],r}function le(e){let t,i,r,a,n,o,s,l,b,x,w,S,A,k,E,I,T,C,P,L,R,M,z,D,B,F,O,N,U,q,V,j,G,K,Z,H,Q,W,J,X,Y,$,ee,te=e[2].correctAnswer.wikidata.hasOwnProperty("flag"),ie=e[2].correctAnswer.name_lang+"",re=e[2].correctAnswer.wikidata.hasOwnProperty("website"),ae=e[2].correctAnswer.wikidata.hasOwnProperty("pageBanner"),ne=e[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms"),oe=e[2].correctAnswer.wikidata.hasOwnProperty("namedAfterLabels")&&e[2].correctAnswer.wikidata.namedAfterLabels.value.length,se=!/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function le(e,t){return e[2].answerIsCorrect?he:pe}let ue=le(e),ce=ue(e),de=te&&_e(e),fe=e[2].correctAnswer.name_lang!=e[2].correctAnswer.name&&me(e),Te=re&&ge(e),Ce=ae&&ye(e),Pe=ne&&ve(e),Le=oe&&be(e),Re=se&&function(e){let t,i=e[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio"),r=i&&xe(e);return{c(){r&&r.c(),t=_()},m(e,i){r&&r.m(e,i),c(e,t,i)},p(e,a){4&a&&(i=e[2].correctAnswer.wikidata.hasOwnProperty("anthemAudio")),i?r?r.p(e,a):(r=xe(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&p(t)}}}(e);function Me(e,t){return(null==D||4&t)&&(D=!!e[2].correctAnswer.wikidata.hasOwnProperty("capitalLabel")),D?Se:we}let ze=Me(e,-1),De=ze(e);function Be(e,t){return(null==V||4&t)&&(V=!!e[2].correctAnswer.wikidata.hasOwnProperty("officialLanguageLabels")),V?ke:Ae}let Fe=Be(e,-1),Oe=Fe(e);function Ne(e,t){return(null==Z||4&t)&&(Z=!!e[2].correctAnswer.wikidata.hasOwnProperty("spokenLanguageLabels")),Z?Ie:Ee}let Ue=Ne(e,-1),qe=Ue(e);return{c(){ce.c(),t=f(),i=h("button"),i.textContent="Try another country",r=f(),a=h("div"),n=h("div"),o=h("div"),s=h("div"),de&&de.c(),l=f(),b=h("div"),x=h("h3"),w=d(ie),S=f(),fe&&fe.c(),A=f(),Te&&Te.c(),k=f(),Ce&&Ce.c(),E=f(),I=h("div"),T=h("p"),Pe&&Pe.c(),C=f(),P=h("ul"),Le&&Le.c(),L=f(),Re&&Re.c(),R=f(),M=h("li"),z=d("Capital:\n              "),De.c(),B=f(),F=h("h4"),F.textContent="Languages",O=f(),N=h("ul"),U=h("li"),q=d("Official:\n              "),Oe.c(),j=f(),G=h("li"),K=d("Other:\n              "),qe.c(),H=f(),Q=h("div"),W=d("Data source:\n          "),J=h("a"),X=d("Wikidata"),g(i,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),v(i,"background-color","#1ba3e3"),g(i,"href","#map"),g(i,"uk-scroll",""),g(s,"class","uk-width-auto"),g(x,"class","uk-card-title uk-margin-remove-bottom"),g(b,"class","uk-width-expand"),g(o,"class","uk-grid-small uk-flex-middle"),g(o,"uk-grid",""),g(n,"class","uk-card-header"),g(P,"class","uk-list"),g(N,"class","uk-list"),g(I,"class","uk-card-body"),g(J,"href",Y=e[2].correctAnswer.wikidata.country.value),g(J,"class","uk-button uk-button-text"),g(Q,"class","uk-card-footer"),g(a,"class","uk-card uk-card-default uk-margin-top")},m(p,h){ce.m(p,h),c(p,t,h),c(p,i,h),c(p,r,h),c(p,a,h),u(a,n),u(n,o),u(o,s),de&&de.m(s,null),u(o,l),u(o,b),u(b,x),u(x,w),u(b,S),fe&&fe.m(b,null),u(b,A),Te&&Te.m(b,null),u(a,k),Ce&&Ce.m(a,null),u(a,E),u(a,I),u(I,T),Pe&&Pe.m(T,null),u(I,C),u(I,P),Le&&Le.m(P,null),u(P,L),Re&&Re.m(P,null),u(P,R),u(P,M),u(M,z),De.m(M,null),u(I,B),u(I,F),u(I,O),u(I,N),u(N,U),u(U,q),Oe.m(U,null),u(N,j),u(N,G),u(G,K),qe.m(G,null),u(a,H),u(a,Q),u(Q,W),u(Q,J),u(J,X),$||(ee=m(i,"click",e[4]),$=!0)},p(e,i){ue===(ue=le(e))&&ce?ce.p(e,i):(ce.d(1),ce=ue(e),ce&&(ce.c(),ce.m(t.parentNode,t))),4&i&&(te=e[2].correctAnswer.wikidata.hasOwnProperty("flag")),te?de?de.p(e,i):(de=_e(e),de.c(),de.m(s,null)):de&&(de.d(1),de=null),4&i&&ie!==(ie=e[2].correctAnswer.name_lang+"")&&y(w,ie),e[2].correctAnswer.name_lang!=e[2].correctAnswer.name?fe?fe.p(e,i):(fe=me(e),fe.c(),fe.m(b,A)):fe&&(fe.d(1),fe=null),4&i&&(re=e[2].correctAnswer.wikidata.hasOwnProperty("website")),re?Te?Te.p(e,i):(Te=ge(e),Te.c(),Te.m(b,null)):Te&&(Te.d(1),Te=null),4&i&&(ae=e[2].correctAnswer.wikidata.hasOwnProperty("pageBanner")),ae?Ce?Ce.p(e,i):(Ce=ye(e),Ce.c(),Ce.m(a,E)):Ce&&(Ce.d(1),Ce=null),4&i&&(ne=e[2].correctAnswer.wikidata.hasOwnProperty("coatOfArms")),ne?Pe?Pe.p(e,i):(Pe=ve(e),Pe.c(),Pe.m(T,null)):Pe&&(Pe.d(1),Pe=null),4&i&&(oe=e[2].correctAnswer.wikidata.hasOwnProperty("namedAfterLabels")&&e[2].correctAnswer.wikidata.namedAfterLabels.value.length),oe?Le?Le.p(e,i):(Le=be(e),Le.c(),Le.m(P,L)):Le&&(Le.d(1),Le=null),se&&Re.p(e,i),ze===(ze=Me(e,i))&&De?De.p(e,i):(De.d(1),De=ze(e),De&&(De.c(),De.m(M,null))),Fe===(Fe=Be(e,i))&&Oe?Oe.p(e,i):(Oe.d(1),Oe=Fe(e),Oe&&(Oe.c(),Oe.m(U,null))),Ue===(Ue=Ne(e,i))&&qe?qe.p(e,i):(qe.d(1),qe=Ue(e),qe&&(qe.c(),qe.m(G,null))),4&i&&Y!==(Y=e[2].correctAnswer.wikidata.country.value)&&g(J,"href",Y)},d(e){ce.d(e),e&&p(t),e&&p(i),e&&p(r),e&&p(a),de&&de.d(),fe&&fe.d(),Te&&Te.d(),Ce&&Ce.d(),Pe&&Pe.d(),Le&&Le.d(),Re&&Re.d(),De.d(),Oe.d(),qe.d(),$=!1,ee()}}}function ue(e){let t,i,r,a,n,o,s,l,_,m,v,b,x,w,S,A,k,E,I,T=e[2].correctAnswer.subregion+"",C=e[2].correctAnswer.region+"",P=e[2].score+"",L=e[2].turn+"",R=e[2].choices,M=[];for(let t=0;t<R.length;t+=1)M[t]=Ce(se(e,R,t));let z=e[2].turn>0&&Pe(e);return{c(){t=h("h4"),i=d("Indentify this country in\n        "),r=d(T),a=d("\n        ("),n=d(C),o=d("):"),s=f(),l=h("div");for(let e=0;e<M.length;e+=1)M[e].c();_=f(),m=h("p"),v=d("Score\n        "),b=d(P),x=d("\n        /\n        "),w=d(L),S=f(),z&&z.c(),A=f(),k=h("progress"),g(l,"class","uk-child-width-expand uk-grid-small uk-grid-match"),g(l,"uk-grid",""),g(k,"class","uk-progress"),k.value=E=e[2].score,g(k,"max",I=e[2].turn)},m(e,p){c(e,t,p),u(t,i),u(t,r),u(t,a),u(t,n),u(t,o),c(e,s,p),c(e,l,p);for(let e=0;e<M.length;e+=1)M[e].m(l,null);c(e,_,p),c(e,m,p),u(m,v),u(m,b),u(m,x),u(m,w),u(m,S),z&&z.m(m,null),u(m,A),u(m,k)},p(e,t){if(4&t&&T!==(T=e[2].correctAnswer.subregion+"")&&y(r,T),4&t&&C!==(C=e[2].correctAnswer.region+"")&&y(n,C),36&t){let i;for(R=e[2].choices,i=0;i<R.length;i+=1){const r=se(e,R,i);M[i]?M[i].p(r,t):(M[i]=Ce(r),M[i].c(),M[i].m(l,null))}for(;i<M.length;i+=1)M[i].d(1);M.length=R.length}4&t&&P!==(P=e[2].score+"")&&y(b,P),4&t&&L!==(L=e[2].turn+"")&&y(w,L),e[2].turn>0?z?z.p(e,t):(z=Pe(e),z.c(),z.m(m,A)):z&&(z.d(1),z=null),4&t&&E!==(E=e[2].score)&&(k.value=E),4&t&&I!==(I=e[2].turn)&&g(k,"max",I)},d(e){e&&p(t),e&&p(s),e&&p(l),function(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}(M,e),e&&p(_),e&&p(m),z&&z.d()}}}function ce(e){let t;function i(e,t){return e[2].dataLoaded?Le:Re}let r=i(e),a=r(e);return{c(){a.c(),t=_()},m(e,i){a.m(e,i),c(e,t,i)},p(e,n){r===(r=i(e))&&a?a.p(e,n):(a.d(1),a=r(e),a&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&p(t)}}}function pe(e){let t,i,r,a,n,o,s,l,_,m,b,x,w,S,A,k,E=e[2].correctAnswer.name_lang+"",I=e[2].score+"",T=e[2].turn+"",C=e[2].turn>0&&de(e);return{c(){t=h("div"),i=h("h3"),r=d("Sorry, it was "),a=d(E),n=d("."),o=f(),s=h("p"),l=d("Score\n            "),_=d(I),m=d("\n            /\n            "),b=d(T),x=f(),C&&C.c(),w=f(),S=h("progress"),g(S,"class","uk-progress"),S.value=A=e[2].score,g(S,"max",k=e[2].turn),v(S,"background-color","red"),g(t,"class","uk-margin-remove"),g(t,"uk-alert","")},m(e,p){c(e,t,p),u(t,i),u(i,r),u(i,a),u(i,n),u(t,o),u(t,s),u(s,l),u(s,_),u(s,m),u(s,b),u(s,x),C&&C.m(s,null),u(s,w),u(s,S)},p(e,t){4&t&&E!==(E=e[2].correctAnswer.name_lang+"")&&y(a,E),4&t&&I!==(I=e[2].score+"")&&y(_,I),4&t&&T!==(T=e[2].turn+"")&&y(b,T),e[2].turn>0?C?C.p(e,t):(C=de(e),C.c(),C.m(s,w)):C&&(C.d(1),C=null),4&t&&A!==(A=e[2].score)&&(S.value=A),4&t&&k!==(k=e[2].turn)&&g(S,"max",k)},d(e){e&&p(t),C&&C.d()}}}function he(e){let t,i,r,a,n,o,s,l,_,m,v,b,x,w,S,A,k,E=e[2].correctAnswer.name_lang+"",I=e[2].score+"",T=e[2].turn+"",C=e[2].turn>0&&fe(e);return{c(){t=h("div"),i=h("h3"),r=d(E),a=d(" is "),n=h("b"),n.textContent="correct",o=d("!"),s=f(),l=h("p"),_=d("Score\n            "),m=d(I),v=d("\n            /\n            "),b=d(T),x=f(),C&&C.c(),w=f(),S=h("progress"),g(S,"class","uk-progress"),S.value=A=e[2].score,g(S,"max",k=e[2].turn),g(t,"class","uk-margin-remove"),g(t,"uk-alert","")},m(e,p){c(e,t,p),u(t,i),u(i,r),u(i,a),u(i,n),u(i,o),u(t,s),u(t,l),u(l,_),u(l,m),u(l,v),u(l,b),u(l,x),C&&C.m(l,null),u(l,w),u(l,S)},p(e,t){4&t&&E!==(E=e[2].correctAnswer.name_lang+"")&&y(r,E),4&t&&I!==(I=e[2].score+"")&&y(m,I),4&t&&T!==(T=e[2].turn+"")&&y(b,T),e[2].turn>0?C?C.p(e,t):(C=fe(e),C.c(),C.m(l,w)):C&&(C.d(1),C=null),4&t&&A!==(A=e[2].score)&&(S.value=A),4&t&&k!==(k=e[2].turn)&&g(S,"max",k)},d(e){e&&p(t),C&&C.d()}}}function de(e){let t,i,r,a=Math.round(e[2].score/e[2].turn*100)+"";return{c(){t=d("("),i=d(a),r=d("%)")},m(e,a){c(e,t,a),c(e,i,a),c(e,r,a)},p(e,t){4&t&&a!==(a=Math.round(e[2].score/e[2].turn*100)+"")&&y(i,a)},d(e){e&&p(t),e&&p(i),e&&p(r)}}}function fe(e){let t,i,r,a=Math.round(e[2].score/e[2].turn*100)+"";return{c(){t=d("("),i=d(a),r=d("%)")},m(e,a){c(e,t,a),c(e,i,a),c(e,r,a)},p(e,t){4&t&&a!==(a=Math.round(e[2].score/e[2].turn*100)+"")&&y(i,a)},d(e){e&&p(t),e&&p(i),e&&p(r)}}}function _e(e){let t,i,r,a,n;return{c(){t=h("a"),i=h("img"),g(i,"alt",r="Flag of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(a=e[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",a),g(i,"class","flag svelte-1hbewvp"),g(t,"href",n=e[2].correctAnswer.wikidata.flag.value)},m(e,r){c(e,t,r),u(t,i)},p(e,o){4&o&&r!==(r="Flag of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&o&&i.src!==(a=e[2].correctAnswer.wikidata.flag.value+"?width=100px")&&g(i,"src",a),4&o&&n!==(n=e[2].correctAnswer.wikidata.flag.value)&&g(t,"href",n)},d(e){e&&p(t)}}}function me(e){let t,i,r=e[2].correctAnswer.name+"";return{c(){t=h("p"),i=d(r),g(t,"class","uk-text-meta uk-margin-remove-top")},m(e,r){c(e,t,r),u(t,i)},p(e,t){4&t&&r!==(r=e[2].correctAnswer.name+"")&&y(i,r)},d(e){e&&p(t)}}}function ge(e){let t,i,r,a=e[2].correctAnswer.wikidata.website.value+"";return{c(){t=h("a"),i=d(a),g(t,"href",r=e[2].correctAnswer.wikidata.website.value)},m(e,r){c(e,t,r),u(t,i)},p(e,n){4&n&&a!==(a=e[2].correctAnswer.wikidata.website.value+"")&&y(i,a),4&n&&r!==(r=e[2].correctAnswer.wikidata.website.value)&&g(t,"href",r)},d(e){e&&p(t)}}}function ye(e){let t,i,r,a;return{c(){t=h("div"),i=h("img"),g(i,"alt",r="Header image of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(a=e[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",a),g(t,"class","uk-card-media-top")},m(e,r){c(e,t,r),u(t,i)},p(e,t){4&t&&r!==(r="Header image of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&t&&i.src!==(a=e[2].correctAnswer.wikidata.pageBanner.value+"?width="+document.getElementById("panel").offsetWidth+"px")&&g(i,"src",a)},d(e){e&&p(t)}}}function ve(e){let t,i,r,a,n,o;return{c(){t=h("a"),i=h("img"),o=d("\n              Coat of arms"),g(i,"alt",r="Coat of arms of "+e[2].correctAnswer.wikidata.countryLabel.value),i.src!==(a=e[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",a),g(t,"href",n=e[2].correctAnswer.wikidata.coatOfArms.value)},m(e,r){c(e,t,r),u(t,i),c(e,o,r)},p(e,o){4&o&&r!==(r="Coat of arms of "+e[2].correctAnswer.wikidata.countryLabel.value)&&g(i,"alt",r),4&o&&i.src!==(a=e[2].correctAnswer.wikidata.coatOfArms.value+"?width=150px")&&g(i,"src",a),4&o&&n!==(n=e[2].correctAnswer.wikidata.coatOfArms.value)&&g(t,"href",n)},d(e){e&&p(t),e&&p(o)}}}function be(e){let t,i,r,a=e[2].correctAnswer.wikidata.namedAfterLabels.value+"";return{c(){t=h("li"),i=d("Country named after:\n                "),r=d(a)},m(e,a){c(e,t,a),u(t,i),u(t,r)},p(e,t){4&t&&a!==(a=e[2].correctAnswer.wikidata.namedAfterLabels.value+"")&&y(r,a)},d(e){e&&p(t)}}}function xe(e){let t,i,r,a,n,o,s,l=e[2].correctAnswer.wikidata.anthemLabel.value+"";return{c(){t=h("li"),i=d("Anthem:\n                  "),r=d(l),a=f(),n=h("audio"),o=h("source"),g(o,"type","audio/ogg"),o.src!==(s=e[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(o,"src",s),n.controls=!0},m(e,s){c(e,t,s),u(t,i),u(t,r),u(t,a),u(t,n),u(n,o)},p(e,t){4&t&&l!==(l=e[2].correctAnswer.wikidata.anthemLabel.value+"")&&y(r,l),4&t&&o.src!==(s=e[2].correctAnswer.wikidata.anthemAudio.value.replace("http:","https:"))&&g(o,"src",s)},d(e){e&&p(t)}}}function we(t){let i;return{c(){i=d("None")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Se(e){let t,i=e[2].correctAnswer.wikidata.capitalLabel.value+"";return{c(){t=d(i)},m(e,i){c(e,t,i)},p(e,r){4&r&&i!==(i=e[2].correctAnswer.wikidata.capitalLabel.value+"")&&y(t,i)},d(e){e&&p(t)}}}function Ae(t){let i;return{c(){i=d("Unknown")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function ke(e){let t,i,r,a,n=e[2].correctAnswer.wikidata.officialLanguageLabels.value.split(",").length+"",o=e[2].correctAnswer.wikidata.officialLanguageLabels.value+"";return{c(){t=h("b"),i=d(n),r=d("\n                -\n                "),a=d(o)},m(e,n){c(e,t,n),u(t,i),c(e,r,n),c(e,a,n)},p(e,t){4&t&&n!==(n=e[2].correctAnswer.wikidata.officialLanguageLabels.value.split(",").length+"")&&y(i,n),4&t&&o!==(o=e[2].correctAnswer.wikidata.officialLanguageLabels.value+"")&&y(a,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function Ee(t){let i;return{c(){i=d("Unknown")},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Ie(e){let t,i,r,a,n=e[2].correctAnswer.wikidata.spokenLanguageLabels.value.split(",").length+"",o=e[2].correctAnswer.wikidata.spokenLanguageLabels.value+"";return{c(){t=h("b"),i=d(n),r=d("\n                -\n                "),a=d(o)},m(e,n){c(e,t,n),u(t,i),c(e,r,n),c(e,a,n)},p(e,t){4&t&&n!==(n=e[2].correctAnswer.wikidata.spokenLanguageLabels.value.split(",").length+"")&&y(i,n),4&t&&o!==(o=e[2].correctAnswer.wikidata.spokenLanguageLabels.value+"")&&y(a,o)},d(e){e&&p(t),e&&p(r),e&&p(a)}}}function Te(e){let t,i,r;return{c(){t=h("img"),g(t,"class","uk-float-right flag svelte-1hbewvp"),g(t,"alt",i="Flag of "+e[13].countryLabel.value),t.src!==(r=De(e[13].flag.value,50))&&g(t,"src",r)},m(e,i){c(e,t,i)},p(e,a){4&a&&i!==(i="Flag of "+e[13].countryLabel.value)&&g(t,"alt",i),4&a&&t.src!==(r=De(e[13].flag.value,50))&&g(t,"src",r)},d(e){e&&p(t)}}}function Ce(e){let t,i,r,n,o,s,l,_,v=e[13].countryLabel.value+"",b=e[13].hasOwnProperty("flag"),x=b&&Te(e);return{c(){t=h("div"),i=h("div"),r=d(v),n=f(),x&&x.c(),s=f(),g(i,"data-qid",o=e[13].wikidata_id),g(i,"class","uk-card uk-card-default uk-card-body uk-card-hover"),g(t,"class","uk-width-1-1")},m(o,p){c(o,t,p),u(t,i),u(i,r),u(i,n),x&&x.m(i,null),u(t,s),l||(_=m(t,"click",(function(){a(e[5](e[13].countryLabel.value))&&e[5](e[13].countryLabel.value).apply(this,arguments)})),l=!0)},p(t,a){e=t,4&a&&v!==(v=e[13].countryLabel.value+"")&&y(r,v),4&a&&(b=e[13].hasOwnProperty("flag")),b?x?x.p(e,a):(x=Te(e),x.c(),x.m(i,null)):x&&(x.d(1),x=null),4&a&&o!==(o=e[13].wikidata_id)&&g(i,"data-qid",o)},d(e){e&&p(t),x&&x.d(),l=!1,_()}}}function Pe(e){let t,i,r,a=Math.round(e[2].score/e[2].turn*100)+"";return{c(){t=d("("),i=d(a),r=d("%)")},m(e,a){c(e,t,a),c(e,i,a),c(e,r,a)},p(e,t){4&t&&a!==(a=Math.round(e[2].score/e[2].turn*100)+"")&&y(i,a)},d(e){e&&p(t),e&&p(i),e&&p(r)}}}function Le(t){let i,r,a,n,o,s;return{c(){i=h("div"),r=h("h1"),r.textContent="Can you guess the country?",a=f(),n=h("button"),n.innerHTML="Let&#39;s get started!<br/>",g(n,"class","uk-button uk-button-primary uk-button-large uk-width-1-1"),v(n,"background-color","#1ba3e3")},m(e,l){c(e,i,l),u(i,r),u(i,a),u(i,n),o||(s=m(n,"click",t[6]),o=!0)},p:e,d(e){e&&p(i),o=!1,s()}}}function Re(t){let i;return{c(){i=h("h4"),i.innerHTML='<div uk-spinner=""></div>\n          Loading list of countries.'},m(e,t){c(e,i,t)},p:e,d(e){e&&p(i)}}}function Me(e){let t,i,r;function a(e,t){return e[2].showIntro?ce:e[2].choices?ue:e[2].endTurn?le:void 0}let n=a(e),o=n&&n(e);return{c(){t=h("main"),o&&o.c(),i=f(),r=h("footer"),r.innerHTML='<small> Built with\n        <a href="https://docs.mapbox.com/mapbox-gl-js/api/">Mapbox</a>,\n        <a href="https://www.openstreetmap.org/">OpenStreetMap</a>,\n        <a href="https://www.wikidata.org/wiki/Wikidata:Main_Page">Wikidata</a>\n        and\n        <a href="https://svelte.dev/">Svelte</a>\n        |\n        <a href="https://github.com/planemad/map-quiz/tree/main">Source code</a></small>',g(r,"class","uk-margin-top"),g(t,"id","panel"),g(t,"class","uk-position-absolute uk-padding-small uk-width-1-1")},m(e,a){c(e,t,a),o&&o.m(t,null),u(t,i),u(t,r)},p(e,r){n===(n=a(e))&&o?o.p(e,r):(o&&o.d(1),o=n&&n(e),o&&(o.c(),o.m(t,i)))},d(e){e&&p(t),o&&o.d()}}}function ze(e){let t,i,r,a,n;function o(t){e[7].call(null,t)}t=new $({props:{$$slots:{default:[Me]},$$scope:{ctx:e}}});let s={style:e[1].mapStyle,worldview:e[1].mapWorldview,locale:e[1].locale,location:{bounds:JSON.parse(e[3].Q142.bounds),point:e[1].userLocation},data:e[3]};return void 0!==e[0]&&(s.map=e[0]),r=new W({props:s}),A.push((()=>function(e,t,i){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=i,i(e.$$.ctx[r]))}(r,"map",o))),{c(){O(t.$$.fragment),i=f(),O(r.$$.fragment)},m(e,a){N(t,e,a),c(e,i,a),N(r,e,a),n=!0},p(e,[i]){const n={};65540&i&&(n.$$scope={dirty:i,ctx:e}),t.$set(n);const o={};var s;2&i&&(o.style=e[1].mapStyle),2&i&&(o.worldview=e[1].mapWorldview),2&i&&(o.locale=e[1].locale),10&i&&(o.location={bounds:JSON.parse(e[3].Q142.bounds),point:e[1].userLocation}),8&i&&(o.data=e[3]),!a&&1&i&&(a=!0,o.map=e[0],s=()=>a=!1,E.push(s)),r.$set(o)},i(e){n||(B(t.$$.fragment,e),B(r.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),F(r.$$.fragment,e),n=!1},d(e){U(t,e),e&&p(i),U(r,e)}}}function De(e,t){return`${e}?width=${t}px`}function Be(e,t,i){let r,a=null,n={locale:navigator.language,language:navigator.language.split("-")[0]||"en",userLocation:null,fallbackLanguage:"en",mapWorldview:"US",mapStyle:"mapbox://styles/planemad/ckgopajx83l581bo6qr5l86yg",choices:4,viewportWidth:window.innerWidth},o={dataLoaded:!1,showIntro:!0,turn:0,score:0,endTurn:!1,place:null,choices:null,answerIsCorrect:null,answerHistory:{},choices:[]};i(1,n.language=n.locale.split("-")[0],n),ne("https://freegeoip.app/json/",{},2e3,"Geoip detection timed out").then((e=>{if(200!==e.status)throw new Error("Status code not OK",e);return e.json()})).then((e=>{i(1,n.mapWorldview=function(e,t){let i="US",r=e||t.split("-")[1].toUpper();return["IN","JP","CN","US"].indexOf(r)>=0&&(i=r),i}(e.country_code,n.locale),n),i(1,n.userLocation={iso_3166_1:e.country_code,iso_3166_2:e.country_code+"-"+e.region_code,lngLat:{lng:e.longitude,lat:e.latitude}},n),1==n.locale.split("-").length&&i(1,n.locale+="-"+n.userLocation.iso_3166_1,n),console.log("Detected settings",n)})).catch((e=>{console.log("error",e)}));let s=oe.filter((e=>("all"==e.worldview||e.worldview==n.mapWorldview)&&"FALSE"==e.disputed)).reduce(((e,t)=>(e[t.wikidata_id]=t,e)),{});function l(){window.scrollTo(0,0),i(2,o.endTurn=!1,o),a.setPaintProperty("country-boundaries","fill-opacity",0);let e=Object.keys(s).sort(((e,t)=>e.localeCompare(t))),t=[];e.forEach((e=>{Object.keys(o.answerHistory).includes(e)||t.push(e)}));let l=t[t.length*Math.random()<<0];i(2,o.correctAnswer=s[l],o),i(2,o.answerHistory[o.correctAnswer.wikidata_id]=[],o),i(2,o.choices=[],o),o.choices.push(o.correctAnswer),e.forEach((e=>{e!=o.correctAnswer.wikidata_id&&s[e].subregion==o.correctAnswer.subregion&&o.choices.length<n.choices&&o.choices.push(s[e])})),e.forEach((e=>{e!=o.correctAnswer.wikidata_id&&s[e].region==o.correctAnswer.region&&o.choices.length<n.choices&&o.choices.push(s[e])})),i(2,o.choices=function(e){for(var t,i,r=e.length;0!==r;)i=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[i],e[i]=t;return e}(o.choices),o);let u=o.correctAnswer.hasOwnProperty("capital");var c;J(`\n      select ${u?"(SAMPLE(?capitalLocation) as ?capitalLocation)":""} ?anthemLabel ?anthemAudio ?coatOfArms (GROUP_CONCAT(DISTINCT ?officialLanguageLabel; SEPARATOR=", ") AS ?officialLanguageLabels) (GROUP_CONCAT(DISTINCT ?spokenLanguageLabel; SEPARATOR=", ") AS ?spokenLanguageLabels) (SAMPLE(?website) AS ?website)  (GROUP_CONCAT(DISTINCT ?namedAfterLabel; SEPARATOR=", ") AS ?namedAfterLabels) (SAMPLE(?pageBanner) as ?pageBanner) where {\n\n        OPTIONAL {  wd:${o.correctAnswer.wikidata_id}  wdt:P85 ?anthem }.\n        OPTIONAL { ?anthem wdt:P51 ?anthemAudio }.\n        \n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P94 ?coatOfArms }.\n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P856 ?website }.\n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P138 ?namedAfter}.\n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P948 ?pageBanner}.\n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P37 ?officialLanguage }.\n        OPTIONAL { wd:${o.correctAnswer.wikidata_id} wdt:P2936 ?spokenLanguage }.\n\n        ${u?`OPTIONAL { \n          wd:${o.correctAnswer.capital.value.replace("http://www.wikidata.org/entity/","")} wdt:P625 ?capitalLocation }.`:""}\n        \n      service wikibase:label { bd:serviceParam wikibase:language "${n.language},${n.fallbackLanguage}". \n      ?officialLanguage rdfs:label ?officialLanguageLabel .\n   ?spokenLanguage rdfs:label ?spokenLanguageLabel .\n   ?namedAfter rdfs:label ?namedAfterLabel .\n   ?anthem rdfs:label ?anthemLabel .\n  }\n      }\n      GROUP BY ?anthemLabel ?anthemAudio ?coatOfArms\n\n      `).then((e=>{let t;i(2,o.correctAnswer.wikidata=Object.assign(e[0],o.correctAnswer.wikidata),o),t=e[0].hasOwnProperty("capitalLocation")?ie(o.correctAnswer.wikidata.capitalLocation.value):o.correctAnswer.centroid,a.getSource("capital-location").setData(t)})),c=o.correctAnswer.iso_3166_1,a.setLayoutProperty("country-label","visibility","none"),a.setLayoutProperty("settlement-minor-label","visibility","none"),a.setLayoutProperty("settlement-major-label","visibility","none"),a.setPaintProperty("country-boundaries","fill-color",["case",["match",["get","iso_3166_1"],[c],!0,!1],"hsla(0, 0%, 94%, 0)",["match",["get","disputed"],["true"],!0,!1],"hsla(36, 0%, 10%, 0.05)","hsla(36, 0%, 100%, 0.89)"]),a.setPaintProperty("country-boundaries-outline","line-color",["match",["get","iso_3166_1"],c,"orange","hsla(0, 0%, 100%, 0)"]),a.setPaintProperty("admin-boundaries-line","line-color",["case",["match",["get","iso_3166_1"],[c],!0,!1],"hsl(0, 0%, 100%)",["match",["get","disputed"],["true"],!0,!1],"hsla(0, 0%, 82%,0.5)",["case",["==",["get","admin_level"],0],"hsla(0, 0%, 66%,0.5)","hsla(0, 0%, 66%,0)"]]),a.setLayoutProperty("country-label","symbol-sort-key",["match",["get","iso_3166_1"],c,0,1]),a.setLayoutProperty("settlement-minor-label","symbol-sort-key",["match",["get","iso_3166_1"],c,0,1]),a.setPaintProperty("country-label","text-opacity",["match",["get","iso_3166_1"],c,1,.3]),a.setPaintProperty("settlement-minor-label","text-opacity",["match",["get","iso_3166_1"],c,1,.2]),a.setPaintProperty("settlement-major-label","text-opacity",["match",["get","iso_3166_1"],c,1,.2]),a.setPaintProperty("settlement-minor-label","icon-opacity",["match",["get","iso_3166_1"],c,1,.1]),a.setPaintProperty("settlement-major-label","icon-opacity",["match",["get","iso_3166_1"],c,1,.1]),a.fitBounds(JSON.parse(o.correctAnswer.bounds),{padding:.1*document.getElementById("map").offsetWidth,duration:1e3,bearing:360*Math.random(),maxZoom:9}),a.setPaintProperty("country-boundaries","fill-opacity",1),r=setTimeout((function(){a.easeTo({center:JSON.parse(o.correctAnswer.centroid),zoom:a.getZoom()<5?a.getZoom():5,duration:6e3})}),1e3)}return J(`\n  # List of all countries based on ISO 3166-2 country code with their capitals \n  SELECT DISTINCT  (SAMPLE(?location) as ?location) ?country ?countryLabel (SAMPLE(?capital) as ?capital) (SAMPLE(?capitalLabel) as ?capitalLabel) (SAMPLE(?flag) as ?flag) WHERE {\n  VALUES ?country { ${Object.keys(s).join(" ").replace(/Q/g,"wd:Q")}}\n  OPTIONAL { ?country wdt:P625 ?location }.\n  OPTIONAL { ?country wdt:P41 ?flag }.\n  OPTIONAL { ?country wdt:P36 ?capital }.\n    # Retrieve labels to enable group_concat \n    # https://stackoverflow.com/questions/48855767/group-concat-not-working\n    SERVICE wikibase:label {\n    bd:serviceParam wikibase:language "${n.language},${n.fallbackLanguage}". \n    ?country rdfs:label ?countryLabel . \n    ?capital rdfs:label ?capitalLabel . \n  }\n  }\nGROUP BY ?country ?countryLabel\nORDER BY ?countryLabel\n`).then((e=>{e.forEach((e=>{let t=e.country.value.replace("http://www.wikidata.org/entity/","");Object.assign(s[t],e),i(3,s[t].wikidata=e,s),i(3,s[t].name_lang=e.countryLabel.value,s)})),o.dataLoaded||i(2,o.dataLoaded=!0,o)})),[a,n,o,s,l,function(e){i(2,o.endTurn=!0,o),window.scrollTo(0,0),a.easeTo({zoom:3,bearing:0,duration:1e3}),a.setLayoutProperty("country-label","visibility","visible"),a.setLayoutProperty("settlement-minor-label","visibility","visible"),a.setLayoutProperty("settlement-major-label","visibility","visible"),e==o.correctAnswer.countryLabel.value?(i(2,o.score+=1,o),i(2,o.answerIsCorrect=!0,o),o.answerHistory[o.correctAnswer.wikidata_id].push(!0)):(i(2,o.answerIsCorrect=!1,o),o.answerHistory[o.correctAnswer.wikidata_id].push(!1)),i(2,o.turn+=1,o),i(2,o.choices=null,o)},function(){i(2,o.showIntro=!1,o),l()},function(e){a=e,i(0,a)}]}return new class extends j{constructor(e){super(),V(this,e,Be,ze,n,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
